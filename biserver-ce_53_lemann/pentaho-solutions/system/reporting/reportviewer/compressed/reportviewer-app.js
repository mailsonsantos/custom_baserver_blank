/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */

/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */

/*! jQuery-Impromptu - v5.2.4 - 2014-05-26
* http://trentrichardson.com/Impromptu
* Copyright (c) 2014 Trent Richardson; Licensed MIT */

/*! jQuery UI - v1.10.4 - 2014-06-17
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */

/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version 3.0.1
 *
 * Requires jQuery >= 1.2.6
 */

/*!
* jdMenu 1.4.1 (2008-03-31)
*
* Copyright (c) 2006,2007 Jonathan Sharp (http://jdsharp.us)
* Dual licensed under the MIT (MIT-LICENSE.txt)
* and GPL (GPL-LICENSE.txt) licenses.
*
* http://jdsharp.us/
*
* Built upon jQuery 1.2.1 (http://jquery.com)
* This also requires the jQuery dimensions >= 1.2 plugin
*/

/*!
* positionBy 1.0.7 (2008-01-29)
*
* Copyright (c) 2006,2007 Jonathan Sharp (http://jdsharp.us)
* Dual licensed under the MIT (MIT-LICENSE.txt)
* and GPL (GPL-LICENSE.txt) licenses.
*
* http://jdsharp.us/
*
* Built upon jQuery 1.2.2 (http://jquery.com)
* This also requires the jQuery dimensions plugin
*/

/*!
 * jQuery blockUI plugin
 * Version 2.66.0-2013.10.09
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */

/*! *
*
* Dual licensed under the MIT (MIT-LICENSE.txt)
* and GPL (GPL-LICENSE.txt) licenses.
*
*
* This is a jQuery plugin that allows events to be handled in reverse order of
* binding - add events to the head of the queue rather than the end.
*
* Particularly useful if you apply your "do"s in a modular order and wish to
* apply your "undo"s in reverse order.
*
* It adds the following two methods:
*
* reverse(event): reverses the order that functions attached to <event> are
*                 applied to this element.
*
* stack( event, data, fn ): just like bind(), except adds to the front of the
*                           event queue instead of the end.
*
* Also, every event method (.click(), .focus(), .resize(), .submit(), etc -
* 21 methods in all) can take an extra parameter "reverse" that controls if
* the event is added to the front or end of the event queue. For example:
*
*
* ... will show "3", "1" then "2" when the document is clicked.
*
*/

/*!
Base.js, version 1.1a
Copyright 2006-2010, Dean Edwards
License: http://www.opensource.org/licenses/mit-license.php
*/

//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2011 Jeremy Ashkenas, DocumentCloud Inc.
//     (c) 2011-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*!
* Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
* 
* This software was developed by Webdetails and is provided under the terms
* of the Mozilla Public License, Version 2.0, or any later version. You may not use
* this file except in compliance with the license. If you need a copy of the license,
* please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
*
* Software distributed under the Mozilla Public License is distributed on an "AS IS"
* basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
* the license for the specific language governing your rights and limitations.
*/

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*Copyright (c) 2013 Matt Snider

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.*/

/*!
 * Copyright 2002 - 2014 Webdetails, a Pentaho company.  All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
* Copyright 2002 - 2014 Webdetails, a Pentaho company.  All rights reserved.
* 
* This software was developed by Webdetails and is provided under the terms
* of the Mozilla Public License, Version 2.0, or any later version. You may not use
* this file except in compliance with the license. If you need a copy of the license,
* please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
*
* Software distributed under the Mozilla Public License is distributed on an "AS IS"
* basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
* the license for the specific language governing your rights and limitations.
*/

/*!
/*!
* Copyright 2002 - 2014 Webdetails, a Pentaho company.  All rights reserved.
* 
* This software was developed by Webdetails and is provided under the terms
* of the Mozilla Public License, Version 2.0, or any later version. You may not use
* this file except in compliance with the license. If you need a copy of the license,
* please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
*
* Software distributed under the Mozilla Public License is distributed on an "AS IS"
* basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
* the license for the specific language governing your rights and limitations.
*/

/*!
* Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
*
* This software was developed by Webdetails and is provided under the terms
* of the Mozilla Public License, Version 2.0, or any later version. You may not use
* this file except in compliance with the license. If you need a copy of the license,
* please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
*
* Software distributed under the Mozilla Public License is distributed on an "AS IS"
* basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
* the license for the specific language governing your rights and limitations.
*/

/*!
 * Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*! Copyright 2010 Stanford Visualization Group, Mike Bostock, BSD license. */

/*! ea0cd9152f9ab19ab49937b43fd486dcbe586b85 */

/*
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * - Neither the name of the author nor the names of contributors may be used to
 *   endorse or promote products derived from this software without specific
 *   prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

/*!
* Copyright 2010 - 2013 Pentaho Corporation.  All rights reserved.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*/

/*!
 * jQuery corner plugin: simple corner rounding
 * Examples and documentation at: http://jquery.malsup.com/corner/
 * version 2.13 (19-FEB-2013)
 * Requires jQuery v1.3.2 or later
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * Authors: Dave Methvin and Mike Alsup
 */

/*! *****************************************************************************
* jquery.i18n.properties
*
* Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and
* MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses.
*
*              by Keith Wood (kbwood{at}iinet.com.au) June 2007
*
*****************************************************************************/

/*!
* Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
* 
* This software was developed by Webdetails and is provided under the terms
* of the Mozilla Public License, Version 2.0, or any later version. You may not use
* this file except in compliance with the license. If you need a copy of the license,
* please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
*
* Software distributed under the Mozilla Public License is distributed on an "AS IS"
* basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
* the license for the specific language governing your rights and limitations.

This file is empty due to r.js build steps requiring an existing file for declared shims

*/

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
 * Copyright 2010 - 2013 Pentaho Corporation.  All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/*!
* This program is free software; you can redistribute it and/or modify it under the
* terms of the GNU Lesser General Public License, version 2.1 as published by the Free Software
* Foundation.
*
* You should have received a copy of the GNU Lesser General Public License along with this
* program; if not, you can obtain a copy at http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html
* or from the Free Software Foundation, Inc.,
* 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
*
* This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
* without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
* See the GNU Lesser General Public License for more details.
*
* Copyright (c) 2002-2013 Pentaho Corporation..  All rights reserved.
*/

/*!
 * This program is free software; you can redistribute it and/or modify it under the
 * terms of the GNU Lesser General Public License, version 2.1 as published by the Free Software
 * Foundation.
 *
 * You should have received a copy of the GNU Lesser General Public License along with this
 * program; if not, you can obtain a copy at http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html
 * or from the Free Software Foundation, Inc.,
 * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details.
 *
 * Copyright (c) 2002-2013 Pentaho Corporation..  All rights reserved.
 */

/*
 * This program is free software; you can redistribute it and/or modify it under the
 * terms of the GNU Lesser General Public License, version 2.1 as published by the Free Software
 * Foundation.
 *
 * You should have received a copy of the GNU Lesser General Public License along with this
 * program; if not, you can obtain a copy at http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html
 * or from the Free Software Foundation, Inc.,
 * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details.
 *
 * Copyright 2014 Pentaho Corporation. All rights reserved.
 */

function encode_prepare_arr(e){if(typeof e=="number")return e;if($.isArray(e)){var t=new Array(e.length);return $.each(e,function(e,n){t[e]=encode_prepare(n)}),t}return encode_prepare(e)}function encode_prepare(e){if(e!=null){e=e.replace(/\+/g," ");if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1||navigator.userAgent.toLowerCase().indexOf("opera")!=-1)return Utf8.decode(e)}return e}function getURLParameters(e){if(e.indexOf("?")>0){var t=e.split("?"),n=t[1].split("&"),r=[];for(var i=0;i<n.length;i++){var s=n[i].split("=");if(s[0].indexOf("param",0)==0){var o=[s[0].substring(5,s[0].length),unescape(s[1])];r.push(o)}}}return r}function toFormatedString(e){e+="";var t=e.split("."),n=t[0],r=t.length>1?"."+t[1]:"",i=/(\d+)(\d{3})/;while(i.test(n))n=n.replace(i,"$1,$2");return n+r}function doCsvQuoting(e,t,n){var r='"';if(t==null)return e;if(e==null)return null;e.indexOf(r)>=0&&(e=e.replace(r,r.concat(r)));if(n||e.indexOf(t)>=0)e=r.concat(e,r);return e}function pentahoAction(e,t,n,r,i){var s=WEB_CONTEXT_BASE+"ViewAction",o="wrapper=false&solution="+e+"&path="+t+"&action="+n;if(r){var u;for(u=0;u<r.length;u++)o+="&"+encodeURIComponent(r[u][0])+"="+encodeURIComponent(r[u][1])}return pentahoPost(s,o,i)}function pentahoService(e,t,n,r){var i=WEB_CONTEXT_BASE+"ServiceAction",s="ajax=true&";e&&(s+="component="+e+"&");if(t){var o;for(o=0;o<t.length;o++)s+="&"+encodeURIComponent(t[o][0])+"="+encodeURIComponent(t[o][1])}return pentahoPost(i,s,n,r)}function pentahoGet(e,t,n,r,i){var s=undefined!=n&&null!=n,o=null,u="text/xml";r&&(u=r);if(window.XMLHttpRequest)o=new XMLHttpRequest,o.overrideMimeType&&o.overrideMimeType(u);else if(window.ActiveXObject)try{o=new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{o=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){o=null}}if(!o)throw new Error("Cannot create an XMLHTTP instance");s&&(o.onreadystatechange=function(){pentahoResponse(o,n)});if(i!==!0){var f=(new Date).getTime();t=t+(t.length===0?"":"&")+f+"="+f}return o.open("GET",e+"?"+t,s),o.send(null),s?null:getResponse(o)}function getUnauthorizedMsg(){return"<web-service><unauthorized/></web-service>"}function getNotFoundMsg(){return"<web-service><not-found/></web-service>"}function pentahoPost(e,t,n,r){var i=undefined!=n&&null!=n,s=null,o="text/xml";r&&(o=r);if(window.XMLHttpRequest)s=new XMLHttpRequest,s.overrideMimeType&&s.overrideMimeType(o);else if(window.ActiveXObject)try{s=new ActiveXObject("Msxml2.XMLHTTP")}catch(u){try{s=new ActiveXObject("Microsoft.XMLHTTP")}catch(u){s=null}}if(!s)throw new Error("Cannot create XMLHTTP instance");return i&&(s.onreadystatechange=function(){pentahoResponse(s,n)}),s.open("POST",e,i),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.setRequestHeader("Content-length",t.length),s.setRequestHeader("Connection","close"),s.send(t),i?null:getResponse(s)}function pentahoResponse(http_request,func){if(http_request.readyState==COMPLETE)try{var content=getResponse(http_request);if(typeof func=="function")func(content);else if(typeof func=="object"&&undefined!=func.obj)func.method.call(func.obj,content);else{if(typeof func!="string")throw new Error("Invalid state in pentahoResponse, unrecognized callback function.");eval(func+"( content );")}}catch(e){var msg=e.message;throw alert("pentaho-ajax.js.pentahoResponse(): "+e),e}}function getResponse(e){switch(e.status){case STATUS_OK:return e.responseText;case STATUS_UNAUTHORIZED:return getUnauthorizedMsg();case STATUS_NOT_FOUND:return getNotFoundMsg();default:return null}}function base64Decode(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var n="",r,i,s,o,u,a,f,l=0;while(l<e.length)o=t.indexOf(e.charAt(l++)),u=t.indexOf(e.charAt(l++)),a=t.indexOf(e.charAt(l++)),f=t.indexOf(e.charAt(l++)),r=o<<2|u>>4,i=(u&15)<<4|a>>2,s=(a&3)<<6|f,n+=String.fromCharCode(r),a!==64&&(n+=String.fromCharCode(i)),f!==64&&(n+=String.fromCharCode(s));return utf8Decode(n)}function utf8Decode(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}(function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(!b.acceptData(e))return;var s,o,u=b.expando,a=typeof n=="string",f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if((!h||!c[h]||!i&&!c[h].data)&&a&&r===t)return;h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n);return s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[b.camelCase(n)])):o=s,o}function q(e,t,n){if(!b.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(!u[a])return;if(t){s=n?u[a]:u[a].data;if(s){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t in s?t=[t]:t=t.split(" "));for(r=0,i=t.length;r<i;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}}if(!n){delete u[a].data;if(!U(u[a]))return}o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null}function R(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(F,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e){if(t==="data"&&b.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){t=t||0;if(b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(typeof t=="string"){var r=b.grep(e,function(e){return e.nodeType===1});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!b.hasData(e))return;var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--){t=en[i]+n;if(t in e)return t}return r}function nn(e,t){return e=t||e,b.css(e,"display")==="none"||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=b._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&nn(r)&&(s[o]=b._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&n!=="none"||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=b.css(e,n+Zt[s],!0,i)),r?(n==="content"&&(o-=b.css(e,"padding"+Zt[s],!0,i)),n!=="margin"&&(o-=b.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=b.css(e,"padding"+Zt[s],!0,i),n!=="padding"&&(o+=b.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=qt(e),o=b.support.boxSizing&&b.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Rt(e,t,s);if(i<0||i==null)i=e.style[t];if(Jt.test(i))return i;r=o&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=s,n=Qt[e];if(!n){n=fn(e,t);if(n==="none"||!n)It=(It||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach();Qt[e]=n}return n}function fn(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&b.type(t)==="object")for(i in t)vn(e+"["+i+"]",t[i],n,r);else r(e,t)}function _n(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(b.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,t,n,r){function o(u){var a;return i[u]=!0,b.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===An;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Pn(e,n){var r,i,s=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Bn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if(r!=="*"){if(f!=="*"&&f!==r){i=o[f+" "+r]||o["* "+r];if(!i)for(n in o){s=n.split(" ");if(s[1]===r){i=o[f+" "+s[0]]||o["* "+s[0]];if(i){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}}}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Gn[t]||[]).concat(Gn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,s=0,o=Qn.length,u=b.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;tr(l,f.opts.specialEasing);for(;s<o;s++){r=Qn[s].call(f,e,l,f.opts);if(r)return r}return Zn(f,l),b.isFunction(f.opts.start)&&f.opts.start.call(e,f),b.fx.timer(b.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(i in e){r=b.camelCase(i),s=t[r],n=e[i],b.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=b.cssHooks[r];if(o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}}function nr(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&nn(e);n.queue||(l=b._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,b.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],b.css(e,"display")==="inline"&&b.css(e,"float")==="none"&&(!b.support.inlineBlockNeedsLayout||an(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t){o=t[i];if($n.exec(o)){delete t[i],a=a||o==="toggle";if(o===(m?"hide":"show"))continue;v.push(i)}}s=v.length;if(s){u=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?b(e).show():h.done(function(){b(e).hide()}),h.done(function(){var t;b._removeData(e,"fxshow");for(t in d)b.style(e,t,d[t])});for(i=0;i<s;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||b.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start=r==="width"||r==="height"?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){if(s.addEventListener||e.type==="load"||s.readyState==="complete")D(),b.ready()},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=x.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0));if(T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}o=s.getElementById(i[2]);if(o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!b.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r)}return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?--b.readyWait:b.isReady)return;if(!s.body)return setTimeout(b.ready);b.isReady=!0;if(e!==!0&&--b.readyWait>0)return;n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready")},isFunction:function(e){return b.type(e)==="function"},isArray:Array.isArray||function(e){return b.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||b.type(e)!=="object"||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=b.trim(t);if(t&&N.test(t.replace(k,"@").replace(L,"]").replace(C,"")))return(new Function("return "+t))()}b.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:y&&!y.call("﻿ ")?function(e){return e==null?"":y.call(e)}:function(e){return e==null?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(P(Object(e))?b.merge(n,typeof e=="string"?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(b.type(r)==="object"){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n){n=b.Deferred();if(s.readyState==="complete")setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=e.frameElement==null&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e=typeof e=="string"?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!i||f)&&(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=r!==1||e&&b.isFunction(e.promise)?r:0,s=i===1?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:p.className!=="t",leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:s.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:s.compatMode==="CSS1Compat",deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=o.getAttribute("value")==="",o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box",b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];if(!a)return;n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=o[0].offsetHeight===0,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&o[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=p.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length){u=b.data(s);if(s.nodeType===1&&!b._data(s,"parsedAttrs")){r=s.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){b.data(this,e)}):b.access(this,function(n){if(n===t)return s?R(s,e,b.data(s,e)):null;this.each(function(){b.data(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=b._data(e,t),n&&(!r||b.isArray(n)?r=b._data(e,t,b.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),s.cur=i,i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=b.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else if(n===i||n==="boolean")this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace(V,""):n==null?"":n);return}return i=b.isFunction(e),this.each(function(n){var s,o=b(this);if(this.nodeType!==1)return;i?s=e.call(this,n,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":b.isArray(s)&&(s=b.map(s,function(e){return e==null?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(b.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!b.nodeName(n.parentNode,"optgroup"))){t=b(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(typeof e.getAttribute===i)return b.prop(e,n,r);o=a!==1||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z));if(r===t)return s&&o&&"get"in s&&(u=s.get(e,n))!==null?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),u==null?t:u);if(r!==null)return s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r);b.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&e.nodeType===1)while(n=s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&t==="radio"&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=b.prop(e,n),i=typeof r=="boolean"&&e.getAttribute(n),s=typeof r=="boolean"?Y&&G?i!=null:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}};if(!Y||!G)b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,t,n){if(!b.nodeName(e,"input"))return z&&z.set(e,t,n);e.defaultValue=t}};G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(n==="id"||n==="name"||n==="coords"?r.value!=="":r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,t===""?!1:t,n)}},b.each(["width","height"],function(e,t){b.attrHooks[t]=b.extend(b.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r==null?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,t){if(b.isArray(t))return e.checked=b.inArray(b(e).val(),t)>=0}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||!!e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(!m||!(l=m.events))return;t=(t||"").match(E)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)b.event.remove(e,p+t[f],n,r,!0);continue}c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&b.removeEvent(e,p,m.handle),delete l[p])}b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))},trigger:function(n,r,i,o){var u,a,f,l,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||s;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+b.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[b.expando]?n:new b.Event(v,typeof n=="object"&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{};if(!o&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!o&&!c.noBubble&&!b.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!o&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(i.ownerDocument,r)===!1)&&(v!=="click"||!b.nodeName(i,"a"))&&b.acceptData(i)&&a&&i[v]&&!b.isWindow(i)){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){if(b.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===s.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!b.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){if(b.nodeName(this,"form"))return!1;b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(b.nodeName(this,"form"))return!1;b.event.remove(this,"._submit")}}),b.support.changeBubbles||(b.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")b.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)});return!1}b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){n++===0&&s.addEventListener(e,r,!0)},teardown:function(){--n===0&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return b.event.trigger(e,t,n,!0)}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;(t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[];if(!e||typeof e!="string")return n;if((u=t.nodeType)!==1&&u!==9)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(u===9){s=t.getElementById(o);if(!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){h=!0,v=w,m=t,y=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=U.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=z.exec(u))n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length);for(o in i.filter)(r=V[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&i==="parentNode",o=T++;return t.first?function(t,n,r){while(t=t[i])if(t.nodeType===1||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[i])if(t.nodeType===1||s){l=t[w]||(t[w]={});if((f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else{f=l[i]=[c],f[1]=e(t,n,u)||r;if(f[1]===!0)return!0}}}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?mt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[w]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,a<r&&yt(e.slice(a,r)),r<s&&yt(e=e.slice(r)),r<s&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=S==null?1:Math.random()||.1;E&&(f=a!==c&&a,r=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!p&&i.relative[o[1].type]){t=i.find.ID(a.matches[0].replace(et,tt),t)[0];if(!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){a=o[s];if(i.relative[f=a.type])break;if(l=i.find[f])if(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t)){o.splice(s,1),e=r.length&&pt(o);if(!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),z=new RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=new RegExp(q),X=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;if(n===c||n.nodeType!==9||!n.documentElement)return c;c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},i.find.CLASS=S.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&!p)return t.getElementsByClassName(e)},v=[],d=[":focus"];if(S.qsa=rt(n.querySelectorAll))ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=new RegExp(d.join("|")),v=new RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;if(e===t)return a=!0,0;if(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))return r&1||e.parentNode&&e.parentNode.nodeType===11?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:r&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']");if(S.matchesSelector&&!p&&(!v||!v.test(t))&&!d.test(t))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;a=!S.detectDuplicates,e.sort(y);if(a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=s(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue;return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[x,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(typeof e!="string")return r=this,this.pushStack(b(e).filter(function(){for(t=0;t<i;t++)if(b.contains(r[t],this))return!0}));n=[];for(t=0;t<i;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&(typeof e=="string"?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?b(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?typeof e=="string"?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&typeof r=="string"&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!b(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||b.filter(e,[n]).length>0)!t&&n.nodeType===1&&b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(b.support.htmlSerialize||!mt.test(e))&&(b.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return!t&&typeof e!="string"&&(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(c<=1||typeof v!="string"||b.support.checkClone||!Tt.test(v)))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c){f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,f.childNodes.length===1&&(f=i);if(i){n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;for(;l<c;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o){a=u[u.length-1].ownerDocument,b.map(u,Dt);for(l=0;l<o;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")))}f=i=null}}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.ownerDocument,e);b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!b.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(b.type(s)==="object")b.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!b.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&b.inArray(s,r)!==-1)continue;o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;(n=e[u])!=null;u++)if(t||b.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=new RegExp("^("+w+")(.*)$","i"),Jt=new RegExp("^("+w+")(?!px)[a-z%]+$","i"),Kt=new RegExp("^([+-])=("+w+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,s,o={},u=0;if(b.isArray(n)){s=qt(e),i=n.length;for(;u<i;u++)o[n[u]]=b.css(e,n[u],!1,s);return o}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=typeof e=="boolean";return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=b.camelCase(n),f=e.style;n=b.cssProps[a]||(b.cssProps[a]=tn(f,a)),u=b.cssHooks[n]||b.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!b.cssNumber[a]&&(r+="px"),!b.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=b.camelCase(n);return n=b.cssProps[a]||(b.cssProps[a]=tn(e.style,a)),u=b.cssHooks[n]||b.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),o==="normal"&&n in Yt&&(o=Yt[n]),r===""||r?(s=parseFloat(o),r===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!b.contains(e.ownerDocument,e)&&(a=b.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):s.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Xt.test(b.css(e,"display"))?b.swap(e,Gt,function(){return un(e,t,r)}):un(e,t,r)},set:function(e,n,r){var i=r&&qt(e);return sn(e,n,r?on(e,t,r,b.support.boxSizing&&b.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&b.trim(s.replace(Ut,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,t){if(t)return b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"])}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,t){b.cssHooks[t]={get:function(e,n){if(n)return n=Rt(e,t),Jt.test(n)?b(e).position()[t]+"px":n}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!b.support.reliableHiddenOffsets&&(e.style&&e.style.display||b.css(e,"display"))==="none"},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(b.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return n==null?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(e,t){t=b.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional);if(b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,gn,yn=b.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=b.fn.load,Ln={},An={},On="*/".concat("*");try{gn=o.href}catch(Mn){gn=s.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,r){if(typeof e!="string"&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),b.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,s){return b.isFunction(r)&&(s=s||i,i=r,r=t),b.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,b.ajaxSettings),t):Pn(b.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;if(w===2)return;w=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,r&&(E=Hn(c,x,r));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(b.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(b.etag[s]=S)),e===204?(l=!0,T="nocontent"):e===304?(l=!0,T="notmodified"):(l=Bn(c,E),T=l.state,g=l.data,y=l.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--b.active||b.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=b.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?b(h):b.event,d=b.Deferred(),v=b.Callbacks("once memory"),m=c.statusCode||{},g={},y={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(w===2){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return w===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return f&&f.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(E)||[""],c.crossDomain==null&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(r[1]==="http:"?80:443))==(mn[3]||(mn[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=b.param(c.data,c.traditional)),Dn(Ln,c,n,x);if(w===2)return x;a=c.global,a&&b.active++===0&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&w!==2){S="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);f=Dn(An,c,n,x);if(!f)N(-1,"No Transport");else{x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{w=1,f.send(g,N)}catch(T){if(!(w<2))throw T;N(-1,T)}}return x}return x.abort()},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(t,i){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||b.expando+"_"+yn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||b.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&b.isFunction(o)&&o(u[0]),u=o=t}),"script"});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=b.ajaxSettings.xhr(),b.support.cors=!!qn&&"withCredentials"in qn,qn=b.support.ajax=!!qn,qn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=b.noop,Un&&delete In[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Rn,Un&&(In||(In={},b(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=new RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Jn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(b.cssNumber[e]?"":"px");if(r!=="px"&&u){u=b.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,b.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.options.duration?this.pos=t=b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=b.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(e.elem.style[b.cssProps[e.prop]]!=null||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),s=b.speed(t,n,r),o=function(){var t=er(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=b.timers,o=r?r.length:0;n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&typeof e=="object"?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};r.duration=b.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;Xn=b.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Vn||(Vn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Vn),Vn=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");r==="static"&&(e.style.position="relative");var i=b(e),s=i.offset(),o=b.css(e,"top"),u=b.css(e,"left"),a=(r==="absolute"||r==="fixed")&&b.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},b.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return b.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s.documentElement;while(e&&!b.nodeName(e,"html")&&b.css(e,"position")==="static")e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,s){var o=sr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?b(o).scrollLeft():s,r?s:b(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return b.access(this,function(n,r,i){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?b.css(n,r,u):b.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=b,typeof pen.define=="function"&&pen.define.amd&&pen.define.amd.jQuery&&pen.define("jquery",[],function(){return b})})(window),pen.define("cdf/jquery",function(e){return function(){var t,n;return t||e.$}}(this)),function(e){e.prompt=function(t,n){n!==undefined&&n.classes!==undefined&&typeof n.classes=="string"&&(n={box:n.classes}),e.prompt.options=e.extend({},e.prompt.defaults,n),e.prompt.currentPrefix=e.prompt.options.prefix,e.prompt.timeout&&clearTimeout(e.prompt.timeout),e.prompt.timeout=!1;var r=e.prompt.options,i=e(document.body),s=e(window),o='<div class="'+e.prompt.options.prefix+"box "+r.classes.box+'">';r.useiframe&&e("object, applet").length>0?o+='<iframe src="javascript:false;" style="display:block;position:absolute;z-index:-1;" class="'+r.prefix+"fade "+r.classes.fade+'"></iframe>':o+='<div class="'+r.prefix+"fade "+r.classes.fade+'"></div>',o+='<div class="'+r.prefix+" "+r.classes.prompt+'">'+'<form action="javascript:false;" onsubmit="return false;" class="'+r.prefix+"form "+r.classes.form+'">'+'<div class="'+r.prefix+"close "+r.classes.close+'">'+r.closeText+"</div>"+'<div class="'+r.prefix+'states"></div>'+"</form>"+"</div>"+"</div>",e.prompt.jqib=e(o).appendTo(i),e.prompt.jqi=e.prompt.jqib.children("."+r.prefix),e.prompt.jqif=e.prompt.jqib.children("."+r.prefix+"fade"),t.constructor===String&&(t={state0:{title:r.title,html:t,buttons:r.buttons,position:r.position,focus:r.focus,defaultButton:r.defaultButton,submit:r.submit}}),e.prompt.options.states={};var u,a;for(u in t)a=e.extend({},e.prompt.defaults.state,{name:u},t[u]),e.prompt.addState(a.name,a),e.prompt.currentStateName===""&&(e.prompt.currentStateName=a.name);e.prompt.jqi.on("click","."+r.prefix+"buttons button",function(t){var n=e(this),i=n.parents("."+r.prefix+"state"),s=e.prompt.options.states[i.data("jqi-name")],o=i.children("."+r.prefix+"message"),u=s.buttons[n.text()]||s.buttons[n.html()],a={};if(u===undefined)for(var f in s.buttons)if(s.buttons[f].title===n.text()||s.buttons[f].title===n.html())u=s.buttons[f].value;e.each(e.prompt.jqi.children("form").serializeArray(),function(e,t){a[t.name]===undefined?a[t.name]=t.value:typeof a[t.name]===Array||typeof a[t.name]=="object"?a[t.name].push(t.value):a[t.name]=[a[t.name],t.value]});var l=new e.Event("impromptu:submit");l.stateName=s.name,l.state=i,i.trigger(l,[u,o,a]),l.isDefaultPrevented()||e.prompt.close(!0,u,o,a)});var f=function(){if(r.persistent){var t=r.top.toString().indexOf("%")>=0?s.height()*(parseInt(r.top,10)/100):parseInt(r.top,10),n=parseInt(e.prompt.jqi.css("top").replace("px",""),10)-t;e("html,body").animate({scrollTop:n},"fast",function(){var t=0;e.prompt.jqib.addClass(r.prefix+"warning");var n=setInterval(function(){e.prompt.jqib.toggleClass(r.prefix+"warning"),t++>1&&(clearInterval(n),e.prompt.jqib.removeClass(r.prefix+"warning"))},100)})}else e.prompt.close(!0)},l=function(t){var n=window.event?event.keyCode:t.keyCode;n===27&&f();if(n===13){var i=e.prompt.getCurrentState().find("."+r.prefix+"defaultbutton"),s=e(t.target);s.is("textarea,."+r.prefix+"button")===!1&&i.length>0&&(t.preventDefault(),i.click())}if(n===9){var o=e("input,select,textarea,button",e.prompt.getCurrentState()),u=!t.shiftKey&&t.target===o[o.length-1],a=t.shiftKey&&t.target===o[0];if(u||a)return setTimeout(function(){if(!o)return;var e=o[a===!0?o.length-1:0];e&&e.focus()},10),!1}};return e.prompt.position(),e.prompt.style(),e.prompt.jqif.click(f),s.resize({animate:!1},e.prompt.position),e.prompt.jqi.find("."+r.prefix+"close").click(e.prompt.close),e.prompt.jqib.on("keydown",l).on("impromptu:loaded",r.loaded).on("impromptu:close",r.close).on("impromptu:statechanging",r.statechanging).on("impromptu:statechanged",r.statechanged),e.prompt.jqif[r.show](r.overlayspeed),e.prompt.jqi[r.show](r.promptspeed,function(){var t=e.prompt.jqi.find("."+r.prefix+"states ."+r.prefix+"state").eq(0);e.prompt.goToState(t.data("jqi-name")),e.prompt.jqib.trigger("impromptu:loaded")}),r.timeout>0&&(e.prompt.timeout=setTimeout(function(){e.prompt.close(!0)},r.timeout)),e.prompt.jqib},e.prompt.defaults={prefix:"jqi",classes:{box:"",fade:"",prompt:"",form:"",close:"",title:"",message:"",buttons:"",button:"",defaultButton:""},title:"",closeText:"&times;",buttons:{Ok:!0},loaded:function(e){},submit:function(e,t,n,r){},close:function(e,t,n,r){},statechanging:function(e,t,n){},statechanged:function(e,t){},opacity:.6,zIndex:999,overlayspeed:"slow",promptspeed:"fast",show:"fadeIn",focus:0,defaultButton:0,useiframe:!1,top:"15%",position:{container:null,x:null,y:null,arrow:null,width:null},persistent:!0,timeout:0,states:{},state:{name:null,title:"",html:"",buttons:{Ok:!0},focus:0,defaultButton:0,position:{container:null,x:null,y:null,arrow:null,width:null},submit:function(e,t,n,r){return!0}}},e.prompt.currentPrefix=e.prompt.defaults.prefix,e.prompt.currentStateName="",e.prompt.setDefaults=function(t){e.prompt.defaults=e.extend({},e.prompt.defaults,t)},e.prompt.setStateDefaults=function(t){e.prompt.defaults.state=e.extend({},e.prompt.defaults.state,t)},e.prompt.position=function(t){var n=e.fx.off,r=e.prompt.getCurrentState(),i=e.prompt.options.states[r.data("jqi-name")],s=i?i.position:undefined,o=e(window),u=document.body.scrollHeight,a=e(window).height(),f=e(document).height(),l=u>a?u:a,c=parseInt(o.scrollTop(),10)+(e.prompt.options.top.toString().indexOf("%")>=0?a*(parseInt(e.prompt.options.top,10)/100):parseInt(e.prompt.options.top,10));t!==undefined&&t.data.animate===!1&&(e.fx.off=!0),e.prompt.jqib.css({position:"absolute",height:l,width:"100%",top:0,left:0,right:0,bottom:0}),e.prompt.jqif.css({position:"fixed",height:l,width:"100%",top:0,left:0,right:0,bottom:0});if(s&&s.container){var h=e(s.container).offset();e.isPlainObject(h)&&h.top!==undefined&&(e.prompt.jqi.css({position:"absolute"}),e.prompt.jqi.animate({top:h.top+s.y,left:h.left+s.x,marginLeft:0,width:s.width!==undefined?s.width:null}),c=h.top+s.y-(e.prompt.options.top.toString().indexOf("%")>=0?a*(parseInt(e.prompt.options.top,10)/100):parseInt(e.prompt.options.top,10)),e("html,body").animate({scrollTop:c},"slow","swing",function(){}))}else s&&s.width?(e.prompt.jqi.css({position:"absolute",left:"50%"}),e.prompt.jqi.animate({top:s.y||c,left:s.x||"50%",marginLeft:s.width/2*-1,width:s.width})):e.prompt.jqi.css({position:"absolute",top:c,left:"50%",marginLeft:e.prompt.jqi.outerWidth(!1)/2*-1});t!==undefined&&t.data.animate===!1&&(e.fx.off=n)},e.prompt.style=function(){e.prompt.jqif.css({zIndex:e.prompt.options.zIndex,display:"none",opacity:e.prompt.options.opacity}),e.prompt.jqi.css({zIndex:e.prompt.options.zIndex+1,display:"none"}),e.prompt.jqib.css({zIndex:e.prompt.options.zIndex})},e.prompt.get=function(t){return e("."+e.prompt.currentPrefix)},e.prompt.addState=function(t,n,r){var i="",s=null,o="",u="",a=e.prompt.options,f=e("."+e.prompt.currentPrefix+"states"),l,c,h,p=0;n=e.extend({},e.prompt.defaults.state,{name:t},n),n.position.arrow!==null&&(o='<div class="'+a.prefix+"arrow "+a.prefix+"arrow"+n.position.arrow+'"></div>'),n.title&&n.title!==""&&(u='<div class="lead '+a.prefix+"title "+a.classes.title+'">'+n.title+"</div>"),i+='<div id="'+a.prefix+"state_"+t+'" class="'+a.prefix+'state" data-jqi-name="'+t+'" style="display:none;">'+o+u+'<div class="'+a.prefix+"message "+a.classes.message+'">'+n.html+"</div>"+'<div class="'+a.prefix+"buttons "+a.classes.buttons+'"'+(e.isEmptyObject(n.buttons)?'style="display:none;"':"")+">";for(c in n.buttons)h=n.buttons[c],l=n.focus===p||isNaN(n.focus)&&n.defaultButton===p?e.prompt.currentPrefix+"defaultbutton "+a.classes.defaultButton:"",typeof h=="object"?(i+='<button class="'+a.classes.button+" "+e.prompt.currentPrefix+"button "+l,typeof h.classes!="undefined"&&(i+=" "+(e.isArray(h.classes)?h.classes.join(" "):h.classes)+" "),i+='" name="'+a.prefix+"_"+t+"_button"+h.title.replace(/[^a-z0-9]+/gi,"")+'" id="'+a.prefix+"_"+t+"_button"+h.title.replace(/[^a-z0-9]+/gi,"")+'" value="'+h.value+'">'+h.title+"</button>"):i+='<button class="'+e.prompt.currentPrefix+"button "+a.classes.button+" "+l+'" name="'+a.prefix+"_"+t+"_button"+c.replace(/[^a-z0-9]+/gi,"")+'" id="'+a.prefix+"_"+t+"_button"+c.replace(/[^a-z0-9]+/gi,"")+'" value="'+h+'">'+c+"</button>",p++;return i+="</div></div>",s=e(i),s.on("impromptu:submit",n.submit),r!==undefined?f.find("#"+e.prompt.currentPrefix+"state_"+r).after(s):f.append(s),e.prompt.options.states[t]=n,s},e.prompt.removeState=function(t,n){var r=e.prompt.getState(t),i=function(){r.remove()};return r.length===0?!1:(r.css("display")!=="none"?n!==undefined&&e.prompt.getState(n).length>0?e.prompt.goToState(n,!1,i):r.next().length>0?e.prompt.nextState(i):r.prev().length>0?e.prompt.prevState(i):e.prompt.close():r.slideUp("slow",i),!0)},e.prompt.getState=function(t){return e("#"+e.prompt.currentPrefix+"state_"+t)},e.prompt.getStateContent=function(t){return e.prompt.getState(t)},e.prompt.getCurrentState=function(){return e.prompt.getState(e.prompt.getCurrentStateName())},e.prompt.getCurrentStateName=function(){return e.prompt.currentStateName},e.prompt.goToState=function(t,n,r){var i=e.prompt.get(),s=e.prompt.options,o=e.prompt.getState(t),u=s.states[o.data("jqi-name")],a=new e.Event("impromptu:statechanging");return typeof n=="function"&&(r=n,n=!1),e.prompt.jqib.trigger(a,[e.prompt.getCurrentStateName(),t]),!a.isDefaultPrevented()&&o.length>0&&(e.prompt.jqi.find("."+e.prompt.currentPrefix+"parentstate").removeClass(e.prompt.currentPrefix+"parentstate"),n?(e.prompt.jqi.find("."+e.prompt.currentPrefix+"substate").not(o).slideUp(s.promptspeed).removeClass("."+e.prompt.currentPrefix+"substate").find("."+e.prompt.currentPrefix+"arrow").hide(),e.prompt.jqi.find("."+e.prompt.currentPrefix+"state:visible").addClass(e.prompt.currentPrefix+"parentstate"),o.addClass(e.prompt.currentPrefix+"substate")):e.prompt.jqi.find("."+e.prompt.currentPrefix+"state").not(o).slideUp(s.promptspeed).find("."+e.prompt.currentPrefix+"arrow").hide(),e.prompt.currentStateName=u.name,o.slideDown(s.promptspeed,function(){var n=e(this);typeof u.focus=="string"?n.find(u.focus).eq(0).focus():n.find("."+e.prompt.currentPrefix+"defaultbutton").focus(),n.find("."+e.prompt.currentPrefix+"arrow").show(s.promptspeed),typeof r=="function"&&e.prompt.jqib.on("impromptu:statechanged",r),e.prompt.jqib.trigger("impromptu:statechanged",[t]),typeof r=="function"&&e.prompt.jqib.off("impromptu:statechanged",r)}),n||e.prompt.position()),o},e.prompt.nextState=function(t){var n=e("#"+e.prompt.currentPrefix+"state_"+e.prompt.getCurrentStateName()).next();return n.length>0&&e.prompt.goToState(n.attr("id").replace(e.prompt.currentPrefix+"state_",""),t),n},e.prompt.prevState=function(t){var n=e("#"+e.prompt.currentPrefix+"state_"+e.prompt.getCurrentStateName()).prev();return n.length>0&&e.prompt.goToState(n.attr("id").replace(e.prompt.currentPrefix+"state_",""),t),n},e.prompt.close=function(t,n,r,i){e.prompt.timeout&&(clearTimeout(e.prompt.timeout),e.prompt.timeout=!1),e.prompt.jqib&&e.prompt.jqib.fadeOut("fast",function(){e.prompt.jqib.trigger("impromptu:close",[n,r,i]),e.prompt.jqib.remove(),e(window).off("resize",e.prompt.position)}),e.prompt.currentStateName=""},e.fn.prompt=function(t){t===undefined&&(t={}),t.withDataAndEvents===undefined&&(t.withDataAndEvents=!1),e.prompt(e(this).clone(t.withDataAndEvents).html(),t)}}(jQuery),pen.define("cdf/jquery-impromptu",function(){}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(arguments.length===1)return o[n]===t?null:o[n];o[n]=r}else{if(arguments.length===1)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function h(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&n[0].nodeType===9;return{element:n,isWindow:r,isDocument:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=l:t.at[0]==="center"&&(g.left+=l/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),v<c&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.offsetParentCssPosition==="fixed"&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.helper==="original"&&!e.contains(this.element[0].ownerDocument,this.element[0])?!1:(this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=n.css("overflow")!=="hidden",this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:i.scrollTop(),left:i.scrollLeft()}),{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=t.pageX,f=t.pageY;return this.offset.scroll||(this.offset.scroll={top:u.scrollTop(),left:u.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(g<u-v||m>a+v||b<f-v||y>l+v||!e.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+r.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(r)?r:function(e){return e.is(r)},this.proportions=function(){if(!arguments.length)return t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};t=arguments[0]},e.ui.ddmanager.droppables[n.scope]=e.ui.ddmanager.droppables[n.scope]||[],e.ui.ddmanager.droppables[n.scope].push(this),n.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=(e.positionAbs||e.position.absolute).top,a=o+e.helperProportions.width,f=u+e.helperProportions.height,l=t.offset.left,c=t.offset.top,h=l+t.proportions().width,p=c+t.proportions().height;switch(r){case"fit":return l<=o&&a<=h&&c<=u&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&a-e.helperProportions.width/2<h&&c<u+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,c,t.proportions().height)&&n(i,l,t.proportions().width);case"touch":return(u>=c&&u<=p||f>=c&&f<=p||u<c&&f>p)&&(o>=l&&o<=h||a>=l&&a<=h||o<l&&a>h);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions().height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions({width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight})}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=Math.abs(o.parentData.left)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(p-f>0?(t.size.height=p,t.position.top=s.top-c):(t.size.height=f,t.position.top=s.top+i.height-f),h-a>0?(t.size.width=h,t.position.left=s.left-l):(t.size.width=a,t.position.left=s.left+i.width-a))}})}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&e<t+n}function r(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||r(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s,o=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&o.cursor!=="auto"&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};if(!s||s==="x")o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);if(!s||s==="y")o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop);this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=this.options.axis==="x"||r+f>u&&r+f<a,h=this.options.axis==="y"||t+l>s&&t+l<o,p=c&&h;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o==="right"||s==="down"?2:1:s&&(s==="down"?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s==="right"&&r||s==="left"&&!r:i&&(i==="down"&&t||i==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function f(){o.push(this)}var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(f);return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return r==="tr"?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)}):r==="img"&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,o,u,a,f,l,c,h,p,d=null,v=null;for(i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(d&&e.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],v=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!d)return;if(this.containers.length===1)this.containers[v].containerCache.over||(this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1);else{o=1e4,u=null,p=d.floating||r(this.currentItem),a=p?"left":"top",f=p?"width":"height",l=this.positionAbs[a]+this.offset.click[a];for(s=this.items.length-1;s>=0;s--){if(!e.contains(this.containers[v].element[0],this.items[s].item[0]))continue;if(this.items[s].item[0]===this.currentItem[0])continue;if(p&&!n(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))continue;c=this.items[s].item.offset()[a],h=!1,Math.abs(c-l)>Math.abs(c+this.items[s][f]-l)&&(h=!0,c+=this.items[s][f]),Math.abs(c-l)<o&&(o=Math.abs(c-l),u=this.items[s],this.direction=h?"up":"down")}if(!u&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[v])return;u?this._rearrange(t,u,null,!0):this._rearrange(t,null,this.containers[v].element,!0),this._trigger("change",t,this._uiHash()),this.containers[v]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[v],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function i(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var n,r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)if(this._storedCSS[n]==="auto"||this._storedCSS[n]==="static")this._storedCSS[n]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(n=this.containers.length-1;n>=0;n--)t||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!t){this._trigger("beforeStop",e,this._uiHash());for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(t.active===!1||t.active==null)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,r=this.options,i=r.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n);this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),i=n.next(),s=i.attr("id");r||(r=o+"-header-"+t,n.attr("id",r)),s||(s=o+"-panel-"+t,i.attr("id",s)),n.attr("aria-controls",s),i.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),i==="fill"?(t=s.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):i==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e,t){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),s=i==="textarea",o=i==="input";this.isMultiLine=s?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})}(jQuery),function(e,t){var n,r="ui-button ui-widget ui-state-default ui-corner-all",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",s=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},o=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,s),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,u=this.type==="checkbox"||this.type==="radio",a=u?"":"ui-state-active";i.label===null&&(i.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(i.disabled)return;this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(i.disabled)return;e(this).removeClass(a)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),u&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];o(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(i.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" ui-state-active "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){this.element.prop("disabled",!!t),t&&this.buttonElement.removeClass("ui-state-focus");return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?o(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(i),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,s=r.primary&&r.secondary,o=[];r.primary||r.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=s(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(r.inline?t.parent()[0]:r.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))})}function o(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var n="datepicker",r;e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?s(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,r){var i=e(t);r.append=e([]),r.trigger=e([]);if(i.hasClass(this.markerClassName))return;this._attachments(i,r),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),e.data(t,n,r),r.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,r){var i=e(t);if(i.hasClass(this.markerClassName))return;i.addClass(this.markerClassName).append(r.dpDiv),e.data(t,n,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block")},_dialogDatepicker:function(t,r,i,s,u){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],n,p)),o(p.settings,s||{}),r=r&&r.constructor===Date?this._formatDate(p,r):r,this._dialogInput.val(r),this._pos=u?u.length?u:[u.pageX,u.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],n,p),this},_destroyDatepicker:function(t){var r,i=e(t),s=e.data(t,n);if(!i.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase(),e.removeData(t,n),r==="input"?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r==="div"||r==="span")&&i.removeClass(this.markerClassName).empty()},_enableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,n)}catch(r){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,i){var s,u,a,f,l=this._getInst(n);if(arguments.length===2&&typeof r=="string")return r==="defaults"?e.extend({},e.datepicker._defaults):l?r==="all"?e.extend({},l.settings):this._get(l,r):null;s=r||{},typeof r=="string"&&(s={},s[r]=i),l&&(this._curInst===l&&this._hideDatepicker(),u=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),o(l.settings,s),a!==null&&s.dateFormat!==t&&s.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),f!==null&&s.dateFormat!==t&&s.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,u),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,i,s,u,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{};if(i===!1)return;o(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|=e(this).css("position")==="fixed",!s}),u={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),u=e.datepicker._checkOffset(n,u,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:u.left+"px",top:u.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,r=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(t),s=i[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),t.dpDiv[(i[0]!==1||i[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var r,i,s,o,u=this._curInst;if(!u||t&&u!==e.data(t,n))return;this._datepickerShowing&&(r=this._get(u,"showAnim"),i=this._get(u,"duration"),s=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[r]||e.effects[r])?u.dpDiv.hide(r,e.datepicker._get(u,"showOptions"),i,s):u.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?i:null,s),r||s(),this._datepickerShowing=!1,o=this._get(u,"onClose"),o&&o.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=n.substring(u).match(i);if(!s)throw"Missing number at position "+u;return u+=s[0].length,parseInt(s[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(r,-n,"M")},next:function(){e.datepicker._adjustDate(r,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(r)},selectDay:function(){return e.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2].replace(/'/g,"&#39;")+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"}(jQuery),function(e,t){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n,r=this;if(!this._isOpen||this._trigger("beforeClose",t)===!1)return;this._isOpen=!1,this._destroyOverlay();if(!this.opener.filter(":focusable").focus().length)try{n=this.document[0].activeElement,n&&n.nodeName.toLowerCase()!=="body"&&e(n).blur()}catch(i){}this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){var t=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault(),this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB)return;var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||!!t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();if(e.isEmptyObject(n)||e.isArray(n)&&!n.length){this.uiDialog.removeClass("ui-dialog-buttons");return}e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",i,r(s))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var t=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),s=typeof r=="string"?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",n,o(r))},resize:function(e,n){t._trigger("resize",e,o(n))},stop:function(r,i){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",r,o(i))}}).css("position",i)},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in r&&(o[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,r,i=this.uiDialog;e==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t);if(e==="disabled")return;this._super(e,t),e==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),e==="buttons"&&this._createButtons(),e==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),e==="draggable"&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),e==="position"&&this._position(),e==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),e==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n=typeof r.maxHeight=="number"?Math.max(0,r.maxHeight-e):"none",r.height==="auto"?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal)return;var t=this,n=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(r){t._allowInteraction(r)||(r.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t=this.options.position,n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()}})}(jQuery),function(e,t){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,typeof e!="number"&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){e==="max"&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n));for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&t.values.length!==2?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"):this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}),this.range.addClass(n+(t.range==="min"||t.range==="max"?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;t==="range"&&this.options.range===!0&&(n==="min"?(this.options.value=this._values(0),this.options.values=null):n==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;if(this.options.values&&this.options.values.length){n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},click:function(e){e.preventDefault()},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this.value()!==""&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),e==="icons"&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++n}function s(e){return e=e.cloneNode(!1),e.hash.length>1&&decodeURIComponent(e.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);if(t===null){r&&this.tabs.each(function(n,i){if(e(i).attr("aria-controls")===r)return t=n,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(t===null||t===-1)t=this.tabs.length?0:!1}return t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();t==="fill"?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})}(jQuery),function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("ui-tooltip-open"))return;i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(!0,r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,r){e(r.element).attr("title",r.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(jQuery),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").addBack():r;f=f.map(function(){var t=e(this);return{el:t,start:i(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(r,i,s,o,u){return typeof i=="boolean"||i===t?s?e.effects.animateClass.call(this,i?{add:r}:{remove:r},s,o,u):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:r},i,s,o)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function i(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?!0:e.isFunction(t)?!0:typeof t=="object"&&!t.effect?!0:!1}e.extend(e.effects,{version:"1.10.4",save:function(e,t){for(var r=0;r<t.length;r++)t[r]!==null&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var i,s;for(s=0;s<r.length;s++)r[s]!==null&&(i=e.data(n+r[s]),i===t&&(i=""),e.css(r[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function o(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,o=t.mode;(r.is(":hidden")?o==="hide":o==="show")?(r[o](),u()):s.call(r[0],t,u)}var t=r.apply(this,arguments),n=t.mode,i=t.queue,s=e.effects.effect[t.effect];return e.fx.off||!s?n?this[n](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):i===!1?this.each(o):this.queue(i||"fx",o)},show:function(e){return function(t){if(i(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(i(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(i(t)||typeof t=="boolean")return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery),function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}}(jQuery),function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}}(jQuery),pen.define("cdf/jquery.ui",function(){}),function(e){typeof pen.define=="function"&&pen.define.amd?pen.define("cdf/jquery.bgiframe",["jquery"],e):typeof exports=="object"?module.exports=e:e(jQuery)}(function(e){function t(e){return e&&e.constructor===Number?e+"px":e}e.fn.bgiframe=function(n){n=e.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;",conditional:/MSIE 6\.0/.test(navigator.userAgent)},n);if(!e.isFunction(n.conditional)){var r=n.conditional;n.conditional=function(){return r}}var i=e('<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+n.src+'"'+'style="display:block;position:absolute;z-index:-1;"/>');return this.each(function(){var r=e(this);if(n.conditional(this)===!1)return;var o=r.children("iframe.bgiframe"),u=o.length===0?i.clone():o;u.css({top:n.top=="auto"?(parseInt(r.css("borderTopWidth"),10)||0)*-1+"px":t(n.top),left:n.left=="auto"?(parseInt(r.css("borderLeftWidth"),10)||0)*-1+"px":t(n.left),width:n.width=="auto"?this.offsetWidth+"px":t(n.width),height:n.height=="auto"?this.offsetHeight+"px":t(n.height),opacity:n.opacity===!0?0:undefined}),o.length===0&&r.prepend(u)})},e.fn.bgIframe=e.fn.bgiframe}),function(e){function t(t){var i=e.data(e(t).parents().andSelf().filter("ul.jd_menu")[0],"jdMenuSettings");e("> li",t).bind("mouseenter.jdmenu mouseleave.jdmenu",function(t){e(this).toggleClass("jdm_hover");var s=e("> ul",this);if(s.length==1){clearTimeout(this.$jdTimer);var o=t.type=="mouseenter",u=o?n:r;this.$jdTimer=setTimeout(function(){u(s[0],i.onAnimate,i.isVertical)},o?i.showDelay:i.hideDelay)}}).bind("click.jdmenu",function(t){var r=e("> ul",this);if(!(r.length!=1||i.disableLinks!=1&&!e(this).hasClass("accessible")))return n(r,i.onAnimate,i.isVertical),!1;if(t.target==this){var s=e("> a",t.target).not(".accessible");if(s.length>0){var o=s[0];o.onclick?e(o).trigger("click"):window.open(o.href,o.target||"_self")}}if(i.disableLinks||!i.disableLinks&&!e(this).parent().hasClass("jd_menu"))e(this).parent().jdMenuHide(),t.stopPropagation()}).find("> a").bind("focus.jdmenu blur.jdmenu",function(t){var n=e(this).parents("li:eq(0)");t.type=="focus"?n.addClass("jdm_hover"):n.removeClass("jdm_hover")}).filter(".accessible").bind("click.jdmenu",function(e){e.preventDefault()})}function n(n,i,s){var n=e(n);if(n.is(":visible"))return;n.bgiframe();var o=n.parent();n.trigger("jdMenuShow").positionBy({target:o[0],targetPos:s===!0||!o.parent().hasClass("jd_menu")?1:3,elementPos:0,hideAfterPosition:!0}),n.hasClass("jdm_events")||(n.addClass("jdm_events"),t(n)),o.addClass("jdm_active").siblings("li").find("> ul:eq(0):visible").each(function(){r(this)}),i===undefined?n.show():i.apply(n[0],[!0])}function r(t,n){var t=e(t);e(".bgiframe",t).remove(),t.filter(":not(.jd_menu)").find("> li > ul:eq(0):visible").each(function(){r(this)}).end(),n===undefined?t.hide():n.apply(t[0],[!1]),t.trigger("jdMenuHide").parents("li:eq(0)").removeClass("jdm_active jdm_hover").end().find("> li").removeClass("jdm_active jdm_hover")}e.fn.jdMenu=function(n){var n=e.extend({showDelay:200,hideDelay:500,disableLinks:!0},n);return e.isFunction(n.onAnimate)||(n.onAnimate=undefined),this.filter("ul.jd_menu").each(function(){e.data(this,"jdMenuSettings",e.extend({isVertical:e(this).hasClass("jd_menu_vertical")},n)),t(this)})},e.fn.jdMenuUnbind=function(){e("ul.jdm_events",this).unbind(".jdmenu").find("> a").unbind(".jdmenu")},e.fn.jdMenuHide=function(){return this.filter("ul").each(function(){r(this)})},e(window).bind("click.jdmenu",function(){e("ul.jd_menu ul:visible").jdMenuHide()})}(jQuery),$(function(){$("ul.jd_menu").jdMenu()}),pen.define("cdf/jquery.jdMenu",function(){}),function(e){var t=function(e,t,n,r){this.x1=e,this.x2=n,this.y1=t,this.y2=r};t.prototype.contains=function(e){return this.x1<=e.x1&&e.x2<=this.x2&&this.y1<=e.y1&&e.y2<=this.y2},t.prototype.transform=function(e,n){return new t(this.x1+e,this.y1+n,this.x2+e,this.y2+n)},e.fn.positionBy=function(n){var r=new Date;if(this.length==0)return this;var n=e.extend({target:null,targetPos:null,elementPos:null,x:null,y:null,positions:null,addClass:!1,force:!1,container:window,hideAfterPosition:!1},n);if(n.x!=null)var i=n.x,s=n.y,o=0,u=0;else var a=e(e(n.target)[0]),o=a.outerWidth(),u=a.outerHeight(),f=a.offset(),i=f.left,s=f.top;var l=i+o,c=s+u;return this.each(function(){var r=e(this);r.is(":visible")||r.css({left:-3e3,top:-3e3}).show();var o=r.outerWidth(),u=r.outerHeight(),a=[],f=[];a[0]=new t(l,s,l+o,s+u),f[0]=[1,7,4],a[1]=new t(l,c-u,l+o,c),f[1]=[0,6,4],a[2]=new t(l,c,l+o,c+u),f[2]=[1,3,10],a[3]=new t(l-o,c,l,c+u),f[3]=[1,6,10],a[4]=new t(i,c,i+o,c+u),f[4]=[1,6,9],a[5]=new t(i-o,c,i,c+u),f[5]=[6,4,9],a[6]=new t(i-o,c-u,i,c),f[6]=[7,1,4],a[7]=new t(i-o,s,i,s+u),f[7]=[6,0,4],a[8]=new t(i-o,s-u,i,s),f[8]=[7,9,4],a[9]=new t(i,s-u,i+o,s),f[9]=[0,7,4],a[10]=new t(l-o,s-u,l,s),f[10]=[0,7,3],a[11]=new t(l,s-u,l+o,s),f[11]=[0,10,3],a[12]=new t(l-o,s,l,s+u),f[12]=[13,7,10],a[13]=new t(l-o,c-u,l,c),f[13]=[12,6,3],a[14]=new t(i,c-u,i+o,c),f[14]=[15,1,4],a[15]=new t(i,s,i+o,s+u),f[15]=[14,0,9];if(n.positions!==null)var h=n.positions[0];else if(n.targetPos!=null&&n.elementPos!=null){var h=[];h[0]=[],h[0][0]=15,h[0][1]=7,h[0][2]=8,h[0][3]=9,h[1]=[],h[1][0]=0,h[1][1]=12,h[1][2]=10,h[1][3]=11,h[2]=[],h[2][0]=2,h[2][1]=3,h[2][2]=13,h[2][3]=1,h[3]=[],h[3][0]=4,h[3][1]=5,h[3][2]=6,h[3][3]=14;var h=h[n.targetPos][n.elementPos]}var p=a[h],d=h;if(!n.force){$window=e(window);var v=$window.scrollLeft(),m=$window.scrollTop(),g=new t(v,m,v+$window.width(),m+$window.height()),y;n.positions?y=n.positions:y=[h];var b=[];while(y.length>0){var w=y.shift();if(b[w])continue;b[w]=!0;if(!!g.contains(a[w])){p=a[w];break}n.positions===null&&(y=jQuery.merge(y,f[w]))}}r.parents().each(function(){var t=e(this);if(t.css("position")!="static"){var n=t.offset();return p=p.transform(-n.left,-n.top),!1}});var E={left:p.x1,top:p.y1};n.hideAfterPosition&&(E.display="none"),r.css(E),n.addClass&&r.removeClass("positionBy0 positionBy1 positionBy2 positionBy3 positionBy4 positionBy5 positionBy6 positionBy7 positionBy8 positionBy9 positionBy10 positionBy11 positionBy12 positionBy13 positionBy14 positionBy15").addClass("positionBy"+w)})}}(jQuery),pen.define("cdf/jquery.positionBy",function(){}),function(){function e(e){function a(i,a){var l,h,m=i==window,g=a&&a.message!==undefined?a.message:undefined;a=e.extend({},e.blockUI.defaults,a||{});if(a.ignoreIfBlocked&&e(i).data("blockUI.isBlocked"))return;a.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,a.overlayCSS||{}),l=e.extend({},e.blockUI.defaults.css,a.css||{}),a.onOverlayClick&&(a.overlayCSS.cursor="pointer"),h=e.extend({},e.blockUI.defaults.themedCSS,a.themedCSS||{}),g=g===undefined?a.message:g,m&&o&&f(window,{fadeOut:0});if(g&&typeof g!="string"&&(g.parentNode||g.jquery)){var y=g.jquery?g[0]:g,b={};e(i).data("blockUI.history",b),b.el=y,b.parent=y.parentNode,b.display=y.style.display,b.position=y.style.position,b.parent&&b.parent.removeChild(y)}e(i).data("blockUI.onUnblock",a.onUnblock);var w=a.baseZ,E,S,x,T;n||a.forceIframe?E=e('<iframe class="blockUI" style="z-index:'+w++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+a.iframeSrc+'"></iframe>'):E=e('<div class="blockUI" style="display:none"></div>'),a.theme?S=e('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+w++ +';display:none"></div>'):S=e('<div class="blockUI blockOverlay" style="z-index:'+w++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),a.theme&&m?(T='<div class="blockUI '+a.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(w+10)+';display:none;position:fixed">',a.title&&(T+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(a.title||"&nbsp;")+"</div>"),T+='<div class="ui-widget-content ui-dialog-content"></div>',T+="</div>"):a.theme?(T='<div class="blockUI '+a.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(w+10)+';display:none;position:absolute">',a.title&&(T+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(a.title||"&nbsp;")+"</div>"),T+='<div class="ui-widget-content ui-dialog-content"></div>',T+="</div>"):m?T='<div class="blockUI '+a.blockMsgClass+' blockPage" style="z-index:'+(w+10)+';display:none;position:fixed"></div>':T='<div class="blockUI '+a.blockMsgClass+' blockElement" style="z-index:'+(w+10)+';display:none;position:absolute"></div>',x=e(T),g&&(a.theme?(x.css(h),x.addClass("ui-widget-content")):x.css(l)),a.theme||S.css(a.overlayCSS),S.css("position",m?"fixed":"absolute"),(n||a.forceIframe)&&E.css("opacity",0);var N=[E,S,x],C=m?e("body"):e(i);e.each(N,function(){this.appendTo(C)}),a.theme&&a.draggable&&e.fn.draggable&&x.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var k=s&&(!e.support.boxModel||e("object,embed",m?null:i).length>0);if(r||k){m&&a.allowBodyStretch&&e.support.boxModel&&e("html,body").css("height","100%");if((r||!e.support.boxModel)&&!m)var L=v(i,"borderTopWidth"),A=v(i,"borderLeftWidth"),O=L?"(0 - "+L+")":0,M=A?"(0 - "+A+")":0;e.each(N,function(e,t){var n=t[0].style;n.position="absolute";if(e<2)m?n.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+a.quirksmodeOffsetHack+') + "px"'):n.setExpression("height",'this.parentNode.offsetHeight + "px"'),m?n.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):n.setExpression("width",'this.parentNode.offsetWidth + "px"'),M&&n.setExpression("left",M),O&&n.setExpression("top",O);else if(a.centerY)m&&n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),n.marginTop=0;else if(!a.centerY&&m){var r=a.css&&a.css.top?parseInt(a.css.top,10):0,i="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"';n.setExpression("top",i)}})}g&&(a.theme?x.find(".ui-widget-content").append(g):x.append(g),(g.jquery||g.nodeType)&&e(g).show()),(n||a.forceIframe)&&a.showOverlay&&E.show();if(a.fadeIn){var _=a.onBlock?a.onBlock:t,D=a.showOverlay&&!g?_:t,P=g?_:t;a.showOverlay&&S._fadeIn(a.fadeIn,D),g&&x._fadeIn(a.fadeIn,P)}else a.showOverlay&&S.show(),g&&x.show(),a.onBlock&&a.onBlock();c(1,i,a),m?(o=x[0],u=e(a.focusableElements,o),a.focusInput&&setTimeout(p,20)):d(x[0],a.centerX,a.centerY);if(a.timeout){var H=setTimeout(function(){m?e.unblockUI(a):e(i).unblock(a)},a.timeout);e(i).data("blockUI.timeout",H)}}function f(t,n){var r,i=t==window,s=e(t),a=s.data("blockUI.history"),f=s.data("blockUI.timeout");f&&(clearTimeout(f),s.removeData("blockUI.timeout")),n=e.extend({},e.blockUI.defaults,n||{}),c(0,t,n),n.onUnblock===null&&(n.onUnblock=s.data("blockUI.onUnblock"),s.removeData("blockUI.onUnblock"));var h;i?h=e("body").children().filter(".blockUI").add("body > .blockUI"):h=s.find(">.blockUI"),n.cursorReset&&(h.length>1&&(h[1].style.cursor=n.cursorReset),h.length>2&&(h[2].style.cursor=n.cursorReset)),i&&(o=u=null),n.fadeOut?(r=h.length,h.stop().fadeOut(n.fadeOut,function(){--r===0&&l(h,a,n,t)})):l(h,a,n,t)}function l(t,n,r,i){var s=e(i);if(s.data("blockUI.isBlocked"))return;t.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),n&&n.el&&(n.el.style.display=n.display,n.el.style.position=n.position,n.parent&&n.parent.appendChild(n.el),s.removeData("blockUI.history")),s.data("blockUI.static")&&s.css("position","static"),typeof r.onUnblock=="function"&&r.onUnblock(i,r);var o=e(document.body),u=o.width(),a=o[0].style.width;o.width(u-1).width(u),o[0].style.width=a}function c(t,n,r){var i=n==window,s=e(n);if(!t&&(i&&!o||!i&&!s.data("blockUI.isBlocked")))return;s.data("blockUI.isBlocked",t);if(!i||!r.bindEvents||t&&!r.showOverlay)return;var u="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";t?e(document).bind(u,r,h):e(document).unbind(u,h)}function h(t){if(t.type==="keydown"&&t.keyCode&&t.keyCode==9&&o&&t.data.constrainTabKey){var n=u,r=!t.shiftKey&&t.target===n[n.length-1],i=t.shiftKey&&t.target===n[0];if(r||i)return setTimeout(function(){p(i)},10),!1}var s=t.data,a=e(t.target);return a.hasClass("blockOverlay")&&s.onOverlayClick&&s.onOverlayClick(t),a.parents("div."+s.blockMsgClass).length>0?!0:a.parents().children().filter("div.blockUI").length===0}function p(e){if(!u)return;var t=u[e===!0?u.length-1:0];t&&t.focus()}function d(e,t,n){var r=e.parentNode,i=e.style,s=(r.offsetWidth-e.offsetWidth)/2-v(r,"borderLeftWidth"),o=(r.offsetHeight-e.offsetHeight)/2-v(r,"borderTopWidth");t&&(i.left=s>0?s+"px":"0"),n&&(i.top=o>0?o+"px":"0")}function v(t,n){return parseInt(e.css(t,n),10)||0}e.fn._fadeIn=e.fn.fadeIn;var t=e.noop||function(){},n=/MSIE/.test(navigator.userAgent),r=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),i=document.documentMode||0,s=e.isFunction(document.createElement("div").style.setExpression);e.blockUI=function(e){a(window,e)},e.unblockUI=function(e){f(window,e)},e.growlUI=function(t,n,r,i){var s=e('<div class="growlUI"></div>');t&&s.append("<h1>"+t+"</h1>"),n&&s.append("<h2>"+n+"</h2>"),r===undefined&&(r=3e3);var o=function(t){t=t||{},e.blockUI({message:s,fadeIn:typeof t.fadeIn!="undefined"?t.fadeIn:700,fadeOut:typeof t.fadeOut!="undefined"?t.fadeOut:1e3,timeout:typeof t.timeout!="undefined"?t.timeout:r,centerY:!1,showOverlay:!1,onUnblock:i,css:e.blockUI.defaults.growlCSS})};o();var u=s.css("opacity");s.mouseover(function(){o({fadeIn:0,timeout:3e4});var t=e(".blockMsg");t.stop(),t.fadeTo(300,1)}).mouseout(function(){e(".blockMsg").fadeOut(1e3)})},e.fn.block=function(t){if(this[0]===window)return e.blockUI(t),this;var n=e.extend({},e.blockUI.defaults,t||{});return this.each(function(){var t=e(this);if(n.ignoreIfBlocked&&t.data("blockUI.isBlocked"))return;t.unblock({fadeOut:0})}),this.each(function(){e.css(this,"position")=="static"&&(this.style.position="relative",e(this).data("blockUI.static",!0)),this.style.zoom=1,a(this,t)})},e.fn.unblock=function(t){return this[0]===window?(e.unblockUI(t),this):this.each(function(){f(this,t)})},e.blockUI.version=2.66,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var o=null,u=[]}typeof pen.define=="function"&&pen.define.amd&&pen.define.amd.jQuery?pen.define("cdf/jquery.blockUI",["jquery"],e):e(jQuery)}(),jQuery.fn.extend({reverse:function(e){var t;if((t=$._data(this[0],"events"))&&t[e]){var n=new Array;for(var r in t[e])n.unshift(t[e][r]);t[e]=n}return this},stack:function(e,t,n){return this.reverse(e).bind(e,t,n).reverse(e)},hover:function(e,t,n){return n?this.stack("mouseenter",e).stack("mouseout",t):this.bind("mouseenter",e).bind("mouseout",t)}}),jQuery.each("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,change,select,submit,keydown,keypress,keyup,error".split(","),function(e,t){jQuery.fn[t]=function(e,n){return e?n?this.stack(t,e):this.bind(t,e):this.trigger(t)}}),pen.define("cdf/jquery.eventstack",function(){});var Base=function(){};Base.extend=function(e,t){var n=Base.prototype.extend;Base._prototyping=!0;var r=new this;n.call(r,e),r.base=function(){},delete Base._prototyping;var i=r.constructor,s=r.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==s)this._constructing=!0,i.apply(this,arguments),delete this._constructing;else if(arguments[0]!=null)return(arguments[0].extend||n).call(arguments[0],r)};return s.ancestor=this,s.extend=this.extend,s.forEach=this.forEach,s.implement=this.implement,s.prototype=r,s.toString=this.toString,s.valueOf=function(e){return e=="object"?s:i.valueOf()},n.call(s,t),typeof s.init=="function"&&s.init(),s},Base.prototype={extend:function(e,t){if(arguments.length>1){var n=this[e];if(n&&typeof t=="function"&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var r=t.valueOf();t=function(){var e=this.base||Base.prototype.base;this.base=n;var t=r.apply(this,arguments);return this.base=e,t},t.valueOf=function(e){return e=="object"?t:r},t.toString=Base.toString}this[e]=t}else if(e){var i=Base.prototype.extend;!Base._prototyping&&typeof this!="function"&&(i=this.extend||i);var s={toSource:null},o=["constructor","toString","valueOf"],u=Base._prototyping?0:1;while(a=o[u++])e[a]!=s[a]&&i.call(this,a,e[a]);for(var a in e)s[a]||i.call(this,a,e[a])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var r in e)this.prototype[r]===undefined&&t.call(n,e[r],r,e)},implement:function(){for(var e=0;e<arguments.length;e++)typeof arguments[e]=="function"?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),pen.define("cdf/Base",function(){}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.5.2";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return arguments.length<2||n?e[x.random(e.length-1)]:x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={},s=n==null?x.identity:k(n);return T(t,function(n,o){var u=s.call(r,n,o,t);e(i,u,n)}),i}};x.groupBy=L(function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u;return function(){s=this,i=arguments,o=new Date;var a=function(){var f=new Date-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i)))},f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i)),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),pen.define("cdf/underscore",function(){}),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.1.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=!t&&!n;!n&&typeof t=="object"&&(n=this),e&&((r={})[e._listenId]=e);for(var s in r)e=r[s],e.off(t,n,this),(i||u.isEmpty(e._events))&&delete this._listeningTo[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=u.uniqueId("l"));return i[s]=t,!r&&typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=u.defaults({},n,u.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},F(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t,n=u.extend({validate:!0},n);if(r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},F(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;F(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||j();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t,{validationError:n})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];u.each(d,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var v=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};u.extend(v.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.extend({merge:!1},t,g))},remove:function(e,t){var n=!u.isArray(e);e=n?[e]:u.clone(e),t||(t={});var r,i,s,o;for(r=0,i=e.length;r<i;r++){o=e[r]=this.get(e[r]);if(!o)continue;delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,t.silent||(t.index=s,o.trigger("remove",o,this,t)),this._removeReference(o)}return n?e[0]:e},set:function(e,t){t=u.defaults({},t,m),t.parse&&(e=this.parse(e,t));var n=!u.isArray(e);e=n?e?[e]:[]:u.clone(e);var r,i,s,o,a,f,l,c=t.at,h=this.model,d=this.comparator&&c==null&&t.sort!==!1,v=u.isString(this.comparator)?this.comparator:null,g=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!d&&w&&S?[]:!1;for(r=0,i=e.length;r<i;r++){a=e[r],a instanceof p?s=o=a:s=a[h.prototype.idAttribute];if(f=this.get(s))S&&(b[f.cid]=!0),E&&(a=a===o?o.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),d&&!l&&f.hasChanged(v)&&(l=!0)),e[r]=f;else if(w){o=e[r]=this._prepareModel(a,t);if(!o)continue;g.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o)}x&&x.push(f||o)}if(S){for(r=0,i=this.length;r<i;++r)b[(o=this.models[r]).cid]||y.push(o);y.length&&this.remove(y,t)}if(g.length||x&&x.length){d&&(l=!0),this.length+=g.length;if(c!=null)for(r=0,i=g.length;r<i;r++)this.models.splice(c+r,0,g[r]);else{x&&(this.models.length=0);var T=x||g;for(r=0,i=T.length;r<i;r++)this.models.push(T[r])}}l&&this.sort({silent:!0});if(!t.silent){for(r=0,i=g.length;r<i;r++)(o=g[r]).trigger("add",o,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),e=this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,u.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,u.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return i.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},F(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t=t?u.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(y,function(e){v.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var b=["groupBy","countBy","sortBy"];u.each(b,function(e){v.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var w=o.View=function(e){this.cid=u.uniqueId("view"),e||(e={}),u.extend(this,u.pick(e,S)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},E=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];u.extend(w.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(E),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||j()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&x&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var x=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/,H=/[?#].*$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),u.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(H,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var B=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=v.extend=N.extend=w.extend=O.extend=B;var j=function(){throw new Error('A "url" property or function must be specified')},F=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),pen.define("cdf/backbone",function(){});var Mustache=typeof module!="undefined"&&module.exports||{};(function(e){function a(e){return u.test(e)}function p(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return h[e]||e})}function d(e,t,n,r){r=r||"<template>";var i=t.split("\n"),s=Math.max(n-3,0),o=Math.min(i.length,n+3),u=i.slice(s,o),a;for(var f=0,l=u.length;f<l;++f)a=f+s+1,u[f]=(a===n?" >> ":"    ")+u[f];return e.template=t,e.line=n,e.file=r,e.message=[r+":"+n,u.join("\n"),"",e.message].join("\n"),e}function v(e,t,n){if(e===".")return t[t.length-1];var r=e.split("."),i=r.length-1,s=r[i],o,u,a=t.length,f,l;while(a){l=t.slice(0),u=t[--a],f=0;while(f<i){u=u[r[f++]];if(u==null)break;l.push(u)}if(u&&typeof u=="object"&&s in u){o=u[s];break}}return typeof o=="function"&&(o=o.call(l[l.length-1])),o==null?n:o}function m(e,t,n,r){var i="",u=v(e,t);if(r){if(u==null||u===!1||s(u)&&u.length===0)i+=n()}else if(s(u))o(u,function(e){t.push(e),i+=n(),t.pop()});else if(typeof u=="object")t.push(u),i+=n(),t.pop();else if(typeof u=="function"){var a=t[t.length-1],f=function(e){return S(e,a)};i+=u.call(a,n(),f)||""}else u&&(i+=n());return i}function g(t,n){n=n||{};var r=n.tags||e.tags,i=r[0],s=r[r.length-1],o=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],u=[],l=!1,c=!1,h=function(){if(l&&!c&&!n.space)while(u.length)o.splice(u.pop(),1);else u=[];l=!1,c=!1},p=[],v,m,g,y=function(e){r=f(e).split(/\s+/),m=r[0],g=r[r.length-1]},b=function(e){o.push('";',v,'\nvar partial = partials["'+f(e)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},w=function(e,r){var i=f(e);if(i==="")throw d(new Error("Section name may not be empty"),t,N,n.file);p.push({name:i,inverted:r}),o.push('";',v,'\nvar name = "'+i+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},E=function(e){w(e,!0)},S=function(e){var r=f(e),i=p.length!=0&&p[p.length-1].name;if(!i||r!=i)throw d(new Error('Section named "'+r+'" was never opened'),t,N,n.file);var s=p.pop();o.push('";',"\n    return buffer;","\n  };","\n})();"),s.inverted?o.push("\nbuffer += renderSection(name,stack,callback,true);"):o.push("\nbuffer += renderSection(name,stack,callback);"),o.push('\nbuffer += "')},x=function(e){o.push('";',v,'\nbuffer += lookup("'+f(e)+'",stack,"");','\nbuffer += "')},T=function(e){o.push('";',v,'\nbuffer += escapeHTML(lookup("'+f(e)+'",stack,""));','\nbuffer += "')},N=1,C,k;for(var L=0,A=t.length;L<A;++L)if(t.slice(L,L+i.length)===i){L+=i.length,C=t.substr(L,1),v="\nline = "+N+";",m=i,g=s,l=!0;switch(C){case"!":L++,k=null;break;case"=":L++,s="="+s,k=y;break;case">":L++,k=b;break;case"#":L++,k=w;break;case"^":L++,k=E;break;case"/":L++,k=S;break;case"{":s="}"+s;case"&":L++,c=!0,k=x;break;default:c=!0,k=T}var O=t.indexOf(s,L);if(O===-1)throw d(new Error('Tag "'+i+'" was not closed properly'),t,N,n.file);var M=t.substring(L,O);k&&k(M);var _=0;while(~(_=M.indexOf("\n",_)))N++,_++;L=O+s.length-1,i=m,s=g}else{C=t.substr(L,1);switch(C){case'"':case"\\":c=!0,o.push("\\"+C);break;case"\r":break;case"\n":u.push(o.length),o.push("\\n"),h(),N++;break;default:a(C)?u.push(o.length):c=!0,o.push(C)}}if(p.length!=0)throw d(new Error('Section "'+p[p.length-1].name+'" was not closed properly'),t,N,n.file);h(),o.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var D=o.join("").replace(/buffer \+= "";\n/g,"");return n.debug&&(typeof console!="undefined"&&console.log?console.log(D):typeof print=="function"&&print(D)),D}function y(e,t){var n="view,partials,stack,lookup,escapeHTML,renderSection,render",r=g(e,t),i=new Function(n,r);return function(n,r){r=r||{};var s=[n];try{return i(n,r,s,v,p,m,S)}catch(o){throw d(o.error,e,o.line,t.file)}}}function w(){b={}}function E(e,t){return t=t||{},t.cache!==!1?(b[e]||(b[e]=y(e,t)),b[e]):y(e,t)}function S(e,t,n){return E(e)(t,n)}e.name="mustache.js",e.version="0.5.0-dev",e.tags=["{{","}}"],e.parse=g,e.compile=E,e.render=S,e.clearCache=w,e.to_html=function(e,t,n,r){var i=S(e,t,n);if(typeof r!="function")return i;r(i)};var t=Object.prototype.toString,n=Array.isArray,r=Array.prototype.forEach,i=String.prototype.trim,s;n?s=n:s=function(e){return t.call(e)==="[object Array]"};var o;r?o=function(e,t,n){return r.call(e,t,n)}:o=function(e,t,n){for(var r=0,i=e.length;r<i;++r)t.call(n,e[r],r,e)};var u=/^\s*$/,f;if(i)f=function(e){return e==null?"":i.call(e)};else{var l,c;a(" ")?(l=/^\s+/,c=/\s+$/):(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),f=function(e){return e==null?"":String(e).replace(l,"").replace(c,"")}}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b={}})(Mustache),pen.define("cdf/mustache",function(){}),Object.create||(Object.create=function(){function n(n){e.prototype=n||{};var r=new e;return e.prototype=t,r}var e=function(){},t=e.prototype;return n}()),String.prototype.endsWith||(String.prototype.endsWith=function(e){return this.match(e+"$")==e}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if(typeof i!="object"&&typeof i!="function"||i===null)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)e.call(i,o)&&s.push(o);if(t)for(var u=0;u<r;u++)e.call(i,n[u])&&s.push(n[u]);return s}}()),Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));var i=r>=0?Math.min(r,n-1):n-Math.abs(r);for(;i>=0;i--)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n,r=this.length,i;if(typeof t!="function")throw new TypeError("First argument is not callable");if((r==0||r===null)&&arguments.length<=1)throw new TypeError("Array length is 0 and no second argument");arguments.length<=1?(i=this[0],n=1):i=arguments[1];for(n=n||0;n<r;++n)n in this&&(i=t.call(undefined,i,this[n],n,this));return i}),Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Date.now||(Date.now=function(){return(new Date).valueOf()}),pen.define("cdf/lib/shims",function(){}),function(e){var t=/\+/g,n=/([^&=]+)=+([^&]*)/g,r=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(t," "))};e.parseQuery=function(e,t){var s,o={},u=t||{},a=u.tolerant?r:n;"?"===e.substring(0,1)&&(e=e.substring(1));while(s=a.exec(e))o[i(s[1])]=i(s[2]);return o},e.getQuery=function(t){return e.parseQuery(window.location.search,t)},e.fn.parseQuery=function(t){return e.parseQuery(e(this).serialize(),t)}}(jQuery),pen.define("cdf/uriQueryParser/jquery-queryParser",function(){}),$.ajaxSetup({type:"POST",async:!1,traditional:!0,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=UTF-8",dataFilter:function(e,t){return typeof Dashboards!="undefined"&&(Dashboards.lastServerResponse=Date.now()),e}});var pathArray=window.location.pathname.split("/"),webAppPath;typeof CONTEXT_PATH!="undefined"&&(webAppPath=CONTEXT_PATH),webAppPath==undefined&&(webAppPath="/"+pathArray[1]),webAppPath.endsWith("/")&&(webAppPath=webAppPath.substr(0,webAppPath.length-1)),$.blockUI&&($.blockUI.defaults.fadeIn=0,$.blockUI.defaults.message='<div class="blockUIDefaultImg"></div>',$.blockUI.defaults.css.left="50%",$.blockUI.defaults.css.top="40%",$.blockUI.defaults.css.marginLeft="-16px",$.blockUI.defaults.css.width="32px",$.blockUI.defaults.css.background="none",$.blockUI.defaults.overlayCSS={backgroundColor:"#FFFFFF",opacity:.8,cursor:"wait"},$.blockUI.defaults.css.border="none"),$.prompt&&typeof $.prompt.setDefaults=="function"&&$.prompt.setDefaults({prefix:"jqi",show:"slideDown"}),pen.define("cdf/Dashboards.Startup",function(){}),Array.prototype.map||(Array.prototype.map=function(e){var t=this.length;if(typeof e!="function")throw new TypeError;var n=new Array(t),r=arguments[1];for(var i=0;i<t;i++)i in this&&(n[i]=e.call(r,this[i],i,this));return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Function.prototype.method=Function.prototype.method||function(e,t){return this.prototype[e]=t,this};var wd=wd||{};wd.loglevels=["debug","info","warn","error","exception"],wd.loglevel="debug",wd.log=function(e,t){t=t||"info";if(wd.loglevels.indexOf(t)<wd.loglevels.indexOf(wd.loglevel))return;typeof console!="undefined"&&(t&&console[t]?console[t]("["+t+"] WD: "+e):t==="exception"&&!console.exception?console.error("["+t+"] WD: "+(e.stack||e)):console.log("WD: "+e))},wd.warn=function(e){return wd.log(e,"warn")},wd.error=function(e){return wd.log(e,"error")},wd.info=function(e){return wd.log(e,"info")},wd.debug=function(e){return wd.log(e,"debug")},pen.define("cdf/wd",function(){});var CDF_PLUGIN_NAME="pentaho-cdf",SAMPLES_BASE_PATH="/public/plugin-samples/";wd=wd||{},wd.cdf=wd.cdf||{},wd.cdf.helper={getTimestamp:function(){return"ts="+(new Date).getTime()},getFullPath:function(e,t){e=e||"",t=t||"";var n=e.indexOf(CDF_PLUGIN_NAME)==0?SAMPLES_BASE_PATH+e:e;return n+=(t?"/"+t:"").replace(/\/\//g,"/"),n},composePath:function(e){var t=function(e){return e.charAt(0)=="/"&&(e=e.substring(1,e.length)),e.charAt(e.length-1)=="/"&&(e=e.substring(0,e.length-1)),e},n="/";return e.solution&&(n+=t(e.solution)+"/"),e.path&&(n+=t(e.path)),e.action&&(n+="/"+t(e.action)),n}},wd.cdf.endpoints={getWebapp:function(){return webAppPath},getPing:function(){return wd.cdf.endpoints.getCdfBase()+"/ping"},getXmla:function(){return wd.cdf.endpoints.getWebapp()+"/Xmla"},getPluginBase:function(e){return wd.cdf.endpoints.getWebapp()+"/plugin/"+e+"/api"},getCdfBase:function(){return wd.cdf.endpoints.getPluginBase(CDF_PLUGIN_NAME)},getCdaBase:function(){return wd.cdf.endpoints.getPluginBase("cda")},getPluginEndpoint:function(e,t){return wd.cdf.endpoints.getPluginBase(e)+"/"+t},getStorage:function(e){return wd.cdf.endpoints.getCdfBase()+"/storage/"+e},getSettings:function(e,t){return t?wd.cdf.endpoints.getCdfBase()+"/settings/"+e+"?"+$.param({key:t}):wd.cdf.endpoints.getCdfBase()+"/settings/"+e},getViewAction:function(){return wd.cdf.endpoints.getCdfBase()+"/viewAction"},getJSONSolution:function(){return wd.cdf.endpoints.getCdfBase()+"/getJSONSolution"},getRenderHTML:function(){return wd.cdf.endpoints.getCdfBase()+"/RenderHtml"},getExport:function(){return wd.cdf.endpoints.getCdfBase()+"/Export"},getResource:function(){return wd.cdf.endpoints.getCdfBase()+"/getResource"},getStaticResource:function(e){return wd.cdf.endpoints.getCdfBase()+"/resources/"+e},getCdfXaction:function(e,t,n,r){if(r){var i={};for(var s in r)i[s]=typeof r[s]=="function"?r[s]():r[s];return Encoder.encode(wd.cdf.endpoints.getViewAction(),null,$.extend({path:wd.cdf.helper.getFullPath(e,t),ts:(new Date).getTime()},i))}return Encoder.encode(wd.cdf.endpoints.getViewAction(),null,{path:wd.cdf.helper.getFullPath(e,t),ts:(new Date).getTime()})},getServiceAction:function(e,t,n,r){var i={};return i.wrapper=!1,i.action=r,i.url=Encoder.encode(wd.cdf.endpoints.getWebapp()+"/api/repos/{0}/generatedContent",Encoder.encodeRepositoryPath(wd.cdf.helper.getFullPath(n,r))),i},getComments:function(e){var t="";return e=="LIST_ALL"||e=="LIST_ACTIVE"||e=="GET_LAST"?t="list":e=="DELETE_COMMENT"?t="delete":e=="ARCHIVE_COMMENT"?t="archive":e=="ADD_COMMENT"&&(t="add"),wd.cdf.endpoints.getCdfBase()+"/comments/"+t+"?"+wd.cdf.helper.getTimestamp()},getScheduledJob:function(){return wd.cdf.endpoints.getWebapp()+"/api/scheduler/job"},getEmailConfig:function(){return wd.cdf.endpoints.getWebapp()+"/api/emailconfig"},getPivot:function(e,t,n){var r=t.indexOf(CDF_PLUGIN_NAME)==0?SAMPLES_BASE_PATH+t:t;return Encoder.encode(wd.cdf.endpoints.getWebapp()+"/plugin/jpivot/Pivot",null,{solution:e||"system",path:r,action:n})},getAnalyzer:function(e,t,n){return Encoder.encode(wd.cdf.endpoints.getWebapp()+"/api/repos/{0}/"+t,Encoder.encodeRepositoryPath(wd.cdf.helper.composePath(e)),n)},getReport:function(e,t,n){return typeof e=="string"||e instanceof String?Encoder.encode(wd.cdf.endpoints.getWebapp()+"/api/repos/{0}/"+t,Encoder.encodeRepositoryPath(e),n):Encoder.encode(wd.cdf.endpoints.getWebapp()+"/api/repos/{0}/"+t,Encoder.encodeRepositoryPath(wd.cdf.helper.composePath(e)),n)},getCaptifyZoom:function(){return wd.cdf.endpoints.getStaticResource("js/captify/zoom.html")},getDoQuery:function(){return wd.cdf.endpoints.getCdaBase()+"/doQuery?"},getUnwrapQuery:function(e){return wd.cdf.endpoints.getCdaBase()+"/unwrapQuery?"+$.param(e)}},pen.define("cdf/cdf-base",function(){});var dash,Dashboards=dash={ERROR_CODES:{QUERY_TIMEOUT:{msg:"Query timeout reached"},COMPONENT_ERROR:{msg:"Error processing component"}},CDF_BASE_PATH:wd.cdf.endpoints.getCdfBase(),parameterModel:new Backbone.Model,viewFlags:{UNUSED:"unused",UNBOUND:"unbound",VIEW:"view"},globalContext:!0,escapeParameterValues:!0,_flatParameters:!1,runningCalls:0,components:[],parameters:[],context:{},initCounter:0,legacyPriority:-1e3,logLifecycle:!0,args:[],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],lastServerResponse:Date.now?Date.now():(new Date).valueOf(),serverCheckResponseTimeout:18e5,i18nCurrentLanguageCode:null,i18nSupport:null};_.extend(Dashboards,Backbone.Events),Dashboards.log=function(e,t){typeof console!="undefined"&&(t&&console[t]?console[t]("CDF: "+e):t==="exception"&&!console.exception?console.error(e.stack):console.log("CDF: "+e))},Dashboards.error=function(e){this.log(e,"error")},Dashboards.getWebAppPath=function(){return webAppPath},Dashboards.setGlobalContext=function(e){this.globalContext=e},Dashboards._setFlatParameters=function(e){this._flatParameters=e},Dashboards.showProgressIndicator=function(){$.blockUI&&this.blockUIwithDrag()},Dashboards.hideProgressIndicator=function(e){e&&(this.runningCalls=0),$.unblockUI&&$.unblockUI(),this.showErrorTooltip()},Dashboards.resetRunningCalls=function(){this.runningCalls=0,setTimeout(_.bind(function(){this.hideProgressIndicator()},this),10)},Dashboards.getRunningCalls=function(){return this.runningCalls},Dashboards.incrementRunningCalls=function(){this.runningCalls++,this.showProgressIndicator()},Dashboards.decrementRunningCalls=function(){this.runningCalls--,setTimeout(_.bind(function(){this.runningCalls<=0&&(this.hideProgressIndicator(),this.runningCalls=0)},this),10)},Dashboards.bindControl=function(e){var t=this._getControlClass(e);return t?this._castControlToClass(e,t):this.log("Object type "+e.type+" can't be mapped to a valid class","error"),this.bindExistingControl(e,t)},Dashboards.bindExistingControl=function(e,t){if(!e.dashboard){e.dashboard=this,delete e.initInstance,this._castControlToComponent(e,t),typeof e.off=="function"&&e.off("all"),e.on||$.extend(e,Backbone.Events),this._addLogLifecycleToControl(e);if(e.priority==null||e.priority==="")e.priority=this.legacyPriority++}return e},Dashboards._castControlToClass=function(e,t){if(!(e instanceof t)){var n=this._makeInstance(t);$.extend(e,n)}},Dashboards._getControlClass=function(e){var t=e.type;typeof t=="function"&&(t=t.call(e));var n=t.substring(0,1).toUpperCase()+t.substring(1),r=[n+"Component",t,n];for(var i=0,s=r.length;i<s;i++){var o=window[r[i]];if(o&&typeof o=="function")return o}},Dashboards._makeInstance=function(e,t){var n=Object.create(e.prototype);return t?e.apply(n,t):e.apply(n),n},Dashboards._castControlToComponent=function(e,t){if(!(e instanceof BaseComponent)&&(!t||!(t.prototype instanceof BaseComponent))){var n=BaseComponent.prototype;for(var r in n)if(n.hasOwnProperty(r)&&e[r]===undefined&&typeof n[r]=="function")switch(r){case"base":break;default:e[r]=n[r]}}},Dashboards._addLogLifecycleToControl=function(e){e.on("all",function(e){var t=this.dashboard;if(t&&t.logLifecycle&&e!=="cdf"&&this.name!=="PostInitMarker"&&typeof console!="undefined"){var n,r=e.substr(4);switch(r){case"preExecution":n=">Start";break;case"postExecution":n="<End  ";break;case"error":n="!Error";break;default:n="      "}var i=Mustache.render("Timing: {{elapsedSinceStartDesc}} since start, {{elapsedSinceStartDesc}} since last event",this.splitTimer());console.log("%c          [Lifecycle "+n+"] "+this.name+" ["+this.type+"]"+" (P: "+this.priority+" ): "+r+" "+i+" (Running: "+this.dashboard.runningCalls+")","color: "+this.getLogColor())}})},Dashboards.restoreDuplicates=function(){var e=this.components.filter(function(e){return e.type=="duplicate"}),t={},n=this.getBookmarkState().params||{};Object.keys(n).filter(function(e){return/(_[0-9]+)+$/.test(e)}).map(function(e){var r=e.match(/(.*?)((_[0-9]+)+)$/),i=r[1],s=r[2];return t[s]||(t[s]={}),t[s][i]=n[e],e});var r=this;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];$.each(e,function(e,t){var i;for(i=0;i<t.parameters.length;i++)if(!n.hasOwnProperty(t.parameters[i])&&r.isBookmarkable(t.parameters[i]))return;t.duplicate(n)})}},Dashboards.blockUIwithDrag=function(){typeof this.i18nSupport!="undefined"&&this.i18nSupport!=null&&($.blockUI.defaults.message='<div class="img blockUIDefaultImg" style="padding: 0px;"></div>'),$.blockUI();var e=$('<div id="blockUIDragHandle"></div>');$("div.blockUI.blockMsg").prepend(e),$("div.blockUI.blockMsg").draggable({handle:"#blockUIDragHandle"})},Dashboards.updateLifecycle=function(e){var t=e.lifecycle?!!e.lifecycle.silent:!1;if(e.disabled)return;t||this.incrementRunningCalls();var n=_.bind(function(){try{var n;typeof e.preExecution!="undefined"&&(n=e.preExecution.apply(e)),n=typeof n!="undefined"?!!n:!0,e.trigger("cdf cdf:preExecution",e,n);if(!n)return;e.tooltip!=undefined&&(e._tooltip=typeof e["tooltip"]=="function"?e.tooltip():e.tooltip),e.update!=undefined&&typeof e["update"]=="function"&&(e.update(),this.refreshEngine.processComponent(e)),typeof e.postExecution!="undefined"&&e.postExecution.apply(e),e._tooltip!=undefined&&$("#"+e.htmlObject).attr("title",e._tooltip).tooltip({delay:0,track:!0,fade:250})}catch(r){var i=e.htmlObject?$("#"+e.htmlObject):undefined,s=Dashboards.getErrorObj("COMPONENT_ERROR").msg+" ("+e.name.replace("render_","")+")";this.errorNotification({msg:s},i),this.log("Error updating "+e.name+":","error"),this.log(r,"exception")}finally{t||this.decrementRunningCalls()}e.trigger("cdf cdf:postExecution",e)},this);setTimeout(n,1)},Dashboards.update=function(e){this.updateQueue||(this.updateQueue=[]),this.updateQueue.push(e),this.updateTimeout&&clearTimeout(this.updateTimeout);var t=_.bind(function(){this.updateAll(this.updateQueue),delete this.updateQueue},this);this.updateTimeout=setTimeout(t,5)},Dashboards.updateComponent=function(e){if(Date.now()-Dashboards.lastServerResponse>Dashboards.serverCheckResponseTimeout&&!Dashboards.checkServer())throw Dashboards.hideProgressIndicator(),Dashboards.loginAlert(),"not logged in";e.isManaged===!1&&e.update?(e.update(),this.refreshEngine.processComponent(e)):this.updateLifecycle(e)},Dashboards.getComponentName=function(e){if(!e)return;if(e.name&&typeof e.name=="string")return e.name;if(typeof e=="string")return e},Dashboards.getComponent=dash.getComp=function(e){var t=this.getComponentName(e);if(t)return this.getComponentByName(t)},Dashboards.getComponentByName=function(e){if(!e)return;if(this.globalContext&&window[e])return window[e];for(var t=0,n=this.components,r=n.length;t<r;t++){var i=n[t];if(i&&i.name===e)return i}},Dashboards.addComponents=function(e){if(!$.isArray(e)){this.log("Dashboards.addComponents: components in a structure other than an array will not be added!","warn");return}return e.forEach(function(e){this.addComponent(e)},this),this},Dashboards.addComponent=function(e,t){var n=this.getComponentName(e);return n?(this.removeComponent(n),this.bindControl(e),this.globalContext&&(window[n]=e),t&&t.index&&t.index>-1&&t.index<this.components.length?this.components.splice(t.index,0,e):this.components.push(e),!0):(this.log("Dashboards.addComponent: failed attempting to add a component that has no name!","warn"),!1)},Dashboards.getComponentIndex=function(e){if(e)switch(typeof e){case"string":for(var t=0,n=this.components,r=n.length;t<r;t++)if(n[t].name===e)return t;break;case"number":if(e>=0&&e<this.components.length)return e;break;default:return this.components.indexOf(e)}return-1},Dashboards.removeComponent=function(e){var t=this.getComponentIndex(e);if(t===-1)return;var n=this.components[t].name;if(!n){this.log("Dashboards.removeComponent: failed attempting to remove a component that has no name!","warn");return}this.globalContext&&window[n]&&(window[n]=undefined);var r=null;if(t>=0){var i=this.components;r=i[t],i.splice(t,1),r.dashboard=null,r.off("cdf:postExecution"),r.off("cdf:preExecution"),r.off("cdf:error"),r.off("all")}return r},Dashboards.registerEvent=function(e,t){typeof this.events=="undefined"&&(this.events={}),this.events[e]=t},Dashboards.addArgs=function(e){e!=undefined&&(this.args=getURLParameters(e))},Dashboards.setI18nSupport=function(e,t){t!=="undefined"&&e!=="undefined"&&(this.i18nCurrentLanguageCode=e,this.i18nSupport=t)},Dashboards.init=function(e){var t=this,n=Dashboards.initCounter++;Dashboards.log("InitInstance "+n),n==0&&(this.syncDebugLevel(),this.initialStorage?_.extend(this.storage,this.initialStorage):this.loadStorage(),this.context!=null&&this.context.sessionTimeout!=null&&(Dashboards.serverCheckResponseTimeout=this.context.sessionTimeout*900),this.restoreBookmarkables(),this.restoreView(),this.syncParametersInit()),$.isArray(e)&&this.addComponents(e),_.chain(Dashboards.components).where({initInstance:undefined}).each(function(e){e.initInstance=n}),$(function(){t.initEngine(n)})},Dashboards.syncParameters=function(e,t){this.setParameter(t,this.getParameterValue(e)),this.parameterModel.on("change:"+e,function(e,n,r){this[r.notify?"fireChange":"setParameter"](t,n)},this),this.parameterModel.on("change:"+t,function(t,n,r){this[r.notify?"fireChange":"setParameter"](e,n)},this)},Dashboards.chains=[],Dashboards.syncedParameters={},Dashboards.syncParametersOnInit=function(e,t){var n=this.syncedParameters,r,i,s,o,u;n[e]||(n[e]=[]),n[e].push(t);for(u=0;u<this.chains.length;u++)r=this.chains[u],r.indexOf(e)>-1&&(i=r),r.indexOf(t)>-1&&(s=r,o=u);s&&i?i!=s&&(args=s.slice(),args.unshift(0),args.unshift(i.length),[].splice.apply(i,args),this.chains.splice(o,1)):s?s.unshift(e):i?i.push(t):this.chains.push([e,t])},Dashboards.syncParametersInit=function(){var e=this.syncedParameters,t,n,r,i,s;for(t=0;t<this.chains.length;t++)for(n=0;n<this.chains[t].length;n++){var i=this.chains[t][n];if(!e[i])continue;for(r=0;r<e[i].length;r++)s=e[i][r],this.syncParameters(i,s)}},Dashboards.initEngine=function(e){this.waitingForInit&&this.waitingForInit.length&&this.log("Overlapping initEngine!","warn");var t=this,n=e!=null?_.where(this.components,{initInstance:e}):this.components;(!this.waitingForInit||this.waitingForInit.length===0)&&!this.finishedInit&&this.incrementRunningCalls(),this.logLifecycle&&typeof console!="undefined"&&console.log("%c          [Lifecycle >Start] Init["+e+"] (Running: "+this.getRunningCalls()+")","color: #ddd "),this.createAndCleanErrorDiv(),typeof this.preInit=="function"&&this.preInit(),this.trigger("cdf cdf:preInit",this),$(window).trigger("cdfAboutToLoad");var t=this,r=[],i;for(i=0;i<n.length;i++)n[i].executeAtStart&&r.push(n[i]);if(!r.length){this.handlePostInit();return}var s={name:"PostInitMarker",type:"unmanaged",lifecycle:{silent:!0},executeAtStart:!0,priority:999999999};this.bindControl(s),r.push(s),this.waitingForInit=r.slice();var o=function(t,n){if(arguments.length==2&&n)return;this.waitingForInit=_(this.waitingForInit).without(t),t.off("cdf:postExecution",o),t.off("cdf:preExecution",o),t.off("cdf:error",o),this.handlePostInit(e)};for(var i=0,u=r.length;i<u;i++){var a=r[i];a.on("cdf:postExecution cdf:preExecution cdf:error",o,t)}Dashboards.updateAll(r),n.length>0&&t.handlePostInit(e)},Dashboards.handlePostInit=function(e){(!this.waitingForInit||this.waitingForInit.length===0)&&!this.finishedInit&&(this.trigger("cdf cdf:postInit",this),$(window).trigger("cdfLoaded"),typeof this.postInit=="function"&&this.postInit(),this.restoreDuplicates(),this.finishedInit=!0,this.decrementRunningCalls(),this.logLifecycle&&typeof console!="undefined"&&console.log("%c          [Lifecycle <End  ] Init["+e+"] (Running: "+this.getRunningCalls()+")","color: #ddd "))},Dashboards.debug=1,Dashboards.syncDebugLevel=function(){var e=1;try{var t=function(e){return e&&/\bdebug=true\b/.test(e)?e:null},n=t(window.location.href)||t(window.top.location.href);if(n){var r=/\bdebugLevel=(\d+)/.exec(n);e=r?+r[1]:3}}catch(i){}return this.debug=e},Dashboards.resetAll=function(){this.createAndCleanErrorDiv();var e=this.components.length;for(var t=0,n=this.components.length;t<n;t++)this.components[t].clear();var e=this.components.length;for(var t=0,n=this.components.length;t<n;t++)this.components[t].executeAtStart&&this.update(this.components[t])},Dashboards.processChange=function(e){var t=this.getComponentByName(e),n=t.parameter,r;typeof t["getValue"]=="function"&&(r=t.getValue());if(r==null)return;if(typeof t.preChange!="undefined"){var i=t.preChange(r);r=i!=undefined?i:r}n&&this.fireChange(n,r),typeof t.postChange!="undefined"&&t.postChange(r)},Dashboards.fireChange=function(e,t){var n=this;this.createAndCleanErrorDiv(),this.setParameter(e,t,!0);var r=[],i=!1;for(var s=0,o=this.components.length;s<o;s++)if($.isArray(this.components[s].listeners))for(var u=0;u<this.components[s].listeners.length;u++){var a=this.components[s];if(a.listeners[u]==e&&!a.disabled){r.push(a);break}}n.updateAll(r)},Dashboards.othersAwaitExecution=function(e,t){if(!e||!t||!t.components)return!1;e[t.priority]=_.difference(e[t.priority],t.components);var n=this.getFirstTier(e);return!n||!n.components||n.components.length==0?!1:parseInt(n.priority)>parseInt(t.priority)?!1:!0},Dashboards.updateAll=function(e){this.updating||(this.updating={tiers:{},current:null});if(e&&_.isArray(e)&&!_.isArray(e[0])){var t={};_.each(e,function(e){if(e){var n=e.priority||0;t[n]||(t[n]=[]),t[n].push(e)}}),e=t}this.mergePriorityLists(this.updating.tiers,e);var n=this.updating.current,r=!1;if(n===null||n.components.length==0||(r=this.othersAwaitExecution(_.clone(this.updating.tiers),this.updating.current))){var i=this.getFirstTier(this.updating.tiers);if(!i)return;if(r){var s=this.updating.tiers;s[n.priority]=_.difference(s[n.priority],n.components),i.components=_.union(s[n.priority],this.getFirstTier(s).components)}this.updating.current=i;var o=function(e,t){if(arguments.length==2&&typeof t=="boolean"&&t)return;e.off("cdf:postExecution",o),e.off("cdf:preExecution",o),e.off("cdf:error",o);var n=this.updating.current;n.components=_.without(n.components,e);var r=this.updating.tiers;r[n.priority]=_.without(r[n.priority],e),this.updateAll()},t=this.updating.current.components.slice();for(var u=0;u<t.length;u++)component=t[u],component.startTimer(),component.on("cdf:postExecution cdf:preExecution cdf:error",o,this),this.updateComponent(component)}},Dashboards.getFirstTier=function(e){var t=_.keys(e).sort(function(e,t){return parseInt(e,10)-parseInt(t,10)}),n;for(var r=0;r<t.length;r++){n=e[t[r]];if(n.length>0)return{priority:t[r],components:n.slice()}}return null},Dashboards.mergePriorityLists=function(e,t){if(!t)return;for(var n in t)t.hasOwnProperty(n)&&(_.isArray(e[n])?e[n]=_.union(e[n],t[n]):e[n]=t[n])},Dashboards.restoreView=function(){var e,t;if(!this.view)return;t=JSON.parse(Base64.decode(this.view.params));for(e in t)t.hasOwnProperty(e)&&this.setParameter(e,t[e])},Dashboards.setParameterViewMode=function(e,t){this.viewParameters||(this.viewParameters={}),arguments.length===1&&(t=this.viewFlags.VIEW),this.viewParameters[e]=t},Dashboards.isViewParameter=function(e){return this.viewParameters?this.viewParameters[e]:!1},Dashboards.getViewParameters=function(){if(!this.viewParameters)return{};var e=this.viewParameters,t={};for(var n in e)e.hasOwnProperty(n)&&(e[n]==this.viewFlags.VIEW||e[n]==this.viewFlags.UNBOUND)&&(t[n]=this.getParameterValue(n));return t},Dashboards.getUnboundParameters=function(){if(!this.viewParameters)return[];var e=this.viewParameters,t=[];for(var n in e)if(e.hasOwnProperty(n))return e[n]==this.viewFlags.UNBOUND&&t.push(n),t},Dashboards._getParameterStore=function(){return this.globalContext?window:this.parameters},Dashboards._isParameterInModel=function(e){return this._getValueFromContext(this._getParameterStore(),e)!==undefined},Dashboards._getValueFromContext=function(e,t){if(!e)return;if(this._flatParameters)return e[t];if(t!=null){var n,r;if(t instanceof Array)n=t;else{if(t.indexOf(".")<0)return e[t];n=t.split(".")}r=n.length;for(var i=0;i<r;i++){if(!e)return;var s=n[i],o=e[s];if(o===undefined)return;e=o}}return e},Dashboards._setValueInContext=function(e,t,n){if(!e||t==null||n===undefined)return;if(this._flatParameters)e[t]=n;else{var r,i;if(t instanceof Array)r=t,i=r.pop();else{if(t.indexOf(".")<0)return e[t]=n,e;r=t.split("."),i=r.pop()}e=this._getValueFromContext(e,r),e&&(e[i]=n)}return e},Dashboards.addParameter=function(e,t){return this._isParameterInModel(e)&&(t=this.getParameterValue(e)),this.setParameter(e,t),t},Dashboards.getParameterValue=dash.getParam=function(e){return this._getValueFromContext(this._getParameterStore(),e)},Dashboards.setParameter=dash.setParam=function(e,t,n){if(e==undefined||e=="undefined"||e==""){this.log("Dashboards.setParameter: trying to set undefined or empty string as parameter name!!","warn");return}var r;!this.globalContext&&this.escapeParameterValues?r=encode_prepare_arr(t):r=t;if(this._setValueInContext(this._getParameterStore(),e,r)!==undefined)return this.parameterModel.set(e,r,{notify:n}),this.persistBookmarkables(e),r},Dashboards.post=function(e,t){var n='<form action="'+e+'" method="post">';for(var r in t){var i=typeof t[r]=="function"?t[r]():t[r];typeof i=="string"&&(i=i.replace(/"/g,"'")),n+='"<input type="hidden" name="'+r+'" value="'+i+'"/>'}n+="</form>",jQuery(n).appendTo("body").submit().remove()},Dashboards.clone=function(t){var n=t instanceof Array?[]:{};for(var r in t){var i=t[r];if(typeof i=="object")if(i instanceof Array){n[r]=[];for(var s=0;s<i.length;s++)typeof i[s]!="object"?n[r].push(i[s]):n[r].push(this.clone(i[s]))}else n[r]=this.clone(i);else n[r]=i}return n},Dashboards.getArgValue=function(e){for(i=0;i<this.args.length;i++)if(this.args[i][0]==e)return this.args[i][1];return undefined},Dashboards.ev=function(e){return typeof e=="function"?e():e},Dashboards.storage={},Dashboards.loadStorage=function(){var e=this;if(this.context&&this.context.user==="anonymousUser")return;var t={action:"read",_:(new Date).getTime()};$.ajax({type:"GET",dataType:"json",url:wd.cdf.endpoints.getStorage(t.action),data:t,async:!0,xhrFields:{withCredentials:!0}}).done(function(t){$.extend(e.storage,t)})},Dashboards.saveStorage=function(){var e=this;if(this.context&&this.context.user==="anonymousUser")return;var t={action:"store",storageValue:JSON.stringify(this.storage),_:(new Date).getTime()};$.ajax({type:"GET",dataType:"json",url:wd.cdf.endpoints.getStorage(t.action),data:t,async:!0,xhrFields:{withCredentials:!0}}).done(function(t){t.result!=1&&e.log("Error saving storage","error")})},Dashboards.cleanStorage=function(){var e=this;this.storage={};if(this.context&&this.context.user==="anonymousUser")return;var t={action:"delete"};$.ajax({type:"GET",dataType:"json",url:wd.cdf.endpoints.getStorage(t.action),data:t,async:!0,xhrFields:{withCredentials:!0}}).done(function(t){t.result!=1&&e.log("Error deleting storage","error")})},pen.define("cdf/Dashboards.Main",function(){}),function(e){function t(){function t(t,n){if(!t)throw new Error("Argument 'type' is required.");if(typeof t!="string")throw new Error("Argument 'type' must be a string.");var r=e[t];if(!n&&(!r||o(r)))throw new Error("There are no registrations for type '"+t+"'.");return r}function i(e,n,r){var i,s=t(e,r);if(s){i=s[n||""];if(!i&&!r)throw new Error("There is no registration for type '"+e+"'"+(n?" and name '"+n+"'":"")+".")}return i}function s(e,t,n,r,s){typeof t!="string"&&(n=t,t="");var o=i(e,t,s);return n?r=!0:r||(n={}),o?o.build(n,r):null}function u(e,n){var r=t(e,n),i=[];for(var s in r)i.push(r[s].build({},!1));return i}this.register=function(t,i,s,o){if(!t)throw new Error("Argument 'type' is required.");if(typeof t!="string")throw new Error("Argument 'type' must be a string.");i!=null&&(typeof i!="string"?(o=s,s=i,i=null):i||(i=null));if(!s)throw new Error("Argument 'what' is required.");var u;switch(typeof s){case"function":u=new n(this,s,o);break;case"object":u=new r(this,s,o);break;default:throw new Error("Argument 'what' is of an invalid type.")}i||(i="");var a=e[t]||(e[t]={}),f=a[i];f&&f.dispose(),a[i]=u},this.has=function(e,t){return!!i(e,t,!0)},this.canNew=function(e,t){return i(e,t,!1)instanceof n},this.get=function(e,t){return s(e,t,null,!1,!1)},this.tryGet=function(e,t){return s(e,t,null,!1,!0)},this.getNew=function(e,t,n){return s(e,t,n,!0,!1)},this.tryGetNew=function(e,t,n){return s(e,t,n,!0,!0)},this.getAll=function(e){return u(e,!1)},this.tryGetAll=function(e){return u(e,!0)},this.listType=function(e){return t(e,!1)},this.tryListType=function(e){return t(e,!0)},this.dispose=function(){if(e){for(var t in e){var n=e[t];for(var r in n)n[r].dispose()}e=null}};var e={}}function n(e,t,n){var r;n||(n="instance"),this.build=function(i,s){if(r&&!s)return r;var o=t(e,i);return!s&&n==="singleton"&&(r=o),o},this.dispose=function(){r&&(i(r),r=null)}}function r(e,t,n){n||(n="external"),this.build=function(){return t},this.dispose=function(){t&&(n==="singleton"&&i(t),t=null)}}function i(e){typeof e.dispose=="function"&&e.dispose()}function o(e){for(var t in e)if(s.call(e,t))return!1;return!0}var s=Object.prototype.hasOwnProperty;e.Container=t}(Dashboards),function(e){function t(t){function s(e,t){t=t||{},l(e,t.reader),c(e,t.writer),h(e,t.validator)}function o(e){return n(i._interfaces,e,"reader",i._libraries.mappers.identity)}function u(e){return n(i._interfaces,e,"writer",i._libraries.mappers.identity)}function a(e){return n(i._interfaces,e,"validator",i._libraries.predicates.tautology)}function f(e){return n(i._options,e,"value")}function l(e,t){var n=i._libraries.mappers;return t=_.isFunction(t)&&t||_.isString(t)&&n[t]||o(e)||n.identity,r(i._interfaces,e,"reader",t)}function c(e,t){var n=i._libraries.mappers;return t=_.isFunction(t)&&t||_.isString(t)&&n[t]||u(e)||n.identity,r(i._interfaces,e,"writer",t)}function h(e,t){var n=i._libraries.predicates;return t=_.isFunction(t)&&t||_.isString(t)&&n[t]||a(e)||n.tautology,r(i._interfaces,e,"validator",t)}function p(e,t){return r(i._options,e,"value",t)}var i=this;this._options={},this._interfaces={},this._libraries={predicates:{tautology:function(e){return!0},isFunction:_.isFunction,isPositive:function(e){return _.isNumber(e)&&e>0},isObjectOrPropertiesArray:function(e){return _.isArray(e)||_.isObject(e)},isObject:_.isObject,isArray:_.isArray},mappers:{identity:_.identity,propertiesObject:function(t){return _.isArray(t)?e.propertiesArrayToObject(t):t}}},this.mixin=function(e){e.getOption=this.getOption,e.setOption=this.setOption},this.init=function(e,t,n){var r=this;e=$.extend(!0,{},e),t=$.extend(!0,{},t),this._libraries=$.extend(!0,{},this._libraries,n),_.each(t,function(e,t){s(t,e)}),_.each(e,function(e,n){var r=t&&t[n]||{};s(n,r),p(n,e)})},this.setOption=function(e,t,n){s(e,n);var r=o(e),i=a(e);if(i(t))return t=r(t),p(e,t),!0;throw new Error("Invalid Option "+e.charAt(0).toUpperCase()+e.slice(1))},this.getOption=function(e){var t=u(e),n=f(e);return t(n)},this.init(t.defaults,t.interfaces,t.libraries)}function n(e,t,n,r){var i=r||undefined;return e&&e[t]&&e[t].hasOwnProperty(n)&&(i=e[t][n]),i}function r(e,t,n,r){e&&t&&n&&(e[t]=e[t]||{},e[t][n]=r)}e.OptionsManager=t}(Dashboards),function(e){var t=Base;e.getBaseQuery=function(){return t},e.setBaseQuery=function(e){_.isFunction(e)&&e.extend&&(t=e)},e.queryFactories=new e.Container,e.registerQuery=function(e,t){var n=this.getBaseQuery();if(!_.isFunction(t)&&_.isObject(t)){var r={};_.each(n.prototype.deepProperties,function(e){r[e]=_.extend({},n.prototype[e],t[e])})}var i=_.isFunction(t)&&t||_.isObject(t)&&n.extend(_.extend({},t,r));this.queryFactories.register("Query",e,function(e,t){return new i(t)})},e.hasQuery=function(e){return Boolean(this.queryFactories&&this.queryFactories.has("Query",e))},e.detectQueryType=function(e){if(e){var t=e.queryType?e.queryType:e.query?"legacy":e.path&&e.dataAccessId?"cda":undefined;return e.queryType=t,this.hasQuery(t)?t:undefined}},e.getQuery=function(e,t){_.isUndefined(e)?e="cda":_.isObject(e)&&(t=e,e=t.queryType||"cda");var n=this.queryFactories.getNew("Query",e,t);return n},e.listQueries=function(){return _.keys(this.queryFactories.listType("Query"))}}(Dashboards),Query=function(e,t){var n,r;_.isObject(e)?(n=$.extend(!0,{},e),r=_.isString(e.queryType)&&e.queryType||!_.isUndefined(e.query)&&"legacy"||!_.isUndefined(e.path)&&!_.isUndefined(e.dataAccessId)&&"cda"||undefined):_.isString(e)&&_.isString(t)&&(r="cda",n={path:e,dataAccessId:t});if(!r)throw"InvalidQuery";return Dashboards.getQuery(r,n)},pen.define("cdf/Dashboards.Query",function(){}),function(e){e.addIns=new e.Container,e.normalizeAddInKey=function(e,t){return e.indexOf("Component",e.length-"Component".length)!==-1&&(e=e.substring(0,e.length-"Component".length)),e=e.charAt(0).toUpperCase()+e.substring(1),t&&(e+="."+t),e},e.registerAddIn=function(e,t,n){var e=this.normalizeAddInKey(e,t),r=n.getName?n.getName():null;this.addIns.register(e,r,n)},e.hasAddIn=function(e,t,n){var e=this.normalizeAddInKey(e,t);return Boolean(this.addIns&&this.addIns.has(e,n))},e.getAddIn=function(e,t,n){var e=this.normalizeAddInKey(e,t);try{var r=this.addIns.get(e,n);return r}catch(i){return null}},e.setAddInDefaults=function(e,t,n,r){var i=this.getAddIn(e,t,n);i&&i.setDefaults(r)},e.listAddIns=function(e,t){var e=this.normalizeAddInKey(e,t),n=[];try{return this.addIns.listType(e)}catch(r){return[]}}}(Dashboards),Dashboards.safeClone=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[1]||{},u=2),typeof o!="object"&&!jQuery.isFunction(o)&&(o={});for(;u<a;u++)if((e=arguments[u])!=null)for(t in e)if(e.hasOwnProperty(t)){n=o[t],r=e[t];if(o===r)continue;f&&r&&(jQuery.isPlainObject(r)||(i=jQuery.isArray(r)))?(i?(i=!1,s=n&&jQuery.isArray(n)?n:[]):s=n&&jQuery.isPlainObject(n)?n:{},o[t]=this.safeClone(f,s,r)):r!==undefined&&(o[t]=r)}return o},pen.define("cdf/Dashboards.AddIns",function(){}),Dashboards.getHashValue=function(e){var t=window.location.hash,n;try{n=JSON.parse(t.slice(1))}catch(r){n={}}return arguments.length===0?n:n[e]},Dashboards.setHashValue=function(e,t){var n=this.getHashValue(),r;arguments.length==1?n=e:n[e]=t,r=JSON.stringify(n),r!="{}"?window.location.hash=r:window.location.hash&&(window.location.hash="")},Dashboards.deleteHashValue=function(e){var t=this.getHashValue();arguments.length===0?window.location.hash="":(delete t[e],this.setHashValue(t))},Dashboards.setBookmarkable=function(e,t){this.bookmarkables||(this.bookmarkables={}),arguments.length===1&&(t=!0),this.bookmarkables[e]=t},Dashboards.isBookmarkable=function(e){return this.bookmarkables?Boolean(this.bookmarkables[e]):!1},Dashboards.generateBookmarkState=function(){var e={},t=this.bookmarkables;for(var n in t)t.hasOwnProperty(n)&&t[n]&&(e[n]=this.getParameterValue(n));return e},Dashboards.persistBookmarkables=function(e){var t=this.bookmarkables,n={};if(!t||!t[e])return;if(!this.finishedInit)return;n=this.generateBookmarkState(),this.setBookmarkState({impl:"client",params:n})},Dashboards.setBookmarkState=function(e){if(window.history&&window.history.replaceState){var t=window.location.pathname.split("/").pop(),n=window.location.search.slice(1).split("&").map(function(e){var t=e.split("=");return t[1]=decodeURIComponent(t[1]),t}),r;n=this.propertiesArrayToObject(n),n.bookmarkState=JSON.stringify(e),r=t+"?"+$.param(n),window.history.replaceState({},"",r),this.deleteHashValue("bookmark")}else this.setHashValue("bookmark",e)},Dashboards.getBookmarkState=function(){if(window.location.hash.length>1)try{return this.getHashValue("bookmark")||{}}catch(e){}var t=window.location.search.slice(1).split("&").map(function(e){var t=e.split("=");return t[1]=decodeURIComponent(t[1]),t}),n=this.propertiesArrayToObject(t);return n.bookmarkState?JSON.parse(decodeURIComponent(n.bookmarkState.replace(/\+/g," ")))||{}:{}},Dashboards.restoreBookmarkables=function(){var e;this.bookmarkables=this.bookmarkables||{};try{e=this.getBookmarkState().params;for(var t in e)e.hasOwnProperty(t)&&this.setParameter(t,e[t])}catch(n){this.log(n,"error")}},pen.define("cdf/Dashboards.Bookmarks",function(){}),Dashboards.callPentahoAction=function(e,t,n,r,i,s){var o=this;return typeof s=="function"?this.pentahoAction(t,n,r,i,function(t){s(o.parseXActionResult(e,t))}):this.parseXActionResult(e,this.pentahoAction(t,n,r,i,s))},Dashboards.urlAction=function(e,t,n){return this.executeAjax("xml",e,t,n)},Dashboards.executeAjax=function(e,t,n,r){var i=this;if(typeof r=="function")return $.ajax({url:t,type:"POST",dataType:e,async:!0,data:n,complete:function(e,t){typeof e.responseXML=="undefined"?r(jQuery.parseXML(e.responseText)):r(e.responseXML)},error:function(e,t,n){i.log("Found error: "+e+" - "+t+", Error: "+n,"error")}});var s=$.ajax({url:t,type:"POST",dataType:e,async:!1,data:n,error:function(e,t,n){i.log("Found error: "+e+" - "+t+", Error: "+n,"error")}});return e=="xml"?typeof s.responseXML=="undefined"?jQuery.parseXML(s.responseText):s.responseXML:s.responseText},Dashboards.pentahoAction=function(e,t,n,r,i){return this.pentahoServiceAction("ServiceAction","xml",e,t,n,r,i)},Dashboards.pentahoServiceAction=function(e,t,n,r,i,s,o){var u=wd.cdf.endpoints.getServiceAction(e,n,r,i),a=u.url;return delete u.url,$.each(s,function(e,t){u[t[0]]=t[1]}),this.executeAjax(t,a,u,o)},Dashboards.CDF_ERROR_DIV="cdfErrorDiv",Dashboards.createAndCleanErrorDiv=function(){$("#"+Dashboards.CDF_ERROR_DIV).length==0&&$("body").append("<div id='"+Dashboards.CDF_ERROR_DIV+"'></div>"),$("#"+Dashboards.CDF_ERROR_DIV).empty()},Dashboards.showErrorTooltip=function(){$(function(){$.tooltip&&$(".cdf_error").tooltip({delay:0,track:!0,fade:250,showBody:" -- "})})},Dashboards.parseXActionResult=function(e,t){var n=$(t),r=n.find("SOAP-ENV\\:Fault");if(r.length==0)return n;var i="Error executing component "+e.name,s=new Array;s[0]=" Error details for component execution "+e.name+" -- ",s[1]=r.find("SOAP-ENV\\:faultstring").find("SOAP-ENV\\:Text:eq(0)").text(),r.find("SOAP-ENV\\:Detail").find("message").each(function(){s.push($(this).text())}),s.length>8&&(s=s.slice(0,7),s.push("..."));var o="<table class='errorMessageTable' border='0'><tr><td class='errorIcon'></td><td><span class='cdf_error' title=\""+s.join("<br/>").replace(/"/g,"'")+'" >'+i+" </span></td></tr></table/>";return e.visible==0?$("#"+Dashboards.CDF_ERROR_DIV).append("<br />"+o):$("#"+e.htmlObject).html(o),null},Dashboards.setSettingsValue=function(e,t){var n={method:"set",key:e,value:JSON.stringify(t)};$.post(wd.cdf.endpoints.getSettings("set",null),n,function(){})},Dashboards.getSettingsValue=function(e,t){var n=typeof t=="function"?t:function(e){t=e};$.getJSON(wd.cdf.endpoints.getSettings("get",e),n)},Dashboards.fetchData=function(e,t,n){this.log("Dashboards.fetchData() is deprecated. Use Query objects instead","warn");if(e!=undefined&&e.dataAccessId!=undefined){for(var r in t)e["param"+t[r][0]]=this.getParameterValue(t[r][1]);$.post(wd.cdf.endpoints.getDoQuery(),e,function(e){n(e)},"json").error(Dashboards.handleServerError)}else if(e!=undefined){var i=e.queryType=="cda"?"jtable-cda.xaction":"jtable.xaction";$.post(wd.cdf.endpoints.getCdfXaction("pentaho-cdf/actions",i),e,function(e){n(e.values)},"json")}else n([])},pen.define("cdf/Dashboards.Legacy",function(){}),Dashboards.getErrorObj=function(e){return Dashboards.ERROR_CODES[e]||{}},Dashboards.parseServerError=function(e,t,n){var r={},i=[{match:/Query timeout/,msg:Dashboards.getErrorObj("QUERY_TIMEOUT").msg}];r.error=n,r.msg=Dashboards.getErrorObj("COMPONENT_ERROR").msg;var s=$("<div/>").html(e.responseText).find("h1").text();return _.find(i,function(e){return s.match(e.match)?(r.msg=e.msg,!0):!1}),r.errorStatus=t,r},Dashboards.handleServerError=function(){var e=Dashboards.parseServerError.apply(this,arguments);Dashboards.errorNotification(e),Dashboards.trigger("cdf cdf:serverError",this),Dashboards.resetRunningCalls()},Dashboards.errorNotification=function(e,t){t?wd.cdf.notifications.component.render($(t),{title:e.msg,desc:""}):wd.cdf.notifications.growl.render({title:e.msg,desc:""})},Dashboards.loginAlert=function(e){var t={header:"Warning",desc:"You are no longer logged in or the connection to the server timed out",button:"Click to reload this page",callback:function(){window.location.reload(!0)}};t=_.extend({},t,e),wd.cdf.popups.okPopup.show(t),this.trigger("cdf cdf:loginError",this)},Dashboards.checkServer=function(){var e=!1;return $.ajax({type:"POST",async:!1,dataType:"json",url:wd.cdf.endpoints.getPing(),success:function(t){t&&t.ping=="ok"?e=!0:e=!1},error:function(){e=!1}}),e};var wd=wd||{};wd.cdf=wd.cdf||{},wd.cdf.popups=wd.cdf.popups||{},wd.cdf.popups.okPopup={template:Mustache.compile("<div class='cdfPopup'>  <div class='cdfPopupHeader'>{{{header}}}</div>  <div class='cdfPopupBody'>    <div class='cdfPopupDesc'>{{{desc}}}</div>    <div class='cdfPopupButton'>{{{button}}}</div>  </div></div>"),defaults:{header:"Title",desc:"Description Text",button:"Button Text",callback:function(){return!0}},$el:undefined,show:function(e){(e||this.firstRender)&&this.render(e),this.$el.show()},hide:function(){this.$el.hide()},render:function(e){var t=_.extend({},this.defaults,e),n=this;this.firstRender&&(this.$el=$("<div/>").addClass("cdfPopupContainer").hide().appendTo("body"),this.firstRender=!1),this.$el.empty().html(this.template(t)),this.$el.find(".cdfPopupButton").click(function(){t.callback(),n.hide()})},firstRender:!0},wd.cdf.notifications=wd.cdf.notifications||{},wd.cdf.notifications.component={template:Mustache.compile("<div class='cdfNotification component {{#isSmallComponent}}small{{/isSmallComponent}}'>  <div class='cdfNotificationBody'>    <div class='cdfNotificationImg'>&nbsp;</div>    <div class='cdfNotificationTitle' title='{{title}}'>{{{title}}}</div>    <div class='cdfNotificationDesc' title='{{desc}}'>{{{desc}}}</div>  </div></div>"),defaults:{title:"Component Error",desc:"Error processing component."},render:function(e,t){var n=_.extend({},this.defaults,t);n.isSmallComponent=$(e).width()<300,$(e).empty().html(this.template(n));var r=$(e).find(".cdfNotification");r.css({"line-height":r.height()+"px"})}},wd.cdf.notifications.growl={template:Mustache.compile("<div class='cdfNotification growl'>  <div class='cdfNotificationBody'>    <h1 class='cdfNotificationTitle' title='{{title}}'>{{{title}}}</h1>    <h2 class='cdfNotificationDesc' title='{{desc}}'>{{{desc}}}</h2>  </div></div>"),defaults:{title:"Title",desc:"Default CDF notification.",timeout:4e3,onUnblock:function(){return!0},css:{position:"absolute",width:"100%",top:"10px"},showOverlay:!1,fadeIn:700,fadeOut:1e3,centerY:!1},render:function(e){var t=this;t.firstRender&&(t.defaults.css=$.extend({},$.blockUI.defaults.growlCSS,t.defaults.css));var n=_.extend({},t.defaults,e),r=$(t.template(n)),i=n.onUnblock;n.message=r,n.onUnblock=function(){t.$el.hide(),i.call(this)},t.firstRender&&(t.$el=$("<div/>").addClass("cdfNotificationContainer").hide().appendTo("body"),t.firstRender=!1),t.$el.show().block(n)},firstRender:!0},pen.define("cdf/Dashboards.Notifications",function(){}),Dashboards.RefreshEngine=function(){var e=0,t=new Array,n=null,r=e,s=null;Dashboards.RefreshEngine.QueueItem=function(){return{nextRefresh:0,component:null}};var o=function(t){s!=null&&(clearInterval(s),s=null),r=t>0?t:e,r!=e&&(s=setInterval("Dashboards.refreshEngine.fireGlobalRefresh()",r*1e3))},u=function(e){for(var n=0;n<t.length;n++)t[n].component==e&&(t.splice(n,1),n--)},a=function(){t.length>0&&t.splice(0,t.length)},f=function(e,t){var n=e.length-1,r=0,i;while(r<=n){i=parseInt((r+n)/2);if(e[i].nextRefresh>t.nextRefresh)n=i-1;else{if(!(e[i].nextRefresh<t.nextRefresh))return i;r=i+1}}return r},l=function(e,t){var n=f(e,t);e.splice(n,0,t)},c=function(){n!=null&&(clearTimeout(n),n=null)},h=function(){c(),Dashboards.refreshEngine.fireRefresh()},p=function(){var e=new Date;return e.getTime()},d=function(e){return t.length>0&&t[0].component==e},v=function(e){Dashboards.update(e)},m=function(n){var r=p();n.refreshPeriod>0||(n.refreshPeriod=e);if(n.refreshPeriod!=e){var i=new Dashboards.RefreshEngine.QueueItem;i.nextRefresh=r+n.refreshPeriod*1e3,i.component=n,l(t,i)}};return{registerComponent:function(t,n){if(!t)return!1;t.refreshPeriod=n>0?n:e;var r=d(t);return u(t),r&&h(),!0},getRefreshPeriod:function(t){return t&&t.refreshPeriod>0?t.refreshPeriod:e},processComponent:function(e){return u(e),m(e),d(e)&&h(),!0},processComponents:function(){a();for(var e=0;e<Dashboards.components.length;e++)m(Dashboards.components[e]);return h(),!0},fireRefresh:function(){n=null;var e=p();while(t.length>0&&t[0].nextRefresh<=e){var r=t.shift();v(r.component)}t.length>0&&(n=setTimeout("Dashboards.refreshEngine.fireRefresh()",t[0].nextRefresh-e))},fireGlobalRefresh:function(){for(i=0;i<Dashboards.components.length;i++){var e=Dashboards.components[i];!(e.refreshPeriod>0)&&e.type!="select"&&v(e)}},setGlobalRefresh:function(e){o(e)},getQueue:function(){return t}}},Dashboards.refreshEngine=new Dashboards.RefreshEngine,pen.define("cdf/Dashboards.RefreshEngine",function(){}),Dashboards.escapeHtml=function(e){var t=/&#([0-9][0-9]?[0-9]?[0-9]?);/,n=/&([a-zA-Z]+);/,r=/&#x[A-F0-9][A-F0-9];/;if(t.test(e)||n.test(e)||r.test(e))return e;var i=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;");return i},Dashboards.getPathParameter=function(e){e=e||window.location.pathname,e=decodeURIComponent(e);var t=e.match("/:(.[^/]+)(.*)/");if(t.length>1)return(":"+t[1]).replace(/:/g,"/")},Dashboards.getLocationSearchString=function(){return window.location.search},function(e){function n(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[r[0]]=r[1]}return t}function r(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t}var t=undefined;e.getQueryParameter=function(e){if(t===undefined){var n=this.getLocationSearchString();t=$.parseQuery(n)}return t[e]||""},e.propertiesArrayToObject=function(e){return _.isArray(e)&&n(e)||_.isObject(e)&&e||undefined},e.objectToPropertiesArray=function(e){return _.isArray(e)&&e||_.isObject(e)&&r(e)||undefined}}(Dashboards),Dashboards.eachValuesArray=function(e,t,n,r){typeof t=="function"&&(r=n,n=t,t=null);var i=!!t&&!!t.valueAsId;for(var s=0,o=0,u=e.length;s<u;s++){var a=e[s];if(a&&a.length){var f=a[0],l,c,h=undefined;a.length>1?(i&&(h=f),c=""+a[1],l=i||f==null?c:""+f):l=c=""+f;if(n.call(r,l,c,h,o,s)===!1)return!1;o++}}return!0},Dashboards.parseMultipleValues=function(e){if(e!=null&&e!==""){if(this.isArray(e))return e;if(typeof e=="string")return e.split("|")}return null},Dashboards.normalizeValue=function(e){return e===""||e==null?null:this.isArray(e)&&!e.length?null:e},Dashboards.isArray=function(e){return!!e&&(e instanceof Array||typeof e=="object"&&e.join&&e.length!=null)},Dashboards.equalValues=function(e,t){e=this.normalizeValue(e),t=this.normalizeValue(t);if(e===t)return!0;if(this.isArray(e)&&this.isArray(t)){var n=e.length;if(n!==t.length)return!1;while(n--)if(!this.equalValues(e[n],t[n]))return!1;return!0}return e==t},Dashboards.hsvToRgb=function(e,t,n){n/=100,t/=100;var r=e%360/60,i=n*t,s=n-i,o=Math.abs(r%2-1),u=n*(1-t*o),a=n,f;switch(~~r){case 0:f=[a,u,s];break;case 1:f=[u,a,s];break;case 2:f=[s,a,u];break;case 3:f=[s,u,a];break;case 4:f=[u,s,a];break;case 5:f=[a,s,u]}return f.forEach(function(e,t){f[t]=Math.min(255,Math.round(e*256))}),"rgb("+f.join(",")+")"};var Utf8={encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},decode:function(e){var t="",n=0,r=0,i=0,s=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|i&63),n+=2):(i=e.charCodeAt(n+1),s=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63),n+=3);return t}};sprintfWrapper={init:function(){if(typeof arguments=="undefined")return null;if(arguments.length<1)return null;if(typeof arguments[0]!="string")return null;if(typeof RegExp=="undefined")return null;var e=arguments[0],t=new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),n=new Array,r=new Array,i=0,s=0,o=0,u=0,a="",f=null;while(f=t.exec(e)){f[9]&&(i+=1),s=u,o=t.lastIndex-f[0].length,r[r.length]=e.substring(s,o),u=t.lastIndex;var l=parseInt(arguments[i])<0;l||(l=parseFloat(arguments[i])<0),n[n.length]={match:f[0],left:f[3]?!0:!1,sign:f[4]||"",pad:f[5]||" ",min:f[6]||0,precision:f[8],code:f[9]||"%",negative:l,argument:String(arguments[i])}}r[r.length]=e.substring(u);if(n.length==0)return e;if(arguments.length-1<i)return null;f=null;var c=null;for(c=0;c<n.length;c++){var h=n[c],p;h.code=="%"?p="%":h.code=="b"?(h.argument=String(Math.abs(parseInt(h.argument)).toString(2)),p=sprintfWrapper.convert(h,!0)):h.code=="c"?(h.argument=String(String.fromCharCode(parseInt(Math.abs(parseInt(h.argument))))),p=sprintfWrapper.convert(h,!0)):h.code=="d"?(h.argument=toFormatedString(String(Math.abs(parseInt(h.argument)))),p=sprintfWrapper.convert(h)):h.code=="f"?(h.argument=toFormatedString(String(Math.abs(parseFloat(h.argument)).toFixed(h.precision?h.precision:6))),p=sprintfWrapper.convert(h)):h.code=="o"?(h.argument=String(Math.abs(parseInt(h.argument)).toString(8)),p=sprintfWrapper.convert(h)):h.code=="s"?(h.argument=h.argument.substring(0,h.precision?h.precision:h.argument.length),p=sprintfWrapper.convert(h,!0)):h.code=="x"?(h.argument=String(Math.abs(parseInt(h.argument)).toString(16)),p=sprintfWrapper.convert(h)):h.code=="X"?(h.argument=String(Math.abs(parseInt(h.argument)).toString(16)),p=sprintfWrapper.convert(h).toUpperCase()):p=h.match,a+=r[c],a+=p}return a+=r[c],a},convert:function(e,t){t?e.sign="":e.sign=e.negative?"-":e.sign;var n=e.min-e.argument.length+1-e.sign.length,r=(new Array(n<0?0:n)).join(e.pad);return e.left?e.pad=="0"||t?e.sign+e.argument+r.replace(/0/g," "):e.sign+e.argument+r:e.pad=="0"||t?e.sign+r+e.argument:r+e.sign+e.argument}},sprintf=sprintfWrapper.init,function(){function e(e,t){var n={enumerable:!0,configurable:!0};return n[e]=t,n}this.defineGetter=function(n,r,i){if(Object.prototype.__defineGetter__)return n.__defineGetter__(r,i);if(Object.defineProperty)return Object.defineProperty(n,r,e("get",i));throw new Error("browser does not support getters")},this.defineSetter=function(n,r,i){if(Object.prototype.__defineSetter__)return n.__defineSetter__(r,i);if(Object.defineProperty)return Object.defineProperty(n,r,e("set",i));throw new Error("browser does not support setters")}}(),pen.define("cdf/Dashboards.Utils",function(){}),pen.define("cdf/Dashboards",function(){}),BaseComponent=Base.extend(Backbone.Events).extend({visible:!0,isManaged:!0,timerStart:0,timerSplit:0,elapsedSinceSplit:-1,elapsedSinceStart:-1,logColor:undefined,placeholder:function(e){var t=this.htmlObject;return t?$("#"+t+(e?" "+e:"")):$()},focus:function(){try{this.placeholder("*:first").focus()}catch(e){}},_doAutoFocus:function(){this.autoFocus&&(delete this.autoFocus,this.focus())},clear:function(){this.placeholder().empty()},copyEvents:function(e,t){_.each(t,function(t,n){var r=t,i=t.tail;while((r=r.next)!==i)e.on(n,r.callback,r.context)})},clone:function(e,t,n){var r,i,s;return i=this.dashboard,s=this._events,delete this.dashboard,delete this._events,r=$.extend(!0,{},this),r.dashboard=this.dashboard=i,this._events=s,this.copyEvents(r,s),r.parameters&&(r.parameters=r.parameters.map(function(t){return t[1]in e?[t[0],e[t[1]]]:t})),r.components&&(r.components=r.components.map(function(e){return e in t?t[e]:e})),r.htmlObject=r.htmlObject?n[r.htmlObject]:undefined,r.listeners&&(r.listeners=r.listeners.map(function(t){return t in e?e[t]:t})),r.parameter&&r.parameter in e&&(r.parameter=e[r.parameter]),r},getAddIn:function(e,t){var n=typeof this.type=="function"?this.type():this.type;return Dashboards.getAddIn(n,e,t)},hasAddIn:function(e,t){var n=typeof this.type=="function"?this.type():this.type;return Dashboards.hasAddIn(n,e,t)},getValuesArray:function(){var e;if(typeof this.valuesArray=="undefined"||this.valuesArray.length==0){if(typeof this.queryDefinition!="undefined"){var t=this.queryDefinition.queryType=="sql"?"sql":"none";this.queryDefinition.queryType=="mdx"&&!this.valueAsId?t="mdx":this.queryDefinition.dataAccessId!==undefined&&!this.valueAsId&&(t="cda"),QueryComponent.makeQuery(this);var n=new Array;for(r in this.result)if(this.result.hasOwnProperty(r))switch(t){case"sql":n.push([this.result[r][0],this.result[r][1]]);break;case"mdx":n.push([this.result[r][1],this.result[r][0]]);break;case"cda":n.push([this.result[r][0],this.result[r][1]]);break;default:n.push([this.result[r][0],this.result[r][0]])}return n}var r=new Array(this.parameters?this.parameters.length:0);for(var i=0,s=r.length;i<s;i++){var o=this.parameters[i][0],u=this.parameters[i][1]==""||this.parameters[i][1]=="NIL"?this.parameters[i][2]:Dashboards.getParameterValue(this.parameters[i][1]);r[i]=[o,u]}var a=this;if(this.url){var f={};$.each(r,function(e,t){f[t[0]]=t[1]}),e=Dashboards.parseXActionResult(a,Dashboards.urlAction(this.url,f))}else e=Dashboards.callPentahoAction(a,this.solution,this.path,this.action,r,null);var n=this.parseArray(e,!1);return n}return this.valuesArray},parseArray:function(e,t){if(e===null)return[];if($(e).find("CdaExport").size()>0)return this.parseArrayCda(e,t);var n=new Array,r=$(e).find("COLUMN-HDR-ITEM");if(t&&r.size()>0){var i=new Array;r.each(function(){i.push($(this).text())}),n.push(i)}var s=$(e).find("DATA-ROW");return s.each(function(){var e=new Array;$(this).children("DATA-ITEM").each(function(){e.push($(this).text())}),n.push(e)}),n},parseArrayCda:function(e,t){var n=new Array,r=$(e).find("ColumnMetaData");if(r.size()>0&&t){var i=new Array;r.each(function(){i.push($(this).attr("name"))}),n.push(i)}var s=$(e).find("Row");return s.each(function(){var e=new Array;$(this).children("Col").each(function(){e.push($(this).text())}),n.push(e)}),n},setAddInDefaults:function(e,t,n){Dashboards.log("BaseComponent.setAddInDefaults was removed. You should call setAddInOptions or Dashboards.setAddInDefaults")},setAddInOptions:function(e,t,n){this.addInOptions||(this.addInOptions={}),this.addInOptions[e]||(this.addInOptions[e]={}),this.addInOptions[e][t]=n},getAddInOptions:function(e,t){var n=null;try{n=this.addInOptions[e][t]}catch(r){}return n||{}},startTimer:function(){this.timerStart=new Date,this.timerSplit=new Date},splitTimer:function(){(this.elapsedSinceStart===-1||this.elapsedSinceSplit===-1)&&this.startTimer();var e=new Date;return this.elapsedSinceStart=e.getTime()-this.timerStart.getTime(),this.elapsedSinceSplit=e.getTime()-this.timerSplit.getTime(),this.timerSplit=e,this.getTimerInfo()},formatTimeDisplay:function(e){return Math.log(e)/Math.log(10)>=3?Math.round(e/100)/10+"s":e+"ms"},getTimerInfo:function(){return{timerStart:this.timerStart,timerSplit:this.timerSplit,elapsedSinceStart:this.elapsedSinceStart,elapsedSinceStartDesc:this.formatTimeDisplay(this.elapsedSinceStart),elapsedSinceSplit:this.elapsedSinceSplit,elapsedSinceSplitDesc:this.formatTimeDisplay(this.elapsedSinceSplit)}},getLogColor:function(){if(this.logColor)return this.logColor;var e=function(e){var t=0;if(e.length==0)return t;for(i=0;i<e.length;i++){var n=e.charCodeAt(i);t=(t<<5)-t+n,t&=t}return t},t=e(this.name).toString(),n=t.substr(t.length-6,2)||0,r=t.substr(t.length-2,2)||0,s=t.substr(t.length-4,2)||0;return this.logColor=Dashboards.hsvToRgb(3.6*n,.75*r,45+.35*s),this.logColor}});var TextComponent=BaseComponent.extend({update:function(){this.placeholder().html(this.expression())}}),CommentsComponent=BaseComponent.extend({processing:function(){var e={};return e.defaults={dataTemplates:{comments:'<div class="commentsDetails"> {{#user}} {{{user}}}, {{/user}} {{{createdOn}}}</div><div class="commentsBody"> <div class="comment">   {{{comment}}} </div> {{#user}} <div class="operation"> {{#permissions.deletePermission}}   <div class="delete">X</div> {{/permissions.deletePermission}} {{#permissions.archive}}  <div class="archive">X</div> {{/permissions.archive}} </div> {{/user}}</div>',addComments:'<div class="commentsAdd">{{#add}} <div class="addComment">Add Comment</div> <div class="addCommentWrapper">   <textarea class=addCommentText></textarea>   <div class="commentsButtons">   <div class="saveComment">Save</div>   <div class="cancelComment">Cancel</div>   </div> </div>{{/add}}</div>',paginateComments:'<div class="paginate commentPaginate"> {{#active}} <div class="navigateRefresh"> Refresh </div> <div class="navigatePrevious"> Newest Comments </div> <div class="navigateNext"> Oldest Comments </div>{{/active}}</div>'}},e.operations={processOperation:function(e,t,n,r,i){var s={};switch(e){case"LIST_ALL":s={data:{action:"list",page:i.page,firstResult:i.paginate.firstResult,maxResults:i.paginate.maxResults,where:!1}};break;case"LIST_ACTIVE":s={data:{action:"list",page:i.page,firstResult:i.paginate.firstResult,maxResults:i.paginate.maxResults}};break;case"GET_LAST":s={data:{action:"list",page:i.page,firstResult:0,maxResults:1}};break;case"DELETE_COMMENT":s={data:{action:"delete",page:i.page,commentId:t}};break;case"ARCHIVE_COMMENT":s={data:{action:"archive",page:i.page,commentId:t}};break;case"ADD_COMMENT":s={data:{action:"add",page:i.page,comment:t}}}this.requestProcessing(s,e,n,r)},requestProcessing:function(e,t,n,r){var i=this;e=e||{};var s={type:"GET",url:wd.cdf.endpoints.getComments(t),success:function(e){i.requestResponse(e,t,n,r)},dataType:"json"};s=_.extend({},s,e),$.ajax(s)},resetCollection:function(t){var n=e.options.paginate,r=n.activePageNumber*n.pageCommentsSize,i=r+n.pageCommentsSize<t.length?r+n.pageCommentsSize:t.length,s=[];for(var o=r;o<i;o++){var u=new e.CommentModel(t[o]);s.push(u)}return s},requestResponse:function(t,n,r,i){if(n=="LIST_ALL"||n=="LIST_ACTIVE"){var s=e.options.paginate;s.activePageNumber>0&&s.activePageNumber+1>Math.ceil(t.result.length/s.pageCommentsSize)&&s.activePageNumber--,e.options.queyResult=t.result,r.reset(this.resetCollection(t.result)),s.activePageNumber==0&&t&&typeof t.result!="undefined"&&t.result.length==0&&(t.result=[{id:0,comment:"No Comments to show!",createdOn:"",elapsedMinutes:"",isArchived:!1,isDeleted:!1,isMe:!0,page:"",user:"",permissions:{add:!1,archive:!1,remove:!1}}],r&&typeof r!="undefined"&&r.reset(this.resetCollection(t.result)))}i&&typeof i!="undefined"&&i.apply(this,[t,r])}},e.CommentModel=Backbone.Model.extend({defaults:{id:0,comment:"Guest User",createdOn:"",elapsedMinutes:"",isArchived:!1,isDeleted:!1,isMe:!0,page:"comments",user:"comments",permissions:{}},initialize:function(){this.set("permissions",e.options.permissions)}}),e.CommentView=Backbone.View.extend({tagName:"div",className:"commentView",events:{"click .delete":"deleteComment","click .archive":"archiveComment"},initialize:function(e){_.bindAll(this,"render","deleteComment","archiveComment"),this.model=e},render:function(){return this.$el.append(e.dataTemplates.comments(this.attributes)),this.$el},deleteComment:function(){var t=function(t,n){e.operations.processOperation("LIST_ACTIVE",null,n,null,e.options)};e.operations.processOperation("DELETE_COMMENT",this.model.get("id"),this.model.collection,t,e.options)},archiveComment:function(){var t=function(t,n){e.operations.processOperation("LIST_ACTIVE",null,n,null,e.options)};e.operations.processOperation("ARCHIVE_COMMENT",this.model.get("id"),this.model.collection,t,e.options)}}),e.CommentsCollection=Backbone.Collection.extend({model:e.CommentModel}),e.CommentsView=Backbone.View.extend({tagName:"div",className:"commentComponent",events:{"click .addComment":"addComment","click .saveComment":"saveComment","click .cancelComment":"cancelComment","click .navigatePrevious":"navigatePrevious","click .navigateNext":"navigateNext","click .navigateRefresh":"navigateRefresh"},initialize:function(e){_.bindAll(this,"render","addComment","saveComment","cancelComment","renderSingeComment","addComment","saveComment","cancelComment","navigateNext","navigatePrevious","commentsUpdateNotification"),this.collection=e,this.collection.on("reset",this.render),this.collection.on("commentsUpdateNotification",this.commentsUpdateNotification),this.render()},render:function(){var t=$("#"+e.options.htmlObject),n=$("<div/>").addClass("commentsGroup");_(this.collection.models).each(function(e){n.append(this.renderSingeComment(e))},this);var r=$(e.dataTemplates.addComments(e.options.permissions)),i=$(e.dataTemplates.paginateComments(e.options.paginate));this.$el.empty().append(n,r,i),t.append(this.$el),this.updateNavigateButtons()},renderSingeComment:function(t){var n=new e.CommentView(t);return n.render()},addComment:function(){this.showAddComment()},saveComment:function(){var t=this.$el.find(".addCommentText").val(),n=function(t,n){var r=e.options.paginate;r.activePageNumber=0,e.operations.processOperation("LIST_ACTIVE",null,n,null,e.options)};e.operations.processOperation("ADD_COMMENT",t,this.collection,n,e.options)},cancelComment:function(){this.hideAddComment()},navigateNext:function(){var t=e.options.paginate,n=t.activePageNumber*t.pageCommentsSize;n+t.pageCommentsSize<e.options.queyResult.length&&(t.activePageNumber++,this.collection.reset(e.operations.resetCollection(e.options.queyResult))),this.commentsUpdateNotification(),this.updateNavigateButtons()},navigatePrevious:function(){var t=e.options.paginate,n=t.activePageNumber;t.activePageNumber>0&&(t.activePageNumber--,this.collection.reset(e.operations.resetCollection(e.options.queyResult))),this.commentsUpdateNotification(),this.updateNavigateButtons()},navigateRefresh:function(){var t=e.options.paginate;e.options.paginate.activePageNumber=0,e.operations.processOperation("LIST_ACTIVE",null,this.collection,null,e.options),$(".tipsy").remove()},updateNavigateButtons:function(){var t=e.options.paginate;$(".navigatePrevious").addClass("disabled"),$(".navigateNext").addClass("disabled"),t.activePageNumber>0&&$(".navigatePrevious").removeClass("disabled"),t.activePageNumber+1<Math.ceil(e.options.queyResult.length/t.pageCommentsSize)&&$(".navigateNext").removeClass("disabled")},commentsUpdateNotification:function(){if(e.options.queyResult.length>0){var t=e.options.queyResult[0].createdOn,n=function(e){if(e.result.length>0&&e.result[0].createdOn!=t){var n={html:!0,fade:!0,trigger:"manual",className:"commentsComponentTipsy",title:function(){return"New comments, please refresh!"}};$(".commentComponent .navigateRefresh").attr("title","New comments, please refresh!").tipsy(n),$(".commentComponent .navigateRefresh").tipsy("show")}};e.operations.processOperation("GET_LAST",null,null,n,e.options)}},showAddComment:function(){this.$el.find(".addCommentWrapper").show(),this.$el.find(".paginate").hide(),this.$el.find(".addCommentText").val("")},hideAddComment:function(){this.$el.find(".addCommentWrapper").hide(),this.$el.find(".paginate").show(),this.$el.find(".addCommentText").val("")}}),e.compileTemplates=function(){e.dataTemplates=e.dataTemplates||{},_(e.defaults.dataTemplates).each(function(t,n){e.dataTemplates[n]=Mustache.compile(t)})},e.start=function(t){e.options=t,e.defaults=_.extend({},e.defaults,t.defaults),e.compileTemplates(),e.commentsCollection=new e.CommentsCollection,e.operations.processOperation("LIST_ACTIVE",null,e.commentsCollection,null,e.options),e.commentsView=new e.CommentsView(e.commentsCollection);if(e.options.intervalActive){var n=function(){e.operations.processOperation("LIST_ACTIVE",null,e.commentsCollection,null,e.options)};setInterval(function(){e.commentsCollection.trigger("commentsUpdateNotification")},e.options.interval)}},e},update:function(){this.paginateActive=typeof this.paginate=="undefined"?!0:this.paginate,this.pageCommentsSize=typeof this.pageCommentsSize=="undefined"?10:this.pageCommentsSize,this.firstResult=typeof this.firstResult=="undefined"?0:this.firstResult,this.maxResults=typeof this.maxResults=="undefined"?100:this.maxResults,this.interval=typeof this.interval=="undefined"?6e4:this.interval,this.intervalActive=typeof this.intervalActive=="undefined"?!0:this.intervalActive,this.addPermission=typeof this.addPermission=="undefined"?!0:this.addPermission,this.deletePermission=typeof this.deletePermission=="undefined"?!1:this.deletePermission,this.archivePermission=typeof this.archivePermission=="undefined"?!0:this.archivePermission,this.options=typeof this.options=="undefined"?{}:this.options;if(this.page==undefined){Dashboards.log("Fatal - no page definition passed","error");return}options={htmlObject:this.htmlObject,page:this.page,intervalActive:this.intervalActive,interval:this.interval,paginate:{active:this.paginateActive,activePageNumber:0,pageCommentsSize:this.pageCommentsSize,firstResult:this.firstResult,maxResults:this.maxResults},permissions:{add:this.addPermission,deletePermission:this.deletePermission,archive:this.archivePermission},defaults:this.options},this.processing().start(options)}}),QueryComponent=BaseComponent.extend({visible:!1,update:function(){QueryComponent.makeQuery(this)},warnOnce:function(){Dashboards.log("Warning: QueryComponent behaviour is due to change. See http://http://www.webdetails.org/redmine/projects/cdf/wiki/QueryComponent for more information"),delete this.warnOnce}},{makeQuery:function(e){this.warnOnce&&this.warnOnce();var t=e.queryDefinition;if(t==undefined){Dashboards.log("Fatal - No query definition passed","error");return}var n=Dashboards.getQuery(t);e.queryState=n,n.setAjaxOptions({async:!1}),n.fetchData(e.parameters,function(t){changedValues=undefined,e.metadata=t.metadata,e.result=t.resultset!=undefined?t.resultset:t,e.queryInfo=t.queryInfo,typeof e.postFetch=="function"&&(changedValues=e.postFetch(t)),changedValues!=undefined&&(t=changedValues),e.resultvar!=undefined&&Dashboards.setParameter(e.resultvar,e.result),e.result=t.resultset!=undefined?t.resultset:t,typeof t.resultset!="undefined"&&(e.metadata=t.metadata,e.queryInfo=t.queryInfo)})}}),MdxQueryGroupComponent=BaseComponent.extend({visible:!1,update:function(){OlapUtils.updateMdxQueryGroup(this)}}),ManagedFreeformComponent=BaseComponent.extend({update:function(){this.customfunction(this.parameters||[])}}),UnmanagedComponent=BaseComponent.extend({isManaged:!1,isRunning:!1,preExec:function(){typeof this.runCounter=="undefined"&&(this.runCounter=0);var e;if(typeof this.preExecution=="function")try{e=this.preExecution(),e=typeof e=="undefined"||e}catch(t){this.error(Dashboards.getErrorObj("COMPONENT_ERROR").msg,t),this.dashboard.log(t,"error"),e=!1}else e=!0;return this.trigger("cdf cdf:preExecution",this,e),e},postExec:function(){typeof this.postExecution=="function"&&this.postExecution(),this.trigger("cdf cdf:postExecution",this)},drawTooltip:function(){this.tooltip&&(this._tooltip=typeof this.tooltip=="function"?this.tooltip():this.tooltip)},showTooltip:function(){typeof this._tooltip!="undefined"&&this.placeholder().attr("title",this._tooltip).tooltip({delay:0,track:!0,fade:250,content:this._tooltip})},synchronous:function(e,t){if(!this.preExec())return;var n=this.isSilent();n||this.block(),setTimeout(_.bind(function(){try{e.call(this,t||[]),this.drawTooltip(),this.postExec(),this.showTooltip()}catch(r){this.error(Dashboards.getErrorObj("COMPONENT_ERROR").msg,r),this.dashboard.log(r,"error")}finally{n||this.unblock()}},this),10)},triggerQuery:function(e,t,n){if(!this.preExec())return;var r=this.isSilent();r||this.block(),n=n||{};var i=_.bind(function(e){t(e),this.postExec()},this),s=_.bind(function(){r||this.unblock()},this),o=this.getSuccessHandler(i,s),u=this.getErrorHandler(),a=this.queryState=this.query=Dashboards.getQuery(e),f={async:!0};n.ajax&&_.extend(f,n.ajax),a.setAjaxOptions(f),n.pageSize&&a.setPageSize(n.pageSize),a.fetchData(this.parameters,o,u)},triggerAjax:function(e,t,n,r){if(!this.preExec())return;var i=this.isSilent();i||this.block();var s=$.extend({async:!0},r);typeof n!="function"?(n=t,_.extend(s,e)):_.extend(s,{url:e,data:t});var o=_.bind(function(e){n(e),this.trigger("cdf cdf:render",this,e),this.postExec()},this),u=_.bind(function(){i||this.unblock()},this);s.success=this.getSuccessHandler(o,u),s.error=this.getErrorHandler(),jQuery.ajax(s)},callCounter:function(){return++this.runCounter},error:function(e,t){e=e||Dashboards.getErrorObj("COMPONENT_ERROR").msg,this.isSilent()||this.unblock(),this.errorNotification({error:t,msg:e}),this.trigger("cdf cdf:error",this,e,t||null)},getSuccessHandler:function(e,t,n){return arguments.length===1?(t=e,e=this.callCounter()):typeof e=="function"&&(n=t,t=e,e=this.callCounter()),_.bind(function(r){var i;if(e>=this.runCounter)try{typeof this.postFetch=="function"&&(i=this.postFetch(r),this.trigger("cdf cdf:postFetch",this,r),r=typeof i=="undefined"?r:i),t(r)}catch(s){this.error(Dashboards.getErrorObj("COMPONENT_ERROR").msg,s),this.dashboard.log(s,"error")}typeof n=="function"&&n()},this)},getErrorHandler:function(){return _.bind(function(){var e=Dashboards.parseServerError.apply(this,arguments);this.error(e.msg,e.error)},this)},errorNotification:function(e,t){t=t||(this.htmlObject?this.placeholder():undefined);var n=this.name.replace("render_","");e.msg=e.msg+" ("+n+")",Dashboards.errorNotification(e,t)},block:function(){this.isRunning||(this.dashboard.incrementRunningCalls(),this.isRunning=!0)},unblock:function(){this.isRunning&&(this.dashboard.decrementRunningCalls(),this.isRunning=!1)},isSilent:function(){return this.lifecycle?!!this.lifecycle.silent:!1}}),FreeformComponent=UnmanagedComponent.extend({update:function(){var e=_.bind(this.render,this);typeof this.manageCallee=="undefined"||this.manageCallee?this.synchronous(e):e()},render:function(){var e=this.parameters||[];this.customfunction(e)}}),ActionComponent=UnmanagedComponent.extend({_docstring:function(){return"Abstract class for components calling a query/endpoint"},update:function(){var e=_.bind(this.render,this);_.isUndefined(this.manageCallee)||this.manageCallee?this.synchronous(e):e()},triggerAction:function(){var e=Dashboards.propertiesArrayToObject(this.actionParameters),t=this.failureCallback?_.bind(this.failureCallback,this):function(){},n=this.successCallback?_.bind(this.successCallback,this):function(){};return Dashboards.getQuery(this.actionDefinition).fetchData(e,n,t)},hasAction:function(){return this.actionDefinition?Dashboards.detectQueryType?!!Dashboards.detectQueryType(this.actionDefinition):!!this.actionDefinition.queryType&&Dashboards.hasQuery(this.actionDefinition.queryType):!1}});pen.define("cdf/components/core",function(){}),pen.define("cdf/lib/CCC/protovis",[],function(){function e(e,i,s,o){var u,a=s-i;if(a&&isFinite(a)){var f=g.parseNumNonNeg(g.get(o,"precision",0)),l=g.parseNumNonNeg(g.get(o,"precisionMin",0)),c=g.parseNumNonNeg(g.get(o,"precisionMax",1/0)),h=g.get(o,"roundInside",!0);isFinite(f)||(f=0),isFinite(l)||(l=0),c||(c=1/0);var p=g.get(o,"numberExponentMin"),d=g.get(o,"numberExponentMax");null!=p&&isFinite(p)&&(l=Math.max(l,Math.pow(10,Math.floor(p)))),null!=d&&isFinite(d)&&(c=Math.min(c,5*Math.pow(10,Math.floor(d)))),h&&(l>a&&(l=a),c>a&&(c=a)),l>c&&(c=l),f?f=Math.max(Math.min(f,c),l):l===c&&(f=l);var v,m,y,b,w=0,E=!!f;if(E)v={base:Math.abs(f),mult:1,value:1},v.value=v.base;else{var S=g.parseNumNonNeg(g.get(o,"tickCountMax",1/0));1>S&&(S=1),null==e?e=Math.min(10,S):isFinite(e)?e>S&&(e=S):e=isFinite(S)?S:10,v={base:isFinite(e)?g.logFloor(a/e,10):0,mult:1,value:1},v.value=v.base,l>0&&(m=r(l,!0),v.value<m.value&&(t(v,m),w=-1)),isFinite(c)&&(y=r(c,!1),m&&y.value<=m.value?y=null:y.value<v.value&&(t(v,y),w=1));if(1!==w&&isFinite(e)&&v.mult<10){b=a/v.base;if(b>e){var x=e/b;.15>=x?v.mult=10:v.mult<5&&(.35>=x?v.mult=5:v.mult<2&&.75>=x&&(v.mult=2)),v.mult>1&&(v.value=v.base*v.mult,m&&v.value<m.value?(t(v,m),w=-1):y&&y.value<v.value?(t(v,y),w=1):10===v.mult&&(v.base*=10,v.mult=1))}}}for(var T;;){var N=v.value,C=N*Math[h?"ceil":"floor"](i/N),k=N*Math[h?"floor":"ceil"](s/N);if(T&&(C>k||y&&k-C>y.value)){v=T;break}var L=Math.floor(g.log(N,10)+1e-10);v.decPlaces=Math.max(0,-L),v.ticks=g.range(C,k+N,N);if(E||w>0||v.ticks.length<=S)break;if(T&&T.ticks.length<=v.ticks.length){v=T;break}v=n(T=v)}u=v.ticks,u.step=v.value,u.base=v.base,u.mult=v.mult,u.decPlaces=v.decPlaces,u.format=g.Format.number().fractionDigits(v.decPlaces)}else u=[+i],u.step=u.base=u.mult=1,u.decPlaces=0,u.format=g.Format.number().fractionDigits(0);return u}function t(e,t){return e.base=t.base,e.mult=t.mult,e.value=t.value,e}function n(e){var n=t({},e);switch(n.mult){case 5:n.mult=1,n.base*=10;break;case 2:n.mult=5;break;case 1:n.mult=2}return n.value=n.base*n.mult,n}function r(e,t){0>e&&(e=-e);var n=g.logFloor(e,10),r=e/n;return t?r>5?(r=1,n*=10):r=r>2?5:r>1?2:1:r=r>=5?5:r>=2?2:1,{base:n,mult:r,value:n*r,source:e}}function i(e){return new Date(e)}function s(e,t,n,r,s,u,a){var l,h=n-t;if(h&&isFinite(h)){r=c(g.get(a,"precision"),r);var p=c(g.get(a,"precisionMin"),0),d=c(g.get(a,"precisionMax"),1/0);p>d&&(d=p),r?r=Math.max(Math.min(r,d),p):p===d&&(r=p);var v=g.parseNumNonNeg(g.get(a,"tickCountMax",1/0));2>v&&(v=2),e=Math.min(null==e?5:e,v);for(var m,y={weekStart:u,roundInside:g.get(a,"roundInside",1)},b=o(e,h,r,p,d,y),w=b.fixed,E=b.overflow;;){b.ticks=l=b.comp.ticks(t,n,b.mult,y);if(m&&b.precMax&&l[l.length-1]-l[0]>b.precMax.value){b=m;break}if(w||E>0||b.ticks.length<=v)break;if(m&&m.ticks.length<=b.ticks.length){b=m;break}m=b,b=b.comp.resultAbove(b.mult)}l=b.ticks,l.step=b.value,l.base=b.comp.value,l.mult=b.mult,l.format=f(s)||b.comp.format}else l=[i(t)],l.step=l.base=l.mult=1,l.format=g.Format.date("%x");return l}function o(e,t,n,r,i,s){var o,a,f,l,c=0,h=1,p=!!n;return n?(a=u(n,!1),a.value!==n?o=a.comp.withPrecision(n):(o=a.comp,h=a.mult)):(isFinite(e)?(o=m(t,e),h=o.multiple(t/o.value,s)):(o=d(),h=1),n=o.value*h,r>n&&(f=u(r,!0)),n>i&&(l=u(i,!1)),f&&n<f.value?(o=f.comp,h=f.mult,c=-1):l&&r<l.value&&l.value<n&&(o=l.comp,h=l.mult,c=1)),{comp:o,mult:h,value:o.value*h,source:n,overflow:c,fixed:p,precMin:f,precMax:l}}function u(e,t){return null==e||0>=e||!isFinite(e)?null:(t?d:v)().castValue(e,t)}function a(e,t,n){this.value=e,this.mult=n.mult||1,this.base=1===this.mult?this.value:Math.floor(this.value/this.mult),y.forEach(function(e){null!=n[e]&&(this[e]=n[e])},this),n.floor&&(this.floorLocal=n.floor),this.format=f(n.format),this.first=g.functor(n.first||0),this.prev=t,this.next=null,t&&(t.next=this)}function f(e){return null==e?null:"function"==typeof e?e:g.Format.date(e)}function l(e,t){var n=new Date(e.getFullYear(),e.getMonth(),1),r=t-n.getDay();return r&&(0>r&&(r+=7),n.setDate(n.getDate()+r)),n}function c(e,t){if("string"==typeof e){var n=+e;if(isNaN(n)){if(e){var r=/^(\d*)([a-zA-Z]+)$/.exec(e);r&&(e=h(r[2]),e&&(e*=+r[1]||1))}}else e=n}return("number"!=typeof e||0>e)&&(e=null!=t?t:0),e}function h(e){switch(e){case"y":return 31536e6;case"m":return 2592e6;case"w":return 6048e5;case"d":return 864e5;case"h":return 36e5;case"M":return 6e4;case"s":return 1e3;case"ms":return 1}}function p(e,t){var n=v();b.push(new a(e,n,t))}function d(){return b[0]}function v(){return b.length?b[b.length-1]:null}function m(e,t){null==t&&(t=1);var n,r=v();do n=r;while(e<t*n.value&&(r=n.prev));return n}Array.prototype.map||(Array.prototype.map=function(e,t){for(var n=this.length,r=new Array(n),i=0;n>i;i++)i in this&&(r[i]=e.call(t,this[i],i,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var n=this.length,r=new Array,i=0;n>i;i++)if(i in this){var s=this[i];e.call(t,s,i,this)&&r.push(s)}return r}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Array.prototype.reduce||(Array.prototype.reduce=function(e,t){var n=this.length;if(!n&&1==arguments.length)throw new Error("reduce: empty array, no initial value");var r=0;if(arguments.length<2)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new Error("reduce: no values, no initial value")}for(;n>r;r++)r in this&&(t=e(t,this[r],r,this));return t}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=this.length>>>0,r=!isFinite(t)||0>t?0:t>this.length?this.length:t;n>r;r++)if(this[r]===e)return r;return-1}),Date.now||(Date.now=function(){return+(new Date)}),Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t});var g={};g.version={major:3,minor:3},g.identity=function(e){return e},g.index=function(){return this.index},g.child=function(){return this.childIndex},g.parent=function(){return this.parent.index},!function(){g.extend=function(e){return Object.create(e.prototype||e)},g.extendType=function(e,t){var n=e.prototype=g.extend(t);return n.constructor=e,e},g.parse=function(e){for(var t,n,r=new RegExp("function\\s*(\\b\\w+)?\\s*\\([^)]*\\)\\s*","mg"),i=0,s="";t=r.exec(e);){var o=t.index+t[0].length;if("{"!=e.charAt(o)){s+=e.substring(i,o)+"{return ",i=o;for(var u=0;u>=0&&o<e.length;o++){var a=e.charAt(o);switch(a){case'"':case"'":for(;++o<e.length&&(n=e.charAt(o))!=a;)"\\"==n&&o++;break;case"[":case"(":u++;break;case"]":case")":u--;break;case";":case",":0==u&&u--}}s+=g.parse(e.substring(i,--o))+";}",i=o}r.lastIndex=o}return s+=e.substring(i),s},g.error=function(e){"undefined"!=typeof console&&console.error?console.error(e):alert(e)},g.listen=function(e,t,n){return n=g.listener(n),"load"===t||"onload"===t?g.listenForPageLoad(n):(e.addEventListener?e.addEventListener(t,n,!1):(e===window&&(e=document.documentElement),e.attachEvent("on"+t,n)),n)},g.unlisten=function(e,t,n){n.$listener&&(n=n.$listener),e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},g.listenForPageLoad=function(e){"complete"!==document.readyState?document.addEventListener?window.addEventListener("load",e,!1):document.attachEvent&&window.attachEvent("onload",e):e(null)},g.listener=function(e){return e.$listener||(e.$listener=function(t){try{return g.event=t=t&&g.fixEvent(t),e.call(this,t)}catch(n){g.error(n)}finally{delete g.event}})},g.fixEvent=function(e){if(null==e.pageX&&null!=e.clientX){var t=e.target&&e.target.ownerDocument||document,n=t.documentElement,r=t.body;e.pageX=1*e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=1*e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)}return e},g.ancestor=function(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},g.removeChildren=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},g.getWindow=function(e){return null!=e&&e==e.window?e:9===e.nodeType?e.defaultView||e.parentWindow:!1};var e=/\-([a-z])/g;g.hiphen2camel=function(t){return e.test(t)?t.replace(e,function(e,t){return t.toUpperCase()}):t};var t=window.getComputedStyle;g.css=function(e,n){return t?t.call(window,e,null).getPropertyValue(n):e.currentStyle["float"===n?"styleFloat":g.hiphen2camel(n)]},g.cssStyle=function(e){var n;return t?(n=t.call(window,e,null),function(e){return n.getPropertyValue(e)}):(n=e.currentStyle,function(e){return n["float"===e?"styleFloat":g.hiphen2camel(e)]})},g._getElementsByClass=function(e,t){null==t&&(t=document);for(var n=[],r=t.getElementsByTagName("*"),i=r.length,s=new RegExp("(^|\\s)"+e+"(\\s|$)"),o=0,u=0;i>o;o++)s.test(r[o].className)&&(n[u]=r[o],u++);return n},g.getElementsByClassName=function(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):g._getElementsByClass(t,e)},g.elementOffset=function(e){var t=e&&e.ownerDocument;if(t){var n=t.body;if(n!==e){var r;r="undefined"!=typeof e.getBoundingClientRect?e.getBoundingClientRect():{top:0,left:0};var i=g.getWindow(t),s=t.documentElement,o=s.clientTop||n.clientTop||0,u=s.clientLeft||n.clientLeft||0,a=i.pageYOffset||s.scrollTop,f=i.pageXOffset||s.scrollLeft;return{top:r.top+a-o,left:r.left+f-u}}}},g.renderer=function(){var e=document.svgImplementation||"nativesvg";return g.renderer=function(){return e},e};var n=1;g.id=function(){return n++},g.functor=function(e){return"function"==typeof e?e:function(){return e}},g.stringLowerCase=function(e){return String(e).toLowerCase()},g.get=function(e,t,n){var r;return e&&null!=(r=e[t])?r:n};var r=Object.prototype.hasOwnProperty;g.lazyArrayOwn=function(e,t){var n;return e&&r.call(e,t)&&(n=e[t])?n:e[t]=[]},g.parseNumNonNeg=function(e,t){return null!=e&&("string"==typeof e?e=+e:"number"!=typeof e&&(e=null)),null==e||isNaN(e)||0>e?null==t?0:t:e};var i=g.epsilon=1e-6;g.floatLess=function(e,t){return!g.floatEqual(e,t)&&t>e},g.floatLessOrEqual=function(e,t){return t>e||g.floatEqual(e,t)},g.floatGreater=function(e,t){return!g.floatEqual(e,t)&&e>t},g.floatEqual=function(e,t){return Math.abs(t-e)<i},g.floatZero=function(e){return Math.abs(e)<i},g.floatBelongsOpen=function(e,t,n){return g.floatLess(e,t)&&g.floatLess(t,n)},g.floatBelongsClosed=function(e,t,n){return g.floatLessOrEqual(e,t)&&g.floatLessOrEqual(t,n)}}(),g.listen(window,"load",function(){g.$={i:0,x:document.getElementsByTagName("script")},g.$.xlen=g.$.x.length;for(;g.$.i<g.$.xlen;g.$.i++){g.$.s=g.$.x[g.$.i];if("text/javascript+protovis"==g.$.s.type)try{window.eval(g.parse(g.$.s.text))}catch(e){g.error(e)}}delete g.$}),g.Format={},g.Format.re=function(e){return e.replace(/[\\\^\$\*\+\?\[\]\(\)\.\{\}]/g,"\\$&")},g.Format.pad=function(e,t,n){var r=t-String(n).length;return 1>r?n:(new Array(r+1)).join(e)+n},g.Format.date=function(e){function t(t){return e.replace(/%[a-zA-Z0-9]/g,function(e){switch(e){case"%a":return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()];case"%A":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()];case"%h":case"%b":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];case"%B":return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()];case"%c":return t.toLocaleString();case"%C":return n("0",2,Math.floor(t.getFullYear()/100)%100);case"%d":return n("0",2,t.getDate());case"%x":case"%D":return n("0",2,t.getMonth()+1)+"/"+n("0",2,t.getDate())+"/"+n("0",2,t.getFullYear()%100);case"%e":return n(" ",2,t.getDate());case"%H":return n("0",2,t.getHours());case"%I":var r=t.getHours()%12;return r?n("0",2,r):12;case"%m":return n("0",2,t.getMonth()+1);case"%M":return n("0",2,t.getMinutes());case"%n":return"\n";case"%p":return t.getHours()<12?"AM":"PM";case"%T":case"%X":case"%r":var r=t.getHours()%12;return(r?n("0",2,r):12)+":"+n("0",2,t.getMinutes())+":"+n("0",2,t.getSeconds())+" "+(t.getHours()<12?"AM":"PM");case"%R":return n("0",2,t.getHours())+":"+n("0",2,t.getMinutes());case"%S":return n("0",2,t.getSeconds());case"%Q":return n("0",3,t.getMilliseconds());case"%t":return"	";case"%u":var i=t.getDay();return i?i:1;case"%w":return t.getDay();case"%y":return n("0",2,t.getFullYear()%100);case"%Y":return t.getFullYear();case"%%":return"%"}return e})}var n=g.Format.pad;return t.format=t,t.parse=function(t){var n=1970,r=0,i=1,s=0,o=0,u=0,a=[function(){}],f=g.Format.re(e).replace(/%[a-zA-Z0-9]/g,function(e){switch(e){case"%b":return a.push(function(e){r={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[e]}),"([A-Za-z]+)";case"%h":case"%B":return a.push(function(e){r={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11}[e]}),"([A-Za-z]+)";case"%e":case"%d":return a.push(function(e){i=e}),"([0-9]+)";case"%I":case"%H":return a.push(function(e){s=e}),"([0-9]+)";case"%m":return a.push(function(e){r=e-1}),"([0-9]+)";case"%M":return a.push(function(e){o=e}),"([0-9]+)";case"%p":return a.push(function(e){12==s?"am"==e&&(s=0):"pm"==e&&(s=Number(s)+12)}),"(am|pm)";case"%S":return a.push(function(e){u=e}),"([0-9]+)";case"%y":return a.push(function(e){e=Number(e),n=e+(e>=0&&69>e?2e3:e>=69&&100>e?1900:0)}),"([0-9]+)";case"%Y":return a.push(function(e){n=e}),"([0-9]+)";case"%%":return a.push(function(){}),"%"}return e}),l=t.match(f);return l&&l.forEach(function(e,t){a[t](e)}),new Date(n,r,i,s,o,u)},t},g.Format.time=function(e){function t(t){t=Number(t);switch(e){case"short":return t>=31536e6?(t/31536e6).toFixed(1)+" years":t>=6048e5?(t/6048e5).toFixed(1)+" weeks":t>=864e5?(t/864e5).toFixed(1)+" days":t>=36e5?(t/36e5).toFixed(1)+" hours":t>=6e4?(t/6e4).toFixed(1)+" minutes":(t/1e3).toFixed(1)+" seconds";case"long":var r=[],i=t%6e4/1e3>>0,s=t%36e5/6e4>>0;r.push(n("0",2,i));if(t>=36e5){var o=t%864e5/36e5>>0;r.push(n("0",2,s)),t>=864e5?(r.push(n("0",2,o)),r.push(Math.floor(t/864e5).toFixed())):r.push(o.toFixed())}else r.push(s.toFixed());return r.reverse().join(":")}}var n=g.Format.pad;return t.format=t,t.parse=function(t){switch(e){case"short":for(var n,r=/([0-9,.]+)\s*([a-z]+)/g,i=0;n=r.exec(t);){var s=parseFloat(n[0].replace(",","")),o=0;switch(n[2].toLowerCase()){case"year":case"years":o=31536e6;break;case"week":case"weeks":o=6048e5;break;case"day":case"days":o=864e5;break;case"hour":case"hours":o=36e5;break;case"minute":case"minutes":o=6e4;break;case"second":case"seconds":o=1e3}i+=s*o}return i;case"long":var n=t.replace(",","").split(":").reverse(),i=0;return n.length&&(i+=1e3*parseFloat(n[0])),n.length>1&&(i+=6e4*parseFloat(n[1])),n.length>2&&(i+=36e5*parseFloat(n[2])),n.length>3&&(i+=864e5*parseFloat(n[3])),i}},t},g.Format.number=function(){function e(e){1/0>s&&(e=Math.round(e*o)/o);var d=String(Math.abs(e)).split("."),v=d[0];v.length>n&&(v=v.substring(v.length-n)),f&&v.length<t&&(v=(new Array(t-v.length+1)).join(u)+v),v.length>3&&(v=v.replace(/\B(?=(?:\d{3})+(?!\d))/g,c)),!f&&v.length<r&&(v=(new Array(r-v.length+1)).join(u)+v),d[0]=0>e?h+v+p:v;var m=d[1]||"";return m.length>s&&(m=d[1]=m.substr(0,s)),m.length<i&&(d[1]=m+(new Array(i-m.length+1)).join(a)),d.join(l)}var t=0,n=1/0,r=0,i=0,s=0,o=1,u="0",a="0",f=!0,l=".",c=",",h="−",p="";return e.format=e,e.parse=function(e){var t=g.Format.re,r=String(e).split(l);1==r.length&&(r[1]=""),r[0].replace(new RegExp("^("+t(u)+")*"),""),r[1].replace(new RegExp("("+t(a)+")*$"),"");var i=r[0].replace(new RegExp(t(c),"g"),"");i.length>n&&(i=i.substring(i.length-n));var f=r[1]?Number("0."+r[1]):0;return 1/0>s&&(f=Math.round(f*o)/o),Math.round(i)+f},e.integerDigits=function(e,i){return arguments.length?(t=Number(e),n=arguments.length>1?Number(i):t,r=t+Math.floor(t/3)*c.length,this):[t,n]},e.fractionDigits=function(e,t){return arguments.length?(i=Number(e),s=arguments.length>1?Number(t):i,o=Math.pow(10,s),this):[i,s]},e.integerPad=function(e){return arguments.length?(u=String(e),f=/\d/.test(u),this):u},e.fractionPad=function(e){return arguments.length?(a=String(e),this):a},e.decimal=function(e){return arguments.length?(l=String(e),this):l},e.group=function(e){return arguments.length?(c=e?String(e):"",r=t+Math.floor(t/3)*c.length,this):c},e.negativeAffix=function(e,t){return arguments.length?(h=String(e||""),p=String(t||""),this):[h,p]},e},!function(){var e;g.Text={},g.Text.createCache=function(){return new t},g.Text.usingCache=function(n,r,i){if(!(n instanceof t))throw new Error("Not a valid cache.");var s=e;e=n;try{return r.call(i)}finally{e=s}},g.Text.measure=function(t,n){t=null==t?"":String(t);var r=e&&e.get(n,t);return r||(r=t?this.measureCore(t,n):{width:0,height:0},e&&e.put(n,t,r)),r},g.Text.measureWidth=function(e,t){return g.Text.measure(e,t).width},g.Text.fontHeight=function(e){return g.Text.measure("M",e).height},g.Text.measureCore=function(){function e(){return n||(n=t())}function t(){var e=document.createElement("div");e.id="pvSVGText_"+(new Date).getTime();var t=e.style;t.position="absolute",t.visibility="hidden",t.width=0,t.height=0,t.left=0,t.top=0,t.lineHeight=1,t.textTransform="none",t.letterSpacing="normal",t.whiteSpace="nowrap";var n=g.SvgScene.create("svg");n.setAttribute("font-size","10px"),n.setAttribute("font-family","sans-serif"),e.appendChild(n);var r=g.SvgScene.create("text");return n.appendChild(r),r.appendChild(document.createTextNode("")),document.body.appendChild(e),r}var n,r="10px sans-serif";return function(t,n){n||(n=null);var i=e();r!==n&&(r=n,g.SvgScene.setStyle(i,{font:n})),i.firstChild.nodeValue=String(t);var s;try{s=i.getBBox()}catch(o){throw"function"==typeof console.error&&console.error("GetBBox failed: ",o),o}return{width:s.width,height:s.height}}}();var t=function(){this._fontsCache={}},n=Object.prototype.hasOwnProperty;t.prototype._getFont=function(e){return e=e||"",n.call(this._fontsCache,e)?this._fontsCache[e]:this._fontsCache[e]={}},t.prototype.get=function(e,t){t=t||"";var r=this._getFont(e);return n.call(r,t)?r[t]:null},t.prototype.put=function(e,t,n){return this._getFont(e)[t||""]=n}}(),g.map=function(e,t){var n={};return t?e.map(function(e,r){return n.index=r,t.call(n,e)}):e.slice()},g.repeat=function(e,t){return 1==arguments.length&&(t=2),g.blend(g.range(t).map(function(){return e}))},g.array=function(e,t){var n=e>=0?new Array(e):[];if(void 0!==t)for(var r=0;e>r;r++)n[r]=t;return n},g.cross=function(e,t){for(var n=[],r=0,i=e.length,s=t.length;i>r;r++)for(var o=0,u=e[r];s>o;o++)n.push([u,t[o]]);return n},g.blend=function(e){return Array.prototype.concat.apply([],e)},g.transpose=function(e){var t=e.length,n=g.max(e,function(e){return e.length});if(n>t){e.length=n;for(var r=t;n>r;r++)e[r]=new Array(t);for(var r=0;t>r;r++)for(var i=r+1;n>i;i++){var s=e[r][i];e[r][i]=e[i][r],e[i][r]=s}}else{for(var r=0;n>r;r++)e[r].length=t;for(var r=0;t>r;r++)for(var i=0;r>i;i++){var s=e[r][i];e[r][i]=e[i][r],e[i][r]=s}}e.length=n;for(var r=0;n>r;r++)e[r].length=t;return e},g.normalize=function(e,t){for(var n=g.map(e,t),r=g.sum(n),i=0;i<n.length;i++)n[i]/=r;return n},g.permute=function(e,t,n){n||(n=g.identity);var r=new Array(t.length),i={};return t.forEach(function(t,s){i.index=t,r[s]=n.call(i,e[t])}),r},g.numerate=function(e,t){t||(t=g.identity);var n={},r={};return e.forEach(function(e,i){r.index=i,n[t.call(r,e)]=i}),n},g.uniq=function(e,t){t||(t=g.identity);var n,r={},i=[],s={};return e.forEach(function(e,o){s.index=o,n=t.call(s,e),n in r||(r[n]=i.push(n))}),i},g.naturalOrder=function(e,t){return t>e?-1:e>t?1:0},g.reverseOrder=function(e,t){return e>t?-1:t>e?1:0},g.search=function(e,t,n){n||(n=g.identity);for(var r=0,i=e.length-1;i>=r;){var s=r+i>>1,o=n(e[s]);if(t>o)r=s+1;else{if(!(o>t))return s;i=s-1}}return-r-1},g.search.index=function(e,t,n){var r=g.search(e,t,n);return 0>r?-r-1:r},g.range=function(e,t,n){1==arguments.length&&(t=e,e=0),void 0==n&&(n=1);if((t-e)/n==1/0)throw new Error("range must be finite");var r,i=[],s=0;t-=1e-10*(t-e);if(0>n)for(;(r=e+n*s++)>t;)i.push(r);else for(;(r=e+n*s++)<t;)i.push(r);return i},g.random=function(e,t,n){return 1==arguments.length&&(t=e,e=0),void 0==n&&(n=1),n?Math.floor(Math.random()*(t-e)/n)*n+e:Math.random()*(t-e)+e},g.sum=function(e,t){var n={};return e.reduce(t?function(e,r,i){return n.index=i,e+t.call(n,r)}:function(e,t){return e+t},0)},g.max=function(e,t){return t==g.index?e.length-1:Math.max.apply(null,t?g.map(e,t):e)},g.max.index=function(e,t){if(!e.length)return-1;if(t==g.index)return e.length-1;t||(t=g.identity);for(var n=0,r=-1/0,i={},s=0;s<e.length;s++){i.index=s;var o=t.call(i,e[s]);o>r&&(r=o,n=s)}return n},g.min=function(e,t){return t==g.index?0:Math.min.apply(null,t?g.map(e,t):e)},g.min.index=function(e,t){if(!e.length)return-1;if(t==g.index)return 0;t||(t=g.identity);for(var n=0,r=1/0,i={},s=0;s<e.length;s++){i.index=s;var o=t.call(i,e[s]);r>o&&(r=o,n=s)}return n},g.mean=function(e,t){return g.sum(e,t)/e.length},g.median=function(e,t){if(t==g.index)return(e.length-1)/2;e=g.map(e,t).sort(g.naturalOrder);if(e.length%2)return e[Math.floor(e.length/2)];var n=e.length/2;return(e[n-1]+e[n])/2},g.variance=function(e,t){if(e.length<1)return 0/0;if(1==e.length)return 0;var n=g.mean(e,t),r=0,i={};t||(t=g.identity);for(var s=0;s<e.length;s++){i.index=s;var o=t.call(i,e[s])-n;r+=o*o}return r},g.deviation=function(e,t){return Math.sqrt(g.variance(e,t)/(e.length-1))},g.log=function(e,t){return Math.log(e)/Math.log(t)},g.logSymmetric=function(e,t){return 0==e?0:0>e?-g.log(-e,t):g.log(e,t)},g.logAdjusted=function(e,t){if(!isFinite(e))return e;var n=0>e;return t>e&&(e+=(t-e)/t),n?-g.log(e,t):g.log(e,t)},g.logFloor=function(e,t){return e>0?Math.pow(t,Math.floor(g.log(e,t))):-Math.pow(t,-Math.floor(-g.log(-e,t)))},g.logCeil=function(e,t){return e>0?Math.pow(t,Math.ceil(g.log(e,t))):-Math.pow(t,-Math.ceil(-g.log(-e,t)))},!function(){var e=Math.PI/180,t=180/Math.PI;g.radians=function(t){return e*t},g.degrees=function(e){return t*e}}(),g.keys=function(e){var t=[];for(var n in e)t.push(n);return t},g.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},g.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},g.dict=function(e,t){for(var n={},r={},i=0;i<e.length;i++)if(i in e){var s=e[i];r.index=i,n[s]=t.call(r,s)}return n},g.hasOwnProp=Object.prototype.hasOwnProperty,g.copyOwn=function(e,t){if(t){var n=g.hasOwnProp;for(var r in t)n.call(t,r)&&(e[r]=t[r])}return e},g.dom=function(e){return new g.Dom(e)},g.Dom=function(e){this.$map=e},g.Dom.prototype.$leaf=function(e){return"object"!=typeof e},g.Dom.prototype.leaf=function(e){return arguments.length?(this.$leaf=e,this):this.$leaf},g.Dom.prototype.root=function(e){function t(e){var r=new g.Dom.Node;for(var i in e){var s=e[i];r.appendChild(n(s)?new g.Dom.Node(s):t(s)).nodeName=i}return r}var n=this.$leaf,r=t(this.$map);return r.nodeName=e,r},g.Dom.prototype.nodes=function(){return this.root().nodes()},g.Dom.Node=function(e){void 0!==e&&(this.nodeValue=e)},g.Dom.Node.prototype.nodeValue=void 0,g.Dom.Node.prototype.childNodes=[],g.Dom.Node.prototype.parentNode=null,g.Dom.Node.prototype.firstChild=null,g.Dom.Node.prototype.lastChild=null,g.Dom.Node.prototype.previousSibling=null,g.Dom.Node.prototype.nextSibling=null,g.Dom.Node.prototype._firstDirtyChildIndex=1/0,g.Dom.Node.prototype._childIndex=-1,g.Dom.Node.prototype.findChildIndex=function(e){if(!e)throw new Error("Argument 'n' required");if(e.parentNode===this){var t=e.childIndex(!0);if(t>-1)return t}throw new Error("child not found")},g.Dom.Node.prototype._childRemoved=function(){},g.Dom.Node.prototype._childAdded=function(){},g.Dom.Node.prototype.removeChild=function(e){var t=this.findChildIndex(e);return this.removeAt(t)},g.Dom.Node.prototype.appendChild=function(e){var t=e.parentNode;t&&t.removeChild(e);var n=this.lastChild;e.parentNode=this,e.previousSibling=n,n?(n.nextSibling=e,e._childIndex=n._childIndex+1):(this.firstChild=e,e._childIndex=0),this.lastChild=e;var r=g.lazyArrayOwn(this,"childNodes").push(e);return this._childAdded(e,r-1),e},g.Dom.Node.prototype.insertBefore=function(e,t){if(!t)return this.appendChild(e);var n=this.findChildIndex(t);return this.insertAt(e,n)},g.Dom.Node.prototype.insertAt=function(e,t){if(null==t)return this.appendChild(e);var n=this.childNodes,r=n.length;if(t===r)return this.appendChild(e);if(0>t||t>r)throw new Error("Index out of range.");var i=e.parentNode;i&&i.removeChild(e);var s=t+1;s<this._firstDirtyChildIndex&&(this._firstDirtyChildIndex=s);var o=n[t];e.parentNode=this,e.nextSibling=o,e._childIndex=t;var u=e.previousSibling=o.previousSibling;return o.previousSibling=e,u?u.nextSibling=e:(o===this.lastChild&&(this.lastChild=e),this.firstChild=e),n.splice(t,0,e),this._childAdded(e,t),e},g.Dom.Node.prototype.removeAt=function(e){var t=this.childNodes,n=t.length;if(!(0>e||e>=n)){var r=t[e];t.splice(e,1),n-1>e&&e<this._firstDirtyChildIndex&&(this._firstDirtyChildIndex=e);var i=r.previousSibling,s=r.nextSibling;return i?i.nextSibling=s:this.firstChild=s,s?s.previousSibling=i:this.lastChild=i,r.nextSibling=r.previousSibling=r.parentNode=null,this._childRemoved(r,e),r}},g.Dom.Node.prototype.replaceChild=function(e,t){var n=this.findChildIndex(t),r=e.parentNode;r&&r.removeChild(e),e.parentNode=this,e.nextSibling=t.nextSibling,e._childIndex=t._childIndex;var i=e.previousSibling=t.previousSibling;i?i.nextSibling=e:this.firstChild=e;var s=t.nextSibling;return s?s.previousSibling=e:this.lastChild=e,this.childNodes[n]=e,this._childRemoved(t,n),this._childAdded(e,n),t},g.Dom.Node.prototype.childIndex=function(e){var t=this.parentNode;if(t){var n=t._firstDirtyChildIndex;if(1/0>n){var r=t.childNodes;if(!e)return r.indexOf(this);for(var i=r.length;i>n;)r[n]._childIndex=n,n++;t._firstDirtyChildIndex=1/0}return this._childIndex}return-1},g.Dom.Node.prototype.visitBefore=function(e){function t(n,r){e(n,r);for(var i=n.firstChild;i;i=i.nextSibling)t(i,r+1)}t(this,0)},g.Dom.Node.prototype.visitAfter=function(e){function t(n,r){for(var i=n.firstChild;i;i=i.nextSibling)t(i,r+1);e(n,r)}t(this,0)},g.Dom.Node.prototype.sort=function(e){if(this.firstChild){this._firstDirtyChildIndex=1/0;var t=this.childNodes;t.sort(e);var n,r=this.firstChild=t[0];delete r.previousSibling,r._childIndex=0;for(var i=1,s=t.length;s>i;i++)r.sort(e),n=t[i],n._childIndex=i,n.previousSibling=r,r=r.nextSibling=n;this.lastChild=r,delete r.nextSibling,r.sort(e)}return this},g.Dom.Node.prototype.reverse=function(){var e=[];return this.visitAfter(function(t){this._firstDirtyChildIndex=1/0;for(var n;n=t.lastChild;)e.push(t.removeChild(n));if(e.length)for(;n=e.pop();)t.insertBefore(n,t.firstChild)}),this},g.Dom.Node.prototype.nodes=function(){var e=[];return this.visitBefore(function(t){e.push(t)}),e},g.Dom.Node.prototype.toggle=function(e){if(e)return this.toggled?this.visitBefore(function(e){e.toggled&&e.toggle()}):this.visitAfter(function(e){e.toggled||e.toggle()});var t,n=this;if(n.toggled){for(;t=n.toggled.pop();)n.appendChild(t);delete n.toggled}else if(t=n.lastChild){n.toggled=[];do n.toggled.push(n.removeChild(t));while(t=n.lastChild)}},g.nodes=function(e){for(var t=new g.Dom.Node,n=0,r=e.length;r>n;n++)t.appendChild(new g.Dom.Node(e[n]));return t.nodes()},g.tree=function(e){return new g.Tree(e)},g.Tree=function(e){this.array=e},g.Tree.prototype.keys=function(e){return this.k=e,this},g.Tree.prototype.value=function(e){return this.v=e,this},g.Tree.prototype.map=function(){for(var e={},t={},n=0;n<this.array.length;n++){t.index=n;for(var r=this.array[n],i=this.k.call(t,r),s=e,o=0;o<i.length-1;o++)s=s[i[o]]||(s[i[o]]={});s[i[o]]=this.v?this.v.call(t,r):r}return e},g.nest=function(e){return new g.Nest(e)},g.Nest=function(e){this.array=e,this.keys=[]},g.Nest.prototype.key=function(e){return this.keys.push(e),this},g.Nest.prototype.sortKeys=function(e){return this.keys[this.keys.length-1].order=e||g.naturalOrder,this},g.Nest.prototype.sortValues=function(e){return this.order=e||g.naturalOrder,this},g.Nest.prototype.map=function(){for(var e,t={},n=[],r=0;r<this.array.length;r++){var i=this.array[r],s=t;for(e=0;e<this.keys.length-1;e++){var o=this.keys[e](i);s[o]||(s[o]={}),s=s[o]}o=this.keys[e](i);if(!s[o]){var u=[];n.push(u),s[o]=u}s[o].push(i)}if(this.order)for(var e=0;e<n.length;e++)n[e].sort(this.order);return t},g.Nest.prototype.entries=function(){function e(t){var n=[];for(var r in t){var i=t[r];n.push({key:r,values:i instanceof Array?i:e(i)})}return n}function t(e,n){var r=this.keys[n].order;r&&e.sort(function(e,t){return r(e.key,t.key)});if(++n<this.keys.length)for(var i=0;i<e.length;i++)t.call(this,e[i].values,n);return e}return t.call(this,e(this.map()),0)},g.Nest.prototype.rollup=function(e){function t(n){for(var r in n){var i=n[r];i instanceof Array?n[r]=e(i):t(i)}return n}return t(this.map())},g.flatten=function(e){return new g.Flatten(e)},g.Flatten=function(e){this.map=e,this.keys=[]},g.Flatten.prototype.key=function(e,t){return this.keys.push({name:e,value:t}),delete this.$leaf,this},g.Flatten.prototype.leaf=function(e){return this.keys.length=0,this.$leaf=e,this},g.Flatten.prototype.array=function(){function e(t,i){if(s(t))n.push({keys:r.slice(),value:t});else for(var o in t)r.push(o),e(t[o],i+1),r.pop()}function t(e,s){if(s<i.length-1)for(var o in e)r.push(o),t(e[o],s+1),r.pop();else n.push(r.concat(e))}var n=[],r=[],i=this.keys,s=this.$leaf;return s?(e(this.map,0),n):(t(this.map,0),n.map(function(e){for(var t={},n=0;n<i.length;n++){var r=i[n],s=e[n];t[r.name]=r.value?r.value.call(null,s):s}return t}))},g.Transform=function(){},g.Transform.prototype={k:1,x:0,y:0},g.Transform.identity=new g.Transform,g.Transform.prototype.translate=function(e,t){var n=new g.Transform;return n.k=this.k,n.x=this.k*e+this.x,n.y=this.k*t+this.y,n},g.Transform.prototype.scale=function(e){var t=new g.Transform;return t.k=this.k*e,t.x=this.x,t.y=this.y,t},g.Transform.prototype.invert=function(){var e=new g.Transform,t=1/this.k;return e.k=t,e.x=-this.x*t,e.y=-this.y*t,e},g.Transform.prototype.times=function(e){var t=new g.Transform;return t.k=this.k*e.k,t.x=this.k*e.x+this.x,t.y=this.k*e.y+this.y,t},g.Scale=function(){},g.Scale.interpolator=function(e,t){if("number"==typeof e)return function(n){return n*(t-e)+e};var n=e.type&&"solid"!==e.type,r=t.type&&"solid"!==t.type;return n||r?(e=n?e:g.color(e).rgb(),t=r?t:g.color(t).rgb(),function(n){return.5>n?e:t}):(e=g.color(e).rgb(),t=g.color(t).rgb(),function(n){var r=e.a*(1-n)+t.a*n;return 1e-5>r&&(r=0),0==e.a?g.rgb(t.r,t.g,t.b,r):0==t.a?g.rgb(e.r,e.g,e.b,r):g.rgb(Math.round(e.r*(1-n)+t.r*n),Math.round(e.g*(1-n)+t.g*n),Math.round(e.b*(1-n)+t.b*n),r)})},g.Scale.common={by:function(e){function t(){return n(e.apply(this,arguments))}var n=this;for(var r in n)t[r]=n[r];return t},by1:function(e){function t(t){return n(e.call(this,t))}var n=this;for(var r in n)t[r]=n[r];return t},transform:function(e){function t(){return e.call(this,n.apply(n,arguments))}var n=this;for(var r in n)t[r]=n[r];return t}},g.Scale.quantitative=function(){function t(e){var t=g.search(u,e);return 0>t&&(t=-t-2),t=Math.max(0,Math.min(l.length-1,t)),l[t]((d(e)-a[t])/(a[t+1]-a[t]))}var n,r,o,u=[0,1],a=[0,1],f=[0,1],l=[g.identity],h=Number,p=!1,d=g.identity,v=g.identity,m=null,y=0;return t.transform=function(e,t){return d=function(t){return p?-e(-t):e(t)},v=function(e){return p?-t(-e):t(e)},a=u.map(d),this},t.domain=function(e,t,n){if(arguments.length){var r;return e instanceof Array?(arguments.length<2&&(t=g.identity),arguments.length<3&&(n=t),r=e.length&&t(e[0]),u=e.length?[g.min(e,t),g.max(e,n)]:[]):(r=e,u=Array.prototype.slice.call(arguments).map(Number)),u.length?1==u.length&&(u=[u[0],u[0]]):u=[-1/0,1/0],p=(u[0]||u[u.length-1])<0,a=u.map(d),h=r instanceof Date?i:Number,this}return u.map(h)},t.range=function(){if(arguments.length){f=Array.prototype.slice.call(arguments),f.length?1==f.length&&(f=[f[0],f[0]]):f=[-1/0,1/0],l=[];for(var e=0;e<f.length-1;e++)l.push(g.Scale.interpolator(f[e],f[e+1]));return this}return f},t.invert=function(e){var t=g.search(f,e);return 0>t&&(t=-t-2),t=Math.max(0,Math.min(l.length-1,t)),h(v(a[t]+(e-f[t])/(f[t+1]-f[t])*(a[t+1]-a[t])))},t.ticks=function(t,a){var f=u[0],l=u[u.length-1],c=f>l,p=c?l:f,d=c?f:l;return o=h===i?s(t,p,d,r,n,y,a):e(t,p,d,a),c?o.reverse():o},t.dateTickFormat=function(){return arguments.length?(n=arguments[0],this):n},t.dateTickPrecision=function(){return arguments.length?(r=c(arguments[0],0),this):r},t.dateTickWeekStart=function(e){if(arguments.length){switch((""+e).toLowerCase()){case"0":case"sunday":y=0;break;case"1":case"monday":y=1;break;case"2":case"tuesday":y=2;break;case"3":case"wednesday":y=3;break;case"4":case"thursday":y=4;break;case"5":case"friday":y=5;break;case"6":case"saturday":y=6;break;default:y=0}return this}return y},t.tickFormatter=function(e){return arguments.length?(m=e,this):m},t.tickFormat=function(e,t){var n;if(m){o||(o=[],o.step=o.base=o.mult=1,o.decPlaces=0,o.format=String);var r=h!==Number?o.step:o.decPlaces;n=m.call(o,e,r,null!=t?t:-1)}else n=o?o.format(e):String(e);return n},t.nice=function(){if(2!=u.length)return this;var e=u[0],t=u[u.length-1],n=e>t,r=n?t:e,i=n?e:t,s=i-r;if(!s||!isFinite(s))return this;var o=Math.pow(10,Math.round(Math.log(s)/Math.log(10))-1);return u=[Math.floor(r/o)*o,Math.ceil(i/o)*o],n&&u.reverse(),a=u.map(d),this},g.copyOwn(t,g.Scale.common),t.domain.apply(t,arguments),t};var y=["get","set","multiple","multiples","thresholds","closeds","castValue"];a.prototype.increment=function(e,t){null==t&&(t=1),1!==this.mult&&(t*=this.mult),this.set(e,this.get(e)+t)},a.prototype.get=function(e){return e.getMilliseconds()},a.prototype.set=function(e,t){e.setMilliseconds(t)},a.prototype.floorLocal=function(){},a.prototype.floor=function(e,t){var n=0;1!==this.mult&&(this.floorLocal(e,t),n=this.base);for(var r=this.prev;r;)1===r.mult&&r.value!==n&&r.clear(e,t),r=r.prev},a.prototype.floorMultiple=function(e,t,n){var r=this.first(e,n),i=this.get(e)-r;if(i){var s=t*this.mult,o=Math.floor(i/s)*s;this.set(e,r+o)}},a.prototype.clear=function(e,t){this.set(e,this.first(e,t))},a.prototype.multiple=function(e){for(var t=this.multiples,n=this.thresholds,r=this.closeds,i=t.length,s=-1;++s<i;)if(r[s]?e<=n[s]:e<n[s])return t[s];throw new Error("Invalid configuration.")},a.prototype.resultAbove=function(e){return this.castValue(this.value*e+.1,!0)},a.prototype.castValue=function(e,t){var n=this.multiples;if(!n)return this._castValueResult(1,e,1);var r,i=e/this.value,s=n.length;if(t){r=-1;for(;++r<s;)if(i<=n[r])return this._castValueResult(n[r],e,0);return this.next?this.next.castValue(e,t):this._castValueResult(n[s-1],e,1)}r=s;for(;r--;)if(n[r]<=i)return this._castValueResult(n[r],e,0);return this.prev?this.prev.castValue(e,t):this._castValueResult(n[0],e,-1)},a.prototype._castValueResult=function(e,t,n){return{comp:this,mult:e,value:this.value*e,source:t,overflow:n}},a.prototype.withPrecision=function(e){var t=this;return this.value!==e&&(t=new a(e,null,{mult:e,format:this.format})),t},a.prototype.ticks=function(e,t,n,r){var i=[],s=new Date(e);this.floor(s,r),n>1&&this.floorMultiple(s,n,r);if(g.get(r,"roundInside",1)){e!==+s&&this.increment(s,n);do i.push(new Date(s)),this.increment(s,n);while(t>=s)}else{i.push(new Date(s));do this.increment(s,n),i.push(new Date(s));while(t>s)}return i};var b=[];return p(1,{format:"%S.%Qs",multiples:[1,5,25,50,100,250],thresholds:[10,50,100,200,1e3,1/0],closeds:[1,1,1,1,1,1]}),p(1e3,{get:function(e){return e.getSeconds()},set:function(e,t){e.setSeconds(t)},format:"%I:%M:%S",multiples:[1,5,10,15],thresholds:[10,60,90,1/0],closeds:[1,1,1,1]}),p(6e4,{get:function(e){return e.getMinutes()},set:function(e,t){e.setMinutes(t)},format:"%I:%M %p",multiples:[1,5,10,15],thresholds:[10,15,30,1/0],closeds:[1,1,1,1]}),p(36e5,{get:function(e){return e.getHours()},set:function(e,t){e.setHours(t)},format:"%I:%M %p",multiples:[1,3,6],thresholds:[10,20,1/0],closeds:[1,1,1]}),p(864e5,{get:function(e){return e.getDate()},set:function(e,t){e.setDate(t)},format:"%m/%d",first:1,multiples:[1,2,3,5],thresholds:[10,15,30,1/0],closeds:[1,0,0,1]}),p(6048e5,{get:function(e){return e.getDate()},set:function(e,t){e.setDate(t)},mult:7,floor:function(e,t){var n=e.getDay()-g.get(t,"weekStart",0);0!==n&&(0>n&&(n+=7),this.set(e,this.get(e)-n))},first:function(e,t){return this.get(l(e,g.get(t,"weekStart",0)))},format:"%m/%d",multiples:[1,2,3],thresholds:[10,15,1/0],closeds:[1,1,1]}),p(2592e6,{get:function(e){return e.getMonth()},set:function(e,t){e.setMonth(t)},format:"%m/%Y",multiples:[1,2,3],thresholds:[12,24,1/0],closeds:[1,1,1]}),p(31536e6,{get:function(e){return e.getFullYear()},set:function(e,t){e.setFullYear(t)},format:"%Y",multiple:function(e){if(10>=e)return 1;var t=g.logCeil(e/15,10);return 2>e/t?t/=5:5>e/t&&(t/=2),t},castValue:function(e,t){var n,r,i=e/this.value;if(1>i){if(!t)return this.prev?this.prev.castValue(e,t):this._castValueResult(1,e,-1);n=1}else n=g.logFloor(i,10);r=i/n;if(t)r>5?(n*=10,r=1):r=r>2?5:r>1?2:1;else if(r>5)r=5;else if(r>2)r=2;else if(r>1)r=1;else if(1>r)return this.prev?this.prev.castValue(e,t):this._castValueResult(n,e,-1);return this._castValueResult(n*r,e,0)}}),g.Scale.linear=function(){var e=g.Scale.quantitative();return e.domain.apply(e,arguments),e},g.Scale.log=function(){var e,t,n=g.Scale.quantitative(1,10),r=function(e){return Math.log(e)/t},i=function(t){return Math.pow(e,t)};return n.ticks=function(){var t=n.domain(),s=t[0]<0,o=Math.floor(s?-r(-t[0]):r(t[0])),u=Math.ceil(s?-r(-t[1]):r(t[1])),a=[];if(s){a.push(-i(-o));for(;o++<u;)for(var f=e-1;f>0;f--)a.push(-i(-o)*f)}else{for(;u>o;o++)for(var f=1;e>f;f++)a.push(i(o)*f);a.push(i(o))}for(o=0;a[o]<t[0];o++);for(u=a.length;a[u-1]>t[1];u--);return a.slice(o,u)},n.tickFormat=function(e){return e.toPrecision(1)},n.nice=function(){var t=n.domain();return n.domain(g.logFloor(t[0],e),g.logCeil(t[1],e))},n.base=function(s){return arguments.length?(e=Number(s),t=Math.log(e),n.transform(r,i),this):e},n.domain.apply(n,arguments),n.base(10)},g.Scale.root=function(){var e=g.Scale.quantitative();return e.power=function(t){if(arguments.length){var n=Number(t),r=1/n;return e.transform(function(e){return Math.pow(e,r)},function(e){return Math.pow(e,n)}),this}return n},e.domain.apply(e,arguments),e.power(2)},g.Scale.ordinal=function(){function e(e){return e in n||(n[e]=t.push(e)-1),r[n[e]%r.length]}var t=[],n={},r=[];return e.domain=function(e,r){if(arguments.length){e=e instanceof Array?arguments.length>1?g.map(e,r):e:Array.prototype.slice.call(arguments),t=[];for(var i={},s=0;s<e.length;s++){var o=e[s];o in i||(i[o]=!0,t.push(o))}return n=g.numerate(t),this}return t},e.range=function(e,t){return arguments.length?(r=e instanceof Array?arguments.length>1?g.map(e,t):e:Array.prototype.slice.call(arguments),"string"==typeof r[0]&&(r=r.map(g.fillStyle)),r.min=r[0],r.max=r[r.length-1],this):r},e.split=function(e,t){var n=t-e,i=this.domain().length,s=0;return 0===n?r=g.array(i,e):i&&(s=(t-e)/i,r=g.range(e+s/2,t,s)),r.min=e,r.max=t,r.step=s,this},e.splitBandedCenter=function(e,t,n){return null==n&&(n=1),this._splitBandedCore(e,t,function(e){var t=e.range/e.count;e.step=t,e.band=t*n,e.offset=t/2})},e.splitBandedCenterAbs=function(e,t,n,r){return this._splitBandedCore(e,t,function(e){var t;null==n||null==r?(t=e.range/e.count,null==n?null==r?(n=t,r=0):(r=Math.min(r,t),n=t-r):(n=Math.min(n,t),r=t-n)):t=n+r,e.step=t,e.band=n,e.offset=t/2})},e._splitBandedCore=function(e,t,n){var i,s={min:e,max:t,range:t-e,count:this.domain().length,offset:0,step:0,band:0};return 0===s.range?(r=g.array(s.count,e),i=0):s.count&&(n(s),i=s.step-s.band,r=g.range(e+s.offset,t,s.step)),r.offset=s.offset,r.step=s.step,r.band=s.band,r.margin=i,r.min=e,r.max=t,this},e.splitBandedFlushCenter=function(e,t,n){return null==n&&(n=1),this._splitBandedCore(e,t,function(e){var t=e.range,r=e.count,i=t*n/r,s=r>1?(t-r*i)/(r-1):0;e.band=i,e.step=s+i,e.offset=i/2})},e.splitFlush=function(e,t){var n=this.domain().length,i=(t-e)/(n-1);return r=1==n?[(e+t)/2]:g.range(e,t+i/2,i),r.min=e,r.max=t,this},e.splitBanded=function(e,t,n){arguments.length<3&&(n=1);if(0>n){var i=this.domain().length,s=-n*i,o=t-e-s,u=o/(i+1);r=g.range(e+u,t,u-n),r.band=-n}else{var a=(t-e)/(this.domain().length+(1-n));r=g.range(e+a*(1-n),t,a),r.band=a*n,r.step=a,r.margin=a-r.band}return r.min=e,r.max=t,this},e.invertIndex=function(e,t){var n=this.domain().length;if(0===n)return-1;var r=this.range(),i=r.max-r.min;if(0===i)return 0;var s=i/n;if(e>=r.max)return n;if(e<r.min)return 0;var o=(e-r.min)/s;return t?o:Math.round(o)},g.copyOwn(e,g.Scale.common),e.domain.apply(e,arguments),e},g.Scale.quantile=function(){function e(e){return s(Math.max(0,Math.min(n,g.search.index(r,e)-1))/n)}var t=-1,n=-1,r=[],i=[],s=g.Scale.linear();return e.quantiles=function(e){if(arguments.length){t=Number(e);if(0>t)r=[i[0]].concat(i),n=i.length-1;else{r=[],r[0]=i[0];for(var s=1;t>=s;s++)r[s]=i[~~(s*(i.length-1)/t)];n=t-1}return this}return r},e.domain=function(n,r){return arguments.length?(i=n instanceof Array?g.map(n,r):Array.prototype.slice.call(arguments),i.sort(g.naturalOrder),e.quantiles(t),this):i},e.range=function(){return arguments.length?(s.range.apply(s,arguments),this):s.range()},g.copyOwn(e,g.Scale.common),e.domain.apply(e,arguments),e},g.histogram=function(e,t){var n=!0;return{bins:function(r){var i=g.map(e,t),s=[];arguments.length||(r=g.Scale.linear(i).ticks());for(var o=0;o<r.length-1;o++){var u=s[o]=[];u.x=r[o],u.dx=r[o+1]-r[o],u.y=0}for(var o=0;o<i.length;o++){var a=g.search.index(r,i[o])-1,u=s[Math.max(0,Math.min(s.length-1,a))];u.y++,u.push(e[o])}if(!n)for(var o=0;o<s.length;o++)s[o].y/=i.length;return s},frequency:function(e){return arguments.length?(n=Boolean(e),this):n}}},!function(){g.Shape=function(){};var e={x:1,y:1};g.Shape.dist2=function(t,n,r){r=r||e;var i=t.x-n.x,s=t.y-n.y,o=i*i,u=s*s;return{cost:o+u,dist2:r.x*o+r.y*u}};var t=Math.PI,n=2*t,r=Math.atan2;g.Shape.normalizeAngle=function(e){return e%=n,g.floatLess(e,0)&&(e+=n),e},g.Shape.atan2Norm=function(e,t){var i=r(e,t);return g.floatLess(i,0)&&(i+=n),i},g.Shape.prototype.hasArea=function(){return!0},g.Shape.prototype.bbox=function(){return this._bbox||(this._bbox=this._calcBBox())},g.Shape.prototype._calcBBox=function(){var e,t,n,r;return this.points().forEach(function(i){var s=i.x,o=i.y;null==e?(e=n=s,t=r=o):(e>s?e=s:s>n&&(n=s),t>o?t=o:o>r&&(r=o))}),null!=e?new g.Shape.Rect(e,t,n-e,r-t):void 0},g.Shape.prototype.containsPoint=function(e,t){if(t){var n;if(!t.y)return n=this.bbox(),g.floatBelongsClosed(n.x,e.x,n.x2);if(!t.x)return n=this.bbox(),g.floatBelongsClosed(n.y,e.y,n.y2)}return this._containsPointCore(e)},g.Shape.prototype._containsPointCore=function(){return!1}}(),!function(){var e=g.Shape.dist2,t=Math.cos,n=Math.sin,r=Math.sqrt;g.vector=function(e,t){return new i(e,t)},g.Vector=function(e,t){this.x=e,this.y=t};var i=g.Shape.Point=g.Vector;g.Vector.prototype=g.extend(g.Shape),g.Vector.prototype.perp=function(){return new i(-this.y,this.x)},g.Vector.prototype.rotate=function(e){var r=t(e),s=n(e);return new i(r*this.x-s*this.y,s*this.x+r*this.y)},g.Vector.prototype.norm=function(){var e=this.length();return this.times(e?1/e:1)},g.Vector.prototype.length=function(){return r(this.x*this.x+this.y*this.y)},g.Vector.prototype.times=function(e){return new i(this.x*e,this.y*e)},g.Vector.prototype.plus=function(e,t){return 1===arguments.length?new i(this.x+e.x,this.y+e.y):new i(this.x+e,this.y+t)},g.Vector.prototype.minus=function(e,t){return 1===arguments.length?new i(this.x-e.x,this.y-e.y):new i(this.x-e,this.y-t)},g.Vector.prototype.dot=function(e,t){return 1==arguments.length?this.x*e.x+this.y*e.y:this.x*e+this.y*t},g.Vector.prototype.hasArea=function(){return!1},g.Vector.prototype.clone=function(){return new i(this.x,this.y)},g.Vector.prototype.apply=function(e){return new i(e.x+e.k*this.x,e.y+e.k*this.y)},g.Vector.prototype.intersectsRect=function(e){return g.floatBelongsClosed(e.x,this.x,e.x2)&&g.floatBelongsClosed(e.y,this.y,e.y2)},g.Vector.prototype._containsPointCore=function(e){return this.x===e.x&&this.y===e.y},g.Vector.prototype.points=function(){return[this]},g.Vector.prototype.edges=function(){return[]},g.Vector.prototype.center=function(){return this},g.Vector.prototype.distance2=function(t,n){return e(this,t,n)}}(),!function(){var e=g.Shape.Point,t=g.Shape.dist2;g.Shape.Line=function(e,t,n,r){this.x=e||0,this.y=t||0,this.x2=n||0,this.y2=r||0};var n=g.Shape.Line;n.prototype=g.extend(g.Shape),n.prototype.hasArea=function(){return!1},n.prototype.clone=function(){return new n(this.x,this.y,this.x2,this.x2)},n.prototype.apply=function(e){var t=e.x+e.k*this.x,r=e.y+e.k*this.y,i=e.x+e.k*this.x2,s=e.y+e.k*this.y2;return new n(t,r,i,s)},n.prototype.points=function(){return[new e(this.x,this.y),new e(this.x2,this.y2)]},n.prototype.edges=function(){return[this]},n.prototype.center=function(){return new e((this.x+this.x2)/2,(this.y+this.y2)/2)},n.prototype.normal=function(e,t){var n=this.points(),r=n[1].minus(n[0]).perp().norm();if(t){var i=n[0].minus(t);i.dot(r)<0&&(r=r.times(-1))}return r},n.prototype.intersectsRect=function(e){var t,n,r=this.points();n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;var i=e.edges();n=i.length;for(t=0;n>t;t++)if(this.intersectsLine(i[t]))return!0;return!1},n.prototype._containsPointCore=function(e){var t=this.x,n=this.x2,r=this.y,i=this.y2;return g.floatBelongsClosed(t,e.x,n)&&(g.floatEqual(t,n)?g.floatBelongsClosed(Math.min(r,i),e.y,Math.max(r,i)):g.floatZero((i-r)/(n-t)*(e.x-t)+r-e.y))},n.prototype.intersectsLine=function(e){var t=this,n=t.x2-t.x,r=t.y2-t.y,i=e.x2-e.x,s=e.y2-e.y,o=s*n-i*r;if(g.floatZero(o))return!1;var u=t.y-e.y,a=t.x-e.x,f=i*u-s*a,l=n*u-r*a;if(g.floatZero(o))return g.floatZero(f)&&g.floatZero(l);var c=f/o;if(!g.floatBelongsClosed(0,c,1))return!1;var h=l/o;return g.floatBelongsClosed(0,h,1)?!0:!1},n.prototype.distance2=function(e,n){var r=this,i={x:this.x2,y:this.y2},s=t(r,i).cost;if(g.floatZero(s))return t(e,r,n);var o=i.x-r.x,u=i.y-r.y,a=((e.x-r.x)*o+(e.y-r.y)*u)/s;if(g.floatLess(a,0))return t(e,r,n);if(g.floatGreater(a,1))return t(e,i,n);var f={x:r.x+a*o,y:r.y+a*u};return t(e,f,n)}}(),!function(){var e=g.Shape.Point,t=g.Shape.Line;g.Shape.Polygon=function(e){this._points=e||[]};var n=g.Shape.Polygon;n.prototype=g.extend(g.Shape),n.prototype.points=function(){return this._points},n.prototype.clone=function(){return new n(this.points().slice())},n.prototype.apply=function(e){for(var t=this.points(),r=t.length,i=new Array(r),s=0;r>s;s++)i[s]=t[s].apply(e);return new n(i)},n.prototype.intersectsRect=function(e){var t,n,r=this.points();n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;var i=this.edges();n=i.length;for(t=0;n>t;t++)if(i[t].intersectsRect(e))return!0;return!1},n.prototype.edges=function(){var e=this._edges;if(!e){e=this._edges=[];var n=this.points(),r=n.length;if(r){for(var i,s=n[0],o=s,u=1;r>u;u++)i=n[u],e.push(new t(s.x,s.y,i.x,i.y)),s=i;r>2&&e.push(new t(i.x,i.y,o.x,o.y))}}return e},n.prototype.distance2=function(e,t){var n={cost:1/0,dist2:1/0};return this.edges().forEach(function(r){var i=r.distance2(e,t);g.floatLess(i.cost,n.cost)&&(n=i)},this),n},n.prototype.center=function(){for(var t=this.points(),n=0,r=0,i=0,s=t.length;s>i;i++){var o=t[i];n+=o.x,r+=o.y}return new e(n/s,r/s)},n.prototype._containsPointCore=function(e){var n=this.bbox();if(!n._containsPointCore(e))return!1;var r=.01*n.dx,i=new t(n.x-r,e.y,e.x,e.y),s=0,o=this.edges();return o.forEach(function(e){e.intersectsLine(i)&&s++}),1===(1&s)}}(),!function(){var e=g.Shape.Point,t=g.Shape.Line;g.Shape.Rect=function(e,t,n,r){this.x=e||0,this.y=t||0,this.dx=n||0,this.dy=r||0,this.dx<0&&(this.dx=Math.max(0,-this.dx),this.x=this.x-this.dx),this.dy<0&&(this.dy=Math.max(0,-this.dy),this.y=this.y-this.dy),this.x2=this.x+this.dx,this.y2=this.y+this.dy};var n=g.Shape.Rect;n.prototype=g.extend(g.Shape.Polygon),n.prototype.clone=function(){var e=Object.create(n.prototype);return e.x=this.x,e.y=this.y,e.dx=this.dx,e.dy=this.dy,e.x2=this.x2,e.y2=this.y2,e},n.prototype.apply=function(e){var t=e.x+e.k*this.x,r=e.y+e.k*this.y,i=e.k*this.dx,s=e.k*this.dy;return new n(t,r,i,s)},n.prototype._containsPointCore=function(e){return g.floatBelongsClosed(this.x,e.x,this.x2)&&g.floatBelongsClosed(this.y,e.y,this.y2)},n.prototype.intersectsRect=function(e){return g.floatGreater(this.x2,e.x)&&g.floatLess(this.x,e.x2)&&g.floatGreater(this.y2,e.y)&&g.floatLess(this.y,e.y2)},n.prototype.edges=function(){if(!this._edges){var e=this.x,n=this.y,r=this.x2,i=this.y2;this._edges=[new t(e,n,r,n),new t(r,n,r,i),new t(r,i,e,i),new t(e,i,e,n)]}return this._edges},n.prototype.center=function(){return new e(this.x+this.dx/2,this.y+this.dy/2)},n.prototype.points=function(){var t=this._points;if(!t){var n=this.x,r=this.y,i=this.x2,s=this.y2;t=this._points=[new e(n,r),new e(i,r),new e(i,s),new e(n,s)]}return t},n.prototype._calcBBox=function(){return this}}(),!function(){var e=g.Shape.Point,t=g.Shape.dist2,n=Math.sqrt,r=Math.abs,i=Math.pow;g.Shape.Circle=function(e,t,n){this.x=e||0,this.y=t||0,this.radius=n||0};var s=g.Shape.Circle;s.prototype=g.extend(g.Shape),s.prototype.clone=function(){return new s(this.x,this.y,this.radius)},s.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.radius;return new s(t,n,r)},s.prototype.intersectsRect=function(e){var t=e.dx/2,n=e.dy/2,s=this.radius,o=r(this.x-e.x-t),u=r(this.y-e.y-n);if(o>t+s||u>n+s)return!1;if(t>=o||n>=u)return!0;var a=i(o-t,2)+i(u-n,2);return s*s>=a},s.prototype.intersectLine=function(t,r){var i=t.x2-t.x,s=t.y2-t.y,o=this.x-t.x,u=this.y-t.y,a=i*i+s*s,f=i*o+s*u,l=this.radius,c=o*o+u*u-l*l,h=f/a,p=h*h-c/a;if(!(0>p)){var d=n(p),v=h-d,m=h+d,g=[];return(r||v>=0&&1>=v)&&g.push(new e(t.x+i*v,t.y+s*v)),0!==p&&(r||m>=0&&1>=m)&&g.push(new e(t.x+i*m,t.y+s*m)),g}},s.prototype.points=function(){return[this.center()]},s.prototype.center=function(){return new e(this.x,this.y)},s.prototype.normal=function(e){return e.minus(this.x,this.y).norm()},s.prototype._containsPointCore=function(e){var t=e.x-this.x,n=e.y-this.y,r=this.radius;return r*r>=t*t+n*n},s.prototype.distance2=function(e,n){var r=this.radius,i=e.minus(this).norm().times(r).plus(this),s=t(e,i,n);return s},s.prototype._calcBBox=function(){var e=this.radius,t=2*e;return new g.Shape.Rect(this.x-e,this.y-e,t,t)}}(),!function(){var e=g.Shape.Point,t=g.Shape.dist2,n=g.Shape.normalizeAngle,r=g.Shape.atan2Norm,i=Math.cos,s=Math.sin,o=Math.sqrt,u=Math.PI,a=2*u,f=u/2,l=3*u/2;g.Shape.Arc=function(e,t,r,i,s){this.x=e,this.y=t,this.radius=r,g.floatBelongsClosed(0,s,a)||(s=n(s)),this.startAngle=n(i),this.angleSpan=s,this.endAngle=this.startAngle+this.angleSpan};var c=g.Shape.Arc;c.prototype=g.extend(g.Shape),c.prototype.hasArea=function(){return!1},c.prototype.clone=function(){var e=Object.create(c.prototype),t=this;return e.x=t.x,e.y=t.y,e.radius=t.radius,e.startAngle=t.startAngle,e.angleSpan=t.angleSpan,e.endAngle=t.endAngle,e},c.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.radius;return new c(t,n,r,this.startAngle,this.angleSpan)},c.prototype.containsAngle=function(e,t){g.floatBelongsClosed(0,e,a)||(e=n(e));var r=this.startAngle,i=this.endAngle;return(t?g.floatBelongsOpen(r,e,i):g.floatBelongsClosed(r,e,i))?!0:g.floatLessOrEqual(i,a)?!1:(e+=a,t?g.floatBelongsOpen(r,e,i):g.floatBelongsClosed(r,e,i))},c.prototype._containsPointCore=function(e){var t=e.x-this.x,n=e.y-this.y,i=o(t*t+n*n);return g.floatEqual(i,this.radius)&&this.containsAngle(r(n,t))},c.prototype.intersectsRect=function(e){var t,n=this.points(),r=n.length;for(t=0;r>t;t++)if(n[t].intersectsRect(e))return!0;var i=e.edges();r=i.length;for(t=0;r>t;t++)if(this.intersectLine(i[t]))return!0;return!1};var h=g.Shape.Circle.prototype.intersectLine;c.prototype.intersectLine=function(e,t){var n=h.call(this,e,t);if(n){n=n.filter(function(e){return this._containsPointCore(e)},this);if(n.length)return n}},c.prototype.points=function(){function t(t){n.containsAngle(t,!0)&&p.push(new e(r+a*i(t),o+a*s(t)))}var n=this,r=n.x,o=n.y,a=n.radius,c=n.startAngle,h=n.endAngle,p=[new e(r+a*i(c),o+a*s(c)),new e(r+a*i(h),o+a*s(h))];return t(0),t(f),t(u),t(l),p},c.prototype.center=function(){var t=this.x,n=this.y,r=this.radius,o=(this.startAngle+this.endAngle)/2;return new e(t+r*i(o),n+r*s(o))},c.prototype.normal=function(e,t){var n=e.minus(this.x,this.y).norm();if(t){var r=this.center().minus(t);r.dot(n)<0&&(n=n.times(-1))}return n},c.prototype.distance2=function(n,o){var u=n.x-this.x,a=n.y-this.y,f=r(a,u);if(this.containsAngle(f)){var l=new e(this.x+this.radius*i(f),this.y+this.radius*s(f));return t(n,l,o)}var c=this.points(),h=t(n,c[0],o),p=t(n,c[1],o);return g.floatLess(h.cost,p.cost)?h:p}}(),!function(){var e=g.Shape.Arc,t=g.Shape.Line,n=g.Shape.Point,r=Math.cos,i=Math.sin,s=Math.sqrt,o=Math.PI,u=2*o,a=o/2,f=3*o/2,l=g.Shape.atan2Norm,c=g.Shape.normalizeAngle;g.Shape.Wedge=function(e,t,n,r,i,s){this.x=e,this.y=t,this.innerRadius=n,this.outerRadius=r,g.floatBelongsClosed(0,s,u)||(s=c(s)),this.startAngle=c(i),this.angleSpan=s,this.endAngle=this.startAngle+s};var h=g.Shape.Wedge;h.prototype=g.extend(g.Shape),h.prototype.clone=function(){return new h(this.x,this.y,this.innerRadius,this.outerRadius,this.startAngle,this.angleSpan)},h.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.innerRadius,i=e.k*this.outerRadius;return new h(t,n,r,i,this.startAngle,this.angleSpan)},h.prototype.containsAngle=e.prototype.containsAngle,h.prototype._containsPointCore=function(e){var t=e.x-this.x,n=e.y-this.y,r=s(t*t+n*n);return g.floatBelongsClosed(this.innerRadius,r,this.outerRadius)&&this.containsAngle(l(n,t))},h.prototype.intersectsRect=function(e){var t,n,r,i;r=this.points(),n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;r=e.points(),n=r.length;for(t=0;n>t;t++)if(this._containsPointCore(r[t]))return!0;i=this.edges(),n=i.length;for(t=0;n>t;t++)if(i[t].intersectsRect(e))return!0;return!1},h.prototype.points=function(){return this._points||this.edges(),this._points},h.prototype.edges=function(){function s(e){u.containsAngle(e,!0)&&L.push(new n(p+y*r(e),d+y*i(e)))}var u=this,l=u._edges;if(!l){var c,h,p=u.x,d=u.y,v=u.innerRadius,m=g.floatGreater(v,0),y=u.outerRadius,b=u.startAngle,w=u.endAngle,E=u.angleSpan,S=r(b),x=i(b),T=r(w),N=i(w);m?(c=new n(p+v*S,d+v*x),h=new n(p+v*T,d+v*N)):c=h=new n(p,d);var C=new n(p+y*S,d+y*x),k=new n(p+y*T,d+y*N);l=u._edges=[],m&&l.push(new e(p,d,v,b,E)),l.push(new t(c.x,c.y,C.x,C.y),new e(p,d,y,b,E),new t(h.x,h.y,k.x,k.y));var L=u._points=[c,C,k];m&&L.push(h),s(0),s(a),s(o),s(f)}return l},h.prototype.distance2=function(e,t){var n={cost:1/0,dist2:1/0};return this.edges().forEach(function(r){var i=r.distance2(e,t);g.floatLess(i.cost,n.cost)&&(n=i)}),n},h.prototype.center=function(){var e=(this.startAngle+this.endAngle)/2,t=(this.innerRadius+this.outerRadius)/2;return new n(this.x+t*r(e),this.y+t*i(e))}}(),!function(){var e=Math.round,t=function(t){var n=parseFloat(t);return"%"==t[t.length-1]?e(2.55*n):n},n=/([a-z]+)\((.*)\)/i,r=function(e){if("#"===e.charAt(0)){var r,i,s;return 4===e.length?(r=e.charAt(1),r+=r,i=e.charAt(2),i+=i,s=e.charAt(3),s+=s):7===e.length&&(r=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7)),g.rgb(parseInt(r,16),parseInt(i,16),parseInt(s,16),1)}var o=n.exec(e);if(o){var u=o[2].split(","),a=1;switch(o[1]){case"hsla":case"rgba":a=parseFloat(u[3]);if(!a)return g.Color.transparent}switch(o[1]){case"hsla":case"hsl":var f=parseFloat(u[0]),l=parseFloat(u[1])/100,c=parseFloat(u[2])/100;return(new g.Color.Hsl(f,l,c,a)).rgb();case"rgba":case"rgb":var r=t(u[0]),i=t(u[1]),s=t(u[2]);return g.rgb(r,i,s,a)}}return new g.Color(e,1)},i={};g.color=function(e){if(e.rgb)return e.rgb();var t=g.Color.names[e];return t||(t=i[e]||(i[e]=r(e))),t}}(),g.Color=function(e,t){this.color=e,this.opacity=t,this.key="solid "+e+" alpha("+t+")"},g.Color.prototype.hsl=function(){return this.rgb().hsl()},g.Color.prototype.brighter=function(e){return this.rgb().brighter(e)},g.Color.prototype.darker=function(e){return this.rgb().darker(e)},g.Color.prototype.alphaBlend=function(e){var t=this.rgb(),n=t.a;if(1===n)return this;e=e?g.color(e):g.Color.names.white,e=e.rgb();var r=1-n;return g.rgb(r*t.r+n*e.r,r*t.g+n*e.g,r*t.b+n*e.b,1)},g.Color.prototype.rgbDecimal=function(e){var t=this.alphaBlend(e);return t.r<<16|t.g<<8|t.b},g.Color.prototype.isDark=function(){return this.rgbDecimal()<8388607.5},g.rgb=function(e,t,n,r){return new g.Color.Rgb(e,t,n,4==arguments.length?r:1)},g.Color.Rgb=function(e,t,n,r){g.Color.call(this,r?"rgb("+e+","+t+","+n+")":"none",r),this.r=e,this.g=t,this.b=n,this.a=r},g.Color.Rgb.prototype=g.extend(g.Color),g.Color.Rgb.prototype.red=function(e){return g.rgb(e,this.g,this.b,this.a)},g.Color.Rgb.prototype.green=function(e){return g.rgb(this.r,e,this.b,this.a)},g.Color.Rgb.prototype.blue=function(e){return g.rgb(this.r,this.g,e,this.a)},g.Color.Rgb.prototype.alpha=function(e){return g.rgb(this.r,this.g,this.b,e)},g.Color.Rgb.prototype.rgb=function(){return this},g.Color.Rgb.prototype.brighter=function(e){e=Math.pow(.7,null!=e?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?g.rgb(i,i,i,this.a):(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),g.rgb(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(r/e)),this.a))},g.Color.Rgb.prototype.darker=function(e){return e=Math.pow(.7,null!=e?e:1),g.rgb(Math.max(0,Math.floor(e*this.r)),Math.max(0,Math.floor(e*this.g)),Math.max(0,Math.floor(e*this.b)),this.a)},g.Color.Rgb.prototype.hsl=function(){var e,t,n=this.r/255,r=this.g/255,i=this.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),u=(s+o)/2;if(s===o)e=t=0;else{var a=s-o;t=u>.5?a/(2-s-o):a/(s+o);switch(s){case n:e=(r-i)/a+(i>r?6:0);break;case r:e=(i-n)/a+2;break;case i:e=(n-r)/a+4}e/=6}return g.hsl(360*e,t,u,this.a)},g.Color.Rgb.prototype.complementary=function(){return this.hsl().complementary().rgb()},g.hsl=function(e,t,n,r){return new g.Color.Hsl(e,t,n,4==arguments.length?r:1)},g.Color.Hsl=function(e,t,n,r){g.Color.call(this,"hsl("+e+","+100*t+"%,"+100*n+"%)",r),this.h=e,this.s=t,this.l=n,this.a=r},g.Color.Hsl.prototype=g.extend(g.Color),g.Color.Hsl.prototype.hsl=function(){return this},g.Color.Hsl.prototype.hue=function(e){return g.hsl(e,this.s,this.l,this.a)},g.Color.Hsl.prototype.saturation=function(e){return g.hsl(this.h,e,this.l,this.a)},g.Color.Hsl.prototype.lightness=function(e){return g.hsl(this.h,this.s,e,this.a)},g.Color.Hsl.prototype.alpha=function(e){return g.hsl(this.h,this.s,this.l,e)},g.Color.Hsl.prototype.complementary=function(){return g.hsl((this.h+180)%360,1-this.s,1-this.l,this.a)},g.Color.Hsl.prototype.rgb=function(){function e(e){return e>360?e-=360:0>e&&(e+=360),60>e?o+(s-o)*e/60:180>e?s:240>e?o+(s-o)*(240-e)/60:o}function t(t){return Math.round(255*e(t))}var n=this.h,r=this.s,i=this.l;n%=360,0>n&&(n+=360),r=Math.max(0,Math.min(r,1)),i=Math.max(0,Math.min(i,1));var s=.5>=i?i*(1+r):i+r-i*r,o=2*i-s;return g.rgb(t(n+120),t(n),t(n-120),this.a)},g.Color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:g.Color.transparent=g.rgb(0,0,0,0)},!function(){var e=g.Color.names;e.none=e.transparent;for(var t in e)e[t]=g.color(e[t])}(),g.colors=function(){var e=g.Scale.ordinal();return e.range.apply(e,arguments),e},g.Colors={},g.Colors.category10=function(){var e=g.colors("#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf");return e.domain.apply(e,arguments),e},g.Colors.category20=function(){var e=g.colors("#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5");return e.domain.apply(e,arguments),e},g.Colors.category19=function(){var e=g.colors("#9c9ede","#7375b5","#4a5584","#cedb9c","#b5cf6b","#8ca252","#637939","#e7cb94","#e7ba52","#bd9e39","#8c6d31","#e7969c","#d6616b","#ad494a","#843c39","#de9ed6","#ce6dbd","#a55194","#7b4173");return e.domain.apply(e,arguments),e},!function(){function e(e){var t=n(e);if(!t.length)return null;var i,s,u,a=Math.PI,f=t[0];0===f.indexOf("to ")?(s=/^to\s+(?:((top|bottom)(?:\s+(left|right))?)|((left|right)(?:\\s+(top|bottom))?))$/.exec(f),s&&(s[1]?(i=s[2],s[3]&&(i+=" "+s[3])):(i=s[5],s[6]&&(i=s[6]+" "+i)),a=g.radians(o[i]),t.shift())):(u=parseFloat(f),isNaN(u)||(a=u,/^.*?deg$/.test(f)&&(a=g.radians(a)),t.shift()));var l=r(t);switch(l.length){case 0:return null;case 1:return new g.FillStyle.Solid(l[0].color,1)}return new g.FillStyle.LinearGradient(a,l,e)}function t(e){var t=n(e);if(!t.length)return null;var i=r(t);switch(i.length){case 0:return null;case 1:return new g.FillStyle.Solid(i[0].color,1)}return new g.FillStyle.RadialGradient(50,50,i,e)}function n(e){var t={},n=0;e=e.replace(/\b\w+?\(.*?\)/g,function(e){var r="__color"+n++;return t[r]=e,r});var r=e.split(/\s*,\s*/);return r.length?(n&&r.forEach(function(e,n){t.hasOwnProperty(e)&&(r[n]=t[e])}),r):null}function r(e){function t(e){var t=s.length;if(t){for(var n=i,r=(e-n)/(t+1),o=0;t>o;o++)n+=r,s[o].offset=n;s.length=0}}for(var n=[],r=1/0,i=-1/0,s=[],o=0,u=e.length;u>o;){var a=e[o++],f=/^(.+?)\s*([+\-]?[e\.\d]+%)?$/i.exec(a);if(f){var l={color:g.color(f[1])},c=parseFloat(f[2]);isNaN(c)&&(n.length?o===u&&(c=Math.max(i,100)):c=0),n.push(l),isNaN(c)?s.push(l):(l.offset=c,t(c),c>i?i=c:i>c&&(c=i),r>c&&(r=c))}}if(n.length>=2&&(0>r||i>100)){var h=[],p=[];n.forEach(function(e){h.push(e.offset),p.push(e.color)});var d=g.scale.linear().domain(h).range(p);if(0>r){for(;n.length&&n[0].offset<=0;)n.shift();n.unshift({offset:0,color:d(0)})}if(i>100){for(;n.length&&n[n.length-1].offset>=100;)n.pop();n.push({offset:100,color:d(100)})}}return n}g.fillStyle=function(e){if(e.type)return e;var t=e.key||e,n=i[t];return n=n?n.clone():i[t]=s(e),n};var i={},s=function(n){if(n.rgb)return new g.FillStyle.Solid(n.color,n.opacity);var r=/^\s*([a-z\-]+)\(\s*(.*?)\s*\)\s*$/.exec(n);if(r)switch(r[1]){case"linear-gradient":return e(r[2]);case"radial-gradient":return t(r[2])}return new g.FillStyle.Solid(g.color(n))},o={top:0,"top right":45,right:90,"bottom right":135,bottom:180,"bottom left":225,left:270,"top left":315},u=g.FillStyle=function(e){this.type=e,this.key=e};g.extendType(u,new g.Color("none",1)),u.prototype.rgb=function(){var e=g.color(this.color);return this.opacity!==e.opacity&&(e=e.alpha(this.opacity)),e},u.prototype.alphaBlend=function(e){return this.rgb().alphaBlend(e)},u.prototype.rgbDecimal=function(e){return this.rgb().rgbDecimal(e)},u.prototype.isDark=function(){return this.rgb().isDark()};var a=g.FillStyle.Solid=function(e,t){u.call(this,"solid"),e.rgb?(this.color=e.color,this.opacity=e.opacity):(this.color=e,this.opacity=t),this.key+=" "+this.color+" alpha("+this.opacity+")"};g.extendType(a,u),a.prototype.alpha=function(e){return new a(this.color,e)},a.prototype.brighter=function(e){return new a(this.rgb().brighter(e))},a.prototype.darker=function(e){return new a(this.rgb().darker(e))},a.prototype.complementary=function(){return new a(this.rgb().complementary())},a.prototype.clone=function(){var e=g.extend(a);return e.type=this.type,e.key=this.key,e.color=this.color,e.opacity=this.opacity,e},g.FillStyle.transparent=new a(g.Color.transparent);var f=0,l=g.FillStyle.Gradient=function(e,t){u.call(this,e),this.id=++f,this.stops=t,t.length&&(this.color=t[0].color.color),this.key+=" stops("+t.map(function(e){var t=e.color;return t.color+" alpha("+t.opacity+") at("+e.offset+")"}).join(", ")+")"};g.extendType(l,u),l.prototype.rgb=function(){return this.stops.length?this.stops[0].color:void 0},l.prototype.alpha=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.alpha(e)}}))},l.prototype.darker=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.darker(e)}}))},l.prototype.brighter=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.brighter(e)}}))},l.prototype.complementary=function(){return this._cloneWithStops(this.stops.map(function(e){return{offset:e.offset,color:e.color.complementary()}}))},l.prototype.alphaBlend=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.alphaBlend(e)}}))},l.prototype.clone=function(){var e=this.constructor,t=g.extend(e);t.constructor=e,t.id=++f,t.type=this.type,t.key=this.key;var n=this.stops;return t.stops=n,n.length&&(t.color=n[0].color.color),this._initClone(t),t};var c=g.FillStyle.LinearGradient=function(e,t){l.call(this,"lineargradient",t),this.angle=e,this.key+=" angle("+e+")"};g.extendType(c,l),c.prototype._cloneWithStops=function(e){return new c(this.angle,e)},c.prototype._initClone=function(e){e.angle=this.angle};var h=g.FillStyle.RadialGradient=function(e,t,n){l.call(this,"radialgradient",n),this.cx=e,this.cy=t,this.key+=" center("+e+","+t+")"};g.extendType(h,l),h.prototype._cloneWithStops=function(e){return new h(this.cx,this.cy,e)},h.prototype._initClone=function(e){e.cx=this.cx,e.cy=this.cy}}(),g.ramp=function(){var e=g.Scale.linear();return e.range.apply(e,arguments),e},g.Scene=g.SvgScene={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml",scale:1,events:["DOMMouseScroll","mousewheel","mousedown","mouseup","mouseover","mouseout","mousemove","click","dblclick","contextmenu"],mousePositionEventSet:{mousedown:1,mouseup:1,mouseover:1,mouseout:1,mousemove:1,click:1,dblclick:1,contextmenu:1},implicit:{svg:{"shape-rendering":"auto","pointer-events":"painted",x:0,y:0,dy:0,"text-anchor":"start",transform:"translate(0,0)",fill:"none","fill-opacity":1,stroke:"none","stroke-opacity":1,"stroke-width":1.5,"stroke-linejoin":"miter","stroke-linecap":"butt","stroke-miterlimit":8,"stroke-dasharray":"none"},css:{font:"10px sans-serif"}}},g.SvgScene.updateAll=function(e){if(e.length&&e[0].reverse&&"line"!==e.type&&"area"!==e.type){for(var t=Object.create(e),n=0,r=e.length-1;r>=0;n++,r--)t[n]=e[r];e=t}this.removeSiblings(this[e.type](e))},g.SvgScene.create=function(e){return document.createElementNS(this.svg,e)},g.SvgScene.expect=function(e,t,n,r,i,s){var o;e&&(o=e.tagName,"defs"===o?(e=e.nextSibling,e&&(o=e.tagName)):"a"===o&&(e=e.firstChild));if(e){if(o!==t){var u=this.create(t);e.parentNode.replaceChild(u,e),e=u}}else e=this.create(t);return i&&this.setAttributes(e,i),s&&this.setStyle(e,s),e},g.SvgScene.setAttributes=function(e,t){var n=this.implicit.svg,r=e.__attributes__;r===t&&(r=null);for(var i in t){var s=t[i];r&&s===r[i]||(null==s||s==n[i]?e.removeAttribute(i):e.setAttribute(i,s))}e.__attributes__=t},g.SvgScene.setStyle=function(e,t){var n=this.implicit.css,r=e.__style__;r===t&&(r=null);for(var i in t){var s=t[i];r&&s===r[i]||(null==s||s==n[i]?e.style.removeProperty(i):e.style[i]=s)}e.__style__=t},g.SvgScene.append=function(e,t,n){return e.$scene={scenes:t,index:n},e=this.title(e,t[n]),e.parentNode||t.$g.appendChild(e),e.nextSibling},g.SvgScene.title=function(e,t){var n=e.parentNode;n&&"a"!=n.tagName&&(n=null);if(t.title){n||(n=this.create("a"),n.setAttributeNS(this.xlink,"xlink:href",""),e.parentNode&&e.parentNode.replaceChild(n,e),n.appendChild(e)),n.setAttributeNS(this.xlink,"xlink:title",t.title);for(var r=null,i=e.firstChild;null!=i;i=i.nextSibling)if("title"==i.nodeName){r=i;break}return r?r.removeChild(r.firstChild):(r=this.create("title"),e.appendChild(r)),r.appendChild(document.createTextNode(t.title)),n}return n&&n.parentNode.replaceChild(e,n),e},g.SvgScene.dispatch=g.listener(function(e){var t=e.target.$scene;if(t){var n=e.type;switch(n){case"DOMMouseScroll":n="mousewheel",e.wheel=-480*e.detail;break;case"mousewheel":e.wheel=(window.opera?12:1)*e.wheelDelta}g.Mark.dispatch(n,t.scenes,t.index,e)&&(e.preventDefault(),e.stopPropagation())}}),g.SvgScene.removeSiblings=function(e){for(;e;){var t=e.nextSibling;"defs"!==e.nodeName&&e.parentNode.removeChild(e),e=t}},g.SvgScene.undefined=function(){},!function(){var e={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},t={shortdash:[3,1],shortdot:[1,1],shortdashdot:[3,1,1,1],shortdashdotdot:[3,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};g.SvgScene.isStandardDashStyle=function(e){return t.hasOwnProperty(e)},g.SvgScene.translateDashStyleAlias=function(t){return e.hasOwnProperty(t)?e[t]:t},g.SvgScene.parseDasharray=function(e){var n=e.strokeDasharray;if(n&&"none"!==n){n=this.translateDashStyleAlias(n);var r=t[n];n=r?r:n.split(/[\s,]+/);var i=e.lineWidth,s=e.lineCap||"butt",o="butt"===s;n=n.map(function(e,t){return e=+e,o||(t%2?e++:e-=1),0>=e&&(e=.001),e*i/this.scale},this).join(" ")}else n=null;return n}}(),!function(){var e=/^url\(#/,t=1,n=Math.PI/2,r=n/2,i=Math.SQRT2/2,s=Math.abs,o=Math.sin,u=Math.cos,a=function(e){return s(e)<=1e-12?0:e};g.SvgScene.addFillStyleDefinition=function(n,r){if(r.type&&"solid"!==r.type&&!e.test(r.color)){var i=n.mark.root,s=i.__fillStyleMap__||(i.__fillStyleMap__={}),o=r.key,u=s[o];if(!u){u=s[o]="__pvGradient"+t++;var a=f.call(this,n,r,u);i.scene.$defs.appendChild(a)}r.color="url(#"+u+")"}};var f=function(e,t,f){var l="lineargradient"===t.type,c=this.create(l?"linearGradient":"radialGradient");c.setAttribute("id",f);if(l){var h=t.angle-n,p=s(h%n)-r,d=s(i*u(p)),v=d*u(h),m=d*o(h);c.setAttribute("x1",a(.5-v)),c.setAttribute("y1",a(.5-m)),c.setAttribute("x2",a(.5+v)),c.setAttribute("y2",a(.5+m))}for(var g=t.stops,y=g.length,b=0;y>b;b++){var w=g[b],E=c.appendChild(this.create("stop")),S=w.color;E.setAttribute("offset",w.offset+"%"),E.setAttribute("stop-color",S.color),E.setAttribute("stop-opacity",S.opacity+"")}return c}}(),g.SvgScene.pathBasis=function(){function e(e,t,n,r,i){return{x:e[0]*t.left+e[1]*n.left+e[2]*r.left+e[3]*i.left,y:e[0]*t.top+e[1]*n.top+e[2]*r.top+e[3]*i.top}}var t=[[1/6,2/3,1/6,0],[0,2/3,1/3,0],[0,1/3,2/3,0],[0,1/6,2/3,1/6]],n=function(n,r,i,s){var o=e(t[1],n,r,i,s),u=e(t[2],n,r,i,s),a=e(t[3],n,r,i,s);return"C"+o.x+","+o.y+","+u.x+","+u.y+","+a.x+","+a.y};return n.segment=function(n,r,i,s){var o=e(t[0],n,r,i,s),u=e(t[1],n,r,i,s),a=e(t[2],n,r,i,s),f=e(t[3],n,r,i,s);return["M"+o.x+","+o.y,"C"+u.x+","+u.y+","+a.x+","+a.y+","+f.x+","+f.y]},n}(),g.SvgScene.curveBasis=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;if(2>=r)return"";var i="",s=e[t],o=s,u=s,a=e[t+1];i+=this.pathBasis(s,o,u,a);for(var f=t+2;n>=f;f++)s=o,o=u,u=a,a=e[f],i+=this.pathBasis(s,o,u,a);return i+=this.pathBasis(o,u,a,a),i+=this.pathBasis(u,a,a,a),i},g.SvgScene.curveBasisSegments=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;if(2>=r)return"";var i=[],s=e[t],o=s,u=s,a=e[t+1],f=this.pathBasis.segment(s,o,u,a);s=o,o=u,u=a,a=e[t+2],f[1]+=this.pathBasis(s,o,u,a),i.push(f);for(var l=t+3;n>=l;l++)s=o,o=u,u=a,a=e[l],i.push(this.pathBasis.segment(s,o,u,a));var c=this.pathBasis.segment(o,u,a,a);return c[1]+=this.pathBasis(u,a,a,a),i.push(c),i},g.SvgScene.curveHermite=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;var s=t.length;if(1>s||i!==s&&i!==s+2)return"";var o=i!==s,u="",a=e[n],f=e[n+1],l=t[0],c=l,h=n+1;o&&(u+="Q"+(f.left-2*l.x/3)+","+(f.top-2*l.y/3)+","+f.left+","+f.top,a=e[n+1],h=n+2);if(s>1){c=t[1],f=e[h],h++,u+="C"+(a.left+l.x)+","+(a.top+l.y)+","+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top;for(var p=2;s>p;p++,h++)f=e[h],c=t[p],u+="S"+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top}if(o){var d=e[h];u+="Q"+(f.left+2*c.x/3)+","+(f.top+2*c.y/3)+","+d.left+","+d.top}return u},g.SvgScene.curveHermiteSegments=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;var s=t.length;if(1>s||i!==s&&i!==s+2)return[];var o=i!==s,u=[],a=e[n],f=a,l=t[0],c=l,h=n+1;o&&(f=e[n+1],u.push(["M"+a.left+","+a.top,"Q"+(f.left-2*c.x/3)+","+(f.top-2*c.y/3)+","+f.left+","+f.top]),h=n+2);for(var p=1;s>p;p++,h++)a=f,l=c,f=e[h],c=t[p],u.push(["M"+a.left+","+a.top,"C"+(a.left+l.x)+","+(a.top+l.y)+","+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top]);if(o){var d=e[h];u.push(["M"+f.left+","+f.top,"Q"+(f.left+2*c.x/3)+","+(f.top+2*c.y/3)+","+d.left+","+d.top])}return u},g.SvgScene.cardinalTangents=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;for(var s=[],o=(1-t)/2,u=e[n],a=e[n+1],f=e[n+2],l=n+3;r>=l;l++)s.push({x:o*(f.left-u.left),y:o*(f.top-u.top)}),u=a,a=f,f=e[l];return s.push({x:o*(f.left-u.left),y:o*(f.top-u.top)}),s},g.SvgScene.curveCardinal=function(e,t,n,r){var i;return null==n?(i=e.length,n=0,r=i-1):i=r-n+1,2>=i?"":this.curveHermite(e,this.cardinalTangents(e,t,n,r),n,r)},g.SvgScene.curveCardinalSegments=function(e,t,n,r){var i;return null==n?(i=e.length,n=0,r=i-1):i=r-n+1,2>=i?"":this.curveHermiteSegments(e,this.cardinalTangents(e,t,n,r),n,r)},g.SvgScene.monotoneTangents=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;var i,s=[],o=[],u=[],a=[],f=0;for(f=0;r-1>f;f++){i=t+f;var l=e[i+1].left-e[i].left;o[f]=Math.abs(l)<=1e-12?0:(e[i+1].top-e[i].top)/l}u[0]=o[0],a[0]=e[t+1].left-e[t].left;for(f=1,i=t+f;r-1>f;f++,i++)u[f]=(o[f-1]+o[f])/2,a[f]=(e[i+1].left-e[i-1].left)/2;u[f]=o[f-1],a[f]=e[i].left-e[i-1].left;for(f=0;r-1>f;f++)0==o[f]&&(u[f]=0,u[f+1]=0);for(f=0;r-1>f;f++)if(!(Math.abs(u[f])<1e-5||Math.abs(u[f+1])<1e-5)){var c=u[f]/o[f],h=u[f+1]/o[f],p=c*c+h*h;if(p>9){var d=3/Math.sqrt(p);u[f]=d*c*o[f],u[f+1]=d*h*o[f]}}for(var v,m=0;r>m;m++)v=1+u[m]*u[m],s.push({x:a[m]/3/v,y:u[m]*a[m]/3/v});return s},g.SvgScene.curveMonotone=function(e,t,n){var r;return null==t?(r=e.length,t=0,n=r-1):r=n-t+1,2>=r?"":this.curveHermite(e,this.monotoneTangents(e,t,n),t,n)},g.SvgScene.curveMonotoneSegments=function(e,t,n){var r;return null==t?(r=e.length,t=0,n=r-1):r=n-t+1,2>=r?"":this.curveHermiteSegments(e,this.monotoneTangents(e,t,n),t,n)},g.SvgScene.area=function(e){var t=e.$g.firstChild,n=e.length;if(!n)return t;var r=e[0];return"smart"===r.segmented?this.areaSegmentedSmart(t,e):r.segmented?this.areaSegmentedFull(t,e):this.areaFixed(t,e,0,n-1,!0)},g.SvgScene.areaFixed=function(e,t,n,r,i){var s=r-n+1;if(1===s)return this.lineAreaDotAlone(e,t,n);var o=t[n];if(!o.visible)return e;var u=o.fillStyle,a=o.strokeStyle;if(!u.opacity&&!a.opacity)return e;this.addFillStyleDefinition(t,u),this.addFillStyleDefinition(t,a);var f=!1,l=!1,c=!1,h=!1,p=!1;switch(o.interpolate){case"basis":f=!0;break;case"cardinal":l=!0;break;case"monotone":c=!0;break;case"step-after":h=!0;break;case"step-before":p=!0}for(var d,v,m=f||l||c,g=[],y=n;r>=y;y++){d=t[y];if(d.width||d.height){for(var b=y+1;r>=b;b++){v=t[b];if(!v.width&&!v.height)break}y>n&&!h&&y--,r>=b&&!p&&b++;var w=m&&b-y>2?this.areaPathCurve:this.areaPathStraight;g.push(w.call(this,t,y,b-1,o)),y=b-1}}if(!g.length)return e;var E=a.opacity;return e=this.expect(e,"path",t,n,{"shape-rendering":o.antialias?null:"crispEdges","pointer-events":i?o.events:"none",cursor:o.cursor,d:"M"+g.join("ZM")+"Z",fill:u.color,"fill-opacity":u.opacity||null,stroke:a.color,"stroke-opacity":E||null,"stroke-width":E?o.lineWidth/this.scale:null,"stroke-linecap":o.lineCap,"stroke-linejoin":o.lineJoin,"stroke-miterlimit":o.strokeMiterLimit,"stroke-dasharray":E?this.parseDasharray(o):null}),o.svg&&this.setAttributes(e,o.svg),o.css&&this.setStyle(e,o.css),this.append(e,t,n)},g.SvgScene.areaSegmentedSmart=function(e,t){return this.eachLineAreaSegment(e,t,function(e,t,n,r){var i=this.areaSegmentPaths(t,n,r),s=i.top,o=i.bottom,u=n,a={breakOnKeyChange:!0,from:n,to:r};return this.eachLineAreaSegment(e,t,a,function(e,t,n,r,i,a){var f=t[n],l=f.fillStyle,c=f.strokeStyle;this.addFillStyleDefinition(t,l),this.addFillStyleDefinition(t,c);if(n===r)return this.lineAreaDotAlone(e,t,n);var h=this.areaJoinPaths(s,o,n-u,r-u-1),p=c.opacity,d={"shape-rendering":f.antialias?null:"crispEdges","pointer-events":a,cursor:f.cursor,d:h,fill:l.color,"fill-opacity":l.opacity||null,stroke:c.color,"stroke-opacity":p||null,"stroke-width":p?f.lineWidth/this.scale:null,"stroke-linecap":f.lineCap,"stroke-linejoin":f.lineJoin,"stroke-miterlimit":f.strokeMiterLimit,"stroke-dasharray":p?this.parseDasharray(f):null};return e=this.expect(e,"path",t,n,d,f.css),this.append(e,t,n)})})},g.SvgScene.areaSegmentPaths=function(e,t,n){return this.areaSegmentCurvePaths(e,t,n)||this.areaSegmentStraightPaths(e,t,n)},g.SvgScene.areaSegmentCurvePaths=function(e,t,n){var r=n-t+1,i=e[t],s="basis"===i.interpolate,o=!s&&"cardinal"===i.interpolate;if(s||o||"monotone"==i.interpolate){for(var u=[],a=[],f=0;r>f;f++){var l=e[t+f],c=e[n-f];u.push(l),a.push({left:c.left+c.width,top:c.top+c.height})}var h,p;s?(h=this.curveBasisSegments(u),p=this.curveBasisSegments(a)):o?(h=this.curveCardinalSegments(u,i.tension),p=this.curveCardinalSegments(a,i.tension)):(h=this.curveMonotoneSegments(u),p=this.curveMonotoneSegments(a));if(h||h.length)return{from:t,top:h,bottom:p}}},g.SvgScene.areaSegmentStraightPaths=function(e,t,n){for(var r=[],i=[],s=n,o=t;s>t;t++,n--){var u=e[t],a=e[n],f=["M"+u.left+","+u.top],l=["M"+(a.left+a.width)+","+(a.top+a.height)],c=e[t+1],h=e[n-1];switch(u.interpolate){case"step-before":f.push("V"+c.top+"H"+c.left);break;case"step-after":f.push("H"+c.left+"V"+c.top);break;default:f.push("L"+c.left+","+c.top)}l.push("L"+(h.left+h.width)+","+(h.top+h.height)),r.push(f),i.push(l)}return{from:o,top:r,bottom:i}},g.SvgScene.areaJoinPaths=function(e,t,n,r){for(var i="",s="",o=e.length,u=n,a=o-1-r;r>=u;u++,a++){var f,l,c=e[u],h=t[a];u===n?(f=c.join(""),l="L"+h[0].substr(1)+h[1]):(f=c[1],l=h[1]),i+=f,s+=l}return i+s+"Z"},g.SvgScene.areaSegmentedFull=function(e,t){var n,r,i=t.length,s=this.areaSegmentCurvePaths(t,0,i-1);s&&(n=s.top,r=s.bottom);for(var o=(t[0],0);i-1>o;o++){var u=t[o],a=t[o+1];if(u.visible&&a.visible){var f=u.fillStyle,l=u.strokeStyle;if(f.opacity||l.opacity){var c;if(n){var h=n[o].join(""),p="L"+r[i-o-2].join("").substr(1);c=h+p+"Z"}else{var d=u,v=a;switch(u.interpolate){case"step-before":d=a;break;case"step-after":v=u}c="M"+u.left+","+d.top+"L"+a.left+","+v.top+"L"+(a.left+a.width)+","+(v.top+v.height)+"L"+(u.left+u.width)+","+(d.top+d.height)+"Z"}var m={"shape-rendering":u.antialias?null:"crispEdges","pointer-events":u.events,cursor:u.cursor,d:c,fill:f.color,"fill-opacity":f.opacity||null,stroke:l.color,"stroke-opacity":l.opacity||null,"stroke-width":l.opacity?u.lineWidth/this.scale:null};e=this.expect(e,"path",t,o,m),u.svg&&this.setAttributes(e,u.svg),u.css&&this.setStyle(e,u.css),e=this.append(e,t,o)}}}return e},g.SvgScene.areaPathStraight=function(e,t,n,r){for(var i=[],s=[],o=n;o>=t;t++,n--){var u=e[t],a=e[n],f=u.left+","+u.top,l=a.left+a.width+","+(a.top+a.height);if(o>t){var c=e[t+1],h=e[n-1];switch(r.interpolate){case"step-before":f+="V"+c.top,l+="H"+(h.left+h.width);break;case"step-after":f+="H"+c.left,l+="V"+(h.top+h.height)}}i.push(f),s.push(l)}return i.concat(s).join("L")},g.SvgScene.areaPathCurve=function(e,t,n,r){for(var i,s,o=[],u=[],a=n;a>=t;t++,n--){var f=e[n];o.push(e[t]),u.push({left:f.left+f.width,top:f.top+f.height})}switch(r.interpolate){case"basis":i=this.curveBasis(o),s=this.curveBasis(u);break;case"cardinal":i=this.curveCardinal(o,r.tension),s=this.curveCardinal(u,r.tension);break;default:i=this.curveMonotone(o),s=this.curveMonotone(u)}return o[0].left+","+o[0].top+i+"L"+u[0].left+","+u[0].top+s},g.SvgScene.minBarWidth=1,g.SvgScene.minBarHeight=1,g.SvgScene.minBarLineWidth=.2,g.SvgScene.bar=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(!(!r.visible||Math.abs(r.width)<=1e-10||Math.abs(r.height)<=1e-10)){r.width<this.minBarWidth&&(r.width=this.minBarWidth),r.height<this.minBarHeight&&(r.height=this.minBarHeight);var i=r.fillStyle,s=r.strokeStyle;if(i.opacity||s.opacity){this.addFillStyleDefinition(e,i),this.addFillStyleDefinition(e,s);var o;s.opacity?(o=r.lineWidth,o=1e-10>o?0:Math.max(this.minBarLineWidth,o/this.scale)):o=null,t=this.expect(t,"rect",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x:r.left,y:r.top,width:Math.max(1e-10,r.width),height:Math.max(1e-10,r.height),fill:i.color,"fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":s.opacity||null,"stroke-width":o,"stroke-linecap":r.lineCap,"stroke-dasharray":s.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},g.SvgScene.dot=function(e){for(var t=e.$g.firstChild,n=0,r=e.length;r>n;n++){var i=e[n];if(i.visible){var s=i.fillStyle,o=s.opacity,u=i.strokeStyle,a=u.opacity;if(o||a){this.addFillStyleDefinition(e,s),this.addFillStyleDefinition(e,u);var f={"shape-rendering":i.antialias?null:"crispEdges","pointer-events":i.events,cursor:i.cursor,fill:s.color,"fill-opacity":o||null,stroke:u.color,"stroke-opacity":a||null,"stroke-width":a?i.lineWidth/this.scale:null,"stroke-linecap":i.lineCap,"stroke-dasharray":a?this.parseDasharray(i):null},l=i.shape||"circle",c=i.aspectRatio,h=i.shapeAngle,p=null;if("circle"!==l&&this.hasSymbol(l)){var d=i.shapeRadius,v=d,m=d;if(c>0&&1!==c){var y=1/Math.sqrt(c),b=c*y;v*=b,m*=y}f.d=this.renderSymbol(l,i,v,m),l="path",p="translate("+i.left+","+i.top+") ",h&&(p+="rotate("+g.degrees(h)+") ")}else 1===c?(l="circle",f.cx=i.left,f.cy=i.top,f.r=i.shapeRadius):(l="ellipse",f.cx=f.cy=0,p="translate("+i.left+","+i.top+") ",h&&(p+="rotate("+g.degrees(h)+") "),f.rx=i._width/2,f.ry=i._height/2);p&&(f.transform=p),t=this.expect(t,l,e,n,f),i.svg&&this.setAttributes(t,i.svg),i.css&&this.setStyle(t,i.css),t=this.append(t,e,n)}}}return t},!function(e){var t={};e.registerSymbol=function(n,r){return t[n.toLowerCase()]=r,e},e.renderSymbol=function(n,r,i,s){return t[n].call(e,r,n,i,s)},e.hasSymbol=function(e){return t.hasOwnProperty(e)},e.symbols=function(){return g.keys(t)};var n=2/Math.sqrt(3);e.registerSymbol("circle",function(){throw new Error("Not implemented as a symbol")}).registerSymbol("cross",function(e,t,n,r){var i=(e.shapeRadius,-n),s=-r;return"M"+i+","+s+"L"+n+","+r+"M"+n+","+s+"L"+i+","+r}).registerSymbol("triangle",function(e,t,r,i){var s=i,o=r*n,u=-i,a=-o;return"M0,"+s+"L"+o+","+u+" "+a+","+u+"Z"}).registerSymbol("diamond",function(e,t,n,r){var i=n*Math.SQRT2,s=r*Math.SQRT2,o=-i,u=-s;return"M0,"+u+"L"+i+",0 0,"+s+" "+o+",0Z"}).registerSymbol("square",function(e,t,n,r){var i=-n,s=-r;return"M"+i+","+s+"L"+n+","+s+" "+n+","+r+" "+i+","+r+"Z"}).registerSymbol("tick",function(e,t,n,r){var i=-r*r;return"M0,0L0,"+i}).registerSymbol("bar",function(e,t,n,r){var i=r*r/2;return"M0,"+i+"L0,"+ -i})}(g.SvgScene),g.SvgScene.image=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){t=this.fill(t,e,n);if(r.image){t=this.expect(t,"foreignObject",e,n,{cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css);var i=t.firstChild||t.appendChild(document.createElementNS(this.xhtml,"canvas"));i.$scene={scenes:e,index:n},i.style.width=r.width,i.style.height=r.height,i.width=r.imageWidth,i.height=r.imageHeight,i.getContext("2d").putImageData(r.image,0,0)}else t=this.expect(t,"image",e,n,{preserveAspectRatio:"none",cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t.setAttributeNS(this.xlink,"xlink:href",r.url);t=this.append(t,e,n),t=this.stroke(t,e,n)}}return t},g.SvgScene.label=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.textStyle;if(i.opacity&&r.text){var s=0,o=0,u=0,a="start";switch(r.textBaseline){case"middle":u=".35em";break;case"top":u=".71em",o=r.textMargin;break;case"bottom":o="-"+r.textMargin}switch(r.textAlign){case"right":a="end",s="-"+r.textMargin;break;case"center":a="middle";break;case"left":s=r.textMargin}t=this.expect(t,"text",e,n,{"pointer-events":r.events,cursor:r.cursor,x:s,y:o,dy:u,transform:"translate("+r.left+","+r.top+")"+(r.textAngle?" rotate("+180*r.textAngle/Math.PI+")":"")+(1!=this.scale?" scale("+1/this.scale+")":""),fill:i.color,"fill-opacity":i.opacity||null,"text-anchor":a},{font:r.font,"text-shadow":r.textShadow,"text-decoration":r.textDecoration}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t.firstChild?t.firstChild.nodeValue=r.text:t.appendChild(document.createTextNode(r.text)),t=this.append(t,e,n)}}}return t},g.SvgScene.line=function(e){var t=e.$g.firstChild,n=e.length;if(!n)return t;var r=e[0];return"smart"===r.segmented?this.lineSegmentedSmart(t,e):2>n?t:r.segmented?this.lineSegmentedFull(t,e):this.lineFixed(t,e)},g.SvgScene.lineFixed=function(e,t){var n=t.length;if(1===n)return this.lineAreaDotAlone(e,t,0);var r=t[0];if(!r.visible)return e;var i=r.fillStyle,s=r.strokeStyle;if(!i.opacity&&!s.opacity)return e;this.addFillStyleDefinition(t,i),this.addFillStyleDefinition(t,s);var o="M"+r.left+","+r.top,u=n>2;if(u)switch(r.interpolate){case"basis":o+=this.curveBasis(t);break;case"cardinal":o+=this.curveCardinal(t,r.tension);break;case"monotone":o+=this.curveMonotone(t);break;default:u=!1}if(!u)for(var a=1;n>a;a++)o+=this.lineSegmentPath(t[a-1],t[a]);var f=s.opacity,l={"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,d:o,fill:i.color,"fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":f||null,"stroke-width":f?r.lineWidth/this.scale:null,"stroke-linecap":r.lineCap,"stroke-linejoin":r.lineJoin,"stroke-miterlimit":r.strokeMiterLimit,"stroke-dasharray":f?this.parseDasharray(r):null};return e=this.expect(e,"path",t,0,l,r.css),r.svg&&this.setAttributes(e,r.svg),this.append(e,t,0)},g.SvgScene.lineSegmentedSmart=function(e,t){return this.eachLineAreaSegment(e,t,function(e,t,n,r){var i=this.lineSegmentPaths(t,n,r),s=n,o={breakOnKeyChange:!0,from:n,to:r};return this.eachLineAreaSegment(e,t,o,function(e,t,n,r,o,u){var a=t[n],f=a.fillStyle;this.addFillStyleDefinition(t,f);var l=a.strokeStyle;this.addFillStyleDefinition(t,l);if(n===r)return this.lineAreaDotAlone(e,t,n);var c=this.lineJoinPaths(i,n-s,r-s-1),h=l.opacity,p={"shape-rendering":a.antialias?null:"crispEdges","pointer-events":u,cursor:a.cursor,d:c,fill:f.color,"fill-opacity":f.opacity||null,stroke:l.color,"stroke-opacity":h||null,"stroke-width":h?a.lineWidth/this.scale:null,"stroke-linecap":a.lineCap,"stroke-linejoin":a.lineJoin,"stroke-miterlimit":a.strokeMiterLimit,"stroke-dasharray":h?this.parseDasharray(a):null};return e=this.expect(e,"path",t,n,p,a.css),this.append(e,t,n)})})},g.SvgScene.lineSegmentedFull=function(e,t){var n,r=t[0];switch(r.interpolate){case"basis":n=this.curveBasisSegments(t);break;case"cardinal":n=this.curveCardinalSegments(t,r.tension);break;case"monotone":n=this.curveMonotoneSegments(t)}for(var i=0,s=t.length-1;s>i;i++){var o=t[i],u=t[i+1];if(o.visible&&u.visible){var a=o.strokeStyle,f=g.FillStyle.transparent;if(a.opacity){var l;"linear"==o.interpolate&&"miter"==o.lineJoin?(f=a,a=g.FillStyle.transparent,l=this.pathJoin(t[i-1],o,u,t[i+2])):l=n?n[i].join(""):"M"+o.left+","+o.top+this.lineSegmentPath(o,u),e=this.expect(e,"path",t,i,{"shape-rendering":o.antialias?null:"crispEdges","pointer-events":o.events,cursor:o.cursor,d:l,fill:f.color,"fill-opacity":f.opacity||null,stroke:a.color,"stroke-opacity":a.opacity||null,"stroke-width":a.opacity?o.lineWidth/this.scale:null,"stroke-linejoin":o.lineJoin}),o.svg&&this.setAttributes(e,o.svg),o.css&&this.setStyle(e,o.css),e=this.append(e,t,i)}}}return e},g.SvgScene.lineSegmentPath=function(e,t){var n=1;switch(e.interpolate){case"polar-reverse":n=0;case"polar":var r=t.left-e.left,i=t.top-e.top,s=1-e.eccentricity,o=Math.sqrt(r*r+i*i)/(2*s);if(0>=s||s>1)break;return"A"+o+","+o+" 0 0,"+n+" "+t.left+","+t.top;case"step-before":return"V"+t.top+"H"+t.left;case"step-after":return"H"+t.left+"V"+t.top}return"L"+t.left+","+t.top},g.SvgScene.lineSegmentPaths=function(e,t,n){var r,i=e[t];switch(i.interpolate){case"basis":r=this.curveBasisSegments(e,t,n);break;case"cardinal":r=this.curveCardinalSegments(e,i.tension,t,n);break;case"monotone":r=this.curveMonotoneSegments(e,t,n)}if(!r||!r.length){r=[];for(var s=t+1;n>=s;s++){var o=e[s-1],u=e[s];r.push(["M"+o.left+","+o.top,this.lineSegmentPath(o,u)])}}return r},g.strokeMiterLimit=4,g.SvgScene.pathJoin=function(e,t,n,r){var i,s,o,u=[],a=t.lineWidth/this.scale,f=g.vector(t.left,t.top),l=g.vector(n.left,n.top),c=l.minus(f),h=c.perp().norm(),p=h.times(a/2),d=f.plus(p),v=f.minus(p),m=l.plus(p),y=l.minus(p);if(e&&e.visible){var b=g.vector(e.left,e.top),w=f.minus(b),E=w.perp().norm(),S=E.plus(h).norm(),x=this.lineIntersect(f,S,d,c),T=this.lineIntersect(f,S,v,c);o=x.minus(T).length();var N=e.lineWidth/this.scale,C=(a+N)/2;s=o/C,i=t.strokeMiterLimit||g.strokeMiterLimit;if(i>=s)u.push(T,x);else{var k=c.times(-1),L=w.norm().plus(k.norm()).norm(),A=f.plus(L.times(C/2));L.dot(h)>=0?u.push(T,A,d):u.push(v,A,x)}}else u.push(v,d);if(r&&r.visible){var O=g.vector(r.left,r.top),M=O.minus(l),_=M.perp().norm(),D=_.plus(h).norm(),P=this.lineIntersect(l,D,m,c),H=this.lineIntersect(l,D,y,c);o=P.minus(H).length();var B=r.lineWidth/this.scale,j=(B+a)/2;s=o/j,i=n.strokeMiterLimit||g.strokeMiterLimit;if(i>=s)u.push(P,H);else{var F=M.times(-1),I=c.norm().plus(F.norm()).norm(),q=l.plus(I.times(j/2));I.dot(h)>=0?u.push(m,q,H):u.push(P,q,y)}}else u.push(m,y);var R=u.shift();return"M"+R.x+","+R.y+"L"+u.map(function(e){return e.x+","+e.y}).join(" ")},g.SvgScene.lineIntersect=function(e,t,n,r){return e.plus(t.times(n.minus(e).dot(r.perp())/t.dot(r.perp())))},g.SvgScene.lineJoinPaths=function(e,t,n){for(var r=e[t].join(""),i=t+1;n>=i;i++)r+=e[i][1];return r},g.SvgScene.lineAreaDotAlone=function(e){return e},g.Scene.eventsToNumber={"":0,none:0,painted:1,all:2},g.Scene.numberToEvents=["none","painted","all"],g.SvgScene.eachLineAreaSegment=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);var i,s,o,u=g.get(n,"breakOnKeyChange",!1),a=g.get(n,"from")||0,f=g.get(n,"to",t.length-1);u&&(s=[],o=[]);for(var l=a;f>=l;){var c=t[l];if(this.isSceneVisible(c)){i=this.eventsToNumber[c.events]||0,u&&this.lineAreaSceneKey(c,s);for(var h,p=l;;){var d=p+1;if(d>f){h=d;break}var v=t[d];if(!this.isSceneVisible(v)){h=d+1;break}i=Math.max(i,this.eventsToNumber[v.events]||0),p=d;if(u){this.lineAreaSceneKey(v,o);if(!this.equalSceneKeys(s,o)){h=p;break}}}e=r.call(this,e,t,l,p,n,this.numberToEvents[i]),l=h}else l++}return e},g.SvgScene.lineAreaSceneKey=function(e,t){return t[0]=e.fillStyle.key,t[1]=e.strokeStyle.key,t[2]=e.lineWidth,t[3]=e.strokeDasharray||"none",t[4]=e.interpolate,t},g.SvgScene.isSceneVisible=function(e){return e.visible&&(e.fillStyle.opacity>0||e.strokeStyle.opacity>0)},g.SvgScene.equalSceneKeys=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]!==t[n])return!1;return!0},g.SvgScene.panel=function(e){for(var t=e.$g,n=t&&t.firstChild,r=0,i=e.length;i>r;r++){var s=e[r];if(s.visible){if(!e.parent){var o=s.canvas;this.applyCanvasStyle(o),t&&t.parentNode!==o&&(t=o.firstChild,n=t&&t.firstChild),t?n&&"defs"===n.tagName&&(n=n.nextSibling):(t=this.createRootPanelElement(),n=null,this.initRootPanelElement(t,e.mark),o.appendChild(t),e.$defs=t.appendChild(this.create("defs")),e.$g=t),t.setAttribute("width",s.width+s.left+s.right),t.setAttribute("height",s.height+s.top+s.bottom)}var u=null;if("hidden"===s.overflow){var a=this.addPanelClipPath(t,n,e,r,s);u=a.g,e.$g=t=u,n=a.next}n=this.fill(n,e,r);var f=this.scale,l=s.transform,c=s.left+l.x,h=s.top+l.y;this.scale*=l.k;if(s.children.length)for(var p={transform:"translate("+c+","+h+")"+(1!=l.k?" scale("+l.k+")":"")},d=this.getSortedChildScenes(e,r),v=0,m=d.length;m>v;v++){var g=d[v];g.$g=n=this.expect(n,"g",e,r,p),this.updateAll(g),n.parentNode||t.appendChild(n),n=n.nextSibling}this.scale=f,n=this.stroke(n,e,r),u&&(e.$g=t=u.parentNode,n=u.nextSibling)}}return n},g.SvgScene.applyCanvasStyle=function(e){e.style.display="inline-block"},g.SvgScene.createRootPanelElement=function(){return this.create("svg")},g.SvgScene.initRootPanelElement=function(e,t){e.setAttribute("font-size","10px"),e.setAttribute("font-family","sans-serif"),e.setAttribute("fill","none"),e.setAttribute("stroke","none"),e.setAttribute("stroke-width",1.5),this.disableElementSelection(e),this.listenRootPanelElement(e,t)},g.SvgScene.listenRootPanelElement=function(e,t){for(var n=0,r=this.events,i=r.length;i>n;n++)e.addEventListener(r[n],this.dispatch,!1),t._registerBoundEvent(e,r[n],this.dispatch,!1)},g.SvgScene.disableElementSelection=function(e){e.setAttribute("style","-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"),"undefined"!=typeof e.onselectstart&&(e.setAttribute("unselectable","on"),e.onselectstart=function(){return!1})},g.SvgScene.addPanelClipPath=function(e,t,n,r,i){var s=g.id().toString(36),o=this.expect(t,"g",n,r,{"clip-path":"url(#"+s+")"}),u=this.expect(o.firstChild,"clipPath",n,r,{id:s}),a=u.firstChild||u.appendChild(this.create("rect"));return a.setAttribute("x",i.left),a.setAttribute("y",i.top),a.setAttribute("width",i.width),a.setAttribute("height",i.height),u.parentNode||o.appendChild(u),o.parentNode||e.appendChild(o),{g:o,next:u.nextSibling}},g.SvgScene.getSortedChildScenes=function(e,t){var n=e[t].children;return e.mark._zOrderChildCount&&(n=n.slice(0),n.sort(function(e,t){var n=e.mark._zOrder-t.mark._zOrder;return 0===n&&(n=e.childIndex-t.childIndex),n})),n},g.SvgScene.fill=function(e,t,n){var r=t[n],i=r.fillStyle;if(i.opacity||"all"==r.events)this.addFillStyleDefinition(t,i),e=this.expect(e,"rect",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height,fill:i.color,"fill-opacity":i.opacity,stroke:null}),e=this.append(e,t,n);return e},g.SvgScene.stroke=function(e,t,n){var r=t[n],i=r.strokeStyle;if(i.opacity||"all"==r.events)e=this.expect(e,"rect",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":"all"==r.events?"stroke":r.events,cursor:r.cursor,x:r.left,y:r.top,width:Math.max(1e-10,r.width),height:Math.max(1e-10,r.height),fill:null,stroke:i.color,"stroke-opacity":i.opacity,"stroke-width":r.lineWidth/this.scale,"stroke-linecap":r.lineCap,"stroke-dasharray":i.opacity?this.parseDasharray(r):null}),e=this.append(e,t,n);return e},g.SvgScene.minRuleLineWidth=1,g.SvgScene.rule=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.strokeStyle;if(i.opacity){var s=r.lineWidth;s=1e-10>s?0:Math.max(this.minRuleLineWidth,s/this.scale),t=this.expect(t,"line",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x1:r.left,y1:r.top,x2:r.left+r.width,y2:r.top+r.height,stroke:i.color,"stroke-opacity":i.opacity,"stroke-width":s,"stroke-linecap":r.lineCap,"stroke-dasharray":i.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},g.SvgScene.wedge=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.fillStyle,s=r.strokeStyle;if(i.opacity||s.opacity){var o,u=r.innerRadius,a=r.outerRadius,f=Math.abs(r.angle);if(f>=2*Math.PI)o=u?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+ -a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+ -u+"A"+u+","+u+" 0 1,1 0,"+u+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+ -a+"A"+a+","+a+" 0 1,1 0,"+a+"Z";else{var l=Math.min(r.startAngle,r.endAngle),c=Math.max(r.startAngle,r.endAngle),h=Math.cos(l),p=Math.cos(c),d=Math.sin(l),v=Math.sin(c);o=u?"M"+a*h+","+a*d+"A"+a+","+a+" 0 "+(f<Math.PI?"0":"1")+",1 "+a*p+","+a*v+"L"+u*p+","+u*v+"A"+u+","+u+" 0 "+(f<Math.PI?"0":"1")+",0 "+u*h+","+u*d+"Z":"M"+a*h+","+a*d+"A"+a+","+a+" 0 "+(f<Math.PI?"0":"1")+",1 "+a*p+","+a*v+"L0,0Z"}this.addFillStyleDefinition(e,i),this.addFillStyleDefinition(e,s),t=this.expect(t,"path",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,transform:"translate("+r.left+","+r.top+")",d:o,fill:i.color,"fill-rule":"evenodd","fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":s.opacity||null,"stroke-width":s.opacity?r.lineWidth/this.scale:null,"stroke-linejoin":r.lineJoin,"stroke-miterlimit":r.strokeMiterLimit,"stroke-linecap":r.lineCap,"stroke-dasharray":s.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},g.Mark=function(){this.$properties=[],this.$propertiesMap={},this.$handlers={}},g.Mark.prototype.properties={},g.Mark.cast={},g.Mark.prototype.property=function(e,t){return this.hasOwnProperty("properties")||(this.properties=g.extend(this.properties)),this.properties[e]=!0,g.Mark.prototype.propertyMethod(e,!1,g.Mark.cast[e]=t),this},g.Mark.prototype.localProperty=function(e,t){this.hasOwnProperty("properties")||(this.properties=g.extend(this.properties)),this.properties[e]=!0;var n=g.Mark.cast[e];return t&&(g.Mark.cast[e]=n=t),this.propertyMethod(e,!1,n),this},g.Mark.prototype.def=function(e,t){return this.propertyMethod(e,!0),this[e](arguments.length>1?t:null)},g.Mark.prototype.propertyMethod=function(e,t,n){n||(n=g.Mark.cast[e]),this[e]=function(r,i){if(t&&this.scene){var s=this.scene.defs;if(arguments.length)return s[e]={id:null==r?0:g.id(),value:null!=r&&n?n(r):r},this;var o=s[e];return o?o.value:null}if(arguments.length)return this.setPropertyValue(e,r,t,n,!1,i),this;var u=this.instance();return g.propBuildMark===this&&1!==g.propBuilt[e]?(g.propBuilt[e]=1,u[e]=this.evalProperty(this.binds.properties[e])):u[e]}},g.Mark.funPropertyCaller=function(e,t){function n(){var n=e.apply(this,r);return null!=n?t(n):n}var r=g.Mark.stack;return n},g.Mark.prototype.setPropertyValue=function(e,t,n,r,i,s){var o=!n<<1|"function"==typeof t;1&o&&r?t=g.Mark.funPropertyCaller(t,r):null!=t&&r&&(t=r(t));var u=this.$propertiesMap,a=this.$properties,f={name:e,id:g.id(),value:t,type:o,tag:s},l=u[e];u[e]=f;if(l)for(var c=0,h=a.length;h>c;c++)if(a[c]===l){a.splice(c,1);break}return a.push(f),i&&l&&3===o&&(f.proto=l,f.root=l.root||l),f},g.Mark.prototype.intercept=function(e,t,n){return this.setPropertyValue(e,t,!1,g.get(n,"noCast")?null:g.Mark.cast[e],!0,g.get(n,"tag")),this},g.Mark.prototype.propertyValue=function(e,t){var n=this.$propertiesMap[e];if(n)return n.value;if(t){if(this.proto){var r=this.proto._propertyValueRecursive(e);if(void 0!==r)return r}return this.defaults._propertyValueRecursive(e)}},g.Mark.prototype._propertyValueRecursive=function(e){var t=this.$propertiesMap[e];return t?t.value:this.proto?this.proto._propertyValueRecursive(e):void 0},g.Mark.stack=[],g.Mark.prototype.property("data").property("visible",Boolean).property("css",Object).property("svg",Object).property("left",Number).property("right",Number).property("top",Number).property("bottom",Number).property("cursor",String).property("title",String).property("reverse",Boolean).property("antialias",Boolean).property("events",g.stringLowerCase).property("id",String),g.Mark.prototype.childIndex=-1,g.Mark.prototype.index=-1,g.Mark.prototype.scale=1,g.Mark.prototype._zOrder=0,g.Mark.prototype.defaults=(new g.Mark).data(function(e){return[e]}).visible(!0).antialias(!0).events("painted"),g.Mark.prototype.extend=function(e){return this.proto=e,this.target=e.target,this},g.Mark.prototype.add=function(e){return this.parent.add(e).extend(this)},g.Mark.prototype.zOrder=function(e){if(!arguments.length)return this._zOrder;e=+e||0;if(this._zOrder!==e){var t=this.parent;t&&0!==this._zOrder&&t._zOrderChildCount--,this._zOrder=e,t&&0!==this._zOrder&&t._zOrderChildCount++}return this},g.Mark.prototype.anchor=function(e){return(new g.Anchor(this)).name(e||"center").data(function(){return this.scene.target.map(function(e){return e.data})}).visible(function(){return this.scene.target[this.index].visible}).id(function(){return this.scene.target[this.index].id}).left(function(){var e=this.scene.target[this.index],t=e.width||0;switch(this.name()){case"bottom":case"top":case"center":return e.left+t/2;case"left":return null}return e.left+t}).top(function(){var e=this.scene.target[this.index],t=e.height||0;switch(this.name()){case"left":case"right":case"center":return e.top+t/2;case"top":return null}return e.top+t}).right(function(){var e=this.scene.target[this.index];return"left"==this.name()?e.right+(e.width||0):null}).bottom(function(){var e=this.scene.target[this.index];return"top"==this.name()?e.bottom+(e.height||0):null}).textAlign(function(){switch(this.name()){case"bottom":case"top":case"center":return"center";case"right":return"right"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"top"}return"bottom"})},g.Mark.prototype.anchorTarget=function(){return this.target},g.Mark.prototype.margin=function(e){return this.left(e).right(e).top(e).bottom(e)},g.Mark.prototype.instance=function(e){var t=this.scene||this.parent.instance(-1).children[this.childIndex],n=null==e||this.hasOwnProperty("index")?this.index:e;return t[0>n?t.length-1:n]},g.Mark.prototype.instances=function(e){for(var t,n=this,r=[];!(t=n.scene);)r.push({index:e.parentIndex,childIndex:n.childIndex}),e=e.parent,n=n.parent;for(var i=r.length;i--;){var s=r[i];t=t[s.index].children[s.childIndex]}if(this.hasOwnProperty("index")){var o=g.extend(t[this.index]);return o.right=o.top=o.left=o.bottom=0,[o]}return t},g.Mark.prototype.first=function(){return this.scene[0]},g.Mark.prototype.last=function(){return this.scene[this.scene.length-1]},g.Mark.prototype.sibling=function(){return 0==this.index?null:this.scene[this.index-1]},g.Mark.prototype.cousin=function(){var e=this.parent,t=e&&e.sibling();return t&&t.children?t.children[this.childIndex][this.index]:null},g.Mark.prototype._renderId=0,g.Mark.prototype.renderId=function(){return this.root._renderId},g.Mark.prototype.render=function(){var e=this.root;!this.parent||e.scene?(e._renderId++,this.renderCore()):e.render()},g.Mark.prototype.renderCore=function(){function e(e,n,i){e.scale=i;if(u>n){var s=n>=r.length;s&&r.unshift(null);if(e.hasOwnProperty("index"))t(e,n,i,s);else{for(var o=0,a=e.scene.length;a>o;o++)e.index=o,t(e,n,i,s);delete e.index}s&&r.shift()}else e.build(),g.Scene.scale=i,g.Scene.updateAll(e.scene);delete e.scale}function t(t,n,i,o){var u,a=t.scene[t.index];if(a.visible){var f=t.children,l=a.children,c=s[n],h=f[c];h.scene||c++;for(u=0;c>u;u++)f[u].scene=l[u];o&&(r[0]=a.data),e(h,n+1,i*a.transform.k);for(u=0;c>u;u++)f[u].scene=void 0}}for(var n=this.parent,r=g.Mark.stack,i=r.length,s=[],o=this;o.parent;o=o.parent)s.unshift(o.childIndex);var u=s.length;this.bind();for(;n&&!n.hasOwnProperty("index");)n=n.parent;try{this.context(n?n.scene:void 0,n?n.index:-1,function(){e(this.root,0,1)})}catch(a){throw r.length>i&&(r.length=i),a}},g.Mark.prototype.bind=function(){function e(e){do for(var s=e.$properties,o=s.length;o--;){var u=s[o],a=u.name,f=n[a];if(f){if(3===f.type){var l=f.root;f.root=u,l?l.proto||(l.proto=u):f.proto=u}}else{n[a]=u;switch(a){case"data":t=u;break;case"visible":case"id":r.push(u);break;default:i[u.type].push(u)}}}while(e=e.proto)}var t,n={},r=[],i=[[],[],[],[]];e(this),e(this.defaults);var s=i[0],o=i[1].reverse(),u=i[2];i[3].reverse();var a=this;do for(var f in a.properties)f in n||u.push(n[f]={name:f,type:2,value:null});while(a=a.proto);var l;if(s.length||o.length){l=s.concat(o);for(var c=0,h=l.length;h>c;c++)this.propertyMethod(l[c].name,!0)}else l=[];this.binds={properties:n,data:t,defs:l,required:r,optional:g.blend(i)}},g.Mark.prototype.build=function(){var e=g.Mark.stack,t=this.scene;if(!t){t=this.scene=[],t.mark=this,t.type=this.type,t.childIndex=this.childIndex;var n=this.parent;n&&(t.parent=n.scene,t.parentIndex=n.index)}this.target&&(t.target=this.target.instances(t));var r=this.binds.defs;if(r.length)for(var i=t.defs||(t.defs={}),s=0,o=r.length;o>s;s++){var u=r[s],a=i[u.name];(!a||u.id>a.id)&&(i[u.name]={id:0,value:1&u.type?u.value.apply(this,e):u.value})}var f=this.evalProperty(this.binds.data),l=f.length;t.length=l;if(l){var c=g.Mark.prototype;e.unshift(null);var h=g.propBuildMark,p=g.propBuilt;g.propBuildMark=this;try{for(var s=0;l>s;s++){c.index=this.index=s,g.propBuilt={};var d=t[s];d?d._state&&delete d._state:d=t[s]={},d.data=e[0]=f[s],this.preBuildInstance(d),this.buildInstance(d)}}finally{c.index=-1,delete this.index,e.shift(),g.propBuildMark=h,g.propBuilt=p}}return this},g.Mark.prototype.instanceState=function(e){return e||(e=this.instance()),e?e._state||(e._state={}):null},g.Mark.prototype.preBuildInstance=function(){},g.Mark.prototype.buildInstance=function(e){this.buildProperties(e,this.binds.required),e.visible&&(this.buildProperties(e,this.binds.optional),this.buildImplied(e))},!function(){var e,t=g.Mark.stack,n=[function(e){return this.scene.defs[e.name].value},null,function(e){return e.value},function(n){return e=n.proto,n.value.apply(this,t)}];n[1]=n[0],g.Mark.prototype.buildProperties=function(t,r){var i=g.propBuilt,s=!i;s&&(g.propBuildMark=this,g.propBuilt=i={});for(var o=e,u=0,a=r.length;a>u;u++){var f=r[u],l=f.name;l in i||(i[l]=1,t[l]=n[f.type].call(this,f))}e=o,s&&(g.propBuildMark=g.propBuilt=null)},g.Mark.prototype.evalProperty=function(t){var r=e,i=n[t.type].call(this,t);return e=r,i},g.Mark.prototype.evalInPropertyContext=function(n,r){var i=e;e=r;var s=n.apply(this,t);return e=i,s},g.Mark.prototype.delegate=function(t,n){if(e&&(!n||e.tag===n)){var r=this.evalProperty(e);if(void 0!==r)return r}return t},g.Mark.prototype.delegateExcept=function(t,n){if(e&&(!n||e.tag!==n)){var r=this.evalProperty(e);if(void 0!==r)return r}return t},g.Mark.prototype.hasDelegate=function(t){return!(!e||t&&e.tag!==t)}}(),g.Mark.prototype.buildImplied=function(e){var t,n,r=e.left,i=e.right,s=e.top,o=e.bottom,u=this.properties,a=u.width?e.width:0,f=u.height?e.height:0;if(null==a||null==i||null==r){t=this.parent&&this.parent.instance(),n=!0;var l=t?t.width:a+r+i;null==a?a=l-(i=i||0)-(r=r||0):null==i?null==r?r=i=(l-a)/2:i=l-a-r:r=l-a-i}if(null==f||null==o||null==s){n||(t=this.parent&&this.parent.instance());var c=t?t.height:f+s+o;null==f?f=c-(s=s||0)-(o=o||0):null==o?o=null==s?s=(c-f)/2:c-f-s:s=c-f-o}e.left=r,e.right=i,e.top=s,e.bottom=o,u.width&&(e.width=a),u.height&&(e.height=f),u.textStyle&&!e.textStyle&&(e.textStyle=g.FillStyle.transparent),u.fillStyle&&!e.fillStyle&&(e.fillStyle=g.FillStyle.transparent),u.strokeStyle&&!e.strokeStyle&&(e.strokeStyle=g.FillStyle.transparent)},g.Mark.prototype.mouse=function(){var e=this.root.canvas(),t=g.event,n=t&&t.pageX||0,r=t&&t.pageY||0,i=g.elementOffset(e);if(i){var s=g.cssStyle(e);n-=i.left+parseFloat(s("paddingLeft")||0),r-=i.top+parseFloat(s("paddingTop")||0)}var o=g.Transform.identity,u=this.properties.transform?this:this.parent,a=[];do a.push(u);while(u=u.parent);for(;u=a.pop();){var f=u.instance();o=o.translate(f.left,f.top).times(f.transform)}return o=o.invert(),g.vector(n*o.k+o.x,r*o.k+o.y)},g.Mark.prototype.event=function(e,t){t=g.functor(t);var n=this.$handlers[e];return n?n instanceof Array?n.push(t):n=[n,t]:n=t,this.$hasHandlers=!0,this.$handlers[e]=n,this},g.Mark.prototype.context=function(e,t,n){function r(e,t){g.Mark.scene=e,s.index=t;if(e){var n,r=e.mark,i=r,u=[];do{u.push(i),o.push(e[t].data),i.index=t,i.scene=e;if(i=i.parent)t=e.parentIndex,e=e.parent}while(i);var a=1;n=u.length-1;if(n>0)do i=u[n--],i.scale=a,a*=i.scene[i.index].transform.k;while(n);r.scale=a;var f,l=r.children;if(l&&(f=l.length)>0){var c=r.scene[r.index];a*=c.transform.k;var h=c.children;n=f;for(;n--;)i=l[n],i.scene=h[n],i.scale=a}}}function i(e){if(e){var t,n=e.mark,r=n.children;if(r)for(var i=r.length;i--;)t=r[i],t.scene=void 0,t.scale=1;t=n;var s,u=0;do{u++,delete t.index;if(s=t.parent)t.scene=void 0,t.scale=1}while(t=s);u&&(o.length-=u)}}var s=g.Mark.prototype,o=g.Mark.stack,u=g.Mark.scene,a=s.index;if(e&&e===u&&t===a)try{n.apply(this,o)}catch(f){throw g.error(f),f}finally{g.Mark.scene=u,s.index=a}else{i(u,a),r(e,t);try{n.apply(this,o)}catch(f){throw g.error(f),f}finally{i(e,t),r(u,a)}}},g.Mark.prototype.getEventHandler=function(e,t,n,r){var i=this.$handlers[e];return i?[i,t,n,r]:this.getParentEventHandler(e,t,n,r)},g.Mark.prototype.getParentEventHandler=function(e,t,n,r){var i=t.parent;return i?i.mark.getEventHandler(e,i,t.parentIndex,r):void 0},g.Mark.dispatch=function(e,t,n,r){var i=t.mark.root;if(i.$transition)return!0;var s,o=i.$interceptors&&i.$interceptors[e];if(o)for(var u=0,a=o.length;a>u;u++){s=o[u](e,r);if(s)break;if(s===!1)return!0}if(!s){s=t.mark.getEventHandler(e,t,n,r);if(!s)return!1}return this.handle.apply(this,s)},g.Mark.handle=function(e,t,n,r){var i=t.mark;return i.context(t,n,function(){var t,n,s,o=g.Mark.stack.concat(r);if(e instanceof Array){var u;for(t=0,n=e.length;n>t;t++)s=e[t].apply(i,o),s&&s.render&&(u||(u=[])).push(s);if(u)for(t=0,n=u.length;n>t;t++)u[t].render()}else s=e.apply(i,o),s&&s.render&&s.render()}),!0},g.Mark.prototype.addEventInterceptor=function(e,t,n){var r=this.root;if(r){var i=r.$interceptors||(r.$interceptors={}),s=i[e]||(i[e]=[]);n?s.unshift(t):s.push(t)}},g.Mark.prototype.eachInstance=function(e,t){function n(r,s,u){var a=r.length;if(a>0){var f,l=s===o;l||(f=i[s]);for(var c=0;a>c;c++){var h=r[c];if(h.visible)if(s===o)e.call(t,r,c,u);else{var p=h.children[f];if(p){var d=u.times(h.transform).translate(h.left,h.top);n(p,s+1,d)}}}}}for(var r=this,i=[];r.parent;)i.unshift(r.childIndex),r=r.parent;var s=r.scene;if(s){var o=i.length;n(s,0,g.Transform.identity)}},g.Mark.prototype.toScreenTransform=function(){var e=g.Transform.identity;this instanceof g.Panel&&(e=e.translate(this.left(),this.top()).times(this.transform()));var t=this.parent;if(t)do e=e.translate(t.left(),t.top()).times(t.transform());while(t=t.parent);return e},g.Mark.prototype.transition=function(){return new g.Transition(this)},g.Mark.prototype.on=function(e){return this["$"+e]=new g.Transient(this)},g.Mark.prototype.getShape=function(e,t,n){var r=e[t];if(!r.visible)return null;null==n&&(n=0);var i="_shape_inset_"+n;return r[i]||(r[i]=this.getShapeCore(e,t,n))},g.Mark.prototype.getShapeCore=function(e,t,n){var r=e[t],i=r.left,s=r.top,o=r.width,u=r.height;if(n>0&&1>=n){var a=n*o,f=n*u;i+=a,s+=f,o-=2*a,u-=2*f}return new g.Shape.Rect(i,s,o,u)},g.Mark.prototype.pointingRadiusMax=function(e){return arguments.length?(e=+e,this._pointingRadiusMax=isNaN(e)||0>e?0:e,this):this._pointingRadiusMax},g.Mark.prototype._pointingRadiusMax=1/0,g.Anchor=function(e){g.Mark.call(this),this.target=e,this.parent=e.parent},g.Anchor.prototype=g.extend(g.Mark).property("name",String),g.Anchor.prototype.extend=function(e){return this.proto=e,this},g.Area=function(){g.Mark.call(this)},g.Area.castSegmented=function(e){if(!e)return"";e=String(e).toLowerCase();switch(e){case"smart":case"full":break;default:e="full"}return e},g.Area.prototype=g.extend(g.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("lineJoin",g.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",g.stringLowerCase).property("strokeDasharray",g.stringLowerCase).property("strokeStyle",g.fillStyle).property("fillStyle",g.fillStyle).property("segmented",g.Area.castSegmented).property("interpolate",g.stringLowerCase).property("tension",Number),g.Area.prototype.type="area",g.Area.prototype.defaults=(new g.Area).extend(g.Mark.prototype.defaults).lineWidth(1.5).fillStyle(g.Colors.category20().by(g.parent)).interpolate("linear").tension(.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),g.Area.prototype.buildImplied=function(e){null==e.height&&(e.height=0),null==e.width&&(e.width=0),g.Mark.prototype.buildImplied.call(this,e)},g.Area.fixed={lineWidth:1,lineJoin:1,strokeMiterLimit:1,lineCap:1,strokeStyle:1,strokeDasharray:1,fillStyle:1,segmented:1,interpolate:1,tension:1},g.Area.prototype.bind=function(){g.Mark.prototype.bind.call(this);for(var e=this.binds,t=e.required,n=e.optional,r=0,i=n.length;i>r;r++){var s=n[r];s.fixed=s.name in g.Area.fixed,"segmented"==s.name&&(t.push(s),n.splice(r,1),r--,i--)}this.binds.$required=t,this.binds.$optional=n},g.Area.prototype.buildInstance=function(e){function t(e){return!e.fixed||(r.push(e),!1)}var n=this.binds;if(this.index){var r=n.fixed;r||(r=n.fixed=[],n.required=n.required.filter(t),this.scene[0].segmented||(n.optional=n.optional.filter(t)));var i=r.length;if(i)for(var s=this.scene[0],o=0;i>o;o++){var u=r[o].name;e[u]=s[u]}}else n.required=n.$required,n.optional=n.$optional,n.fixed=null;g.Mark.prototype.buildInstance.call(this,e)},g.Area.prototype.anchor=function(e){return g.Mark.prototype.anchor.call(this,e).interpolate(function(){return this.scene.target[this.index].interpolate}).eccentricity(function(){return this.scene.target[this.index].eccentricity}).tension(function(){return this.scene.target[this.index].tension})},g.Area.prototype.getEventHandler=function(e,t,n,r){var i=t[n],s=1===g.Scene.mousePositionEventSet[e]&&(!i.segmented||"smart"===i.segmented);if(!s)return g.Mark.prototype.getEventHandler.call(this,e,t,n,r);var o,u="mousemove"===e?this.$handlers.mouseover:null,a=this.$handlers[e],f=a||u;return f&&(o=this.getNearestInstanceToMouse(t,n),u&&!this.filterMouseMove(t,o)&&(u=null,f=a)),f?(a&&u&&(f=[].concat(a,u)),[f,t,o,r]):this.getParentEventHandler(e,t,n,r)},g.Area.prototype.filterMouseMove=function(e,t){var n=this._mouseOverScene;if(!n||n!==e||this._mouseOverIndex!==t)return this._mouseOverScene=e,this._mouseOverIndex=t,!0},g.Area.prototype.getNearestInstanceToMouse=function(e,t){for(var n=this.mouse(),r=1/0,i=null,s=t,o=e.length;o>s;s++){var u=this.getShape(e,s);if(u){if(u.containsPoint(n))return s;var a=u.distance2(n).dist2;r>a&&(r=a,i=s)}}return null!=i?i:t},g.Area.prototype.getShapeCore=function(e,t){var n=e[t],r=n.width||0,i=n.height||0,s=n.left,o=n.top,u=t+1<e.length?e[t+1]:null;if(!u||!u.visible)return new g.Shape.Line(s,o,s+r,o+i);var a=u.left,f=u.top,l=u.height||0,c=u.width||0;return new g.Shape.Polygon([new g.Vector(s,o),new g.Vector(a,f),new g.Vector(a+c,f+l),new g.Vector(s+r,o+i)])},g.Bar=function(){g.Mark.call(this)},g.Bar.prototype=g.extend(g.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",g.fillStyle).property("fillStyle",g.fillStyle).property("lineCap",g.stringLowerCase).property("strokeDasharray",g.stringLowerCase),g.Bar.prototype.type="bar",g.Bar.prototype.defaults=(new g.Bar).extend(g.Mark.prototype.defaults).lineWidth(1.5).fillStyle(g.Colors.category20().by(g.parent)).lineCap("butt").strokeDasharray("none"),g.Dot=function(){g.Mark.call(this)},g.Dot.prototype=g.extend(g.Mark).property("shape",g.stringLowerCase).property("shapeAngle",Number).property("shapeRadius",Number).property("shapeSize",Number).property("aspectRatio",Number).property("lineWidth",Number).property("strokeStyle",g.fillStyle).property("lineCap",g.stringLowerCase).property("strokeDasharray",g.stringLowerCase).property("fillStyle",g.fillStyle),g.Dot.prototype.type="dot",g.Dot.prototype.defaults=(new g.Dot).extend(g.Mark.prototype.defaults).shape("circle").aspectRatio(1).lineWidth(1.5).strokeStyle(g.Colors.category10().by(g.parent)).lineCap("butt").strokeDasharray("none"),g.Dot.prototype.anchor=function(e){return g.Mark.prototype.anchor.call(this,e).left(function(){var e=this.scene.target[this.index];switch(this.name()){case"bottom":case"top":case"center":return e.left;case"left":return null}return e.left+e._width/2}).right(function(){var e=this.scene.target[this.index];return"left"==this.name()?e.right+e._width/2:null}).top(function(){var e=this.scene.target[this.index];switch(this.name()){case"left":case"right":case"center":return e.top;case"top":return null}return e.top+e._height/2}).bottom(function(){var e=this.scene.target[this.index];return"top"==this.name()?e.bottom+e._height/2:null}).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"bottom":return"top"}return"bottom"})},g.Dot.prototype.buildImplied=function(e){var t=e.shapeRadius,n=e.shapeSize,r=e.aspectRatio||1;null==t?null==n?(n=e.shapeSize=20.25,t=e.shapeRadius=4.5):t=e.shapeRadius=Math.sqrt(n):null==n&&(n=e.shapeSize=t*t);var i,s;1===r||0>r?i=s=2*t:(i=2*t/Math.sqrt(r),s=r*i),e._height=i,e._width=s,g.Mark.prototype.buildImplied.call(this,e)},g.Dot.prototype.width=function(){return this.instance()._width},g.Dot.prototype.height=function(){return this.instance()._height},g.Dot.prototype.getShapeCore=function(e,t){var n=e[t],r=n._width,i=n._height,s=n.left,o=n.top;switch(n.shape){case"diamond":r*=Math.SQRT2,i*=Math.SQRT2;case"square":case"cross":return new g.Shape.Rect(s-i/2,o-r/2,i,r)}return new g.Shape.Circle(s,o,n.shapeRadius)},g.Label=function(){g.Mark.call(this)},g.Label.prototype=g.extend(g.Mark).property("text",String).property("font",String).property("textAngle",Number).property("textStyle",g.color).property("textAlign",g.stringLowerCase).property("textBaseline",g.stringLowerCase).property("textMargin",Number).property("textDecoration",String).property("textShadow",String),g.Label.prototype.type="label",g.Label.prototype.defaults=(new g.Label).extend(g.Mark.prototype.defaults).events("none").text(g.identity).font("10px sans-serif").textAngle(0).textStyle("black").textAlign("left").textBaseline("bottom").textMargin(3),g.Label.prototype.getShapeCore=function(e,t,n){var r=e[t],i=g.Text.measure(r.text,r.font),s=r.left,o=r.top,u=i.width,a=i.height;if(n>0&&1>=n){var f=n*u,l=n*a;s+=f,o+=l,u-=2*f,a-=2*l}return g.Label.getPolygon(u,a,r.textAlign,r.textBaseline,r.textAngle,r.textMargin).apply(g.Transform.identity.translate(s,o))},g.Label.getPolygon=function(e,t,n,r,i,s){var o,u;switch(r){case"middle":u=t/2;break;case"top":u=s+t;break;case"bottom":u=-s}switch(n){case"right":o=-s-e;break;case"center":o=-e/2;break;case"left":o=s}var a=new g.Vector(o,u),f=a.plus(e,0),l=f.plus(0,-t),c=a.plus(0,-t);return 0!==i&&(a=a.rotate(i),f=f.rotate(i),c=c.rotate(i),l=l.rotate(i)),new g.Shape.Polygon([a,f,l,c])},g.Line=function(){g.Mark.call(this)},g.Line.prototype=g.extend(g.Mark).property("lineWidth",Number).property("lineJoin",g.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",g.stringLowerCase).property("strokeStyle",g.fillStyle).property("strokeDasharray",g.stringLowerCase).property("fillStyle",g.fillStyle).property("segmented",g.Area.castSegmented).property("interpolate",g.stringLowerCase).property("eccentricity",Number).property("tension",Number),g.Line.prototype.type="line",g.Line.prototype.defaults=(new g.Line).extend(g.Mark.prototype.defaults).lineWidth(1.5).strokeStyle(g.Colors.category10().by(g.parent)).interpolate("linear").eccentricity(0).tension(.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),g.Line.prototype.bind=g.Area.prototype.bind,g.Line.prototype.buildInstance=g.Area.prototype.buildInstance,g.Line.prototype.getEventHandler=g.Area.prototype.getEventHandler,g.Line.prototype.getNearestInstanceToMouse=g.Area.prototype.getNearestInstanceToMouse,g.Line.prototype.filterMouseMove=g.Area.prototype.filterMouseMove,g.Line.prototype.anchor=function(e){return g.Area.prototype.anchor.call(this,e).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center";case"right":return"left"}}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"bottom";case"bottom":return"top"}})},g.Line.prototype.getShapeCore=function(e,t){var n=e[t],r=t+1<e.length?e[t+1]:null;return null!=r&&r.visible?new g.Shape.Line(n.left,n.top,r.left,r.top):new g.Shape.Point(n.left,n.top)},g.Rule=function(){g.Mark.call(this)},g.Rule.prototype=g.extend(g.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",g.fillStyle).property("lineCap",g.stringLowerCase).property("strokeDasharray",g.stringLowerCase),g.Rule.prototype.type="rule",g.Rule.prototype.defaults=(new g.Rule).extend(g.Mark.prototype.defaults).lineWidth(1).strokeStyle("black").antialias(!1).lineCap("butt").strokeDasharray("none"),g.Rule.prototype.anchor=g.Line.prototype.anchor,g.Rule.prototype.buildImplied=function(e){var t=e.left,n=e.right;e.top,e.bottom,null!=e.width||null==t&&null==n||null!=n&&null!=t?e.height=0:e.width=0,g.Mark.prototype.buildImplied.call(this,e)},g.Rule.prototype.getShapeCore=function(e,t){var n=e[t];return new g.Shape.Line(n.left,n.top,n.left+n.width,n.top+n.height)},g.Panel=function(){g.Bar.call(this),this.children=[],this.root=this,this.$dom=g.$&&g.$.s},g.Panel.prototype=g.extend(g.Bar).property("transform").property("overflow",g.stringLowerCase).property("canvas",function(e){return"string"==typeof e?document.getElementById(e):e}),g.Panel.prototype.type="panel",g.Panel.prototype._zOrderChildCount=0,g.Panel.prototype.defaults=(new g.Panel).extend(g.Bar.prototype.defaults).fillStyle(null).overflow("visible"),g.Panel.prototype.anchor=function(e){var t=g.Bar.prototype.anchor.call(this,e);return t.parent=this,t},g.Panel.prototype.add=function(e){var t=new e;t.parent=this,t.root=this.root,t.childIndex=this.children.length,this.children.push(t);var n=+t._zOrder||0;return 0!==n&&this._zOrderChildCount++,t},g.Panel.prototype.bind=function(){g.Mark.prototype.bind.call(this);for(var e=this.children,t=0,n=e.length;n>t;t++)e[t].bind()},g.Panel.prototype.buildInstance=function(e){g.Bar.prototype.buildInstance.call(this,e);if(e.visible){var t=this.scale*e.transform.k;g.Mark.prototype.index=-1;for(var n,r=this.children,i=e.children||(e.children=[]),s=0,o=r.length;o>s;s++)n=r[s],n.scene=i[s],n.scale=t,n.build();s=o;for(;s--;)n=r[s],i[s]=n.scene,delete n.scene,delete n.scale;i.length=o}},g.Panel.prototype.buildImplied=function(e){this.parent||this._buildRootInstanceImplied(e)?(e.transform||(e.transform=g.Transform.identity),g.Mark.prototype.buildImplied.call(this,e)):e.visible=!1},g.Panel.prototype._buildRootInstanceImplied=function(e){var t=e.canvas;if(t){if(!this._rootInstanceStealCanvas(e,t))return!1;this._rootInstanceInitCanvas(e,t)}else e.canvas=this._rootInstanceGetInlineCanvas(e);return!0},g.Panel.prototype._rootInstanceStealCanvas=function(e,t){var n=t.$panel;if(n!==this){if(n){if(this.$lastCreateId)return!1;n._disposeRootPanel(),this._updateCreateId(t)}t.$panel=this,g.removeChildren(t)}else this._updateCreateId(t);return!0},g.Panel.prototype._registerBoundEvent=function(e,t,n,r){if(e.removeEventListener){var i=this._boundEvents||(this._boundEvents=[]);i.push([e,t,n,r])}},g.Panel.prototype._disposeRootPanel=function(){var e=this.$transition;e&&e.stop();var t=this._boundEvents;if(t){this._boundEvents=null;for(var n=0,r=t.length;r>n;n++){var i=t[n];i[0].removeEventListener(i[1],i[2],i[3])}}},g.Panel.prototype._rootInstanceInitCanvas=function(e,t){var n,r,i;null==e.width&&(i=g.cssStyle(t),n=parseFloat(i("width")||0),e.width=n-e.left-e.right),null==e.height&&(i||(i=g.cssStyle(t)),r=parseFloat(i("height")||0),e.height=r-e.top-e.bottom),i=null},g.Panel.prototype._rootInstanceGetInlineCanvas=function(){var e,t=this.$canvas||(this.$canvas=[]);if(!(e=t[this.index])){e=t[this.index]=document.createElement("span");if(this.$dom)this.$dom.parentNode.insertBefore(e,this.$dom);else{for(var n=document.body;n.lastChild&&n.lastChild.tagName;)n=n.lastChild;n!=document.body&&(n=n.parentNode),n.appendChild(e)}}return e},g.Panel.prototype._updateCreateId=function(e){this.$lastCreateId=e.$pvCreateId=(e.$pvCreateId||0)+1},g.Image=function(){g.Bar.call(this)},g.Image.prototype=g.extend(g.Bar).property("url",String).property("imageWidth",Number).property("imageHeight",Number),g.Image.prototype.type="image",g.Image.prototype.defaults=(new g.Image).extend(g.Bar.prototype.defaults).fillStyle(null),g.Image.prototype.image=function(e){return this.$image=function(){var t=e.apply(this,arguments);return null==t?g.Color.transparent:"string"==typeof t?g.color(t):t},this},g.Image.prototype.bind=function(){g.Bar.prototype.bind.call(this);var e=this.binds,t=this;do e.image=t.$image;while(!e.image&&(t=t.proto))},g.Image.prototype.buildImplied=function(e){g.Bar.prototype.buildImplied.call(this,e);if(e.visible){null==e.imageWidth&&(e.imageWidth=e.width),null==e.imageHeight&&(e.imageHeight=e.height);if(null==e.url&&this.binds.image){var t,n=this.$canvas||(this.$canvas=document.createElement("canvas")),r=n.getContext("2d"),i=e.imageWidth,s=e.imageHeight,o=g.Mark.stack;n.width=i,n.height=s,t=(e.image=r.createImageData(i,s)).data,o.unshift(null,null);for(var u=0,a=0;s>u;u++){o[1]=u;for(var f=0;i>f;f++){o[0]=f;var l=this.binds.image.apply(this,o);t[a++]=l.r,t[a++]=l.g,t[a++]=l.b,t[a++]=255*l.a}}o.splice(0,2)}}},g.Wedge=function(){g.Mark.call(this)},g.Wedge.prototype=g.extend(g.Mark).property("startAngle",Number).property("endAngle",Number).property("angle",Number).property("innerRadius",Number).property("outerRadius",Number).property("lineWidth",Number).property("strokeStyle",g.fillStyle).property("lineJoin",g.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",g.stringLowerCase).property("strokeDasharray",g.stringLowerCase).property("fillStyle",g.fillStyle),g.Wedge.prototype.type="wedge",g.Wedge.prototype.defaults=(new g.Wedge).extend(g.Mark.prototype.defaults).startAngle(function(){var e=this.sibling();return e?e.endAngle:-Math.PI/2}).innerRadius(0).lineWidth(1.5).strokeStyle(null).fillStyle(g.Colors.category20().by(g.index)).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),g.Wedge.prototype.midRadius=function(){return(this.innerRadius()+this.outerRadius())/2},g.Wedge.prototype.midAngle=function(){return(this.startAngle()+this.endAngle())/2},g.Wedge.prototype.anchor=function(e){function t(e){return e.innerRadius||e.angle<2*Math.PI}function n(e){return(e.innerRadius+e.outerRadius)/2}function r(e){return(e.startAngle+e.endAngle)/2}return g.Mark.prototype.anchor.call(this,e).left(function(){var e=this.scene.target[this.index];if(t(e))switch(this.name()){case"outer":return e.left+e.outerRadius*Math.cos(r(e));case"inner":return e.left+e.innerRadius*Math.cos(r(e));case"start":return e.left+n(e)*Math.cos(e.startAngle);case"center":return e.left+n(e)*Math.cos(r(e));case"end":return e.left+n(e)*Math.cos(e.endAngle)}return e.left}).top(function(){var e=this.scene.target[this.index];if(t(e))switch(this.name()){case"outer":return e.top+e.outerRadius*Math.sin(r(e));case"inner":return e.top+e.innerRadius*Math.sin(r(e));case"start":return e.top+n(e)*Math.sin(e.startAngle);case"center":return e.top+n(e)*Math.sin(r(e));case"end":return e.top+n(e)*Math.sin(e.endAngle)}return e.top}).textAlign(function(){var e=this.scene.target[this.index];if(t(e))switch(this.name()){case"outer":return g.Wedge.upright(r(e))?"right":"left";case"inner":return g.Wedge.upright(r(e))?"left":"right"}return"center"}).textBaseline(function(){var e=this.scene.target[this.index];if(t(e))switch(this.name()){case"start":return g.Wedge.upright(e.startAngle)?"top":"bottom";case"end":return g.Wedge.upright(e.endAngle)?"bottom":"top"}return"middle"}).textAngle(function(){var e=this.scene.target[this.index],n=0;if(t(e))switch(this.name()){case"center":case"inner":case"outer":n=r(e);break;case"start":n=e.startAngle;break;case"end":n=e.endAngle}return g.Wedge.upright(n)?n:n+Math.PI})},g.Wedge.upright=function(e){return e%=2*Math.PI,e=0>e?2*Math.PI+e:e,e<Math.PI/2||e>=3*Math.PI/2},g.Wedge.prototype.buildImplied=function(e){null==e.angle?e.angle=e.endAngle-e.startAngle:null==e.endAngle&&(e.endAngle=e.startAngle+e.angle),g.Mark.prototype.buildImplied.call(this,e)},g.Wedge.prototype.getShapeCore=function(e,t){var n=e[t];return new g.Shape.Wedge(n.left,n.top,n.innerRadius,n.outerRadius,n.startAngle,n.angle)},g.Ease=function(){function e(e){return function(t){return 1-e(1-t)}}function t(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function n(e){return function(t){return 0>t?0:t>1?1:Math.pow(t,e)}}function r(e){return 1-Math.cos(e*Math.PI/2)}function i(e){return e?Math.pow(2,10*(e-1))-.001:0}function s(e){return-(Math.sqrt(1-e*e)-1)}function o(e,t){var n;return t||(t=.45),!e||1>e?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(r){return 0>=r||r>=1?r:-(e*Math.pow(2,10*--r)*Math.sin(2*(r-n)*Math.PI/t))}}function u(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function a(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}var f=n(2),l=n(3),c=o(),h=u(),p={linear:g.identity,"quad-in":f,"quad-out":e(f),"quad-in-out":t(f),"quad-out-in":t(e(f)),"cubic-in":l,"cubic-out":e(l),"cubic-in-out":t(l),"cubic-out-in":t(e(l)),"sin-in":r,"sin-out":e(r),"sin-in-out":t(r),"sin-out-in":t(e(r)),"exp-in":i,"exp-out":e(i),"exp-in-out":t(i),"exp-out-in":t(e(i)),"circle-in":s,"circle-out":e(s),"circle-in-out":t(s),"circle-out-in":t(e(s)),"elastic-in":c,"elastic-out":e(c),"elastic-in-out":t(c),"elastic-out-in":t(e(c)),"back-in":h,"back-out":e(h),"back-in-out":t(h),"back-out-in":t(e(h)),"bounce-in":a,"bounce-out":e(a),"bounce-in-out":t(a),"bounce-out-in":t(e(a))};return g.ease=function(e){return p[e]},{reverse:e,reflect:t,linear:function(){return g.identity},sin:function(){return r},exp:function(){return i},circle:function(){return s},elastic:o,back:u,bounce:a,poly:n}}(),g.Transient=function(e){g.Mark.call(this),this.fillStyle(null).strokeStyle(null).textStyle(null),this.on=function(t){return e.on(t)}},g.Transient.prototype=g.extend(g.Mark),!function(){function e(e){for(var t={},n=e.length;n--;){var r=e[n],i=r.id;i&&(t[i]=r)}return t}function t(e,t,n,r){var i;if(t in o){var s=g.Scale.interpolator(n[t],r[t]);i=function(e){n[t]=s(e)}}else i=function(e){e>.5&&(n[t]=r[t])};i.next=e.head,e.head=i}function n(e,n,r){for(var s in n)"children"!==s&&n[s]!=r[s]&&t(e,s,n,r);var o=n.children;if(o)for(var u=r.children,a=0,f=o.length;f>a;a++)i(e,o[a],u[a])}function r(e,t,n,r){var i,s=Object.create(e[t]),o=e.mark,a=o.root.scene;r.target&&(i=r.target[r.length])&&(e=Object.create(e),e.target=Object.create(r.target),e.target[t]=i),n||(n=u);var f=n.$properties,l=n.$propertiesMap;return f=o.binds.optional.filter(function(e){return!(e.name in l)}).concat(f),o.context(e,t,function(){this.buildProperties(s,f),this.buildImplied(s)}),o.root.scene=a,s}function i(t,i,s){for(var o,u,a=i.mark,f=e(i),l=e(s),c=0,h=i.length;h>c;c++){o=i[c],u=o.id?l[o.id]:s[c],o.index=c;if(o.visible){if(!u||!u.visible){var p=r(i,c,a.$exit,s);o.transition=u?2:(s.push(p),1),u=p}n(t,o,u)}}c=0,h=s.length;for(;h>c;c++){u=s[c],o=u.id?f[u.id]:i[c];if((!o||!o.visible)&&u.visible){var d=r(s,c,a.$enter,i);o?i[o.index]=d:i.push(d),n(t,d,u)}}}function s(e){for(var t=0,n=0;t<e.length;t++){var r=e[t];1!=r.transition&&(e[n++]=r,2==r.transition&&(r.visible=!1),r.children&&r.children.forEach(s))}e.length=n}var o={top:1,left:1,right:1,bottom:1,width:1,height:1,innerRadius:1,outerRadius:1,radius:1,shapeRadius:1,shapeSize:1,startAngle:1,endAngle:1,angle:1,fillStyle:1,strokeStyle:1,lineWidth:1,eccentricity:1,tension:1,textAngle:1,textStyle:1,textMargin:1},u=new g.Transient;g.Transition=function(e){function t(t){var i=e.root.$transition===u;i&&(e.root.$transition=null),null!=n&&(clearInterval(n),n=null),i&&l(e.scene);if(r){var s=r;r=null,s(t)}return t}var n,r,o,u=this,a=g.ease("cubic-in-out"),f=250,l=function(e){o||(o=!0,s(e))};u.ease=function(e){return arguments.length?(a="function"==typeof e?e:g.ease(e),u):a},u.duration=function(e){return arguments.length?(f=Number(e),u):f},u.start=function(s){if(e.parent)throw new Error("Animated partial rendering is not supported.");r=s;var o=e.root;if(o.$transition)try{o.$transition.stop()}catch(c){return t(!1)}var h,p;o.$transition=u,o._renderId++;var d=e.scene;e.scene=null;var v=g.Mark.prototype.index;try{e.bind(),e.build();var m=e.scene;e.scene=d,g.Mark.prototype.index=v,p=Date.now(),h={},i(h,d,m)}catch(c){return g.Mark.prototype.index=v,t(!1)}if(!h.head)return t(!0);var y=function(){var n=Math.max(0,Math.min(1,(Date.now()-p)/f)),r=a(n),i=h.head;do i(r);while(i=i.next);1===n?(l(e.scene),g.Scene.updateAll(d),t(!0)):g.Scene.updateAll(d)};n=setInterval(function(){try{y()}catch(e){t(!1)}},24)},u.stop=function(){t(!0)}}}(),g.simulation=function(e){return new g.Simulation(e)},g.Simulation=function(e){for(var t=0;t<e.length;t++)this.particle(e[t])},g.Simulation.prototype.particle=function(e){return e.next=this.particles,isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y),isNaN(e.fx)&&(e.fx=0),isNaN(e.fy)&&(e.fy=0),this.particles=e,this},g.Simulation.prototype.force=function(e){return e.next=this.forces,this.forces=e,this},g.Simulation.prototype.constraint=function(e){return e.next=this.constraints,this.constraints=e,this},g.Simulation.prototype.stabilize=function(e){var t;arguments.length||(e=3);for(var n=0;e>n;n++){var r=new g.Quadtree(this.particles);for(t=this.constraints;t;t=t.next)t.apply(this.particles,r)}for(var i=this.particles;i;i=i.next)i.px=i.x,i.py=i.y;return this},g.Simulation.prototype.step=function(){var e,t,n;for(e=this.particles;e;e=e.next){var r=e.px,i=e.py;e.px=e.x,e.py=e.y,e.x+=e.vx=e.x-r+e.fx,e.y+=e.vy=e.y-i+e.fy}var s=new g.Quadtree(this.particles);for(n=this.constraints;n;n=n.next)n.apply(this.particles,s);for(e=this.particles;e;e=e.next)e.fx=e.fy=0;for(t=this.forces;t;t=t.next)t.apply(this.particles,s)},g.Quadtree=function(e){function t(e,t,r,i,s,o){if(!isNaN(t.x)&&!isNaN(t.y))if(e.leaf)if(e.p)if(Math.abs(e.p.x-t.x)+Math.abs(e.p.y-t.y)<.01)n(e,t,r,i,s,o);else{var u=e.p;e.p=null,n(e,u,r,i,s,o),n(e,t,r,i,s,o)}else e.p=t;else n(e,t,r,i,s,o)}function n(e,n,r,i,s,o){var u=.5*(r+s),a=.5*(i+o),f=n.x>=u,l=n.y>=a;e.leaf=!1;switch((l<<1)+f){case 0:e=e.c1||(e.c1=new g.Quadtree.Node);break;case 1:e=e.c2||(e.c2=new g.Quadtree.Node);break;case 2:e=e.c3||(e.c3=new g.Quadtree.Node);break;case 3:e=e.c4||(e.c4=new g.Quadtree.Node)}f?r=u:s=u,l?i=a:o=a,t(e,n,r,i,s,o)}var r,i=Number.POSITIVE_INFINITY,s=i,o=Number.NEGATIVE_INFINITY,u=o;for(r=e;r;r=r.next)r.x<i&&(i=r.x),r.y<s&&(s=r.y),r.x>o&&(o=r.x),r.y>u&&(u=r.y);var a=o-i,f=u-s;a>f?u=s+a:o=i+f,this.xMin=i,this.yMin=s,this.xMax=o,this.yMax=u,this.root=new g.Quadtree.Node;for(r=e;r;r=r.next)t(this.root,r,i,s,o,u)},g.Quadtree.Node=function(){this.leaf=!0,this.c1=null,this.c2=null,this.c3=null,this.c4=null,this.p=null},g.Force={},g.Force.charge=function(e){function t(n){function r(e){t(e),n.cn+=e.cn,i+=e.cn*e.cx,s+=e.cn*e.cy}var i=0,s=0;n.cn=0,n.leaf||(n.c1&&r(n.c1),n.c2&&r(n.c2),n.c3&&r(n.c3),n.c4&&r(n.c4)),n.p&&(n.cn+=e,i+=e*n.p.x,s+=e*n.p.y),n.cx=i/n.cn,n.cy=s/n.cn}function n(t,r,s,a,f,l){var c=t.cx-r.x,h=t.cy-r.y,p=1/Math.sqrt(c*c+h*h);if(t.leaf&&t.p!=r||u>(f-s)*p){if(o>p)return;p>i&&(p=i);var d=t.cn*p*p*p,v=c*d,m=h*d;r.fx+=v,r.fy+=m}else if(!t.leaf){var g=.5*(s+f),y=.5*(a+l);t.c1&&n(t.c1,r,s,a,g,y),t.c2&&n(t.c2,r,g,a,f,y),t.c3&&n(t.c3,r,s,y,g,l),t.c4&&n(t.c4,r,g,y,f,l);if(o>p)return;p>i&&(p=i);if(t.p&&t.p!=r){var d=e*p*p*p,v=c*d,m=h*d;r.fx+=v,r.fy+=m}}}var r=2,i=1/r,s=500,o=1/s,u=.9,a={};return arguments.length||(e=-40),a.constant=function(t){return arguments.length?(e=Number(t),a):e},a.domain=function(e,t){return arguments.length?(r=Number(e),i=1/r,s=Number(t),o=1/s,a):[r,s]},a.theta=function(e){return arguments.length?(u=Number(e),a):u},a.apply=function(e,r){t(r.root);for(var i=e;i;i=i.next)n(r.root,i,r.xMin,r.yMin,r.xMax,r.yMax)},a},g.Force.drag=function(e){var t={};return arguments.length||(e=.1),t.constant=function(n){return arguments.length?(e=n,t):e},t.apply=function(t){if(e)for(var n=t;n;n=n.next)n.fx-=e*n.vx,n.fy-=e*n.vy},t},g.Force.spring=function(e){var t,n,r=.1,i=20,s={};return arguments.length||(e=.1),s.links=function(e){return arguments.length?(t=e,n=e.map(function(e){return 1/Math.sqrt(Math.max(e.sourceNode.linkDegree,e.targetNode.linkDegree))}),s):t},s.constant=function(t){return arguments.length?(e=Number(t),s):e},s.damping=function(e){return arguments.length?(r=Number(e),s):r},s.length=function(e){return arguments.length?(i=Number(e),s):i},s.apply=function(){for(var s=0;s<t.length;s++){var o=t[s].sourceNode,u=t[s].targetNode,a=o.x-u.x,f=o.y-u.y,l=Math.sqrt(a*a+f*f),c=l?1/l:1,h=e*n[s],p=r*n[s],d=(h*(l-i)+p*(a*(o.vx-u.vx)+f*(o.vy-u.vy))*c)*c,v=-d*(l?a:.01*(.5-Math.random())),m=-d*(l?f:.01*(.5-Math.random()));o.fx+=v,o.fy+=m,u.fx-=v,u.fy-=m}},s},g.Constraint={},g.Constraint.collision=function(e){function t(u,a,f,l,c,h){if(!u.leaf){var p=.5*(f+c),d=.5*(l+h),v=d>i,m=o>d,g=p>r,y=s>p;v&&(u.c1&&g&&t(u.c1,a,f,l,p,d),u.c2&&y&&t(u.c2,a,p,l,c,d)),m&&(u.c3&&g&&t(u.c3,a,f,d,p,h),u.c4&&y&&t(u.c4,a,p,d,c,h))}if(u.p&&u.p!=a){var b=a.x-u.p.x,w=a.y-u.p.y,E=Math.sqrt(b*b+w*w),S=n+e(u.p);if(S>E){var x=(E-S)/E*.5;b*=x,w*=x,a.x-=b,a.y-=w,u.p.x+=b,u.p.y+=w}}}var n,r,i,s,o,u=1,a={};return arguments.length||(n=10),a.repeat=function(e){return arguments.length?(u=Number(e),a):u},a.apply=function(a,f){var l,c,h=-1/0;for(l=a;l;l=l.next)c=e(l),c>h&&(h=c);for(var p=0;u>p;p++)for(l=a;l;l=l.next)c=(n=e(l))+h,r=l.x-c,s=l.x+c,i=l.y-c,o=l.y+c,t(f.root,l,f.xMin,f.yMin,f.xMax,f.yMax)},a},g.Constraint.position=function(e){var t=1,n={};return arguments.length||(e=function(e){return e.fix}),n.alpha=function(e){return arguments.length?(t=Number(e),n):t},n.apply=function(n){for(var r=n;r;r=r.next){var i=e(r);i&&(r.x+=(i.x-r.x)*t,r.y+=(i.y-r.y)*t,r.fx=r.fy=r.vx=r.vy=0)}},n},g.Constraint.bound=function(){var e,t,n={};return n.x=function(t,n){return arguments.length?(e={min:Math.min(t,n),max:Math.max(t,n)},this):e},n.y=function(e,n){return arguments.length?(t={min:Math.min(e,n),max:Math.max(e,n)},this):t},n.apply=function(n){if(e)for(var r=n;r;r=r.next)r.x=r.x<e.min?e.min:r.x>e.max?e.max:r.x;if(t)for(var r=n;r;r=r.next)r.y=r.y<t.min?t.min:r.y>t.max?t.max:r.y},n},g.Layout=function(){g.Panel.call(this)},g.Layout.prototype=g.extend(g.Panel),g.Layout.prototype.property=g.Mark.prototype.localProperty,g.Layout.Network=function(){g.Layout.call(this);var e=this;this.$id=g.id(),(this.node=(new g.Mark).data(function(){return e.nodes()}).strokeStyle("#1f77b4").fillStyle("#fff").left(function(e){return e.x}).top(function(e){return e.y})).parent=this,this.link=(new g.Mark).extend(this.node).data(function(e){return[e.sourceNode,e.targetNode]}).fillStyle(null).lineWidth(function(e,t){return 1.5*t.linkValue}).strokeStyle("rgba(0,0,0,.2)"),this.link.add=function(t){return e.add(g.Panel).data(function(){return e.links()}).add(t).extend(this)},(this.label=(new g.Mark).extend(this.node).textMargin(7).textBaseline("middle").text(function(e){return e.nodeName||e.nodeValue}).textAngle(function(e){var t=e.midAngle;return g.Wedge.upright(t)?t:t+Math.PI}).textAlign(function(e){return g.Wedge.upright(e.midAngle)?"left":"right"})).parent=this},g.Layout.Network.prototype=g.extend(g.Layout).property("nodes",function(e){return e.map(function(e,t){return"object"!=typeof e&&(e={nodeValue:e}),e.index=t,e})}).property("links",function(e){return e.map(function(e){return isNaN(e.linkValue)&&(e.linkValue=isNaN(e.value)?1:e.value),e})}),g.Layout.Network.prototype.reset=function(){return this.$id=g.id(),this},g.Layout.Network.prototype.buildProperties=function(e,t){(e.$id||0)<this.$id&&g.Layout.prototype.buildProperties.call(this,e,t)},g.Layout.Network.prototype.buildImplied=function(e){g.Layout.prototype.buildImplied.call(this,e);if(e.$id>=this.$id)return!0;e.$id=this.$id,e.nodes.forEach(function(e){e.linkDegree=0}),e.links.forEach(function(t){var n=t.linkValue;(t.sourceNode||(t.sourceNode=e.nodes[t.source])).linkDegree+=n,(t.targetNode||(t.targetNode=e.nodes[t.target])).linkDegree+=n})},g.Layout.Hierarchy=function(){g.Layout.Network.call(this),this.link.strokeStyle("#ccc")},g.Layout.Hierarchy.prototype=g.extend(g.Layout.Network),g.Layout.Hierarchy.prototype.buildImplied=function(e){e.links||(e.links=g.Layout.Hierarchy.links.call(this)),g.Layout.Network.prototype.buildImplied.call(this,e)},g.Layout.Hierarchy.links=function(){return this.nodes().filter(function(e){return e.parentNode}).map(function(e){return{sourceNode:e,targetNode:e.parentNode,linkValue:1}})},g.Layout.Hierarchy.NodeLink={buildImplied:function(e){function t(e){return e.parentNode?e.depth*(c-l)+l:0}function n(e){return e.parentNode?2*(e.breadth-.25)*Math.PI:0}function r(e){switch(o){case"left":return e.depth*a;case"right":return a-e.depth*a;case"top":return e.breadth*a;case"bottom":return a-e.breadth*a;case"radial":return a/2+t(e)*Math.cos(e.midAngle)}}function i(e){switch(o){case"left":return e.breadth*f;case"right":return f-e.breadth*f;case"top":return e.depth*f;case"bottom":return f-e.depth*f;case"radial":return f/2+t(e)*Math.sin(e.midAngle)}}var s=e.nodes,o=e.orient,u=/^(top|bottom)$/.test(o),a=e.width,f=e.height;if("radial"==o){var l=e.innerRadius,c=e.outerRadius;null==l&&(l=0),null==c&&(c=Math.min(a,f)/2)}for(var h=0;h<s.length;h++){var p=s[h];p.midAngle="radial"==o?n(p):u?Math.PI/2:0,p.x=r(p),p.y=i(p),p.firstChild&&(p.midAngle+=Math.PI)}}},g.Layout.Hierarchy.Fill={constructor:function(){this.node.strokeStyle("#fff").fillStyle("#ccc").width(function(e){return e.dx}).height(function(e){return e.dy}).innerRadius(function(e){return e.innerRadius}).outerRadius(function(e){return e.outerRadius}).startAngle(function(e){return e.startAngle}).angle(function(e){return e.angle}),this.label.textAlign("center").left(function(e){return e.x+e.dx/2}).top(function(e){return e.y+e.dy/2}),delete this.link},buildImplied:function(e){function t(e,t){return(e+t)/(1+t)}function n(e){switch(c){case"left":return t(e.minDepth,v)*p;case"right":return(1-t(e.maxDepth,v))*p;case"top":return e.minBreadth*p;case"bottom":return(1-e.maxBreadth)*p;case"radial":return p/2}}function r(e){switch(c){case"left":return e.minBreadth*d;case"right":return(1-e.maxBreadth)*d;case"top":return t(e.minDepth,v)*d;case"bottom":return(1-t(e.maxDepth,v))*d;case"radial":return d/2}}function i(e){switch(c){case"left":case"right":return(e.maxDepth-e.minDepth)/(1+v)*p;case"top":case"bottom":return(e.maxBreadth-e.minBreadth)*p;case"radial":return e.parentNode?(e.innerRadius+e.outerRadius)*Math.cos(e.midAngle):0}}function s(e){switch(c){case"left":case"right":return(e.maxBreadth-e.minBreadth)*d;case"top":case"bottom":return(e.maxDepth-e.minDepth)/(1+v)*d;case"radial":return e.parentNode?(e.innerRadius+e.outerRadius)*Math.sin(e.midAngle):0}}function o(e){return Math.max(0,t(e.minDepth,v/2))*(g-m)+m}function u(e){return t(e.maxDepth,v/2)*(g-m)+m}function a(e){return 2*(e.parentNode?e.minBreadth-.25:0)*Math.PI}function f(e){return 2*(e.parentNode?e.maxBreadth-e.minBreadth:1)*Math.PI}var l=e.nodes,c=e.orient,h=/^(top|bottom)$/.test(c),p=e.width,d=e.height,v=-l[0].minDepth;if("radial"==c){var m=e.innerRadius,g=e.outerRadius;null==m&&(m=0),m&&(v*=2),null==g&&(g=Math.min(p,d)/2)}for(var y=0;y<l.length;y++){var b=l[y];b.x=n(b),b.y=r(b),"radial"==c?(b.innerRadius=o(b),b.outerRadius=u(b),b.startAngle=a(b),b.angle=f(b),b.midAngle=b.startAngle+b.angle/2):b.midAngle=h?-Math.PI/2:0,b.dx=i(b),b.dy=s(b)}}},g.Layout.Grid=function(){g.Layout.call(this);var e=this;(this.cell=(new g.Mark).data(function(){return e.scene[e.index].$grid}).width(function(){return e.width()/e.cols()}).height(function(){return e.height()/e.rows()}).left(function(){return this.width()*(this.index%e.cols())}).top(function(){return this.height()*Math.floor(this.index/e.cols())})).parent=this},g.Layout.Grid.prototype=g.extend(g.Layout).property("rows").property("cols"),g.Layout.Grid.prototype.defaults=(new g.Layout.Grid).extend(g.Layout.prototype.defaults).rows(1).cols(1),g.Layout.Grid.prototype.buildImplied=function(e){g.Layout.prototype.buildImplied.call(this,e);var t=e.rows,n=e.cols;"object"==typeof n&&(t=g.transpose(n)),"object"==typeof t?(e.$grid=g.blend(t),e.rows=t.length,e.cols=t[0]?t[0].length:0):e.$grid=g.repeat([e.data],t*n)},g.Layout.Stack=function(){function e(e){return function(){return i[e](this.parent.index,this.index)}}g.Layout.call(this);var t,n=this,r=function(){return null},i={t:r,l:r,r:r,b:r,w:r,h:r},s=n.buildImplied;this.buildImplied=function(e){s.call(this,e);var n,o=e.layers,u=o.length,a=e.orient,f=/^(top|bottom)\b/.test(a),l=this.parent[f?"height":"width"](),c=[],h=[],p=[],d=g.Mark.stack,v={parent:{parent:this}};d.unshift(null),t=[];for(var m=0;u>m;m++){p[m]=[],h[m]=[],v.parent.index=m,d[0]=o[m],t[m]=this.$values.apply(v.parent,d),m||(n=t[m].length),d.unshift(null);for(var y=0;n>y;y++)d[0]=t[m][y],v.index=y,m||(c[y]=this.$x.apply(v,d)),p[m][y]=this.$y.apply(v,d);d.shift()}d.shift();var b;switch(e.order){case"inside-out":for(var w=p.map(function(e){return g.max.index(e)}),E=g.range(u).sort(function(e,t){return w[e]-w[t]}),S=p.map(function(e){return g.sum(e)}),x=0,T=0,N=[],C=[],m=0;u>m;m++){var y=E[m];T>x?(x+=S[y],N.push(y)):(T+=S[y],C.push(y))}b=C.reverse().concat(N);break;case"reverse":b=g.range(u-1,-1,-1);break;default:b=g.range(u)}switch(e.offset){case"silohouette":for(var y=0;n>y;y++){for(var v=0,m=0;u>m;m++)v+=p[m][y];h[b[0]][y]=(l-v)/2}break;case"wiggle":for(var v=0,m=0;u>m;m++)v+=p[m][0];h[b[0]][0]=v=(l-v)/2;for(var y=1;n>y;y++){for(var k=0,L=0,A=c[y]-c[y-1],m=0;u>m;m++)k+=p[m][y];for(var m=0;u>m;m++){for(var O=(p[b[m]][y]-p[b[m]][y-1])/(2*A),M=0;m>M;M++)O+=(p[b[M]][y]-p[b[M]][y-1])/A;L+=O*p[b[m]][y]}h[b[0]][y]=v-=k?L/k*A:0}break;case"expand":for(var y=0;n>y;y++){h[b[0]][y]=0;for(var M=0,m=0;u>m;m++)M+=p[m][y];if(M){M=l/M;for(var m=0;u>m;m++)p[m][y]*=M}else{M=l/u;for(var m=0;u>m;m++)p[m][y]=M}}break;default:for(var y=0;n>y;y++)h[b[0]][y]=0}for(var y=0;n>y;y++)for(var v=h[b[0]][y],m=1;u>m;m++)v+=p[b[m-1]][y],h[b[m]][y]=v;var m=a.indexOf("-"),_=f?"h":"w",D=0>m?f?"l":"b":a.charAt(m+1),P=a.charAt(0);for(var H in i)i[H]=r;i[D]=function(e,t){return c[t]},i[P]=function(e,t){return h[e][t]},i[_]=function(e,t){return p[e][t]}},this.layer=(new g.Mark).data(function(){return t[this.parent.index]}).top(e("t")).left(e("l")).right(e("r")).bottom(e("b")).width(e("w")).height(e("h")),this.layer.add=function(e){return n.add(g.Panel).data(function(){return n.layers()}).add(e).extend(this)}},g.Layout.Stack.prototype=g.extend(g.Layout).property("orient",String).property("offset",String).property("order",String).property("layers"),g.Layout.Stack.prototype.defaults=(new g.Layout.Stack).extend(g.Layout.prototype.defaults).orient("bottom-left").offset("zero").layers([[]]),g.Layout.Stack.prototype.$x=g.Layout.Stack.prototype.$y=function(){return 0},g.Layout.Stack.prototype.x=function(e){return this.$x=g.functor(e),this},g.Layout.Stack.prototype.y=function(e){return this.$y=g.functor(e),this},g.Layout.Stack.prototype.$values=g.identity,g.Layout.Stack.prototype.values=function(e){return this.$values=g.functor(e),this},g.Layout.Band=function(){function e(e){return function(){return t[e](this.index,this.parent.index)}}g.Layout.call(this);var t,n,r=this,i=r.buildImplied,s=(new g.Mark).data(function(){return n[this.parent.index]}).top(e("t")).left(e("l")).right(e("r")).bottom(e("b")).width(e("w")).height(e("h")).antialias(e("antialias"));this.buildImplied=function(e){i.call(this,e),t=Object.create(g.Layout.Band.$baseItemProps),n=[];var r=e.layers,s=r.length;if(s>0){var o=e.orient,u=/^(top|bottom)\b/.test(o),a=this.parent[u?"height":"width"](),f=this._readData(r,n,e),l=f.length;"reverse"===e.bandOrder&&f.reverse();if("reverse"===e.order){n.reverse();for(var c=0;l>c;c++)f[c].items.reverse()}switch(e.layout){case"grouped":this._calcGrouped(f,s,e);break;case"stacked":this._calcStacked(f,s,a,e)}for(var h=e.hZero||0,p="stacked"===e.layout,d=0;l>d;d++)for(var v=f[d],m=p?Math.max(0,v.vertiMargin)/2:0,y=0;s>y;y++){var b=v.items[y];b.zero&&(b.h=h,b.y-=m+h/2)}this._bindItemProps(f,t,o,u)}};var o=this.item={end:this,add:function(e){return r.add(g.Panel).data(function(){return r.layers()}).add(e).extend(s)},order:function(e){return r.order(e),this},w:function(e){return r.$iw=g.functor(e),this},h:function(e){return r.$ih=g.functor(e),this},horizontalRatio:function(e){return r.$ihorizRatio=g.functor(e),this},verticalMargin:function(e){return r.$ivertiMargin=g.functor(e),this}},u=this.band={end:this,w:function(e){return r.$bw=g.functor(e),this},x:function(e){return r.$bx=g.functor(e),this},order:function(e){return r.bandOrder(e),this},differentialControl:function(e){return r.$bDiffControl=g.functor(e),this}};this.band.item=o,this.item.band=u},g.Layout.Band.$baseItemProps=function(){var e=function(){return null};return{t:e,l:e,r:e,b:e,w:e,h:e}}(),g.Layout.Band.prototype=g.extend(g.Layout).property("orient",String).property("layout",String).property("layers").property("yZero",Number).property("hZero",Number).property("verticalMode",String).property("horizontalMode",String).property("order",String).property("bandOrder",String),g.Layout.Band.prototype.defaults=(new g.Layout.Band).extend(g.Layout.prototype.defaults).orient("bottom-left").layout("grouped").yZero(0).hZero(1.5).layers([[]]),g.Layout.Band.prototype.$bx=g.Layout.Band.prototype.$bw=g.Layout.Band.prototype.$bDiffControl=g.Layout.Band.prototype.$iw=g.Layout.Band.prototype.$ih=g.Layout.Band.prototype.$ivertiMargin=g.functor(0),g.Layout.Band.prototype.$ihorizRatio=g.functor(.9),g.Layout.Band.prototype.$values=g.identity,g.Layout.Band.prototype.values=function(e){return this.$values=g.functor(e),this},g.Layout.prototype._readData=function(e,t,n){var r,i=e.length,s=[],o=g.Mark.stack,u=n.hZero,a={parent:{parent:this}};o.unshift(null);for(var f=0;i>f;f++){a.parent.index=f,o[0]=e[f];var l=t[f]=this.$values.apply(a.parent,o);f||(r=l.length),o.unshift(null);for(var c=0;r>c;c++){o[0]=l[c],a.index=c;var h=s[c];h||(h=s[c]={horizRatio:this.$ihorizRatio.apply(a,o),vertiMargin:this.$ivertiMargin.apply(a,o),w:this.$bw.apply(a,o),x:this.$bx.apply(a,o),diffControl:this.$bDiffControl?this.$bDiffControl.apply(a,o):0,items:[]});var p=this.$ih.apply(a,o),d=null!=p?Math.abs(p):p;h.items[f]={y:n.yZero||0,x:0,w:this.$iw.apply(a,o),h:d,zero:null!=d&&u>=d,dir:0>p?-1:1}}o.shift()}return o.shift(),s},g.Layout.Band.prototype._calcGrouped=function(e,t,n){for(var r=0,i=e.length;i>r;r++){for(var s=e[r],o=s.items,u=s.w,a=s.horizRatio,f=0,l=0;t>l;l++)f+=o[l].w;1===t?a=1:a>0&&1>=a||(a=1);if(null==u)u=s.w=f/a;else if("expand"===n.horizontalMode){var c=a*u;if(f)for(var h=c/f,l=0;t>l;l++)o[l].w*=h;else for(var p=c/t,l=0;t>l;l++)o[l].w=p;f=c}for(var d=f/a,v=s.x-d/2,m=t>1?(d-f)/(t-1):0,l=0;t>l;l++){var g=o[l];g.x=v,v+=g.w+m,g.dir<0&&(g.y-=g.h)}}},g.Layout.Band.prototype._calcStacked=function(e,t,n,r){var i,s=e.length;if("expand"===r.verticalMode)for(var o=0;s>o;o++){i=e[o].items;for(var u=null,a=0,f=0;t>f;f++){var l=i[f];l.dir=1;var c=l.h;null!=c&&(a++,u+=c)}if(a)if(u)for(var h=n/u,f=0;t>f;f++){var c=i[f].h;null!=c&&(i[f].h=c*h)}else if(0==u)for(var f=0;t>f;f++)i[f].h=0;else for(var p=n/a,f=0;t>f;f++){var c=i[f].h;null!=c&&(i[f].h=p)}}for(var d=r.yZero,v=d,o=0;s>o;o++){var m=e[o],g=m.x,y=m.diffControl,b=0>y,w=Math.max(0,m.vertiMargin);i=m.items;var E=this._layoutItemsOfDir(1,b,i,w,g,v),S=null;E.existsOtherDir&&(S=this._layoutItemsOfDir(-1,b,i,w,g,v));if(y){if(1===Math.abs(y)){var x=v;v=E.yOffset,S&&(v-=x-S.yOffset)}}else v=d}},g.Layout.Band.prototype._layoutItemsOfDir=function(e,t,n,r,i,s){for(var o=!1,u=r/2,a=t?-e:e,f=t,l=0,c=n.length;c>l;l+=1){var h=n[f?c-l-1:l];if(h.dir===e){var p=h.h||0;a>0?(h.y=s+u,s+=p):(h.y=s-(p-u),s-=p);var d=p-r;h.h=d>0?d:0,h.x=i-h.w/2}else o=!0}return{existsOtherDir:o,yOffset:s}},g.Layout.Band.prototype._bindItemProps=function(e,t,n,r){var i=n.indexOf("-"),s=r?"h":"w",o=r?"w":"h",u=0>i?r?"l":"b":n.charAt(i+1),a=n.charAt(0);t[u]=function(t,n){return e[t].items[n].x},t[a]=function(t,n){return e[t].items[n].y},t[o]=function(t,n){return e[t].items[n].w},t[s]=function(t,n){return e[t].items[n].h||0},t.antialias=function(t,n){return e[t].items[n].zero}},g.Layout.Treemap=function(){g.Layout.Hierarchy.call(this),this.node.strokeStyle("#fff").fillStyle("rgba(31, 119, 180, .25)").width(function(e){return e.dx}).height(function(e){return e.dy}),this.label.visible(function(e){return!e.firstChild}).left(function(e){return e.x+e.dx/2}).top(function(e){return e.y+e.dy/2}).textAlign("center").textAngle(function(e){return e.dx>e.dy?0:-Math.PI/2}),(this.leaf=(new g.Mark).extend(this.node).fillStyle(null).strokeStyle(null).visible(function(e){return!e.firstChild})).parent=this,delete this.link},g.Layout.Treemap.prototype=g.extend(g.Layout.Hierarchy).property("round",Boolean).property("mode",String).property("order",String),g.Layout.Treemap.prototype.defaults=(new g.Layout.Treemap).extend(g.Layout.Hierarchy.prototype.defaults).mode("squarify").order("ascending"),g.Layout.Treemap.prototype.$size=function(e){return Number(e.nodeValue)},g.Layout.Treemap.prototype.$padLeft=g.Layout.Treemap.prototype.$padRight=g.Layout.Treemap.prototype.$padBottom=g.Layout.Treemap.prototype.$padTop=function(){return 0},g.Layout.Treemap.prototype.size=function(e){return this.$size=g.functor(e),this},g.Layout.Treemap.prototype.padding=function(e){return e=g.functor(e),this.paddingLeft(e).paddingRight(e).paddingTop(e).paddingBottom(e)},g.Layout.Treemap.prototype.paddingLeft=function(e){return arguments.length?(this.$padLeft=g.functor(e),this):this.$padLeft},g.Layout.Treemap.prototype.paddingRight=function(e){return arguments.length?(this.$padRight=g.functor(e),this):this.$padRight},g.Layout.Treemap.prototype.paddingBottom=function(e){return arguments.length?(this.$padBottom=g.functor(e),this):this.$padBottom},g.Layout.Treemap.prototype.paddingTop=function(e){return arguments.length?(this.$padTop=g.functor(e),this):this.$padTop},g.Layout.Treemap.prototype.buildImplied=function(e){function t(e,t,n,r,i,s,o){for(var u=0,a=0;u<e.length;u++){var l=e[u];n?(l.x=r+a,l.y=i,a+=l.dx=f(s*l.size/t),l.dy=o):(l.x=r,l.y=i+a,l.dx=s,a+=l.dy=f(o*l.size/t))}l&&(n?l.dx+=s-a:l.dy+=o-a)}function n(e,t){for(var n=-1/0,r=1/0,i=0,s=0;s<e.length;s++){var o=e[s].size;r>o&&(r=o),o>n&&(n=o),i+=o}return i*=i,t*=t,Math.max(t*n/i,i/(t*r))}function r(e,r){function i(e){var n=c==v,r=g.sum(e,a),i=v?f(r/v):0;return t(e,r,n,o,u,n?c:i,n?i:h),n?(u+=i,h-=i):(o+=i,c-=i),v=Math.min(c,h),n}var s=e.parentNode,o=e.x,u=e.y,c=e.dx,h=e.dy;s&&(o+=s.paddingLeft,u+=s.paddingTop,c+=-s.paddingLeft-s.paddingRight,h+=-s.paddingTop-s.paddingBottom);if("squarify"==l){var p=[],d=1/0,v=Math.min(c,h),m=c*h/e.size;if(!(e.size<=0)){e.visitBefore(function(e){e.size*=m});for(var y=e.childNodes.slice();y.length;){var b=y[y.length-1];if(b.size){p.push(b);var m=n(p,v);d>=m?(y.pop(),d=m):(p.pop(),i(p),p.length=0,d=1/0)}else y.pop()}if(i(p))for(var r=0;r<p.length;r++)p[r].dy+=h;else for(var r=0;r<p.length;r++)p[r].dx+=c}}else t(e.childNodes,e.size,"slice"==l?!0:"dice"==l?!1:1&r,o,u,c,h)}if(!g.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var i=this,s=e.nodes,o=s[0],u=g.Mark.stack,a=function(e){return e.size},f=e.round?Math.round:Number,l=e.mode;u.unshift(null);try{o.visitAfter(function(e,t){e.depth=t,e.x=e.y=e.dx=e.dy=0,u[0]=e,e.firstChild?(e.size=g.sum(e.childNodes,a),e.paddingRight=+i.$padRight.apply(i,u)||0,e.paddingLeft=+i.$padLeft.apply(i,u)||0,e.paddingBottom=+i.$padBottom.apply(i,u)||0,e.paddingTop=+i.$padTop.apply(i,u)||0):e.size=i.$size.apply(i,u)})}finally{u.shift()}switch(e.order){case"ascending":o.sort(function(e,t){return e.size-t.size});break;case"descending":o.sort(function(e,t){return t.size-e.size});break;case"reverse":o.reverse()}o.x=0,o.y=0,o.dx=e.width,o.dy=e.height,o.visitBefore(r)}},g.Layout.Tree=function(){g.Layout.Hierarchy.call(this)},g.Layout.Tree.prototype=g.extend(g.Layout.Hierarchy).property("group",Number).property("breadth",Number).property("depth",Number).property("orient",String),g.Layout.Tree.prototype.defaults=(new g.Layout.Tree).extend(g.Layout.Hierarchy.prototype.defaults).group(1).breadth(15).depth(60).orient("top"),g.Layout.Tree.prototype.buildImplied=function(e){function t(e){var n,i,s;if(e.firstChild){n=e.firstChild,i=e.lastChild,s=n;for(var o=n;o;o=o.nextSibling)t(o),s=r(o,s);u(e);var a=.5*(n.prelim+i.prelim);(n=e.previousSibling)?(e.prelim=n.prelim+f(e.depth,!0),e.mod=e.prelim-a):e.prelim=a}else(n=e.previousSibling)&&(e.prelim=n.prelim+f(e.depth,!0))}function n(e,t,r){e.breadth=e.prelim+t,t+=e.mod;for(var i=e.firstChild;i;i=i.nextSibling)n(i,t,r)}function r(e,t){var n=e.previousSibling;if(n){for(var r=e,u=e,l=n,c=e.parentNode.firstChild,h=r.mod,p=u.mod,d=l.mod,v=c.mod,m=s(l),g=i(r);m&&g;){l=m,r=g,c=i(c),u=s(u),u.ancestor=e;var y=l.prelim+d-(r.prelim+h)+f(l.depth,!1);y>0&&(o(a(l,e,t),e,y),h+=y,p+=y),d+=l.mod,h+=r.mod,v+=c.mod,p+=u.mod,m=s(l),g=i(r)}m&&!s(u)&&(u.thread=m,u.mod+=d-p),g&&!i(c)&&(c.thread=g,c.mod+=h-v,t=e)}return t}function i(e){return e.firstChild||e.thread}function s(e){return e.lastChild||e.thread}function o(e,t,n){var r=t.number-e.number;t.change-=n/r,t.shift+=n,e.change+=n/r,t.prelim+=n,t.mod+=n}function u(e){for(var t=0,n=0,r=e.lastChild;r;r=r.previousSibling)r.prelim+=t,r.mod+=t,n+=r.change,t+=r.shift+n}function a(e,t,n){return e.ancestor.parentNode==t.parentNode?e.ancestor:n}function f(e,t){return(t?1:y+1)/("radial"==d?e:1)}function l(e){return"radial"==d?e.breadth/v:0}function c(e){switch(d){case"left":return e.depth;case"right":return b-e.depth;case"top":case"bottom":return e.breadth+b/2;case"radial":return b/2+e.depth*Math.cos(l(e))}}function h(e){switch(d){case"left":case"right":return e.breadth+w/2;case"top":return e.depth;case"bottom":return w-e.depth;case"radial":return w/2+e.depth*Math.sin(l(e))}}if(!g.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var p=e.nodes,d=e.orient,v=e.depth,m=e.breadth,y=e.group,b=e.width,w=e.height,E=p[0];E.visitAfter(function(e,t){e.ancestor=e,e.prelim=0,e.mod=0,e.change=0,e.shift=0,e.number=e.previousSibling?e.previousSibling.number+1:0,e.depth=t}),t(E),n(E,-E.prelim,0),E.visitAfter(function(e){e.breadth*=m,e.depth*=v,e.midAngle=l(e),e.x=c(e),e.y=h(e),e.firstChild&&(e.midAngle+=Math.PI),delete e.breadth,delete e.depth,delete e.ancestor,delete e.prelim,delete e.mod,delete e.change,delete e.shift,delete e.number,delete e.thread})}},g.Layout.Indent=function(){g.Layout.Hierarchy.call(this),this.link.interpolate("step-after")},g.Layout.Indent.prototype=g.extend(g.Layout.Hierarchy).property("depth",Number).property("breadth",Number),g.Layout.Indent.prototype.defaults=(new g.Layout.Indent).extend(g.Layout.Hierarchy.prototype.defaults).depth(15).breadth(15),g.Layout.Indent.prototype.buildImplied=function(e){function t(e,n,u){e.x=s+u++*i,e.y=o+n++*r,e.midAngle=0;for(var a=e.firstChild;a;a=a.nextSibling)n=t(a,n,u);return n}if(!g.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var n=e.nodes,r=e.breadth,i=e.depth,s=0,o=0;t(n[0],1,1)}},g.Layout.Pack=function(){g.Layout.Hierarchy.call(this),this.node.shapeRadius(function(e){return e.radius}).strokeStyle("rgb(31, 119, 180)").fillStyle("rgba(31, 119, 180, .25)"),this.label.textAlign("center"),delete this.link},g.Layout.Pack.prototype=g.extend(g.Layout.Hierarchy).property("spacing",Number).property("order",String),g.Layout.Pack.prototype.defaults=(new g.Layout.Pack).extend(g.Layout.Hierarchy.prototype.defaults).spacing(1).order("ascending"),g.Layout.Pack.prototype.$radius=function(){return 1},g.Layout.Pack.prototype.size=function(e){return this.$radius="function"==typeof e?function(){return Math.sqrt(e.apply(this,arguments))}:(e=Math.sqrt(e),function(){return e}),this},g.Layout.Pack.prototype.buildImplied=function(e){function t(e){var t=g.Mark.stack;t.unshift(null);for(var n=0,r=e.length;r>n;n++){var i=e[n];i.firstChild||(i.radius=o.$radius.apply(o,(t[0]=i,t)))}t.shift()}function n(t){for(var i=[],s=t.firstChild;s;s=s.nextSibling)s.firstChild&&(s.radius=n(s)),s.n=s.p=s,i.push(s);switch(e.order){case"ascending":i.sort(function(e,t){return e.radius-t.radius});break;case"descending":i.sort(function(e,t){return t.radius-e.radius});break;case"reverse":i.reverse()}return r(i)}function r(t){function n(e){h=Math.min(e.x-e.radius,h),p=Math.max(e.x+e.radius,p),d=Math.min(e.y-e.radius,d),v=Math.max(e.y+e.radius,v)}function r(e,t){var n=e.n;e.n=t,t.p=e,t.n=n,n.p=t}function s(e,t){e.n=t,t.p=e}function o(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.radius+t.radius;return i*i-n*n-r*r>.001}var u,a,f,l,c,h=1/0,p=-1/0,d=1/0,v=-1/0;u=t[0],u.x=-u.radius,u.y=0,n(u);if(t.length>1){a=t[1],a.x=a.radius,a.y=0,n(a);if(t.length>2){f=t[2],i(u,a,f),n(f),r(u,f),u.p=f,r(f,a),a=u.n;for(var m=3;m<t.length;m++){i(u,a,f=t[m]);var g=0,y=1,b=1;for(l=a.n;l!=a;l=l.n,y++)if(o(l,f)){g=1;break}if(1==g)for(c=u.p;c!=l.p;c=c.p,b++)if(o(c,f)){y>b&&(g=-1,l=c);break}0==g?(r(u,f),a=f,n(f)):g>0?(s(u,l),a=l,m--):0>g&&(s(l,a),u=l,m--)}}}for(var w=(h+p)/2,E=(d+v)/2,S=0,m=0;m<t.length;m++){var x=t[m];x.x-=w,x.y-=E,S=Math.max(S,x.radius+Math.sqrt(x.x*x.x+x.y*x.y))}return S+e.spacing}function i(e,t,n){var r=t.radius+n.radius,i=e.radius+n.radius,s=t.x-e.x,o=t.y-e.y,u=Math.sqrt(s*s+o*o),a=(i*i+u*u-r*r)/(2*i*u),f=Math.acos(a),l=a*i,c=Math.sin(f)*i;s/=u,o/=u,n.x=e.x+l*s+c*o,n.y=e.y+l*o-c*s}function s(e,t,n,r){for(var i=e.firstChild;i;i=i.nextSibling)i.x+=e.x,i.y+=e.y,s(i,t,n,r);e.x=t+r*e.x,e.y=n+r*e.y,e.radius*=r}if(!g.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var o=this,u=e.nodes,a=u[0];t(u),a.x=0,a.y=0,a.radius=n(a);var f=this.width(),l=this.height(),c=1/Math.max(2*a.radius/f,2*a.radius/l);s(a,f/2,l/2,c)}},g.Layout.Force=function(){g.Layout.Network.call(this),this.link.lineWidth(function(e,t){return 1.5*Math.sqrt(t.linkValue)}),this.label.textAlign("center")},g.Layout.Force.prototype=g.extend(g.Layout.Network).property("bound",Boolean).property("iterations",Number).property("dragConstant",Number).property("chargeConstant",Number).property("chargeMinDistance",Number).property("chargeMaxDistance",Number).property("chargeTheta",Number).property("springConstant",Number).property("springDamping",Number).property("springLength",Number),g.Layout.Force.prototype.defaults=(new g.Layout.Force).extend(g.Layout.Network.prototype.defaults).dragConstant(.1).chargeConstant(-40).chargeMinDistance(2).chargeMaxDistance(500).chargeTheta(.9).springConstant(.1).springDamping(.3).springLength(20),g.Layout.Force.prototype.buildImplied=function(e){function t(e){return e.fix?1:e.vx*e.vx+e.vy*e.vy}if(g.Layout.Network.prototype.buildImplied.call(this,e)){var n=e.$force;n&&(n.next=this.binds.$force,this.binds.$force=n)}else{for(var r,i=this,s=e.nodes,o=e.links,u=e.iterations,a=e.width,f=e.height,l=0;l<s.length;l++)r=s[l],isNaN(r.x)&&(r.x=a/2+40*Math.random()-20),isNaN(r.y)&&(r.y=f/2+40*Math.random()-20);var c=g.simulation(s);c.force(g.Force.drag(e.dragConstant)),c.force(g.Force.charge(e.chargeConstant).domain(e.chargeMinDistance,e.chargeMaxDistance).theta(e.chargeTheta)),c.force(g.Force.spring(e.springConstant).damping(e.springDamping).length(e.springLength).links(o)),c.constraint(g.Constraint.position()),e.bound&&c.constraint(g.Constraint.bound().x(6,a-6).y(6,f-6));if(null==u)c.step(),c.step(),e.$force=this.binds.$force={next:this.binds.$force,nodes:s,min:1e-4*(o.length+1),sim:c},this.$timer||(this.$timer=setInterval(function(){for(var e=!1,n=i.binds.$force;n;n=n.next)g.max(n.nodes,t)>n.min&&(n.sim.step(),e=!0);e&&i.render()},42));else for(var l=0;u>l;l++)c.step()}},g.Layout.Cluster=function(){g.Layout.Hierarchy.call(this);var e,t=this.buildImplied;this.buildImplied=function(n){t.call(this,n),e=/^(top|bottom)$/.test(n.orient)?"step-before":/^(left|right)$/.test(n.orient)?"step-after":"linear"},this.link.interpolate(function(){return e})},g.Layout.Cluster.prototype=g.extend(g.Layout.Hierarchy).property("group",Number).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),g.Layout.Cluster.prototype.defaults=(new g.Layout.Cluster).extend(g.Layout.Hierarchy.prototype.defaults).group(0).orient("top"),g.Layout.Cluster.prototype.buildImplied=function(e){if(!g.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var t,n,r=e.nodes[0],i=e.group,s=0,o=.5-i/2,u=void 0;r.visitAfter(function(e){e.firstChild?e.depth=1+g.max(e.childNodes,function(e){return e.depth}):(i&&u!=e.parentNode&&(u=e.parentNode,s+=i),s++,e.depth=0)}),t=1/s,n=1/r.depth;var u=void 0;r.visitAfter(function(e){e.firstChild?e.breadth=g.mean(e.childNodes,function(e){return e.breadth}):(i&&u!=e.parentNode&&(u=e.parentNode,o+=i),e.breadth=t*o++),e.depth=1-e.depth*n}),r.visitAfter(function(e){e.minBreadth=e.firstChild?e.firstChild.minBreadth:e.breadth-t/2,e.maxBreadth=e.firstChild?e.lastChild.maxBreadth:e.breadth+t/2}),r.visitBefore(function(e){e.minDepth=e.parentNode?e.parentNode.maxDepth:0,e.maxDepth=e.parentNode?e.depth+r.depth:e.minDepth+2*r.depth}),r.minDepth=-n,g.Layout.Hierarchy.NodeLink.buildImplied.call(this,e)}},g.Layout.Cluster.Fill=function(){g.Layout.Cluster.call(this),g.Layout.Hierarchy.Fill.constructor.call(this)},g.Layout.Cluster.Fill.prototype=g.extend(g.Layout.Cluster),g.Layout.Cluster.Fill.prototype.buildImplied=function(e){g.Layout.Cluster.prototype.buildImplied.call(this,e)||g.Layout.Hierarchy.Fill.buildImplied.call(this,e)},g.Layout.Partition=function(){g.Layout.Hierarchy.call(this)},g.Layout.Partition.prototype=g.extend(g.Layout.Hierarchy).property("order",String).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),g.Layout.Partition.prototype.defaults=(new g.Layout.Partition).extend(g.Layout.Hierarchy.prototype.defaults).orient("top"),g.Layout.Partition.prototype.$size=function(){return 1},g.Layout.Partition.prototype.size=function(e){return this.$size=e,this},g.Layout.Partition.prototype.buildImplied=function(e){if(!g.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var t=this,n=e.nodes[0],r=g.Mark.stack,i=0;r.unshift(null),n.visitAfter(function(e,n){n>i&&(i=n),e.size=e.firstChild?g.sum(e.childNodes,function(e){return e.size}):t.$size.apply(t,(r[0]=e,r))}),r.shift();switch(e.order){case"ascending":n.sort(function(e,t){return e.size-t.size});break;case"descending":n.sort(function(e,t){return t.size-e.size})}n.minBreadth=0,n.breadth=.5,n.maxBreadth=1,n.visitBefore(function(e){for(var t=e.minBreadth,n=e.maxBreadth-t,r=e.firstChild;r;r=r.nextSibling)r.minBreadth=t,t+=r.size/e.size*n,r.maxBreadth=t,r.breadth=(t+r.minBreadth)/2}),n.visitAfter(function(e,t){e.minDepth=(t-1)/i,e.maxDepth=e.depth=t/i}),g.Layout.Hierarchy.NodeLink.buildImplied.call(this,e)}},g.Layout.Partition.Fill=function(){g.Layout.Partition.call(this),g.Layout.Hierarchy.Fill.constructor.call(this)},g.Layout.Partition.Fill.prototype=g.extend(g.Layout.Partition),g.Layout.Partition.Fill.prototype.buildImplied=function(e){g.Layout.Partition.prototype.buildImplied.call(this,e)||g.Layout.Hierarchy.Fill.buildImplied.call(this,e)},g.Layout.Arc=function(){g.Layout.Network.call(this);var e,t,n,r=this.buildImplied;this.buildImplied=function(i){r.call(this,i),t=i.directed,e="radial"==i.orient?"linear":"polar",n="right"==i.orient||"top"==i.orient},this.link.data(function(e){var r=e.sourceNode,i=e.targetNode;return n!=(t||r.breadth<i.breadth)?[r,i]:[i,r]}).interpolate(function(){return e})},g.Layout.Arc.prototype=g.extend(g.Layout.Network).property("orient",String).property("directed",Boolean),g.Layout.Arc.prototype.defaults=(new g.Layout.Arc).extend(g.Layout.Network.prototype.defaults).orient("bottom"),g.Layout.Arc.prototype.sort=function(e){return this.$sort=e,this},g.Layout.Arc.prototype.buildImplied=function(e){function t(e){switch(s){case"top":return-Math.PI/2;case"bottom":return Math.PI/2;case"left":return Math.PI;case"right":return 0;case"radial":return 2*(e-.25)*Math.PI}}function n(e){switch(s){case"top":case"bottom":return e*a;case"left":return 0;case"right":return a;case"radial":return a/2+l*Math.cos(t(e))}}function r(e){switch(s){case"top":return 0;case"bottom":return f;case"left":case"right":return e*f;case"radial":return f/2+l*Math.sin(t(e))}}if(!g.Layout.Network.prototype.buildImplied.call(this,e)){var i=e.nodes,s=e.orient,o=this.$sort,u=g.range(i.length),a=e.width,f=e.height,l=Math.min(a,f)/2;o&&u.sort(function(e,t){return o(i[e],i[t])});for(var c=0;c<i.length;c++){var h=i[u[c]],p=h.breadth=(c+.5)/i.length;h.x=n(p),h.y=r(p),h.midAngle=t(p)}}},g.Layout.Horizon=function(){g.Layout.call(this);var e,t,n,r,i,s,o=this,u=this.buildImplied;this.buildImplied=function(o){u.call(this,o),e=o.bands,t=o.mode,n=Math.round(("color"==t?.5:1)*o.height),r=o.backgroundStyle,i=g.ramp(r,o.negativeStyle).domain(0,e),s=g.ramp(r,o.positiveStyle).domain(0,e)};var e=(new g.Panel).data(function(){return g.range(2*e)}).overflow("hidden").height(function(){return n}).top(function(e){return"color"==t?(1&e)*n:0}).fillStyle(function(e){return e?null:r});this.band=(new g.Mark).top(function(e,r){return"mirror"==t&&1&r?(r+1>>1)*n:null}).bottom(function(e,r){return"mirror"==t?1&r?null:(r+1>>1)*-n:(1&r||-1)*(r+1>>1)*n}).fillStyle(function(e,t){return(1&t?i:s)((t>>1)+1)}),this.band.add=function(t){return o.add(g.Panel).extend(e).add(t).extend(this)}},g.Layout.Horizon.prototype=g.extend(g.Layout).property("bands",Number).property("mode",String).property("backgroundStyle",g.fillStyle).property("positiveStyle",g.fillStyle).property("negativeStyle",g.fillStyle),g.Layout.Horizon.prototype.defaults=(new g.Layout.Horizon).extend(g.Layout.prototype.defaults).bands(2).mode("offset").backgroundStyle("white").positiveStyle("#1f77b4").negativeStyle("#d62728"),g.Layout.Rollup=function(){g.Layout.Network.call(this);var e,t,n=this,r=n.buildImplied;this.buildImplied=function(n){r.call(this,n),e=n.$rollup.nodes,t=n.$rollup.links},this.node.data(function(){return e}).shapeSize(function(e){return 20*e.nodes.length}),this.link.interpolate("polar").eccentricity(.8),this.link.add=function(e){return n.add(g.Panel).data(function(){return t}).add(e).extend(this)}},g.Layout.Rollup.prototype=g.extend(g.Layout.Network).property("directed",Boolean),g.Layout.Rollup.prototype.x=function(e){return this.$x=g.functor(e),this},g.Layout.Rollup.prototype.y=function(e){return this.$y=g.functor(e),this},g.Layout.Rollup.prototype.buildImplied=function(e){function t(e){return o[e]+","+u[e]}if(!g.Layout.Network.prototype.buildImplied.call(this,e)){var n=e.nodes,r=e.links,i=e.directed,s=n.length,o=[],u=[],a=0,f={},l={},c=g.Mark.stack,h={parent:this};c.unshift(null);for(var p=0;s>p;p++)h.index=p,c[0]=n[p],o[p]=this.$x.apply(h,c),u[p]=this.$y.apply(h,c);c.shift();for(var p=0;p<n.length;p++){var d=t(p),v=f[d];v||(v=f[d]=Object.create(n[p]),v.index=a++,v.x=o[p],v.y=u[p],v.nodes=[]),v.nodes.push(n[p])}for(var p=0;p<r.length;p++){var m=r[p].sourceNode,y=r[p].targetNode,b=f[t(m.index)],w=f[t(y.index)],E=!i&&b.index>w.index,S=E?w.index+","+b.index:b.index+","+w.index,x=l[S];x||(x=l[S]={sourceNode:b,targetNode:w,linkValue:0,links:[]}),x.links.push(r[p]),x.linkValue+=r[p].linkValue}e.$rollup={nodes:g.values(f),links:g.values(l)}}},g.Layout.Matrix=function(){g.Layout.Network.call(this);var e,t,n,r,i,s=this,o=s.buildImplied;this.buildImplied=function(s){o.call(this,s),e=s.nodes.length,t=s.width/e,n=s.height/e,r=s.$matrix.labels,i=s.$matrix.pairs},this.link.data(function(){return i}).left(function(){return t*(this.index%e)}).top(function(){return n*Math.floor(this.index/e)}).width(function(){return t}).height(function(){return n}).lineWidth(1.5).strokeStyle("#fff").fillStyle(function(e){return e.linkValue?"#555":"#eee"}).parent=this,delete this.link.add,this.label.data(function(){return r}).left(function(){return 1&this.index?t*((this.index>>1)+.5):0}).top(function(){return 1&this.index?0:n*((this.index>>1)+.5)}).textMargin(4).textAlign(function(){return 1&this.index?"left":"right"}).textAngle(function(){return 1&this.index?-Math.PI/2:0}),delete this.node},g.Layout.Matrix.prototype=g.extend(g.Layout.Network).property("directed",Boolean),g.Layout.Matrix.prototype.sort=function(e){return this.$sort=e,this},g.Layout.Matrix.prototype.buildImplied=function(e){if(!g.Layout.Network.prototype.buildImplied.call(this,e)){var t=e.nodes,n=e.links,r=this.$sort,i=t.length,s=g.range(i),o=[],u=[],a={};e.$matrix={labels:o,pairs:u},r&&s.sort(function(e,n){return r(t[e],t[n])});for(var f=0;i>f;f++)for(var l=0;i>l;l++){var c=s[f],h=s[l],p={row:f,col:l,sourceNode:t[c],targetNode:t[h],linkValue:0};u.push(a[c+"."+h]=p)}for(var f=0;i>f;f++){var c=s[f];o.push(t[c],t[c])}for(var f=0;f<n.length;f++){var d=n[f],v=d.sourceNode.index,m=d.targetNode.index,y=d.linkValue;a[v+"."+m].linkValue+=y,e.directed||(a[m+"."+v].linkValue+=y)}}},g.Layout.Bullet=function(){g.Layout.call(this);var e,t,n,r,i,s=this,o=s.buildImplied,u=s.x=g.Scale.linear();this.buildImplied=function(s){o.call(this,i=s),e=s.orient,t=/^left|right$/.test(e),n=g.ramp("#bbb","#eee").domain(0,Math.max(1,i.ranges.length-1)),r=g.ramp("steelblue","lightsteelblue").domain(0,Math.max(1,i.measures.length-1))},(this.range=new g.Mark).data(function(){return i.ranges}).reverse(!0).left(function(){return"left"==e?0:null}).top(function(){return"top"==e?0:null}).right(function(){return"right"==e?0:null}).bottom(function(){return"bottom"==e?0:null}).width(function(e){return t?u(e):null}).height(function(e){return t?null:u(e)}).fillStyle(function(){return n(this.index)}).antialias(!1).parent=s,(this.measure=new g.Mark).extend(this.range).data(function(){return i.measures}).left(function(){return"left"==e?0:t?null:this.parent.width()/3.25}).top(function(){return"top"==e?0:t?this.parent.height()/3.25:null}).right(function(){return"right"==e?0:t?null:this.parent.width()/3.25}).bottom(function(){return"bottom"==e?0:t?this.parent.height()/3.25:null}).fillStyle(function(){return r(this.index)}).parent=s,(this.marker=new g.Mark).data(function(){return i.markers}).left(function(n){return"left"==e?u(n):t?null:this.parent.width()/2}).top(function(n){return"top"==e?u(n):t?this.parent.height()/2:null}).right(function(t){return"right"==e?u(t):null}).bottom(function(t){return"bottom"==e?u(t):null}).strokeStyle("black").shape("bar").shapeAngle(function(){return t?0:Math.PI/2}).parent=s,(this.tick=new g.Mark).data(function(){return u.ticks(7)}).left(function(t){return"left"==e?u(t):null}).top(function(t){return"top"==e?u(t):null}).right(function(n){return"right"==e?u(n):t?null:-6}).bottom(function(n){return"bottom"==e?u(n):t?-8:null}).height(function(){return t?6:null}).width(function(){return t?null:6}).parent=s},g.Layout.Bullet.prototype=g.extend(g.Layout).property("orient",String).property("ranges").property("markers").property("measures").property("minimum").property("maximum"),g.Layout.Bullet.prototype.defaults=(new g.Layout.Bullet).extend(g.Layout.prototype.defaults).orient("left").ranges([]).markers([]).measures([]),g.Layout.Bullet.prototype._originIsZero=!0,g.Layout.Bullet.prototype.originIsZero=function(e){return arguments.length?this._originIsZero=!!e:this._originIsZero},g.Layout.Bullet.prototype.buildImplied=function(e){g.Layout.prototype.buildImplied.call(this,e);var t,n=this.parent[/^left|right$/.test(e.orient)?"width":"height"](),r=e.maximum,i=e.minimum,s=1e-10;null==r?(t=[].concat(e.ranges,e.markers,e.measures),r=g.max(t)):r=+r,null==i?(t||(t=[].concat(e.ranges,e.markers,e.measures)),i=g.min(t),i=.95*i):i=+i,(i>r||s>r-i)&&(i=Math.abs(r)<s?-0.1:.99*r),this._originIsZero&&i*r>0&&(i>0?i=0:r=0),e.minimum=i,e.maximum=r,this.x.domain(i,r).range(0,n)},g.Behavior={},g.Behavior.dragBase=function(e){function t(t){l||(l=!0,this.addEventInterceptor("click",o,!0));if(!u){var s=this.root.scene.$g;u=[[s,"mousemove",g.listen(s,"mousemove",n)],[s,"mouseup",g.listen(s,"mouseup",r)],[document,"mousemove",g.listen(document,"mousemove",n)],[document,"mouseup",g.listen(document,"mouseup",r)]]}var h=arguments[arguments.length-1];a=h.target,f=!1,h.stopPropagation();var p=this.mouse(),d=this.scene,v=this.index;c=d[v].drag={phase:"start",m:p,m1:p,m2:null,d:t,scene:d,index:v},h=i(h,c),e.dragstart.call(this,h);var m=c.m;m!==p&&(p.x=m.x,p.y=m.y)}function n(t){if(c){c.phase="move",t.stopPropagation(),t=i(t,c);var n=c.scene;n.mark.context(n,c.index,function(){var n=c.m2||c.m1,r=this.mouse();if(!(n&&r.distance2(n).dist2<=2)){c.m=c.m2=r,e.drag.call(this,t);var i=c.m;i!==r&&(r.x=i.x,r.y=i.y)}})}}function r(t){if(c){c.phase="end";var n=c.m2,r=n&&c.m1.distance2(n).dist2>.1;c.canceled=!r,f=r&&a===t.target,f||(a=null),t.stopPropagation(),t=i(t,c),u&&(u.forEach(function(e){g.unlisten.apply(g,e)}),u=null);var s=c.scene,o=c.index;try{s.mark.context(s,o,function(){e.dragend.call(this,t)})}finally{c=null,delete s[o].drag}}}function i(e,t){try{return e.drag=t,e}catch(n){}var r={};for(var i in e){var o=e[i];r[i]="function"!=typeof o?o:s(o,e)}return r._sourceEvent=e,r}function s(e,t){return function(){return e.apply(t,arguments)}}function o(e,t){if(f&&a===t.target)return f=!1,a=null,!1}var u,a,f,l,c;return e.autoRender=!0,e.positionConstraint=null,e.bound=function(e,t){return Math.max(c.min[t],Math.min(c.max[t],e))},t.autoRender=function(n){return arguments.length?(e.autoRender=!!n,t):e.autoRender},t.positionConstraint=function(n){return arguments.length?(e.positionConstraint=n,t):e.positionConstraint},t},g.Behavior.drag=function(){var e,t=null,n=1,r=1,i={dragstart:function(t){var n=t.drag;n.type="drag";var r=n.d,s=g.vector(r.x,r.y);r.fix=s,r.drag=n,e=s.minus(n.m1);var o=this.parent;n.max={x:o.width()-(r.dx||0),y:o.height()-(r.dy||0)},n.min={x:0,y:0},i.autoRender&&this.render(),g.Mark.dispatch("dragstart",n.scene,n.index,t)},drag:function(t){var s=t.drag,o=s.m2,u=s.d;s.m=e.plus(o);var a=i.positionConstraint;a&&a(s);var f=s.m;n&&(u.x=u.fix.x=i.bound(f.x,"x")),r&&(u.y=u.fix.y=i.bound(f.y,"y")),i.autoRender&&this.render(),g.Mark.dispatch("drag",s.scene,s.index,t)},dragend:function(t){var n=t.drag,r=n.d;r.fix=null,e=null,i.autoRender&&this.render();try{g.Mark.dispatch("dragend",n.scene,n.index,t)}finally{delete r.drag}}},s=g.Behavior.dragBase(i);return s.collapse=function(e){if(arguments.length){t=String(e);switch(t){case"y":n=1,r=0;break;case"x":n=0,r=1;break;default:n=1,r=1}return s}return t},s},g.Behavior.point=function(e){function t(e,t){if(e.visible)for(var r=e.children.length-1;r>=0;r--)if(n(e.children[r],t))return!0}function n(e,n){var s,o=e.mark,u="panel"===o.type;if(o.$handlers.point)for(var a,f=(u&&o.parent||o).mouse(),l=o._pointingRadiusMax,c=l*l,h=e.length-1;h>=0;h--)if((a=r(e,h))&&i(e,h,f,n,a,c)){s=!0;break}if(u){o.scene=e;try{for(var h=e.length-1;h>=0;h--){o.index=h;if(t(e[h],n))return!0}}finally{delete o.scene,delete o.index}}return s}function r(e,t){var n=e[t];if(!n.visible)return 0;if(!c)return 1;var r=e.mark.properties;if(!r.fillStyle&&!r.strokeStyle)return 1;var i=n.fillStyle?n.fillStyle.opacity:0,s=n.strokeStyle?n.strokeStyle.opacity:0,o=Math.max(i,s);return.02>o?0:o>.98?1:.5}function i(e,t,n,r,i,s){function o(){if(d&&0>=s)return-1;u=a.distance2(n,p);if(d&&g.floatLess(s,u.cost))return-2;if(m&&!h&&g.floatLess(v,u.dist2))return-3;if(c===r.hasArea){if(h<r.inside)return-4;if(h>r.inside)return 1}else{if(l){if(!h&&r.inside)return-5;if(h&&!r.inside)return 2}if(c||2!==r.inside){if(c&&2===h){if(2===r.inside)return-7;if(0===r.inside&&g.floatLess(3,r.cost))return 4}}else{if(2===h)return 3;if(0===h&&g.floatLess(3,u.cost))return-6}}if(!l||!h){if(g.floatLess(r.dist2,u.dist2))return-8;if(g.floatLess(u.dist2,r.dist2))return 5}return l&&g.floatLess(u.cost,r.cost)?6:-9}var u,a=e.mark.getShape(e,t),c=a.hasArea(),h=a.containsPoint(n,p)?!l||a.containsPoint(n)?2:1:0,d=isFinite(s)&&2>h,y=o();f&&function(){if(-3>y||y>0){var n=e&&e.mark;console.log("POINT "+(y>0?"choose":"skip")+" ("+y+") "+(n?n.type+" "+t:"none")+" in="+h+" d2="+(u&&u.dist2)+" cost="+(u&&u.cost)+" opaq="+(1===i))}}();if(y>0){r.hasArea=c,r.inside=h,r.dist2=u.dist2,r.cost=u.cost,r.scenes=e,r.index=t,r.shape=a;if(c&&2===h&&1===i)return!0}}function s(){var e=g.event;f&&console.log("POINT MOUSE MOVE BEG");try{var n={cost:1/0,dist2:1/0,inside:0,hasArea:!1,x:e.pageX||0,y:e.pageY||0};if(a&&y&&g.Shape.dist2(n,a).cost<y)return;t(this.scene[this.index],n),n.inside||isFinite(n.cost)||(n=null);if(a){if(n&&a.scenes==n.scenes&&a.index==n.index)return;e.isPointSwitch=!!n,g.Mark.dispatch("unpoint",a.scenes,a.index,e)}a=n,n&&(g.Mark.dispatch("point",n.scenes,n.index,e),d||"panel"!==this.type?g.listen(this.root.canvas(),"mouseout",o):(d=this,d.event("mouseout",function(){o.call(d.scene.$g)}),h&&d.addEventInterceptor("click",u)))}finally{f&&console.log("POINT MOUSE MOVE END")}}function o(){var e=g.event;a&&!g.ancestor(this,e.relatedTarget)&&(g.Mark.dispatch("unpoint",a.scenes,a.index,e),a=null)}function u(e,t){if(a){var n=a.scenes,r=n.mark.$handlers[e];if(r)return[r,n,a.index,t]}}"object"!=typeof e&&(e={radius:e});var a,f=0,l=null,c=!!g.get(e,"painted",!1),h=!!g.get(e,"stealClick",!1),p={x:1,y:1},d=null,v=function(){var t=g.parseNumNonNeg(g.get(e,"radius"),30);return t*t}(),m=isFinite(v),y=function(){var t=g.parseNumNonNeg(g.get(e,"radiusHyst"),0);return isFinite(t)||(t=4),t*t}();return s.collapse=function(e){if(arguments.length){l=String(e);switch(l){case"y":p.x=1,p.y=0;break;case"x":p.x=0,p.y=1;break;default:p.x=1,p.y=1,l=null}return s}return l},e&&null!=e.collapse&&s.collapse(e.collapse),e=null,s},g.Behavior.select=function(){var e=null,t=1,n=1,r=!1,i={dragstart:function(e){var s=e.drag;s.type="select",s.dxmin=0,s.dymin=0;var o=s.d;o.drag=s,s.max={x:this.width(),y:this.height()},s.min={x:0,y:0};var u=i.positionConstraint;u&&(s.m=s.m.clone(),u(s));var a=s.m;t&&(o.x=i.bound(a.x,"x"),r||(o.dx=Math.max(0,s.dxmin))),n&&(o.y=i.bound(a.y,"y"),r||(o.dy=Math.max(0,s.dymin))),g.Mark.dispatch("selectstart",s.scene,s.index,e)},drag:function(e){var s=e.drag,o=s.m1,u=s.d;s.max.x=this.width(),s.max.y=this.height();var a=i.positionConstraint;a&&(s.m=s.m.clone(),a(s));var f=s.m;if(t){var l=Math.min(o.x,f.x);l=i.bound(l,"x"),u.x=l;if(!r){var c=Math.max(f.x,o.x);c=i.bound(c,"x"),u.dx=Math.max(0,s.dxmin,c-l)}}if(n){var h=Math.min(o.y,f.y);h=i.bound(h,"y"),u.y=h;if(!r){var p=Math.max(f.y,o.y);p=i.bound(p,"y"),u.dy=Math.max(0,s.dymin,p-h)}}i.autoRender&&this.render(),g.Mark.dispatch("select",s.scene,s.index,e)},dragend:function(e){var t=e.drag;try{g.Mark.dispatch("selectend",t.scene,t.index,e)}finally{var n=t.d;delete n.drag}}},s=g.Behavior.dragBase(i);return s.collapse=function(r){if(arguments.length){e=String(r);switch(e){case"y":t=1,n=0;break;case"x":t=0,n=1;break;default:t=1,n=1}return s}return e},s.preserveLength=function(e){return arguments.length?(r=!!e,s):r},s},g.Behavior.resize=function(e){var t=!1,n="left"===e||"right"===e,r={dragstart:function(t){var n=t.drag;n.type="resize";var r=n.m1,i=n.d;i.drag=n;switch(e){case"left":r.x=i.x+i.dx;break;case"right":r.x=i.x;break;case"top":r.y=i.y+i.dy;break;case"bottom":r.y=i.y}var s=this.parent;n.max={x:s.width(),y:s.height()},n.min={x:0,y:0},g.Mark.dispatch("resizestart",n.scene,n.index,t)},drag:function(e){var i=e.drag,s=i.m1,o=r.positionConstraint;o&&(i.m=i.m.clone(),o(i));var u=i.m,a=i.d;if(!t||n){var f=Math.min(s.x,u.x),l=Math.max(u.x,s.x);f=r.bound(f,"x"),l=r.bound(l,"x"),a.x=f,a.dx=l-f}if(!t||!n){var c=Math.min(s.y,u.y),h=Math.max(u.y,s.y);c=r.bound(c,"y"),h=r.bound(h,"y"),a.y=c,a.dy=h-c}r.autoRender&&this.render(),g.Mark.dispatch("resize",i.scene,i.index,e)},dragend:function(e){var t=e.drag;t.max=null;try{g.Mark.dispatch("resizeend",t.scene,t.index,e)}finally{var n=t.d;delete n.drag}}},i=g.Behavior.dragBase(r);return i.preserveOrtho=function(e){return arguments.length?(t=!!e,i):t},i},g.Behavior.pan=function(){function e(){i=this.index,r=this.scene,o=g.vector(g.event.pageX,g.event.pageY),s=this.transform(),u=1/(s.k*this.scale),a&&(a={x:(1-s.k)*this.width(),y:(1-s.k)*this.height()})}function t(e){r&&(r.mark.context(r,i,function(){var e=(g.event.pageX-o.x)*u,t=(g.event.pageY-o.y)*u,n=s.translate(e,t);a&&(n.x=Math.max(a.x,Math.min(0,n.x)),n.y=Math.max(a.y,Math.min(0,n.y))),this.transform(n).render()}),g.Mark.dispatch("pan",r,i,e))}function n(){r=null}var r,i,s,o,u,a;return e.bound=function(e){return arguments.length?(a=Boolean(e),this):Boolean(a)},g.listen(window,"mousemove",t),g.listen(window,"mouseup",n),e},g.Behavior.zoom=function(e){function t(t){var r=this.mouse(),i=g.event.wheel*e,s=this.transform().translate(r.x,r.y).scale(0>i?1e3/(1e3-i):(1e3+i)/1e3).translate(-r.x,-r.y);n&&(s.k=Math.max(1,s.k),s.x=Math.max((1-s.k)*this.width(),Math.min(0,s.x)),s.y=Math.max((1-s.k)*this.height(),Math.min(0,s.y))),this.transform(s).render(),g.Mark.dispatch("zoom",this.scene,this.index,t)}var n;return arguments.length||(e=1/48),t.bound=function(e){return arguments.length?(n=Boolean(e),this):Boolean(n)},t},g.Geo=function(){},g.Geo.projections={mercator:{project:function(e){return{x:e.lng/180,y:e.lat>85?1:e.lat<-85?-1:Math.log(Math.tan(Math.PI/4+g.radians(e.lat)/2))/Math.PI}},invert:function(e){return{lng:180*e.x,lat:g.degrees(2*Math.atan(Math.exp(e.y*Math.PI))-Math.PI/2)}}},"gall-peters":{project:function(e){return{x:e.lng/180,y:Math.sin(g.radians(e.lat))}},invert:function(e){return{lng:180*e.x,lat:g.degrees(Math.asin(e.y))}}},sinusoidal:{project:function(e){return{x:g.radians(e.lng)*Math.cos(g.radians(e.lat))/Math.PI,y:e.lat/90}},invert:function(e){return{lng:g.degrees(e.x*Math.PI/Math.cos(e.y*Math.PI/2)),lat:90*e.y}}},aitoff:{project:function(e){var t=g.radians(e.lng),n=g.radians(e.lat),r=Math.acos(Math.cos(n)*Math.cos(t/2));return{x:2*(r?Math.cos(n)*Math.sin(t/2)*r/Math.sin(r):0)/Math.PI,y:2*(r?Math.sin(n)*r/Math.sin(r):0)/Math.PI}},invert:function(e){var t=e.x*Math.PI/2,n=e.y*Math.PI/2;return{lng:g.degrees(t/Math.cos(n)),lat:g.degrees(n)}}},hammer:{project:function(e){var t=g.radians(e.lng),n=g.radians(e.lat),r=Math.sqrt(1+Math.cos(n)*Math.cos(t/2));return{x:2*Math.SQRT2*Math.cos(n)*Math.sin(t/2)/r/3,y:Math.SQRT2*Math.sin(n)/r/1.5}},invert:function(e){var t=3*e.x,n=1.5*e.y,r=Math.sqrt(1-t*t/16-n*n/4);return{lng:g.degrees(2*Math.atan2(r*t,2*(2*r*r-1))),lat:g.degrees(Math.asin(r*n))}}},identity:{project:function(e){return{x:e.lng/180,y:e.lat/90}},invert:function(e){return{lng:180*e.x,lat:90*e.y}}}},g.Geo.scale=function(e){function t(e){if(!i||e.lng!=i.lng||e.lat!=i.lat){i=e;var t=n(e);s={x:l(t.x),y:c(t.y)}}return s}function n(e){var t={lng:e.lng-h.lng,lat:e.lat};return f.project(t)}function r(e){var t=f.invert(e);return t.lng+=h.lng,t}var i,s,o={x:0,y:0},u={x:1,y:1},a=[],f=g.Geo.projections.identity,l=g.Scale.linear(-1,1).range(0,1),c=g.Scale.linear(-1,1).range(1,0),h={lng:0,lat:0};return t.x=function(e){return t(e).x},t.y=function(e){return t(e).y},t.ticks={lng:function(e){var t,n;if(a.length>1){var r=g.Scale.linear();void 0==e&&(e=10),t=r.domain(a,function(e){return e.lat}).ticks(e),n=r.domain(a,function(e){return e.lng}).ticks(e)}else t=g.range(-80,81,10),n=g.range(-180,181,10);return n.map(function(e){return t.map(function(t){return{lat:t,lng:e}})})},lat:function(e){return g.transpose(t.ticks.lng(e))}},t.invert=function(e){return r({x:l.invert(e.x),y:c.invert(e.y)})},t.domain=function(e,t){if(arguments.length){a=e instanceof Array?arguments.length>1?g.map(e,t):e:Array.prototype.slice.call(arguments);if(a.length>1){var r=a.map(function(e){return e.lng}),s=a.map(function(e){return e.lat});h={lng:(g.max(r)+g.min(r))/2,lat:(g.max(s)+g.min(s))/2};var o=a.map(n);l.domain(o,function(e){return e.x}),c.domain(o,function(e){return e.y})}else h={lng:0,lat:0},l.domain(-1,1),c.domain(-1,1);return i=null,this}return a},t.range=function(e,t){return arguments.length?("object"==typeof e?(o={x:Number(e.x),y:Number(e.y)},u={x:Number(t.x),y:Number(t.y)}):(o={x:0,y:0},u={x:Number(e),y:Number(t)}),l.range(o.x,u.x),c.range(u.y,o.y),i=null,this):[o,u]},t.projection=function(e){return arguments.length?(f="string"==typeof e?g.Geo.projections[e]||g.Geo.projections.identity:e,this.domain(a)):e},g.copyOwn(t,g.Scale.common),arguments.length&&t.projection(e),t},g}),pen.define("cdf/lib/CCC/protovis",function(){}),pen.define("cdf/lib/CCC/cdo",["cdf/lib/CCC/def","cdf/lib/CCC/protovis"],function(e,t){function n(e,t){var n=e&&e.length;if(n){for(var r=0;n>r;r++){var i=e[r];t&&(i[t]=null),i.dispose()}e.length=0}}function r(e,t,n,r,i){n[r]=e;var s=e[t]||(e[t]=[]);null==i||i>=s.length?s.push(n):s.splice(i,0,n)}function i(t,n,r,i){var s,o=t[n];o&&(s=o.indexOf(r))>=0&&e.array.removeAt(o,s),r[i]=null}function s(e,t){return e.id-t.id}function o(e,t){return t.id-e.id}function u(){delete this.isSelected}function a(e){return e.isNull||e.isSelected}function f(e){return e.isSelected===!0}function l(e){return e.isSelected===!1}function c(e){return e.isVisible===!0}function h(e){return e.isVisible===!1}function p(e){return e.isNull===!0}function d(e){return e.isNull===!1}function v(t,n,r,i,s,o){var u;if(this.owner===this){if(null==s){var a=t._formatter;s=a?a(i,n):i}s=e.string.to(s),!s&&e.debug>=2&&e.log("Only the null value should have an empty label."),u=new Et.Atom(this,i,s,n,r),o&&(u.isVirtual=!0)}else{var f=this.parent||this.linkParent;u=f._atomsByKey[r]||v.call(f,t,n,r,i,s,o)}return e.array.insert(this._atoms,u,this._atomComparer),S.call(this),this._atomsByKey[r]=u,u}function m(t){var n=t.key,r=this;if(t.dimension===r)return r.owner===r||e.assert("Should be an owner dimension"),n||t!==r._virtualNullAtom||(t=r.intern(null)),t;var i=!r._lazyInit;if(i){var s=r._atomsByKey[n];if(s){if(s!==t)throw e.error.operationInvalid("Atom is from a different root data.");return t}if(r.owner===r)throw e.error.operationInvalid("Atom is from a different root data.")}return m.call(r.parent||r.linkParent,t),i&&(r._atomsByKey[n]=t,n?e.array.insert(r._atoms,t,r._atomComparer):(r._nullAtom=t,r._atoms.unshift(t)),S.call(r)),t}function g(t){var n=e.get(t,"visible"),r=e.get(t,"selected");return(null==n?null:!!n)+":"+(null==r?null:!!r)}function y(t){var n=this._nullAtom;if(!n){if(this.owner===this){var r=this.type._formatter,i=r?e.string.to(r.call(null,null,t)):"";n=new Et.Atom(this,null,i,null,""),this.data._atomsBase[this.name]=n}else n=y.call(this.parent||this.linkParent,t);this._atomsByKey[""]=this._nullAtom=n,this._atoms.unshift(n)}return n}function b(){return this.owner===this||e.assert("Can only create atoms on an owner dimension."),this._virtualNullAtom||(this._virtualNullAtom=new Et.Atom(this,null,"",null,""),this.data._atomsBase[this.name]=this._virtualNullAtom),this._virtualNullAtom}function w(){this.owner===this||e.assert("Can only unintern atoms of an owner dimension.");var t=this._atoms;if(t){for(var n=this._atomsByKey,r=0,i=t.length;i>r;){var s=t[r];if(s.visited)delete s.visited,r++;else if(s!==this._virtualNullAtom){t.splice(r,1),i--;var o=s.key;delete n[o],o||(delete this._nullAtom,this.data._atomsBase[this.name]=this._virtualNullAtom)}}S.call(this)}}function E(){var t=this._atoms;if(t){for(var n,r=this._atomsByKey,i=0,s=t.length;s>i;){var o=t[i];if(o.isVirtual){t.splice(i,1),s--,n=!0;var u=o.key||e.assert("Cannot be the null or virtual null atom.");delete r[u]}else i++}n&&S.call(this)}}function S(){this._atomVisibleDatumsCount=this._sumCache=this._visibleAtoms=this._visibleIndexes=null}function x(e){r(this,"childNodes",e,"parent"),e.owner=this.owner}function T(e){r(this,"_linkChildren",e,"linkParent"),e.owner=this.owner}function N(e,t){var n;if(!this._disposed&&(n=this._atomVisibleDatumsCount)){var r=e.atoms[this.name],i=r.key,s=n[i];n[i]=(s||0)+(t?1:-1),this._visibleAtoms=this._sumCache=this._visibleIndexes=null}}function C(){var e=this._atomVisibleDatumsCount;return e||(e={},this.data.datums(null,{visible:!0}).each(function(t){var n=t.atoms[this.name],r=n.key;e[r]=(e[r]||0)+1},this),this._atomVisibleDatumsCount=e),e}function k(e){var t=[];return this._atoms.forEach(function(n,r){this.isVisible(n)===e&&t.push(r)},this),t}function L(t){return e.query(this._atoms).where(function(e){return this.isVisible(e)===t},this).array()}function A(t,n){this.insertAt(t,n),e.lazy(this,"_childrenByKey")[t.key]=t}function O(e,t){r(this,"_linkChildren",e,"linkParent",t)}function M(e){i(this,"_linkChildren",e,"linkParent")}function _(){n(this.childNodes,"parent"),this._childrenByKey=null,n(this._linkChildren,"linkParent"),this._groupByCache=null,this._sumAbsCache=null}function D(){this.isOwner()||e.fail("Can only be called on the owner data.")}function P(t,n){!t.isNull||e.assert("Null datums do not notify selected changes"),n?this._selectedNotNullDatums.set(t.id,t):this._selectedNotNullDatums.rem(t.id),this._sumAbsCache=null}function H(t,n){var r=t.id,i=this,s=e.hasOwnProp;if(s.call(i._datumsById,r)){!t.isNull||e.assert("Null datums do not notify visible changes"),n?i._visibleNotNullDatums.set(r,t):i._visibleNotNullDatums.rem(r),i._sumAbsCache=null;for(var o=i._dimensionsList,u=0,a=o.length;a>u;)N.call(o[u++],t,n);o=i.childNodes,u=0,a=o.length;for(;a>u;)H.call(o[u++],t,n);o=i._linkChildren;if(o&&(a=o.length)){u=0;for(;a>u;)H.call(o[u++],t,n)}}}function B(e){for(var t,n=[e];t=e.parent||e.linkParent;)n.unshift(e=t);return n}function j(e,t){for(var n,r=0,i=Math.min(e.length,t.length),s=null;i>r&&(n=e[r])===t[r];)s=n,r++;return s}function F(t,n){function r(t){if(t){var n=t.key;if(!e.hasOwnProp.call(l,n)){!p&&o&&e.hasOwnProp.call(o,n)&&(t=o[n]);var r=t.id;f.push(t),l[n]=t,c[r]=t,a&&a.push(t),I.call(this,t,d,h),t.isNull||(m&&t.isSelected&&m.set(r,t),t.isVisible&&v.set(r,t))}}}t||e.fail.argumentRequired("addDatums");var i,s,o,u,a,f,l,c,h=e.get(n,"doAtomGC",!1),p=e.get(n,"isAdditive",!1),d=!!this._dimensions,v=this._visibleNotNullDatums,m=this._selectedNotNullDatums,g=this._datums;g?(o=this._datumsByKey,u=this._datumsById,p&&h&&g.forEach(function(e){I.call(this,e,!1,!0)},this)):p=!1,p?(a=[],f=g,c=u,l=o,this._sumAbsCache=null):(this._datums=f=[],this._datumsById=c={},this._datumsByKey=l={},g&&(_.call(this),v.clear(),m&&m.clear()));if(e.array.is(t)){i=0,s=t.length;for(;s>i;)r.call(this,t[i++])}else{if(!(t instanceof e.Query))throw e.error.argumentInvalid("addDatums","Argument is of invalid type.");t.each(r,this)}if(h){var y=this._dimensionsList;i=0,s=y.length;for(;s>i;)w.call(y[i++])}if(p){var b=this._linkChildren;if(b){i=0,s=b.length;for(;s>i;)q.call(b[i++],a)}}}function I(e,t,n){var r=this._dimensionsList;r||(t=!1);if(t||n){var i,s,o,u=e.atoms,a=0;if(r){i=r.length;for(;i>a;)o=r[a++],s=u[o.name],s&&(t&&m.call(o,s),n&&(s.visited=!0))}else{var f=this.type.dimensionsNames();i=f.length;for(;i>a;)s=u[f[a++]],s&&(s.visited=!0)}}}function q(t){t||e.fail.argumentRequired("newDatums");var n=this._groupOper;if(n)t=n.executeAdd(this,t);else{var r=this._wherePred;r&&(t=t.filter(r)),R.call(this,t)}var i=this._linkChildren,s=i&&i.length;if(s)for(var o=0;s>o;o++)q.call(i[o],t)}function R(e){var t=this,n=t._datums,r=t._visibleNotNullDatums,i=t._selectedNotNullDatums,s=t._datumsById;t._sumAbsCache=null;for(var o=0,u=e.length;u>o;o++){var a=e[o],f=a.id;s[f]=a,I.call(t,a,!0,!1),a.isNull||(i&&a.isSelected&&i.set(f,a),a.isVisible&&r.set(f,a)),n.push(a)}}function U(t){function n(t){if(null!=t){"object"==typeof t||e.fail.invalidArgument("datumFilter");var n={},i=!1;for(var s in t){var o=this.dimensions(s).getDistinctAtoms(e.array.as(t[s]));o.length&&(i=!0,n[s]=o)}i&&r.push(n)}}var r=[];return t=e.array.as(t),t&&t.forEach(n,this),r}function z(t,n){var r=e.get(n,"visible"),i=e.get(n,"isNull"),s=e.get(n,"selected"),o=e.get(n,"where");return null!=r&&(t=t.where(r?c:h)),null!=i&&(t=t.where(i?p:d)),null!=s&&(t=t.where(s?f:l)),o&&(t=t.where(o)),t}function W(t,n){var r=e.get(n,"visible"),i=e.get(n,"isNull"),s=e.get(n,"selected"),o=e.get(n,"where"),u=[];null!=r&&u.unshift(r?c:h),null!=i&&u.unshift(i?p:d),null!=s&&u.unshift(s?f:l),o&&u.unshift(o),t&&u.unshift(X(t));var a=u.length;if(a){if(1===a)return u[0];var v=function(e){for(var t=a;t;)if(!u[--t](e))return!1;return!0};return v}}function X(e){function t(t){for(var i=t.atoms,s=0;r>s;s++)if(n(i,e[s]))return!0;return!1}function n(e,t){for(var n in t)if(t[n].indexOf(e[n])<0)return!1;return!0}var r=e.length;return t}function V(t,n){var r=e.array.as(e.get(n,"orderBy")),i=e.create(n||{},{orderBy:null}),s=e.query(t).selectMany(function(e,t){return r&&(i.orderBy=r[t]),$.call(this,e,i)},this);return s.distinct(e.propGet("id"))}function $(t,n){var r=n.orderBy;if(r){if(r.indexOf("|")>=0)throw e.error.argumentInvalid("keyArgs.orderBy","Multi-dimension order by is not supported.")}else r=Object.keys(t).sort().join(",");var i=this.groupBy(r,n),s=i.treeHeight,o=[];return e.query(function(){var n;if(this._data){if(this._datumsQuery){this._data||e.assert("Must have a current data"),o.length||e.assert("Must have a parent data"),!this._dimAtomsOrQuery||e.assert();if(this._datumsQuery.next())return this.item=this._datumsQuery.item,1;this._datumsQuery=null,n=o.pop(),this._data=n.data,this._dimAtomsOrQuery=n.dimAtomsOrQuery}}else this._data=i,this._dimAtomsOrQuery=e.query(t[i._groupLevelSpec.dimensions[0].name]);this._dimAtomsOrQuery||e.assert("Invalid programmer"),this._data||e.assert("Must have a current data");for(var r=o.length;;){for(;this._dimAtomsOrQuery.next();){var u=this._dimAtomsOrQuery.item,a=this._data.child(u.key);if(a&&(s-1>r||a._datums.length)){o.push({data:this._data,dimAtomsOrQuery:this._dimAtomsOrQuery}),this._data=a;if(!(s-1>r))return this._dimAtomsOrQuery=null,this._datumsQuery=e.query(a._datums),this._datumsQuery.next(),this.item=this._datumsQuery.item,1;this._dimAtomsOrQuery=e.query(t[a._groupLevelSpec.dimensions[0].name]),r++}}if(!r)return 0;n=o.pop(),this._data=n.data,this._dimAtomsOrQuery=n.dimAtomsOrQuery,r--}return 0})}function J(t,n){return e.string.is(t)||e.fail.argumentInvalid("groupLevelText","Invalid grouping specification."),e.query(t.split(/\s*\|\s*/)).where(e.truthy).select(function(t){var r=Nt.exec(t)||e.fail.argumentInvalid("groupLevelText","Invalid grouping level syntax '{0}'.",[t]),i=r[1],s=(r[2]||"").toLowerCase(),o="desc"===s;return new Et.GroupingDimensionSpec(i,o,n)})}function K(t,n){function r(){var r={},s=e.query(i.source).select(function(e){n(e,r);var t=r.series;return null!=t&&null!=t.v&&(t=t.v),t||null}).distinct().array();return i._createPlot2SeriesKeySet(t,s)}var i=this;this._dataPartGet(r)}function Q(t){return e.string.is(t)?!!this.mask(t):e.is(t,At)?!!this.mask(t.mask()).style(t.style()):void 0}function G(e){e||(e="");var t="_"+e,n=Ot[t];return n||(Mt===At.cacheLimit&&(Ot={},Mt=0),Ot[t]=n=Y(e),Mt++),n}function Y(e){function t(e,t){return null==e?o?o(t):"":(e=+e,isNaN(e)||!isFinite(e)?"":r?0===e?s?s(t):r(t,e,null,!1):e>0?r(t,e,s,!1):i?i(t,-e,s||r):r(t,-e,s,!0):String(e))}function n(){var t,n,u,a=Z(e);a.forEach(et),t=a.length,r=o=i=s=null;if(t){r=st(u=a[0]);if(t>1){n=a[1],i=st(n.empty?u:n);if(t>2){n=a[2],s=rt(n.empty?u:n);if(t>3){n=a[3],o=it(n.empty?u:n);if(t>4)throw new Error("Invalid mask. More than 4 sections.")}}}}}var r,i,s,o;return n(),t}function Z(e){var t=[];if(e){var n,r,i,s,o=-1,u=e.length,a="",f=1,l=1,c=0,h=0,p=function(e){f=0,i.list.push(e)},d=function(e){f=0,a+=e},v=function(){a&&(p({type:0,text:a}),a="")},m=function(e){v(),p(e)},g=function(){v(),!c&&h&&p({type:2}),i.digits=s,s=0,l=0,i=r.fractional},y=function(){r&&(!f||!t.length)&&(l?g():v(),i.digits=s,t.push(r)),f=l=1,h=s=c=0,r={empty:0,scale:0,groupOn:0,scientific:0,integer:{list:[],digits:0},fractional:{list:[],digits:0}},i=r.integer},b=function(){var t,i=o+1,s=!1,a=0;if(u>i){t=e.charAt(i);if("-"===t||"+"===t){s="+"===t;if(!(++i<u))return 0;t=e.charAt(i)}for(;"0"===t&&++a&&++i<u&&(t=e.charAt(i)););if(a)return o=i-1,m({type:5,text:n,digits:a,positive:s}),r.scientific=1,1}return 0};y();for(;++o<u;){n=e.charAt(o);if("0"===n)m({type:1}),c=1,s++;else if("#"===n)m({type:2}),c=1,s++;else if(","===n)l&&m({type:3});else if("."===n)l&&(h=1,g());else if("¤"===n)m({type:4});else if(";"===n){y();if(o+1>=u||";"===e.charAt(o+1))o++,t.push({empty:1})}else if("\\"===n)o++,u>o&&d(e.charAt(o));else if('"'===n){o++;var w=e.indexOf(n,o);0>w&&(w=u),d(e.substring(o,w)),o=w}else if("e"!==n&&"E"!==n||!b())"%"===n?r.scale+=2:"‰"===n?r.scale+=3:"‱"===n&&(r.scale+=4),d(n)}y()}return t}function et(e){e.empty||(tt(e,!0),tt(e,!1))}function tt(e,t){function n(e){a[s](e)}for(var r,i,s=t?"push":"unshift",o=e[t?"integer":"fractional"],u=o.list,a=o.list=[],f=o.digits-1,l=0,c=0,h=u.length,p=t?0:h,d=t?function(){return h>p?u[p++]:null}:function(){return p>0?u[--p]:null};r=d();)switch(i=r.type){case 0:n(at(r.text));break;case 1:case 2:c&&2===i&&(i=1),n(ft(t,f,1===i,!l)),f--,l=1,c||1!==i||(c=1);break;case 3:nt(u,p,h)?l&&(e.groupOn=1):e.scale-=3;break;case 4:n(dt);break;case 5:n(ct(e,r))}!t&&o.digits&&a.unshift(lt(c))}function nt(e,t,n){for(;n>t;){var r=e[t++].type;if(1===r||2===r)return 1}return 0}function rt(e){function t(t){return ot(e,t,0,!1)}return t}function it(e){function t(t){return ot(e,t,"",!1)}return t}function st(t){function n(n,r,i,s){var o,u=r,a=0,f=t.scale;return t.scientific&&(o=Math.floor(Math.log(r)/Math.LN10),a=f+o-t.integer.digits+1,f-=a),f&&(r=e.mult10(r,f)),r=e.round10(r,t.fractional.digits),!r&&i?i(n,u):ot(t,n,r,s,a)}return n}function ot(e,t,n,r,i){var s=""+n,o=s.indexOf("."),u=0>o?s:s.substr(0,o),a=0>o?"":s.substr(o+1);"0"===u&&(u=""),i||(i=0);var f=[];return r&&f.push(t.negativeSign),u=u.split(""),a=a.split(""),t.group&&e.groupOn&&ut(t,u),e.integer.list.forEach(function(e){f.push(e(t,u,i))}),e.fractional.list.forEach(function(e){f.push(e(t,a,i))}),f.join("")}function ut(e,t){for(var n,r=e.group,i=function(){t[s-a-1]+=r},s=t.length,o=e.groupSizes,u=o.length,a=0,f=-1;++f<u;){a+=n=o[f];if(!(s>a))return;i()}for(;(a+=n)<s;)i()}function at(e){function t(){return e}return t}function ft(e,t,n,r){function i(t){return t[e?"integerPad":"fractionPad"]}function s(e,n){var i=n.length;if(i>t){var s=i-1-t;return r?n.slice(0,s+1).join(""):n[s]}return u?u(e):""}function o(e,n){return t<n.length?n[t]:u?u(e):""}var u=n?i:null;return e?s:o}function lt(e){return e?ht:pt}function ct(e,t){function n(e,n,r){var i=0>r?e.negativeSign:t.positive?"+":"",s=""+Math.abs(r),o=t.digits-s.length;return o>0&&(s=(new Array(o+1)).join("0")+s),t.text+i+s}return n}function ht(e){return e.decimal}function pt(e,t){return t.length?e.decimal:""}function dt(e){return e.currency}function vt(t){return e.string.is(t)?!!this.mask(t):e.is(t,_t)?!!this.mask(t.mask()):void 0}function mt(n){return n?t.Format.createFormatter(t.Format.date(n)):e.string.to}function gt(t){return e.is(t,Dt)?!!this.formatter(t.formatter()):e.fun.is(t)?!!this.formatter(t):void 0}function yt(e){return null!=e?String(e):""}function bt(t){function n(n){return e.is(n,t)||e.is(n,Dt)?n:null}function r(n,r){var i=e.fun.is(n)?Dt:t;return i(n,r)}return{cast:n,factory:r}}function wt(t){switch(e.classOf(t)){case Pt:return!!this.number(t.number()).percent(t.percent()).date(t.date()).any(t.any());case At:return!!this.number(t);case _t:return!!this.date(t);case Dt:return!!this.any(t)}}var Et=e.globalSpace("cdo",{});e.type("cdo.DimensionType").init(function(n,r,i){this.complexType=n,this.name=r,this.label=e.get(i,"label")||e.titleFromName(r);var s=e.splitIndexedId(r);this.group=s[0],this.groupLevel=e.nullyTo(s[1],0),this.label.indexOf("{")>=0&&(this.label=e.format(this.label,[this.groupLevel+1])),this.isHidden=!!e.get(i,"isHidden");var o=e.get(i,"valueType")||null,u=Et.DimensionType.valueTypeName(o),a=e.getOwn(Et.DimensionType.cast,u,null);this.valueType=o,this.valueTypeName=u,this.cast=a;var f=this.valueType===Number,l=!f&&this.valueType===Date;this.isDiscreteValueType=!f&&!l,this.isDiscrete=e.get(i,"isDiscrete");if(null==this.isDiscrete)this.isDiscrete=this.isDiscreteValueType;else{this.isDiscrete=!!this.isDiscrete;if(!this.isDiscrete&&this.isDiscreteValueType)throw e.error.argumentInvalid("isDiscrete","The only supported continuous value types are Number and Date.")}this._converter=e.get(i,"converter")||null;if(!this._converter){var c=e.get(i,"rawFormat");if(c)switch(this.valueType){case Date:this._converter=t.Format.createParser(t.Format.date(c))}}this._key=e.get(i,"key")||null,this._comparer=e.get(i,"comparer");if(void 0===this._comparer)switch(this.valueType){case Number:case Date:this._comparer=e.compare;break;default:this._comparer=null}this.isComparable=null!=this._comparer;var h,p=e.get(i,"formatter"),d=e.get(i,"formatProto"),v=f?"number":l?"date":"any";p?h=Et.format(e.set({},v,p),d):this.isDiscreteValueType?h=Pt(null,d):(h=e.get(i,"format"),!h&&!f&&(h=e.get(i,"rawFormat"),h&&(h=h.replace(/-/g,"/"))),h?e.is(h,Pt)||((e.string.is(h)||e.fun.is(h)&&!e.classOf(h))&&(h=e.set({},v,h)),h=Pt(h,d)):h=Pt(null,d),p=h[v]()),this._formatter=p||null,this._format=h||null}).add({isCalculated:!1,compare:function(e,t){return null==e?null==t?0:-1:null==t?1:this._comparer.call(null,e,t)},comparer:function(e){var t=this;return t.isComparable?e?t._rc||(t._rc=function(e,n){return t.compare(n,e)}):t._dc||(t._dc=function(e,n){return t.compare(e,n)}):null},atomComparer:function(e){return e?this._rac||(this._rac=this._createReverseAtomComparer()):this._dac||(this._dac=this._createDirectAtomComparer())},_toDiscrete:function(){this.isDiscrete=!0},_toCalculated:function(){this.isCalculated=!0},_createReverseAtomComparer:function(){function e(e,n){return e===n?0:t.compare(n.value,e.value)}if(!this.isComparable)return o;var t=this;return e},_createDirectAtomComparer:function(){function e(e,n){return e===n?0:t.compare(e.value,n.value)}if(!this.isComparable)return s;var t=this;return e},format:function(){return this._format},formatter:function(){return this._formatter},converter:function(){return this._converter}}),Et.DimensionType.cast={Date:function(e){return e instanceof Date?e:new Date(e)},Number:function(e){return e=Number(e),isNaN(e)?null:e},String:String,Boolean:Boolean,Object:Object,Any:null},Et.DimensionType.dimensionGroupName=function(e){return e.replace(/^(.*?)(\d*)$/,"$1")},Et.DimensionType.valueTypeName=function(t){if(null==t)return"Any";switch(t){case Boolean:return"Boolean";case Number:return"Number";case String:return"String";case Object:return"Object";case Date:return"Date";default:throw e.error.argumentInvalid("valueType","Invalid valueType function: '{0}'.",[t])}},Et.DimensionType.extendSpec=function(t,n,r){var i=Et.DimensionType.dimensionGroupName(t),s=e.get(r,"dimensionGroups");if(s){var o=s[i];o&&(n=e.create(o,n))}n||(n={});switch(i){case"category":var u=e.get(r,"isCategoryTimeSeries",!1);u&&void 0===n.valueType&&(n.valueType=Date);break;case"value":void 0===n.valueType&&(n.valueType=Number)}return void 0!==n.converter||n.valueType!==Date||n.rawFormat||(n.rawFormat=e.get(r,"timeSeriesFormat")),n.formatProto=e.get(r,"formatProto"),n},e.type("cdo.ComplexType").init(function(e){this._dims={},this._dimsList=[],this._dimsNames=[],this._calculations=[],this._calculatedDimNames={},this._dimsIndexByName=null,this._dimsByGroup={},this._dimsNamesByGroup={};if(e)for(var t in e)this.addDimension(t,e[t])}).add({describe:function(){var t=e.textTable(2).rowSep().row("Dimension","Properties").rowSep();return this._dimsList.forEach(function(e){var n=[];n.push('"'+e.label+'"'),n.push(e.valueTypeName),e.isComparable&&n.push("comparable"),e.isDiscrete||n.push("continuous"),e.isHidden&&n.push("hidden"),t.row(e.name,n.join(", "))}),t.rowSep(!0),"COMPLEX TYPE INFORMATION\n"+t()+"\n"},dimensions:function(t,n){if(null==t)return this._dims;var r=e.getOwn(this._dims,t,null);if(!r&&e.get(n,"assertExists",!0))throw e.error.argumentInvalid("name","Undefined dimension '{0}'",[t]);return r},dimensionsList:function(){return this._dimsList},calculatedDimensionsList:function(){return this._calcDimsList},dimensionsNames:function(){return this._dimsNames},groupDimensions:function(t,n){var r=e.getOwn(this._dimsByGroup,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.operationInvalid("There is no dimension type group with name '{0}'.",[t]);return r},groupDimensionsNames:function(t,n){var r=e.getOwn(this._dimsNamesByGroup,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.operationInvalid("There is no dimension type group with name '{0}'.",[t]);return r},addDimension:function(t,n){t||e.fail.argumentRequired("name"),!e.hasOwn(this._dims,t)||e.fail.operationInvalid("A dimension type with name '{0}' is already defined.",[t]);var r=new Et.DimensionType(this,t,n);this._dims[t]=r,this._dimsIndexByName=null;var i,s=r.group;if(s){var o,u=e.getOwn(this._dimsByGroup,s);u?o=this._dimsNamesByGroup[s]:(u=this._dimsByGroup[s]=[],o=this._dimsNamesByGroup[s]=[]),i=e.array.insert(o,t,e.compare),i=~i,e.array.insertAt(u,i,r)}var a,f=this._dimsList.length;if(s){i=r.groupLevel;for(var l=0;f>l;l++){var c=this._dimsList[l];if(c.group===s){if(c.groupLevel>i){a=l;break}a=l+1}}null==a&&(a=f)}else a=f;return e.array.insertAt(this._dimsList,a,r),e.array.insertAt(this._dimsNames,a,t),r._calculate&&(a=e.array.binarySearch(this._calcDimsList,r._calculationOrder,e.compare,function(e){return e._calculationOrder}),a>=0?a++:a=~a,e.array.insertAt(this._calcDimsList,a,r)),r},addCalculation:function(t,n){t||e.fail.argumentRequired("calcSpec");var r=t.calculation||e.fail.argumentRequired("calculations[i].calculation"),i=t.names;i=e.string.is(i)?i.split(/\s*\,\s*/):e.array.as(i);if(i&&i.length){var s=this._calculatedDimNames;i.forEach(function(t){if(t){t=t.replace(/^\s*(.+?)\s*$/,"$1"),!e.hasOwn(s,t)||e.fail.argumentInvalid("calculations[i].names","Dimension name '{0}' is already being calculated.",[t]);var r=this._dims[t];if(!r){var i=Et.DimensionType.extendSpec(t,null,n);this.addDimension(t,i)}s[t]=!0,r._toCalculated()}},this)}this._calculations.push(r)},isCalculated:function(t){return e.hasOwn(this._calculatedDimNames,t)},_calculate:function(e){var t=this._calculations,n=t.length;if(n){for(var r={},i=0;n>i;i++){var s=t[i];s(e,r)}return r}},sortDimensionNames:function(t,n){var r=this._dimsIndexByName;return r||(r=e.query(this._dimsList).object({name:function(e){return e.name},value:function(e,t){return t}}),this._dimsIndexByName=r),t.sort(function(t,i){return e.compare(r[n?n(t):t],r[n?n(i):i])}),t}}),e.type("cdo.ComplexTypeProject").init(function(e){this._dims={},this._dimList=[],this._dimGroupsDims={},this._dimGroupSpecs=e||{},this._calcList=[]}).add({_ensureDim:function(t,n){t||e.fail.argumentInvalid("name","Invalid dimension name '{0}'.",[t]);var r=e.getOwn(this._dims,t);if(r)n&&e.setUDefaults(r.spec,n);else{r=this._dims[t]=this._createDim(t,n),this._dimList.push(r);var i=e.array.lazy(this._dimGroupsDims,r.groupName);e.array.insert(i,t,e.compare)}return r},hasDim:function(t){return e.hasOwn(this._dims,t)},setDim:function(t,n){var r=this._ensureDim(t).spec;return n&&e.copy(r,n),this},setDimDefaults:function(t,n){return e.setUDefaults(this._ensureDim(t).spec,n),this},_createDim:function(t,n){var r=Et.DimensionType.dimensionGroupName(t),i=this._dimGroupSpecs[r];return i&&(n=e.create(i,n)),{name:t,groupName:r,spec:n||{}}},readDim:function(t,n){var r=this._ensureDim(t,n);if(r.isRead)throw e.error.operationInvalid("Dimension '{0}' already is the target of a reader.",[t]);if(r.isCalc)throw e.error.operationInvalid("Dimension '{0}' is being calculated, so it cannot be the target of a reader.",[t]);r.isRead=!0},calcDim:function(t,n){var r=this._ensureDim(t,n);if(r.isCalc)throw e.error.operationInvalid("Dimension '{0}' already is being calculated.",[t]);if(r.isRead)throw e.error.operationInvalid("Dimension '{0}' is the target of a reader, so it cannot be calculated.",[t]);r.isCalc=!0},isReadOrCalc:function(t){if(t){var n=e.getOwn(this._dims,t);if(n)return n.isRead||n.isCalc}return!1},groupDimensionsNames:function(e){return this._dimGroupsDims[e]},setCalc:function(t){t||e.fail.argumentRequired("calculations[i]"),t.calculation||e.fail.argumentRequired("calculations[i].calculation");var n=t.names;n=e.string.is(n)?n.split(/\s*\,\s*/):e.array.as(n),n&&n.length&&n.forEach(this.calcDim,this),this._calcList.push(t)},configureComplexType:function(e,t){this._dimList.forEach(function(n){var r=n.name,i=n.spec;i=Et.DimensionType.extendSpec(r,i,t),e.addDimension(r,i)}),this._calcList.forEach(function(n){e.addCalculation(n,t)})}}),e.type("cdo.Atom").init(function(t,n,r,i,s){this.dimension=t,this.id=null==n?-e.nextId():e.nextId(),this.value=n,this.label=r,void 0!==i&&(this.rawValue=i),this.key=s}).add({isVirtual:!1,rawValue:void 0,toString:function(){var e=this.label;return null!=e?e:(e=this.value,null!=e?""+e:"")}});var St=1;e.type("cdo.Complex").init(function(t,n,r,i,s,o){var u=this;u.id=St++;var a;t&&(a=t.owner,i||(i=t.atoms)),u.owner=a=a||u;var f=a.type||e.fail.argumentRequired("owner.type");u.atoms=i?Object.create(i):{};var l=!!r;r||(r=f._dimsNames);var c,h,p=u.atoms,d=r.length;if(n){var v=a._dimensions,m=function(e){var t=n[e],r=v[e].intern(t);null==t||i&&r===i[e]||(p[e]=r)};if(l){c=d;for(;c--;)m(r[c])}else for(h in n)m(h);if(o){n=f._calculate(u);for(h in n)e.hasOwnProp.call(p,h)||m(h)}}var g;if(d)if(1===d)g=p[r[0]],u.value=g.value,u.rawValue=g.rawValue,u.key=g.key,s&&(u.label=g.label);else{var y,b,w,E=a.keySep,S=a.labelSep;for(c=0;d>c;c++)g=p[r[c]],c?y+=E+g.key:y=g.key,s&&(w=g.label)&&(b?b+=S+w:b=w);u.value=u.rawValue=u.key=y,s&&(u.label=b)}else u.value=null,u.key="",s&&(u.label="")}).add({labelSep:" ~ ",keySep:"~",value:null,label:null,rawValue:void 0,ensureLabel:function(){var t=this.label;if(null==t){t="";var n=this.owner.labelSep;e.eachOwn(this.atoms,function(e){var r=e.label;r&&(t?t+=n+r:t=r)}),this.label=t}return t},view:function(e){return new Et.ComplexView(this,e)},toString:function(){var t=[""+e.qualNameOf(this.constructor)];return null!=this.index&&t.push("#"+this.index),this.owner.type.dimensionsNames().forEach(function(n){t.push(n+": "+e.describe(this.atoms[n].value))},this),t.join(" ")},rightTrimKeySep:function(e){return e&&Et.Complex.rightTrimKeySep(e,this.owner.keySep)},absKeyTrimmed:function(){return this.rightTrimKeySep(this.absKey)},keyTrimmed:function(){return this.rightTrimKeySep(this.key)}}),Et.Complex.rightTrimKeySep=function(e,t){if(e&&t)for(var n,r=t.length;e.lastIndexOf(t)===(n=e.length-r)&&n>=0;)e=e.substr(0,n);return e},Et.Complex.values=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].value})},Et.Complex.compositeKey=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].key}).join(e.owner.keySep)},Et.Complex.labels=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].label})};var xt=e.propGet("id");e.type("cdo.ComplexView",Et.Complex).init(function(e,t){this.source=e,this.viewDimNames=t,this.base(e,e.atoms,t,e.owner.atoms,!0)}).add({values:function(){return Et.Complex.values(this,this.viewDimNames)},labels:function(){return Et.Complex.labels(this,this.viewDimNames)}}),e.type("cdo.Datum",Et.Complex).init(function(e,t){this.base(e,t,null,null,!1,!0)}).add({isSelected:!1,isVisible:!0,isNull:!1,isVirtual:!1,isTrend:!1,trend:null,isInterpolated:!1,interpolation:null,setSelected:function(e){if(this.isNull)return!1;e=null==e||!!e;var t=this.isSelected!==e;return t&&(e?this.isSelected=!0:delete this.isSelected,P.call(this.owner,this,e)),t},toggleSelected:function(){return this.setSelected(!this.isSelected)},setVisible:function(e){if(this.isNull)return!1;e=null==e||!!e;var t=this.isVisible!==e;return t&&(this.isVisible=e,H.call(this.owner,this,e)),t},toggleVisible:function(){return this.setVisible(!this.isVisible)}});var Tt=Et.Datum.isSelected=e.propGet("isSelected");Et.Datum.isSelectedT=f,Et.Datum.isSelectedF=l,Et.Datum.isVisibleT=c,Et.Datum.isVisibleF=h,Et.Datum.isNullT=p,Et.Datum.isNullF=d,e.type("cdo.TrendDatum",Et.Datum).init(function(e,t,n){this.base(e,t),this.trend=n}).add({isVirtual:!0,isTrend:!0}),e.type("cdo.InterpolationDatum",Et.Datum).init(function(e,t,n,r){this.base(e,t),this.interpolation=n,this.interpDimName=r}).add({isVirtual:!0,isInterpolated:!0}),e.type("cdo.Dimension").init(function(t,n){this.data=t,this.type=n,this.root=this,this.owner=this;var r=n.name;this.name=r,this._atomComparer=n.atomComparer(),this._atomsByKey={};if(t.isOwner())this._atoms=[],b.call(this);else{var i,s=t.parent;s?(i=s._dimensions[r],x.call(i,this),this.root=t.parent.root):(s=t.linkParent,s||e.assert("Data must have a linkParent"),i=s._dimensions[r],T.call(i,this)),this._nullAtom=this.owner._nullAtom,this._lazyInit=function(){this._lazyInit=null;for(var t=this.data._datums,n=t.length,s=this._atomsByKey,o=0;n>o;o++){var u=t[o].atoms[r];s[u.key]=u}this._atoms=i.atoms().filter(function(t){return e.hasOwnProp.call(s,t.key)})}}}).add({parent:null,linkParent:null,_linkChildren:null,_atomsByKey:null,_atomVisibleDatumsCount:null,_disposed:!1,_nullAtom:null,_virtualNullAtom:null,_visibleAtoms:null,_visibleIndexes:null,_atomComparer:null,_atoms:null,_sumCache:null,count:function(){return this._lazyInit&&this._lazyInit(),this._atoms.length},isVisible:function(t){return this._lazyInit&&this._lazyInit(),e.hasOwn(this._atomsByKey,t.key)||e.assert("Atom must exist in this dimension."),C.call(this)[t.key]>0},atoms:function(t){this._lazyInit&&this._lazyInit();var n=e.get(t,"visible");return null==n?this._atoms:(n=!!n,this._visibleAtoms||(this._visibleAtoms={}),this._visibleAtoms[n]||(this._visibleAtoms[n]=L.call(this,n)))},indexes:function(n){this._lazyInit&&this._lazyInit();var r=e.get(n,"visible");return null==r?t.range(0,this._atoms.length):(r=!!r,this._visibleIndexes||(this._visibleIndexes={}),this._visibleIndexes[r]||(this._visibleIndexes[r]=k.call(this,r)))},atom:function(e){if(null==e||""===e)return this._nullAtom;if(e instanceof Et.Atom)return e;this._lazyInit&&this._lazyInit();var t=this.type._key,n=t?t.call(null,e):e;return this._atomsByKey[n]||null},getDistinctAtoms:function(e){var t,n,r,i=[],s=e?e.length:0;if(s){r={};for(var o=0;s>o;o++)(t=this.atom(e[o]))&&!r[n="\0"+t.key]&&(r[n]=t,i.push(t))}return i},extent:function(t){var n,r=this.atoms(t),i=r.length;if(!i)return void 0;var s=this._nullAtom&&null==r[0].value?1:0,o=i-s;if(o>0){var u=r[s],a=r[i-1];if(u!==a&&e.get(t,"abs",!1)){var f=u.value<0?-1:1,l=a.value<0?-1:1;if(f===l)0>l&&(n=a,a=u,u=n);else if(o>2){a.value<-u.value&&(a=u);var c=e.array.binarySearch(r,0,this.type.comparer(),function(e){return e.value});if(0>c){c=~c;var h=r[c-1],p=r[c];u=-h.value<p.value?h:p}else u=r[c]}else a.value<-u.value&&(n=a,a=u,u=n)}return{min:u,max:a}}return void 0},min:function(e){var t=this.atoms(e),n=t.length;if(!n)return void 0;var r=this._nullAtom&&null==t[0].value?1:0;return n>r?t[r]:void 0},max:function(e){var t=this.atoms(e),n=t.length;return n&&null!=t[n-1].value?t[n-1]:void 0},sumAbs:function(t){return this.sum(e.create(t,{abs:!0}))},value:function(t){return this.sum(t&&t.abs?e.create(t,{abs:!1}):t)},valueAbs:function(e){var t=this.value(e);return t?Math.abs(t):t},sum:function(t){var n=!!e.get(t,"abs",!1),r=e.get(t,"zeroIfNone",!0),i=g(t)+":"+n,s=e.getOwn(this._sumCache,i);if(void 0===s){var o=this.name;s=this.data.datums(null,t).reduce(function(e,t){var r=t.atoms[o].value;return n&&0>r&&(r=-r),null!=e?e+r:r},null),(this._sumCache||(this._sumCache={}))[i]=s}return r?s||0:s},percent:function(e,t){var n=e instanceof Et.Atom?e.value:e;if(!n)return 0;var r=this.sumAbs(t);return r?Math.abs(n)/r:0},valuePercent:function(e){var t=this.valueAbs(e);if(!t)return 0;var n=this.data.parent;if(!n)return 1;var r=n.dimensionsSumAbs(this.name,e);return t/r},percentOverParent:function(e){return this.valuePercent(e)},format:function(t,n){return e.string.to(this.type._formatter?this.type._formatter.call(null,t,n):t)},intern:function(t,n){if(null==t||""===t)return this._nullAtom||y.call(this,t);if(t instanceof Et.Atom){if(t.dimension!==this)throw e.error.operationInvalid("Atom is of a different dimension.");return t}var r,i,s=this.type;if("object"==typeof t&&"v"in t){i=t.f,t=t.v;if(null==t||""===t)return this._nullAtom||y.call(this)}if(n)r=t;else{var o=s._converter;if(o){r=o(t);if(null==r||""===r)return this._nullAtom||y.call(this,t);i=void 0}else r=t}var u=s.cast;if(u){r=u(r);if(null==r||""===r)return this._nullAtom||y.call(this)}var a=s._key,f=""+(a?a(r):r);f||e.fail.operationInvalid("Only a null value can have an empty key.");var l=this._atomsByKey[f];return l?(!n&&l.isVirtual&&delete l.isVirtual,l):v.call(this,s,t,f,r,i,n)},read:function(t,n){if(null==t||""===t)return null;var r,i=this.type,s=null!=n;if("object"==typeof t&&"v"in t){n=t.f,t=t.v;if(null==t||""===t)return null}var o=i._converter;r=o?o(t):t;if(null==r||""===r)return null;!s&&o&&(n=null);var u=i.cast;if(u){r=u(r);if(null==r||""===r)return null}var a=i._key,f=""+(a?a(r):r),l=this._atomsByKey[f];if(l)return{rawValue:t,key:f,value:l.value,label:""+(null==n?l.label:n)};if(null==n){var c=i._formatter;n=c?c(r,t):r}return n=e.string.to(n),{rawValue:t,key:f,value:r,label:n}},dispose:function(){var e,t=this;t._disposed||(n(t.childNodes,"parent"),n(t._linkChildren,"linkParent"),(e=t.parent)&&i(e,"childNodes",t,"parent"),(e=t.linkParent)&&i(e,"_linkChildren",t,"linkParent"),S.call(t),t._lazyInit=t._atoms=t._nullAtom=t._virtualNullAtom=null,t._disposed=!0)}}),e.type("cdo.Data",Et.Complex).init(function(n){n||e.fail.argumentRequired("keyArgs"),this._visibleNotNullDatums=new e.Map;var r,i,s,o,u,a,f=this.parent=n.parent||null;if(f)this.root=f.root,this.depth=f.depth+1,this.type=f.type,u=n.datums||e.fail.argumentRequired("datums"),r=f.owner,i=n.atoms||e.fail.argumentRequired("atoms"),o=n.atomsDimNames||e.fail.argumentRequired("atomsDimNames"),s=f.atoms;else{this.root=this,o=[];var l=n.linkParent||null;l?(r=l.owner,this.type=r.type,u=n.datums||e.fail.argumentRequired("datums"),this._leafs=[],this._wherePred=n.where||null,s=l.atoms,a=e.get(n,"index",null),O.call(l,this,a)):(r=this,s={},n.labelSep&&(this.labelSep=n.labelSep),n.keySep&&(this.keySep=n.keySep),this.type=n.type||e.fail.argumentRequired("type"),this._selectedNotNullDatums=new e.Map)}u&&F.call(this,u),this.owner=r,this._atomsBase=s,this._dimensions={},this._dimensionsList=[],this.type.dimensionsList().forEach(this._initDimension,this),this.base(r,i,o,s,!0),t.Dom.Node.call(this),f?(a=e.get(n,"index",null),A.call(f,this,a),this.absLabel=f.absLabel?e.string.join(r.labelSep,f.absLabel,this.label):this.label,this.absKey=f.absKey?e.string.join(r.keySep,f.absKey,this.key):this.key):(this.absLabel=this.label,this.absKey=this.key)}).add(t.Dom.Node).add({parent:null,linkParent:null,_dimensions:null,_dimensionsList:null,_freeDimensionNames:null,_linkChildren:null,_leafs:null,_childrenByKey:null,_visibleNotNullDatums:null,_selectedNotNullDatums:null,_groupByCache:null,_sumAbsCache:null,treeHeight:null,_groupOper:null,_wherePred:null,_groupSpec:null,_groupLevel:null,_datums:null,_datumsById:null,_datumsByKey:null,depth:0,label:"",absLabel:"",_disposed:!1,_isFlattenGroup:!1,_isDegenerateFlattenGroup:!1,_initDimension:function(e){var t=new Et.Dimension(this,e);this._dimensions[e.name]=t,this._dimensionsList.push(t)},dimensions:function(t,n){if(null==t)return this._dimensions;var r=e.getOwn(this._dimensions,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.argumentInvalid("name","Undefined dimension '{0}'.",[t]);return r},dimensionsList:function(){return this._dimensionsList},freeDimensionsNames:function(){var e=this._freeDimensionNames;return e||(this._freeDimensionNames=e=this.type.dimensionsNames().filter(function(e){var t=this.atoms[e];return!(t instanceof Et.Atom)||null==t.value},this)),e},isOwner:function(){return this.owner===this},children:function(){var t=this.childNodes;return t.length?e.query(t):e.query()},child:function(t){return e.getOwn(this._childrenByKey,t,null)},childCount:function(){return this.childNodes.length},contains:function(t){var n=this._datumsById;return!!n&&e.hasOwn(n,t.id)},leafs:function(){return e.query(this._leafs)},count:function(){return this._datums.length},firstDatum:function(){return this._datums.length?this._datums[0]:null},firstAtoms:function(){return(this.firstDatum()||this).atoms},singleDatum:function(){var e=this._datums;return 1===e.length?e[0]:null},dispose:function(){var e=this;if(!e._disposed){_.call(e);var t;(t=e._selectedNotNullDatums)&&t.clear(),e._visibleNotNullDatums.clear(),t=e._dimensionsList;for(var n=0,r=t.length;r>n;n++)t[n].dispose();e._dimensions=null,e._dimensionsLIst=null;if(t=e.parent)t.removeChild(e),e.parent=null;(t=e.linkParent)&&M.call(t,e),e._disposed=!0}},disposeChildren:function(){_.call(this)}}),Et.Data.add({selectedCount:function(){return this.isOwner()?this._selectedNotNullDatums.count:this.datums(null,{selected:!0}).count()},selectedDatums:function(){return this.isOwner()?this._selectedNotNullDatums.values():this.datums(null,{selected:!0}).array()},selectedDatumMap:function(){if(this.isOwner())return this._selectedNotNullDatums.clone();var t=this.datums(null,{selected:!0}).object({name:e.propGet("id")});return new e.Set(t)},visibleCount:function(){return this._visibleNotNullDatums.count},replaceSelected:function(t){e.array.is(t)||(t=t.array());var n=e.query(t).where(Tt).object({name:xt}),r=this.owner.clearSelected(function(t){return!e.hasOwn(n,t.id)});return r|=Et.Data.setSelected(t,!0),r},clearSelected:function(e){if(this.owner!==this)return this.owner.clearSelected(e);if(!this._selectedNotNullDatums.count)return!1;var t;return e?(t=!1,this._selectedNotNullDatums.values().filter(e).forEach(function(e){t=!0,u.call(e),this._selectedNotNullDatums.rem(e.id)},this)):(t=!0,this._selectedNotNullDatums.values().forEach(function(e){u.call(e)}),this._selectedNotNullDatums.clear()),t}}),Et.Data.setSelected=function(t,n){var r=0;return t&&e.query(t).each(function(e){r|=e.setSelected(n)}),!!r},Et.Data.toggleSelected=function(t,n){e.array.isLike(t)||(t=e.query(t).array());var r=e.query(t),i=n?r.any(Tt):r.all(a);return this.setSelected(t,!i)},Et.Data.setVisible=function(t,n){var r=0;return t&&e.query(t).each(function(e){r|=e.setVisible(n)}),!!r},Et.Data.toggleVisible=function(t){e.array.isLike(t)||(t=e.query(t).array());var n=e.query(t).all(e.propGet("isVisible"));return Et.Data.setVisible(t,!n)},Et.Data.add({load:function(t,n){D.call(this);var r=e.get(n,"where"),i=e.get(n,"isNull"),s=e.query(t).select(function(e){var t=new Et.Datum(this,e);return i&&i(t)&&(t.isNull=!0),r&&!r(t)?null:t},this);F.call(this,s,{isAdditive:!1,doAtomGC:!0})},clearVirtuals:function(){var t=this._datums;if(t){this._sumAbsCache=null;for(var n,r=this._visibleNotNullDatums,i=this._selectedNotNullDatums,s=this._datumsByKey,o=this._datumsById,u=0,a=t.length;a>u;){var f=t[u];if(f.isVirtual){var l=f.id,c=f.key;t.splice(u,1),delete o[l],delete s[c],i&&f.isSelected&&i.rem(l),f.isVisible&&r.rem(l),a--,n=!0}else u++}if(n){if(!t.length&&this.parent)return void this.dispose();var h=this.childNodes;if(h){u=0,a=h.length;for(;a>u;){var p=h[u];p.clearVirtuals(),p.parent?u++:a--}}this._linkChildren&&this._linkChildren.forEach(function(e){e.clearVirtuals()})}}e.eachOwn(this._dimensions,function(e){E.call(e)})},add:function(e){D.call(this),F.call(this,e,{isAdditive:!0,doAtomGC:!0})},groupBy:function(t,n){var r,i,s=new Et.GroupingOper(this,t,n),o=s.key;return o&&(r=this._groupByCache,i=r&&r[o]),i?e.debug>=7&&e.log("[GroupBy] Cache key hit '"+o+"'"):(e.debug>=7&&e.log("[GroupBy] "+(o?"Cache key not found: '"+o+"'":"No Cache key")),i=s.execute(),o&&((r||(this._groupByCache={}))[o]=i)),i},where:function(t,n){var r;if(t)t=U.call(this,t,n),r=V.call(this,t,n);else{if(!n)return e.query(this._datums);r=z(e.query(this._datums),n)}var i=W(t,n);return new Et.Data({linkParent:this,datums:r,where:i})},datums:function(t,n){return t?(t=U.call(this,t,n),V.call(this,t,n)):n?z(e.query(this._datums),n):e.query(this._datums)},datum:function(t,n){return t||e.fail.argumentRequired("whereSpec"),t=U.call(this,t,n),V.call(this,t,n).first()||null},dimensionsSumAbs:function(t,n){var r=t+":"+g(n),i=e.getOwn(this._sumAbsCache,r);return null==i&&(i=this.children().where(function(e){return!e._isFlattenGroup||e._isDegenerateFlattenGroup}).select(function(e){return e.dimensions(t).valueAbs(n)||0},this).reduce(e.add,0),(this._sumAbsCache||(this._sumAbsCache={}))[r]=i),i}}).type().add({lca:function(e){var t,n,r,i,s=e.length,o=null;if(s){if(1===s)return e[0];var u=1;r=B(e[0]);do{n=e[u],i=B(n);if(!(o=j(r,i)))return null;t=n,r=i}while(++u<s)}return o}}),Et.whereSpecPredicate=X,Et.Data.add({getInfo:function(){var t=["DATA SUMMARY",e.logSeparator,"  Dimension",e.logSeparator];return e.eachOwn(this.dimensions(),function(e,n){var r=e.count(),i=e.type,s=[];s.push(),s.push(i.valueTypeName),i.isComparable&&s.push("comparable"),i.isDiscrete||s.push("continuous"),i.isHidden&&s.push("hidden"),t.push("  "+n+' ("'+i.label+'", #'+r+")\n	"+e.atoms().slice(0,10).map(function(e){return e.label}).join(", ")+(r>10?"...":""))}),t.join("\n")},getValues:function(){return t.range(0,this.getCategoriesSize()).map(function(e){return this._getValuesForCategoryIndex(e)},this)},_getDimensionValues:function(e){return this.dimensions(e).atoms().map(function(e){return e.value})},_getDimensionVisibleValues:function(e){return this.dimensions(e).atoms({visible:!0}).map(function(e){return e.value})},getSeries:function(){return this._getDimensionValues("series")},getVisibleSeriesIndexes:function(){return this.dimensions("series").indexes({visible:!0})},getVisibleCategoriesIndexes:function(){return this.dimensions("category").indexes({visible:!0})},getVisibleSeries:function(){return this._getDimensionVisibleValues("series")},getCategories:function(){return this._getDimensionValues("category")},getVisibleCategories:function(){return this._getDimensionVisibleValues("category")},_getValuesForCategoryIndex:function(t){var n=this.dimensions("category").atoms()[t],r=this.datums({category:n}).uniqueIndex(function(e){return e.atoms.series.key});return this.dimensions("series").atoms().map(function(t){var n=e.getOwn(r,t.key);return n?n.atoms.value.value:null})},getSeriesSize:function(){var e=this.dimensions("series",{assertExists:!1});return e?e.count():0},getCategoriesSize:function(){var e=this.dimensions("category",{assertExists:!1});return e?e.count():0}}),e.type("cdo.DataOper").init(function(t){t||e.fail.argumentRequired("linkParent"),this._linkParent=t}).add({key:null,execute:e.abstractMethod}),e.type("cdo.GroupingOper",Et.DataOper).init(function(t,n,r){n||e.fail.argumentRequired("groupingSpecs"),this.base(t,r),this._where=e.get(r,"where"),this._visible=e.get(r,"visible",null),this._selected=e.get(r,"selected",null);var i=this._isNull=e.get(r,"isNull",null);this._postFilter=null!=i?function(e){return e.isNull===i}:null;var s=null==this._selected,o="";this._where&&(o=e.get(r,"whereKey"),o||(r&&null!==o?(o=""+e.nextId("dataOperWhereKey"),r.whereKey=o):s=!1));var u=[];this._groupSpecs=e.array.as(n).map(function(n){if(n instanceof Et.GroupingSpec){if(n.type!==t.type)throw e.error.argumentInvalid("groupingSpecText","Invalid associated complex type.")}else n=Et.GroupingSpec.parse(n,t.type);return u.push(n.id),n}),s&&(this.key=u.join("!!")+"$"+[this._visible,this._isNull,o].join("||"))}).add({execute:function(){var t=z(e.query(this._linkParent._datums),{visible:this._visible,selected:this._selected,where:this._where}),n=this._group(t);return this._generateData(n,null,this._linkParent)},executeAdd:function(t,n){var r=z(e.query(n),{visible:this._visible,selected:this._selected,where:this._where}),i=this._group(r);return this._generateData(i,null,this._linkParent,t),i.datums},_group:function(t){var n={isRoot:!0,treeHeight:e.query(this._groupSpecs).select(function(e){var t=e.levels.length;return t?e.flatteningMode?1:t:0}).reduce(e.add,0),datums:[]};return n.treeHeight>0&&this._groupSpecRecursive(n,e.query(t).array(),0),n},_groupSpecRecursive:function(e,t,n){var r=this._groupSpecs[n];r.flatteningMode?this._groupSpecRecursiveFlattened(e,t,r,n):this._groupSpecRecursiveNormal(e,t,r,n)},_groupSpecRecursiveNormal:function(t,n,r,i){function s(t,n,f){var l=o[f],c=f===u-1,h=a&&c;t.groupSpec=r,t.groupLevelSpec=l;for(var p=t.children=this._groupLevelDatums(l,t,n,!1),d=0,v=p.length;v>d;d++){var m=p[d];if(!h){var g=m.datums;m.datums=[],c?this._groupSpecRecursive(m,g,i+1):s.call(this,m,g,f+1)}e.array.append(t.datums,m.datums)}}var o=r.levels,u=o.length,a=i===this._groupSpecs.length-1;t.isRoot&&(t.label=r.rootLabel),s.call(this,t,n,0)},_groupSpecRecursiveFlattened:function(t,n,r,i){function s(t,n,r){for(var h=u[r],d=r===a-1,v=f&&d,m=this._groupLevelDatums(h,t,n,!0),g=f?t.datums:[],y=0,b=m.length;b>y;y++){var w=m[y],E=w.datums;e.array.lazy(t,"_children").push(w);if(e.hasOwn(c,w.key))e.array.append(g,E);else{var S=l.length;o||(p(w),t.isFlattenGroup=!0),v||(w.datums=[],d?this._groupSpecRecursive(w,E,i+1):s.call(this,w,E,r+1)),e.array.append(g,w.datums),o&&(e.hasOwn(c,w.key)&&(w.isFlattenGroup||e.assert("Must be a parent for duplicate keys to exist."),1===w._children.length&&(l.splice(S,l.length-S),w.isDegenerateFlattenGroup=!0)),p(w),t.isFlattenGroup=!0)}}f||this._groupSpecRecursive(t,g,i+1)}var o=r.flatteningMode===Et.FlatteningMode.DfsPost,u=r.levels,a=u.length,f=i===this._groupSpecs.length-1,l=[],c={},h={key:"",absKey:"",atoms:{},datums:[],label:r.rootLabel,dimNames:[]},p=function(e){l.push(e),c[e.key]=e};t.children=l,t.childrenByKey=c,o||p(h),s.call(this,h,n,0),o&&p(h),t.datums=h.datums},_groupLevelDatums:function(t,n,r,i){for(var s,o=[],u={},a=this._postFilter,f=t.comparer,l=function(e,t){return f(e.firstDatum,t.firstDatum)},c=0,h=r.length;h>c;c++){var p=r[c],d=t.key(p),v=e.hasOwnProp.call(u,d)&&u[d];v?(!a||a(p))&&v.datums.push(p):(v=t.atomsInfo(p),v.key=d,v.firstDatum=p,v.datums=!a||a(p)?[p]:[],i&&(s||(s=p.owner.keySep),this._onNewChildNodeFlattened(d,s,v,t,n)),e.array.insert(o,v,l),u[d]=v)}if(a){c=o.length;for(;c--;)o[c].datums.length||o.splice(c,1)}return o},_onNewChildNodeFlattened:function(t,n,r,i,s){e.copy(r.atoms,s.atoms),r.dimNames=i.accDimensionNames();if(s.dimNames.length){var o=s.absKey+n+t;r.absKey=o,r.key=Et.Complex.rightTrimKeySep(o,n)}else r.absKey=t},_generateData:function(t,n,r,i){var s,o;if(t.isRoot)i?(s=i,R.call(s,t.datums)):(o=!0,s=new Et.Data({linkParent:r,datums:t.datums}),s.treeHeight=t.treeHeight,s._groupOper=this);else{i&&(s=r.child(t.key),s&&q.call(s,t.datums));if(!s){o=!0;var u,a;i&&(a=r.childNodes)&&(u=~e.array.binarySearch(a,t.datums[0],n.groupLevelSpec.comparer)),s=new Et.Data({parent:r,atoms:t.atoms,atomsDimNames:t.dimNames,datums:t.datums,index:u})}}if(o){t.isFlattenGroup&&(s._isFlattenGroup=!0,s._isDegenerateFlattenGroup=!!t.isDegenerateFlattenGroup);var f=t.label;f&&(s.label+=f,s.absLabel+=f)}var l=t.children,c=l&&l.length;if(c){o&&(s._groupSpec=t.groupSpec,s._groupLevelSpec=t.groupLevelSpec);for(var h=0;c>h;h++)this._generateData(l[h],t,s,i)}else if(o&&!t.isRoot){var p=s.root._leafs;s.leafIndex=p.length,p.push(s)}return s}}),e.space("cdo").FlatteningMode=e.set(e.makeEnum(["DfsPre","DfsPost"]),"None",0),e.type("cdo.GroupingSpec").init(function(t,n,r){this.type=n||null;var i=[],s=[];this.hasCompositeLevels=!1,this.levels=e.query(t||void 0).where(function(e){return e.dimensions.length>0}).select(function(t){return i.push(t.id),e.array.append(s,t.dimensionNames()),!this.hasCompositeLevels&&t.dimensions.length>1&&(this.hasCompositeLevels=!0),t._setAccDimNames(s.slice(0)),t},this).array(),this._dimNames=s,this.depth=this.levels.length,this.isSingleLevel=1===this.depth,this.isSingleDimension=this.isSingleLevel&&!this.hasCompositeLevels,this.firstDimension=this.depth>0?this.levels[0].dimensions[0]:null,this.lastDimension=this.depth>0?this.levels[this.depth-1].lastDimension():null,this.rootLabel=e.get(r,"rootLabel")||"",this.flatteningMode=e.get(r,"flatteningMode")||Et.FlatteningMode.None,this._cacheKey=this._calcCacheKey(),this.id=this._cacheKey+"##"+i.join("||")}).add({_calcCacheKey:function(t){return[e.get(t,"flatteningMode")||this.flatteningMode,e.get(t,"reverse")||"false",e.get(t,"isSingleLevel")||this.isSingleLevel,e.get(t,"rootLabel")||this.rootLabel].join("#")},bind:function(t){this.type=t||e.fail.argumentRequired("type"),this.levels.forEach(function(e){e.bind(t)})},dimensions:function(){return e.query(this.levels).prop("dimensions").selectMany()},dimensionNames:function(){return this._dimNames},view:function(e){return e.view(this.dimensionNames())},isDiscrete:function(){var e;return!this.isSingleDimension||!!(e=this.lastDimension)&&e.type.isDiscrete},firstDimensionType:function(){var e=this.firstDimension;return e&&e.type},firstDimensionName:function(){var e=this.firstDimensionType();return e&&e.name},firstDimensionValueType:function(){var e=this.firstDimensionType();return e&&e.valueType},lastDimensionType:function(){var e=this.lastDimension;return e&&e.type},lastDimensionName:function(){var e=this.lastDimensionType();return e&&e.name},lastDimensionValueType:function(){var e=this.lastDimensionType();return e&&e.valueType},isNull:function(){return!this.levels.length},ensure:function(t){var n;if(t){var r=this._calcCacheKey(t);if(r!==this._cacheKey){var i=e.lazy(this,"_groupingCache");n=e.getOwn(i,r),n||(n=i[r]=this._ensure(t))}}return n||this},_ensure:function(t){var n=this;if(e.get(t,"isSingleLevel")&&!n.isSingleLevel)return n._singleLevelGrouping(t);if(e.get(t,"reverse"))return n._reverse(t);var r=e.get(t,"flatteningMode")||n.flatteningMode,i=e.get(t,"rootLabel")||n.rootLabel;return r!==n.flatteningMode||i!==n.rootLabel?new Et.GroupingSpec(n.levels,n.type,{flatteningMode:r,rootLabel:i}):n},_singleLevelGrouping:function(t){var n=!!e.get(t,"reverse"),r=this.dimensions().select(function(e){return n?new Et.GroupingDimensionSpec(e.name,!e.reverse,e.type.complexType):e}),i=new Et.GroupingLevelSpec(r,this.type);return new Et.GroupingSpec([i],this.type,{flatteningMode:null,rootLabel:e.get(t,"rootLabel")||this.rootLabel})},_reverse:function(t){var n=e.query(this.levels).select(function(t){var n=e.query(t.dimensions).select(function(e){return new Et.GroupingDimensionSpec(e.name,!e.reverse,e.type.complexType)});return new Et.GroupingLevelSpec(n,this.type)},this);return new Et.GroupingSpec(n,this.type,{flatteningMode:e.get(t,"flatteningMode")||this.flatteningMode,rootLabel:e.get(t,"rootLabel")||this.rootLabel})},toString:function(){return this.levels.map(String).join(", ")}}),e.type("cdo.GroupingLevelSpec").init(function(t,n){var r=[],i=[];this.dimensions=e.query(t).select(function(e){return r.push(e.id),i.push(e.name),e}).array(),this._dimNames=i,this.dimensionsInDefOrder=this.dimensions.slice(0),n&&this._sortDimensions(n),this.id=r.join(","),this.depth=this.dimensions.length;var s=this;this.comparer=function(e,t){return s.compare(e,t)}}).add({_sortDimensions:function(e){e.sortDimensionNames(this.dimensionsInDefOrder,function(e){return e.name})},_setAccDimNames:function(e){this._accDimNames=e},accDimensionNames:function(){return this._accDimNames},dimensionNames:function(){return this._dimNames},lastDimension:function(){return this.dimensions[this.depth-1]},bind:function(e){this._sortDimensions(e),this.dimensions.forEach(function(t){t.bind(e)})},compare:function(e,t){for(var n,r=this.dimensions,i=this.depth,s=0;i>s;s++)if(n=r[s].compareDatums(e,t))return n;return 0},key:function(e){for(var t="",n=this._dimNames,r=this.depth,i=e.owner.keySep,s=e.atoms,o=0;r>o;o++){var u=s[n[o]].key;o?t+=i+u:t=u}return t},atomsInfo:function(e){for(var t={},n=this._dimNames,r=this.depth,i=e.atoms,s=0;r>s;s++){var o=n[s];t[o]=i[o]}return{atoms:t,dimNames:n}},toString:function(){return e.query(this.dimensions).select(String).array().join("|")}}),e.type("cdo.GroupingDimensionSpec").init(function(e,t,n){this.name=e,this.reverse=!!t,this.id=e+":"+(t?"0":"1"),n&&this.bind(n)}).add({type:null,comparer:null,bind:function(t){t||e.fail.argumentRequired("type"),this.type=t.dimensions(this.name),this.comparer=this.type.atomComparer(this.reverse)},compareDatums:function(e,t){if(this.type.isComparable){var n=this.name;return this.comparer(e.atoms[n],t.atoms[n])}return this.reverse?t.id-e.id:e.id-t.id},toString:function(){return this.name+(this.type?' ("'+this.type.label+'")':"")+(this.reverse?" desc":"")}}),Et.GroupingSpec.parse=function(t,n){if(!t)return new Et.GroupingSpec(null,n);var r=e.string.is(t)?t.split(/\s*,\s*/):e.array.as(t),i=e.query(r).select(function(e){var t=J(e,n);return new Et.GroupingLevelSpec(t,n)});return new Et.GroupingSpec(i,n)};var Nt=/^\s*(.+?)(?:\s+(asc|desc))?\s*$/i;e.type("cdo.LinearInterpolationOper").init(function(t,n,r,i,s,o,u){this._newDatums=[],this._data=r;var a=i.flatten(t).children(),f=s.isBound()?s.flatten(n,{visible:!0,isNull:!1}).children().array():[null],l=this._valDim=t.owner.dimensions(o.lastDimensionName()),c={visible:!0,zeroIfNone:!1};this._isCatDiscrete=i.grouping.isDiscrete(),this._stretchEnds=u,this._catInfos=a.select(function(e,t){var n=r.child(e.key);return catInfo={data:n||e,value:e.value,isInterpolated:!1,serInfos:null,index:t},catInfo.serInfos=f.map(function(e){var t=n;t&&e&&(t=t.child(e.key));var r=t?t.dimensions(l.name).value(c):null;return{data:e,group:t,value:r,isNull:null==r,catInfo:catInfo}}),catInfo}).array(),this._serCount=f.length,this._serStates=e.range(0,this._serCount).select(function(e){return new Et.LinearInterpolationOperSeriesState(this,e)},this).array()}).add({interpolate:function(){for(var e;e=this._catInfos.shift();)e.serInfos.forEach(this._visitSeries,this);var t=this._newDatums;t.length&&this._data.owner.add(t)},_visitSeries:function(e,t){this._serStates[t].visit(e)},nextUnprocessedNonNullCategOfSeries:function(e){for(var t=0,n=this._catInfos.length;n>t;){var r=this._catInfos[t++],i=r.serInfos[e];if(!i.isNull)return i}}}),e.type("cdo.LinearInterpolationOperSeriesState").init(function(e,t){this.interpolation=e,this.index=t,this._lastNonNull(null)}).add({visit:function(e){e.isNull?this._interpolate(e):this._lastNonNull(e)},_lastNonNull:function(e){return arguments.length&&(this.__lastNonNull=e,this.__nextNonNull=void 0),this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(void 0===this.__nextNonNull){var t=this.__lastNonNull,n=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(n&&t){var r=t.value,i=n.value,s=i-r;if(this.interpolation._isCatDiscrete){var o=n.catInfo.index-t.catInfo.index;o>=2||e.assert("Must have at least one interpolation point."),this._stepValue=s/o,this._middleIndex=~~(o/2);var u=o-1;this._isOdd=u%2>0}else{var a=+t.catInfo.value,f=+n.catInfo.value,l=f-a;this._steep=s/l,this._middleCat=(f+a)/2}}}},_interpolate:function(t){this._initInterpData();var n=this.__nextNonNull,r=this.__lastNonNull,i=n||r;if(i){var s,o,u=this.interpolation,a=t.catInfo;if(n&&r)if(u._isCatDiscrete){var f=a.index-r.catInfo.index;s=r.value+this._stepValue*f,o=(this._isOdd?f<this._middleIndex:f<=this._middleIndex)?r.group:n.group}else{var l=+a.value,c=+r.catInfo.value;s=r.value+this._steep*(l-c),o=l<this._middleCat?r.group:n.group}else{if(!u._stretchEnds)return;s=i.value,o=i.group}var h=Object.create(o.atoms);e.copyOwn(h,a.data.atoms);var p=u._valDim,d=p.intern(s,!0);h[p.name]=d,u._newDatums.push(new Et.InterpolationDatum(o.owner,h,"linear",p.name))}}}),e.type("cdo.ZeroInterpolationOper").init(function(t,n,r,i,s,o,u){this._newDatums=[],this._data=r;var a=i.flatten(t).children(),f=s.isBound()?s.flatten(n,{visible:!0,isNull:!1}).children().array():[null],l=this._valDim=t.owner.dimensions(o.lastDimensionName()),c={visible:!0,zeroIfNone:!1};this._isCatDiscrete=i.grouping.isDiscrete(),this._stretchEnds=u,this._catInfos=a.select(function(e,t){var n=r.child(e.key),i={data:n||e,value:e.value,isInterpolated:!1,serInfos:null,index:t};return i.serInfos=f.map(function(e){var t=n;t&&e&&(t=t.child(e.key));var r=t?t.dimensions(l.name).value(c):null;return{data:e,group:t,value:r,isNull:null==r,catInfo:i}}),i}).array(),this._serCount=f.length,this._serStates=e.range(0,this._serCount).select(function(e){return new Et.ZeroInterpolationOperSeriesState(this,e)},this).array()}).add({interpolate:function(){for(var e;e=this._catInfos.shift();)e.serInfos.forEach(this._visitSeries,this);var t=this._newDatums;t.length&&this._data.owner.add(t)},_visitSeries:function(e,t){this._serStates[t].visit(e)},nextUnprocessedNonNullCategOfSeries:function(e){for(var t=0,n=this._catInfos.length;n>t;){var r=this._catInfos[t++],i=r.serInfos[e];if(!i.isNull)return i}}}),e.type("cdo.ZeroInterpolationOperSeriesState").init(function(e,t){this.interpolation=e,this.index=t,this._lastNonNull(null)}).add({visit:function(e){e.isNull?this._interpolate(e):this._lastNonNull(e)},_lastNonNull:function(e){return arguments.length&&(this.__lastNonNull=e,this.__nextNonNull=void 0),this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(void 0===this.__nextNonNull){var t=this.__lastNonNull,n=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(n&&t)if(this.interpolation._isCatDiscrete){var r=n.catInfo.index-t.catInfo.index;r>=2||e.assert("Must have at least one interpolation point."),this._middleIndex=~~(r/2);var i=r-1;this._isOdd=i%2>0}else{var s=+t.catInfo.value,o=+n.catInfo.value;this._middleCat=(o+s)/2}}},_interpolate:function(t){this._initInterpData();var n=this.__nextNonNull,r=this.__lastNonNull,i=n||r;if(i){var s,o=this.interpolation,u=t.catInfo;if(n&&r)if(o._isCatDiscrete){var a=u.index-r.catInfo.index;s=this._isOdd?a<this._middleIndex?r.group:n.group:a<=this._middleIndex?r.group:n.group}else{var f=+u.value;s=f<this._middleCat?r.group:n.group}else{if(!o._stretchEnds)return;s=i.group}var l=Object.create(s.atoms);e.copyOwn(l,u.data.atoms);var c=o._valDim,h=o._zeroAtom||(o._zeroAtom=c.intern(0,!0));l[c.name]=h,o._newDatums.push(new Et.InterpolationDatum(s.owner,l,"zero",c.name))}}}),e.type("cdo.TranslationOper").init(function(t,n,r,i,s){this.chart=t,this.complexTypeProj=n,this.source=r||e.fail.argumentRequired("source"),this.metadata=i||e.fail.argumentRequired("metadata"),this.options=s||{},this._initType(),e.debug>=4&&(this._logItems=!0,this._logItemCount=0)}).add({_logItems:!1,logSource:e.abstractMethod,logVItem:e.abstractMethod,_translType:"Unknown",logTranslatorType:function(){return this._translType+" data source translator"},virtualItemSize:function(){return this.metadata.length},freeVirtualItemSize:function(){return this.virtualItemSize()-this._userUsedIndexesCount},setSource:function(t){if(!t)throw e.error.argumentRequired("source");this.source=t},defReader:function(t){t||e.fail.argumentRequired("readerSpec");var n=e.string.is(t)?t:t.names;n=e.string.is(n)?n.split(/\s*\,\s*/):e.array.as(n);var r=e.array.as(t.indexes);r&&r.forEach(this._userUseIndex,this);var i=!!n&&!!n.length,s=t.reader;if(s)i||e.fail.argumentRequired("reader.names","Required argument when a reader function is specified."),this._userRead(s,n);else{if(i)return this._userCreateReaders(n,r);r&&r.forEach(function(e){this._userIndexesToSingleDim[e]=null},this)}return r},configureType:function(){this._configureTypeCore()},_configureTypeCore:e.abstractMethod,_initType:function(){this._userDimsReaders=[],this._userDimsReadersByDim={},this._userItem=[],this._userUsedIndexes={},this._userUsedIndexesCount=0,this._userIndexesToSingleDim=[];var t=this.options.readers;t&&t.forEach(this.defReader,this);var n=e.parseDistinctIndexArray(this.options.multiChartIndexes);n&&(this._multiChartIndexes=this.defReader({names:"multiChart",indexes:n}))},_userUseIndex:function(t){t=+t;if(0>t)throw e.error.argumentInvalid("index","Invalid reader index: '{0}'.",[t]);if(e.hasOwn(this._userUsedIndexes,t))throw e.error.argumentInvalid("index","Virtual item index '{0}' is already assigned.",[t]);return this._userUsedIndexes[t]=!0,this._userUsedIndexesCount++,this._userItem[t]=!0,t},_userCreateReaders:function(t,n){n?n.forEach(function(e,t){n[t]=+e}):n=[];var r,i=n.length,s=t.length;if(s>i){var o=i>0?n[i-1]+1:0;do o=this._nextAvailableItemIndex(o),n[i]=o,this._userUseIndex(o),i++;while(s>i)}for(var u,a=i===s?s:s-1,f=0;a>f;f++)r=t[f],u=n[f],this._userIndexesToSingleDim[u]=r,this._userRead(this._propGet(r,u),r);if(s>a)for(var l=e.splitIndexedId(t[s-1]),c=l[0],h=e.nullyTo(l[1],0),p=a;i>p;p++,h++)r=e.indexedId(c,h),u=n[p],this._userIndexesToSingleDim[u]=r,this._userRead(this._propGet(r,u),r);return n},_userRead:function(t,n){e.fun.is(t)||e.fail.argumentInvalid("reader","Reader must be a function."),e.array.is(n)?n.forEach(function(e){this._readDim(e,t)},this):this._readDim(n,t),this._userDimsReaders.push(t)},_readDim:function(t,n){var r,i,s=this._userIndexesToSingleDim.indexOf(t);if(s>=0){r=this._itemInfos[s];if(r&&!this.options.ignoreMetadataLabels){var o=r.label||r.name&&e.titleFromName(r.name);o&&(i={label:o})}}this.complexTypeProj.readDim(t,i),this._userDimsReadersByDim[t]=n},execute:function(e){return this.data=e,this._executeCore()},_executeCore:function(){var t=this._getDimensionsReaders();return e.query(this._getItems()).select(function(e){return this._readItem(e,t)},this)},_getItems:function(){return this.source},_getDimensionsReaders:function(){return this._userDimsReaders},_readItem:function(e,t){for(var n=this._logItems&&this._logItemBefore(e),r=0,i=t.length,s=this.data,o={};i>r;)t[r++].call(s,e,o);return n&&this._logItemAfter(o),o},_logItemBefore:function(t){return this._logItemCount<10?(e.log("virtual item ["+this._logItemCount++ +"]: "+e.describe(t)),!0):(e.log("..."),this._logItems=!1)},_logItemAfter:function(t){var n={};for(var r in t){var i=t[r];e.object.is(i)&&(i="v"in i?i.v:"value"in i?i.value:"..."),n[r]=i}e.log("-> read: "+e.describe(n))},_propGet:function(e,t){function n(n,r){r[e]=n[t]}return n},_nextAvailableItemIndex:function(t,n){null==t&&(t=0),null==n&&(n=1/0);for(;n>t&&e.hasOwn(this._userItem,t);)t++;return n>t?t:-1},_getLogicalGroupStartIndex:function(t){return e.getOwn(this._itemLogicalGroupIndex,t)},_getLogicalGroupLength:function(t){return e.getOwn(this._itemLogicalGroupsLength,t)},_collectDimReaders:function(t,n,r,i,s,o){var u=this._itemLogicalGroupIndex[n],a=this._itemLogicalGroupsLength[n],f=u+a-1,l=Math.max(u,s||0);i=null==i?a:Math.min(a,i);if(i&&f>=l){r||(r=n),o||(o=1/0);for(var c,h=0;i&&o>h;){c=e.indexedId(r,h++);if(!this.complexTypeProj.isReadOrCalc(c)){l=this._nextAvailableItemIndex(l);if(l>f)return l;t.push({names:c,indexes:l}),l++,i--}}}return l},_getUnboundRoleDefaultDimNames:function(t,n,r,i){var s=this.chart.visualRoles[t];if(s&&!s.isPreBound()){var o=s.defaultDimensionName;if(o){o=o.match(/^(.*?)(\*)?$/)[1],r||(r=[]),null==i&&(i=0),null==n&&(n=1);for(;n--;){var u=e.indexedId(o,i++);this.complexTypeProj.isReadOrCalc(u)||r.push(u)}return r.length?r:null}}},_collectFreeDiscreteAndContinuousIndexes:function(e,t){this._itemInfos.forEach(function(n,r){if(!this[r]){var i=1===n.type?t:e;i&&i.push(r)}},this._userUsedIndexes)}}),e.type("cdo.MatrixTranslationOper",Et.TranslationOper).add({_initType:function(){this.J=this.metadata.length,this.I=this.source.length,this._processMetadata(),this.base()},setSource:function(e){this.base(e),this.I=this.source.length},_knownContinuousColTypes:{numeric:1,number:1,integer:1},_processMetadata:function(){for(var t=this._knownContinuousColTypes,n=e.query(this.metadata).select(function(e,t){return e.colIndex=t,e}).where(function(e){var n=e.colType;return!n||1!==t[n.toLowerCase()]}).select(function(e){return e.colIndex}).array(),r=e.array.create(this.J,1),i=this.I,s=this.source,o=n.length,u=0;i>u&&o>0;u++)for(var a=s[u],f=0;o>f;){var l=n[f],c=a[l];null!=c?(r[l]=this._getSourceValueType(c),n.splice(f,1),o--):f++}this._columnTypes=r},_buildItemInfoFromMetadata:function(e){var t=this.metadata[e];return{type:this._columnTypes[e],name:t.colName,label:t.colLabel}},_getSourceValueType:function(e){switch(typeof e){case"number":return 1;case"object":if(e instanceof Date)return 1}return 0},logSource:function(){var t=Et.previewRowsMax,n=Et.previewColsMax,r=this.metadata,i=r.length,s=e.array.prepend;i>n&&(r=r.slice(0,n),r.push({colName:"("+n+"/"+i+")",colType:"..."}));var o=e.textTable(r.length+1).rowSep().row.apply(o,s(r.map(function(e){return e.colName}),["Name"])).rowSep().row.apply(o,s(r.map(function(e){return e.colLabel?'"'+e.colLabel+'"':""}),["Label"])).rowSep().row.apply(o,s(r.map(function(e){return e.colType}),["Type"])).rowSep();return e.query(this.source).take(t).each(function(t,r){i>n&&(t=t.slice(0,n)),o.row.apply(o,s(t.map(function(t){return e.describe(t)}),[r+1]))}),o.rowSep().row("("+Math.min(t,this.I)+"/"+this.I+")").rowSep(!0),"DATA SOURCE SUMMARY\n"+o()+"\n"},_logVItem:function(t,n){var r=e.textTable(6).rowSep().row("Index","Kind","Type","Name","Label","Dimension").rowSep(),i=0;return t.forEach(function(e){for(var t=0,s=n[e];s>t;t++){var o=this._itemInfos[i];r.row(i,e,o.type?"number":"string",o.name||"",o.label||"",this._userIndexesToSingleDim[i]||""),i++}},this),r.rowSep(!0),"VIRTUAL ITEM ARRAY\n"+r()+"\n"},_createPlot2SeriesKeySet:function(t,n){var r=null,i=n.length;return e.query(t).each(function(t){var s=+t;if(isNaN(s))throw e.error.argumentInvalid("plot2SeriesIndexes","Element is not a number '{0}'.",[t]);if(0>s){if(-i>=s)throw e.error.argumentInvalid("plot2SeriesIndexes","Index is out of range '{0}'.",[s]);s=i+s}else if(s>=i)throw e.error.argumentInvalid("plot2SeriesIndexes","Index is out of range '{0}'.",[s]);r||(r={}),r[n[s]]=!0}),r},_dataPartGet:function(t){function n(t,n){n[a]=e.hasOwn(i,t)?o||(o=r.intern("1")):s||(s=r.intern("0"))}var r,i,s,o,u=this,a=this.options.dataPartDimName,f=function(){i=t(),r=u.data.dimensions(a),e.debug>=3&&i&&e.log("Second axis series values: "+e.describe(e.keys(i))),f=null};this.complexTypeProj.setCalc({names:a,calculation:function(e,t){f&&f(),n(e.atoms.series.value,t)}})},_configureTypeCore:function(){var e=0,t=[];["series","category","value"].forEach(function(n){e=this._collectDimReaders(t,n,null,1/0,e)},this),t.forEach(this.defReader,this)}}),Et.previewRowsMax=15,Et.previewColsMax=6,e.type("cdo.CrosstabTranslationOper",Et.MatrixTranslationOper).add({_translType:"Crosstab",virtualItemSize:function(){return this.R+this.C+this.M},_executeCore:function(){function t(e,t){for(var n=s[e],r=0,u=o[e];u-->0;)i[n++]=t[r++]}function n(e,t){for(var n=s.M,r=o._colGroupsIndexes[t],u=o.M,a=0;u>a;a++){var f=r[a];i[n++]=null!=f?e[f]:null}}if(!this.metadata.length)return e.query();var r=this._getDimensionsReaders(),i=new Array(this.virtualItemSize()),s=this._itemCrossGroupIndex,o=this,u=e.query(this.source);if(this._colGroups&&this._colGroups.length){var a=function(s){return t("R",s),e.query(this._colGroups).select(function(e,o){return t("C",e),n(s,o),this._readItem(i,r)},this)};return u.selectMany(a,this)}return u.select(function(e){return t("R",e),this._readItem(i,r)},this)},_processMetadata:function(){this.base(),this._separator=this.options.separator||"~";var t=this.R=1;this.C=1,this.M=1,this.measuresDirection=null;var n=this.options.seriesInRows,r=this.metadata,i=this.options.compatVersion<=1,s=function(){var e=n?function(e){return e.colName}:i?function(e){return{v:e.colName}}:function(e){return{v:e.colName,f:e.colLabel}};return r.map(e)}(),o=this._itemCrossGroupInfos={};if(this.options.isMultiValued){var u=e.get(this.options,"measuresInColumns",!0);if(u||null==this.options.measuresIndex){t=this.R=this._getCategoriesCount();var a=s.slice(t),f=a.length;f>0?(u?(this.measuresDirection="columns",this._processEncodedColGroups(a)):(this._colGroups=a,this._colGroupsIndexes=[],this._colGroups.forEach(function(e,t){this._colGroups[t]=this._splitEncodedColGroupCell(e),this._colGroupsIndexes[t]=[this.R+t]},this),o.M=[this._buildItemInfoFromMetadata(t)]),this.C=this._colGroups[0].length,o.C=e.range(0,this.C).select(function(){return{type:0}}).array()):(this.C=this.M=0,o.M=[],o.C=[])}else{this.measuresDirection="rows",this.R=+this.options.measuresIndex;var l=this.options.measuresCount;null==l&&(l=1),this.M=l,this._colGroups=s.slice(this.R+1),this._colGroups.forEach(function(e,t){this._colGroups[t]=[e]},this)}}else t=this.R=this._getCategoriesCount(),this._colGroups=s.slice(t),this._colGroupsIndexes=new Array(this._colGroups.length),this._colGroups.forEach(function(e,n){this._colGroups[n]=[e],this._colGroupsIndexes[n]=[t+n]},this),o.C=[{type:0}],o.M=[{type:this._columnTypes[t]}];o.R=e.range(0,this.R).select(this._buildItemInfoFromMetadata,this).array();var c=this._itemCrossGroupIndex={C:n?this.R:0,R:n?0:this.C,M:this.C+this.R},h=this._itemInfos=new Array(this.virtualItemSize());e.eachOwn(c,function(e,t){o[t].forEach(function(t,n){h[e+n]=t})}),this._itemLogicalGroupsLength={series:n?this.R:this.C,category:n?this.C:this.R,value:this.M},this._itemLogicalGroupIndex={series:0,category:this._itemLogicalGroupsLength.series,value:this.C+this.R}},logVItem:function(){return this._logVItem(["C","R","M"],{C:this.C,R:this.R,M:this.M})},_getCategoriesCount:function(){var t=this.options.categoriesCount;return null!=t&&(!isFinite(t)||0>t)&&(t=null),null==t&&(t=e.query(this._columnTypes).whayl(function(e){return 0===e}).count(),t||(t=1)),t},_splitEncodedColGroupCell:function(e){var t,n=e.v;return null==n?n=[]:(n=n.split(this._separator),t=e.f,t&&(t=t.split(this._separator))),n.map(function(e,n){return{v:e,f:t&&t[n]}})},_processEncodedColGroups:function(t){for(var n,r=t.length||e.assert("Must have columns"),i=this.R,s=[],o={},u=[],a=0;r>a;a++){var f,l,c,h,p=t[a],d=p.v,v=p.f,m=d.lastIndexOf(this._separator);0>m?(f=d,l=v,d="",c=[]):(f=d.substring(m+1),d=d.substring(0,m),c=d.split(this._separator),null!=v&&(h=v.split(this._separator),l=h.pop()),c.forEach(function(e,t){var n=h&&h[t];c[t]={v:e,f:n}})),n&&n.encValues===d?n.measureNames.push(f):(n={startIndex:a,encValues:d,values:c,measureNames:[f]},s.push(n));var g=a-n.startIndex,y=e.getOwn(o,f);y?g>y.groupIndex&&(y.groupIndex=g):(o[f]=y={name:f,label:l,type:this._columnTypes[i+a],groupIndex:g,index:a},u.push(y))}u.sort(function(t,n){return e.compare(t.groupIndex,n.groupIndex)||e.compare(t.index,n.index)}),u.forEach(function(e,t){e.groupIndex=t});var b=s.length,w=new Array(b),E=new Array(b),S=u.length;s.map(function(e,t){w[t]=e.values;var n=e.startIndex,r=E[t]=new Array(S);e.measureNames.forEach(function(e,t){var s=o[e].groupIndex;r[s]=i+n+t})}),this._colGroups=w,this._colGroupsIndexes=E,this._itemCrossGroupInfos.M=u,this.M=S},configureType:function(){if("rows"===this.measuresDirection)throw e.error.notImplemented();var t=this.options.dataPartDimName;if(t&&1===this.C&&!this.complexTypeProj.isReadOrCalc(t)){var n=this.options.plot2DataSeriesIndexes;if(null!=n){var r=this._colGroups.map(function(e){return""+e[0].v});this._plot2SeriesKeySet=this._createPlot2SeriesKeySet(n,r)}}this.base();if(this._plot2SeriesKeySet){var i=this._userDimsReadersByDim.series;if(i){var s=e.fun.constant(this._plot2SeriesKeySet);this._dataPartGet(s)}}}}),e.type("cdo.RelationalTranslationOper",Et.MatrixTranslationOper).add({M:0,C:0,S:0,_translType:"Relational",_processMetadata:function(){this.base();var t,n,r,i,s=this.metadata,o=this.J,u=this.options.categoriesCount;null!=u&&(!isFinite(u)||0>u)&&(u=0),this.options.isMultiValued&&(n=e.parseDistinctIndexArray(this.options.measuresIndexes,0,o-1),r=n?n.length:0);if(null==r)if(o>0&&3>=o&&(null==u||1===u))r=1,n=[o-1],u=o>=2?1:0,t=o>=3?1:0,i=u+t;else if(null!=u&&u>=o)i=u=o,t=r=0;else{var a=null!=u?o-u:1/0;n=e.query(s).where(function(e,t){return 0!==this._columnTypes[t]},this).select(function(e){return e.colIndex}).take(a).array(),r=n.length}null==i&&(i=o-r,0===i?t=u=0:null!=u?u>i?(u=i,t=0):t=i-u:(t=i>1?1:0,u=i-t));var f=this.options.seriesInRows,l=[];i&&(t&&!f&&l.push({name:"S",count:t}),u&&l.push({name:"C",count:u}),t&&f&&l.push({name:"S",count:t})),r&&l.push({name:"M",count:r});var c=e.range(0,o).array();n&&n.slice().sort(e.descending).forEach(function(e){c.splice(e,1)});var h={};l.forEach(function(e){var t=e.count,r=e.name;h[r]=e,e.indexes=n&&"M"===r?n:c.splice(0,t)}),this.M=r,this.S=t,this.C=u;var p=[];["S","C","M"].forEach(function(t){var n=h[t];n&&e.array.append(p,n.indexes)}),this._itemInfos=p.map(this._buildItemInfoFromMetadata,this),this._itemPerm=p,this._itemLogicalGroupsLength={series:this.S,category:this.C,value:this.M},this._itemLogicalGroupIndex={series:0,category:this._itemLogicalGroupsLength.series,value:this.S+this.C}},logVItem:function(){return this._logVItem(["S","C","M"],{S:this.S,C:this.C,M:this.M})},configureType:function(){this.base();var e=this.options.dataPartDimName;if(e&&!this.complexTypeProj.isReadOrCalc(e)){var t=this.options.plot2DataSeriesIndexes;if(null!=t){var n=this._userDimsReadersByDim.series;n&&K.call(this,t,n)}}},_executeCore:function(){var n=this._getDimensionsReaders(),r=this._itemPerm;return e.query(this._getItems()).select(function(e){return e=t.permute(e,r),this._readItem(e,n)},this)}});var Ct=Et.numberFormatStyle=function(e,t){return new Lt(e,t)},kt=e.priv.key().property(),Lt=Ct.of=e("cdo.NumberFormatStyle",e.FieldsBase.extend({init:function(){e.classify(this,Ct)},fields:{decimal:{cast:String,fail:e.falsy},group:{cast:String},groupSizes:{fail:e.array.empty},negativeSign:{cast:String,fail:e.falsy},currency:{cast:String,fail:e.falsy},integerPad:{cast:String,fail:e.falsy},fractionPad:{cast:String,fail:e.falsy}},methods:{tryConfigure:function(t){return e.is(t,Ct)?!!this.integerPad(t.integerPad()).fractionPad(t.fractionPad()).decimal(t.decimal()).group(t.group()).groupSizes(t.groupSizes()).negativeSign(t.negativeSign()).currency(t.currency()):void 0}}},{fieldsPrivProp:kt}));e.classify(Lt.prototype,Ct),Ct.defaults=Ct({integerPad:"0",fractionPad:"0",decimal:".",group:",",groupSizes:[3],negativeSign:"-",currency:"$"});var At=Et.numberFormat=function(t,n){function r(e){return s||(s=G(i.mask)),s(e,kt(i.style))}var i,s;return r.format=r,r.tryConfigure=Q,e.classify(r,At),i=e.instance(r,t,n,{mask:{cast:String,change:function(){s=null}},style:{cast:e.createAs(Lt),factory:Ct}}),r};At.defaults=At().style(Ct()),At.cacheLimit=20;var Ot={},Mt=0,_t=Et.dateFormat=function(t,n){function r(e){return s||(s=mt(i.mask)),s(e)}var i,s;return r.format=r,r.tryConfigure=vt,e.classify(r,_t),i=e.instance(r,t,n,{mask:{cast:String,change:function(){s=null}}}),arguments.length&&e.configure(r,arguments[0]),r};_t.defaults=_t();var Dt=Et.customFormat=function(t,n){function r(){var e=i.formatter;return String(e&&e.apply(null,arguments))}var i;return r.format=r,r.tryConfigure=gt,e.classify(r,Dt),i=e.instance(r,t,n,{formatter:{cast:e.fun.as}}),r};Dt.defaults=Dt().formatter(yt);var Pt=Et.format=function(t,n){function r(){}return r.tryConfigure=wt,e.classify(r,Pt),e.instance(r,t,n,{number:bt(At),percent:bt(At),date:bt(_t),any:{cast:e.createAs(Dt),factory:Dt}}),r};return Pt.defaults=Pt({number:"#,0.##",percent:"#,0.#%",date:"%Y/%m/%d",any:Dt()}),Et}),pen.define("cdf/lib/CCC/cdo",function(){}),pen.define("cdf/lib/CCC/pvc-d1.0",["cdf/lib/CCC/def","cdf/lib/CCC/protovis","cdf/lib/CCC/cdo","cdf/jquery","cdf/lib/CCC/tipsy"],function(e,t,n,r){function i(t,n){if(t){if(null!=t.abs)return t.abs;if(!n)return t;var r=e.firstUpperCase(t);return null!=n.abs?{abs:n.abs+r}:n+r}return n}function s(t,n){function r(e){return h[e].resolve()}function i(e,t){var n=r(e);return t&&!n.isSpecified?void 0:n.value}function s(e){return r(e).isSpecified}function o(e){return i(e,!0)}function u(t){return e.hasOwn(h,t)}function a(e){return c(e,!1)}function f(e){return c(e,!0)}function l(e){return r(e)._dv}function c(t,n){var r,s,o;for(r in t)s=e.hasOwnProp.call(h,r)&&h[r],s&&void 0!==(o=t[r])&&s.set(o,n);return i}t||e.fail.argumentRequired("specs");var h={};return e.each(t,function(e,t){var r=new Q(t,i,n,e);h[r.name]=r}),i.option=i,i.specified=o,i.defaultValue=l,i.isSpecified=s,i.isDefined=u,i.specify=a,i.defaults=f,i}function o(e){return function(t){var n,r;for(n=0,L=e.length;L>n;n++){r=e[n],"string"==typeof r&&(r=this[r]);if(r.call(this,t)===!0)return!0}}}function u(e){return function(t){return t.specify(e),!0}}function a(e){return function(t){var n=e.call(this,t);return void 0!==n?(t.specify(n),!0):void 0}}function f(e){return function(t){var n=e.call(this,t);return void 0!==n?(t.defaultValue(n),!0):void 0}}function l(){e.MetaType.apply(this,arguments);var t=this.baseType&&this.baseType.optionsDef;this.optionsDef=e.create(t)}function c(e){e=t.color(e);var n=e.r,r=e.g,i=e.b,s=(n+r+i)/3,o=2;return Math.abs(n-s)<=o&&Math.abs(r-s)<=o&&Math.abs(i-s)<=o}function h(t){t||e.fail.argumentRequired("keyArgs");var n=t.type||e.fail.argumentRequired("keyArgs.type");switch(n){case"linear":return(new R.color.LinearScalesBuild(t)).buildMap();case"discrete":return(new R.color.DiscreteScalesBuild(t)).buildMap();case"normal":return(new R.color.NormalScalesBuild(t)).buildMap()}throw e.error.argumentInvalid("scaleType","Unexistent scale type '{0}'.",[n])}function p(t){t||e.fail.argumentRequired("keyArgs");var n=t.type||e.fail.argumentRequired("keyArgs.type");switch(n){case"linear":return(new R.color.LinearScalesBuild(t)).build();case"discrete":return(new R.color.DiscreteScalesBuild(t)).build();case"normal":return(new R.color.NormalScalesBuild(t)).build()}throw e.error.argumentInvalid("scaleType","Unexistent scale type '{0}'.",[n])}function d(e,n){this.event=t.event,this.pvMark=e;if(e){var r=this.sign=e.sign||null;!n&&r&&(n=r.scene()),n?this.index=n.childIndex():(this.index=null,n=new R.visual.Scene(null,{panel:this.panel}))}else this.sign=null,this.index=null,n=new R.visual.Scene(null,{panel:this.panel,source:this.chart.root.data});this.scene=n}function v(e){this._renderId!==e&&(this._renderId=e,this.renderState={})}function m(e){var t;e&&(t=e.ownerScene)&&(e=t);var n=this._active;return n!==e?(n&&g.call(n,!1),this._active=n=e||null,n&&g.call(n,!0),!0):!1}function g(e){this.isActive!==e&&(e?this.isActive=!0:delete this.isActive)}function y(e,t){return function(){var n=this.vars[e];return void 0===n&&(n=this[t](),void 0===n&&(n=null),this.vars[e]=n),n}}function b(t){if(t.isRequired)throw e.error.operationInvalid("The required visual role '{0}' is unbound.",[t.name])}function w(t,n){if(t!==n)throw e.error.operationInvalid("Invalid state.")}function E(e){return e.dataPartValue}function S(e){return e.isDiscrete()?"discrete":e.lastDimensionValueType()===Date?"timeSeries":"numeric"}function x(n){var r;if(n){var i;e.eachOwn(n,function(e,r){i=!0,n[r]=t.fillStyle(e)}),i&&(r=n)}return r}function T(){var e,n=this.scaleType;if(n)if("discrete"===n)if(0===this.index)e=R.createColorScheme();else{var r=this;e=function(){return r.chart._getRoleColorScale(r.role.grouping)}}else tt||(tt=["red","yellow","green"].map(t.color)),e=tt.slice();else e=R.createColorScheme();return e}function N(t){if(!e.object.is(t)){var n=this.option("Position");t=(new K).setSize(t,{singleProp:R.BasePanel.orthogonalLength[n]})}return t}function C(e){var t=this.option("Position");return R.parseAlign(t,e)}function k(e){return(new K).setSize(e,{singleProp:"width"})}function A(t){var n=O(t)||e.assert("There must exist an ancestor sign");return new R.visual.BasicSign(n.panel,t)}function O(e){var t;do e=e.parent;while(!(!e||(t=e.sign)||e.proto&&(t=e.proto.sign)));return t}function M(e,n,r,i,s,o,u,a){if(!e)return null;var f;null==i&&(i=1/0),null==u&&(u=1/0),null==r&&(r=0),null==o&&(o=0),r>i&&(i=r),o>u&&(u=o),null!=n?r>n?n=r:n>i&&(n=i):t.floatEqual(r,i)&&(n=r),null!=s?o>s?s=o:s>u&&(s=u):t.floatEqual(o,u)&&(s=o);var l=null!=n,c=null!=s;if(l||c){if(l&&c)return t.floatZero(n)&&t.floatZero(s)?M(e,null,0,1/0,null,0,1/0,a):(a=n/(n+s),{mode:"abs",ratio:a,value:e*(n+s),band:n,space:s});var h,p;return l?(h=n+o,p=n+u,a=t.floatZero(n)?0:n/h):(h=r+s,p=i+s,a=t.floatZero(s)?1:r/h),{mode:"abs",ratio:a,min:e*h,max:e*p,band:l?n:void 0,space:c?s:void 0}}var d=r>0,v=o>0,m=isFinite(i)&&i>0,g=isFinite(u)&&u>0,y=d&&v,b=m&&g;if(y||b)if(y){a=r/(r+o);if(b)return{mode:"abs",ratio:a,min:e*(r+o),max:e*(i+u),band:r,space:o};f=o/r,m?u=f*i:g&&(i=u/f)}else f=u/i,a=i/(i+u),d?o=f*r:v&&(r=o/f);else{if(!(d||m||v||g))return{mode:"rel",ratio:a,min:0,max:1/0};f=1/a-1;if(v){r=o/f;if(m&&r>=i)return M(e,n,r,i,s,o,u,a)}else if(d){o=f*r;if(g&&o>=u)return M(e,n,r,i,s,o,u,a)}m?u=f*i:g&&(i=u/f)}return{mode:"rel",ratio:a,min:e*(r+o),max:e*(i+u)}}function _(e){return R.parseDomainScope(e,this.orientation)}function D(t){if(t){if(e.hasOwn(J.namesSet,t)){var n=R.BasePanel["y"===this.orientation?"horizontalAlign":"verticalAlign2"];return n[t]}e.debug>=2&&e.log(e.format("Invalid axis position value '{0}'.",[t]))}return"x"===this.orientation?"bottom":"left"}function P(e){var t=this.option("Position");return K.toOrtho(e,t)}function H(e){var t=this.option("Position");return K.to(e,{singleProp:R.BasePanel.orthogonalLength[t]})}function B(){var e=["axis"],t=this.scaleType;return t&&("discrete"!==t&&e.push("continuousAxis"),e.push(t+"Axis")),this.v1SecondOrientedId&&e.push(this.v1SecondOrientedId+"Axis"),e.push(this.orientedId+"Axis"),e.push(this.id+"Axis"),e}function j(e){if("trend"===this.name)return null;var t=this.option("TrendType");!t&&e&&(t=e.type);if(!t||"none"===t)return null;e=e?Object.create(e):{};var n=R.trends.get(t);e.info=n,e.type=t;var r=this.option("TrendLabel");return e.label=null!=r?String(r):n.dataPartAtom.f,e}function F(e,t){return{resolveV1:function(n){if(0===this.globalIndex)return this._specifyChartOption(n,"show"+e)||n.defaultValue(t),!0}}}function I(e){return{resolveV1:function(t){return this._specifyChartOption(t,"show"+e),!0}}}Array.prototype.every||(Array.prototype.every=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)if(i in t&&!e.call(r,t[i],i,t))return!1;return!0});var q=1,R=e.globalSpace("pvc",{});R.data=n;var U=Array.prototype.slice;R.invisibleFill="rgba(127,127,127,0.00001)",e.global.NoDataException=function(){},e.global.InvalidDataException=function(e){this.message=e?e:"Invalid Data."},R.defaultCompatVersion=function(e){var t=R.BaseChart.prototype.defaults;return null!=e?t.compatVersion=e:t.compatVersion},R.cloneMatrix=function(e){return e.map(function(e){return e.slice()})},R.normAngle=t.Shape.normalizeAngle,R.orientation={vertical:"vertical",horizontal:"horizontal"},R.removeTipsyLegends=function(){try{r(".tipsy").remove()}catch(e){}},R.createDateComparer=function(e,n){return n||(n=t.identity),function(t,r){return e.parse(n(t))-e.parse(n(r))}},R.buildIndexedId=e.indexedId,R.makeEnumParser=function(t,n,r){if(e.array.is(n)){var i={};n.forEach(function(e){e&&(i[e.toLowerCase()]=e)}),n=function(t){return e.hasOwn(i,t)}}return r&&(r=r.toLowerCase()),function(i){return i&&(i=(""+i).toLowerCase()),n(i)||(i&&e.debug>=2&&e.log.warn("Invalid '"+t+"' value: '"+i+"'. Assuming '"+r+"'."),i=r),i}},R.unionExtents=function(e,t){if(e)t&&(t.min<e.min&&(e.min=t.min),t.max>e.max&&(e.max=t.max));else{if(!t)return null;e={min:t.min,max:t.max}}return e},null==r.support.svg&&(r.support.svg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),R.extensionTag="extension",R.extendType=function(t,n,r){if(n){var i,s=t.prototype._vars,o=function(t,n){void 0!==t&&(i||(i={}),s&&s[n]&&(n="_"+n+"EvalCore"),i[n]=e.fun.to(t))};r?r.forEach(function(e){o(n[e],e)}):e.each(o),i&&t.add(i)}};var z=[null];R.makeExtensionAbsId=function(t,n){if(!t)return n;var r=[];n=e.array.to(n)||z,t=e.array.to(t);for(var s=0,o=n.length;o>s;s++)for(var u=0,a=t.length;a>u;u++){var f=i(t[u],n[s]);f&&r.push(f)}return r},R.uniqueExtensionAbsPrefix=function(){return"_"+((new Date).getTime()+Math.floor(1e5*Math.random()))},R.defaultColorScheme=null,R.brighterColorTransform=function(e){return(e.rgb?e:t.color(e)).brighter(.6)},R.setDefaultColorScheme=function(e){return R.defaultColorScheme=R.colorScheme(e)},R.defaultColor=t.Colors.category10()("?"),R.colorScheme=function(n){if(null==n)return null;if("function"==typeof n){if(!n.hasOwnProperty("range"))return n;n=n.range()}else n=e.array.as(n);return n.length?function(){var e=t.colors(n);return e.domain.apply(e,arguments),e}:null},R.createColorScheme=function(e){return R.colorScheme(e)||R.defaultColorScheme||t.Colors.category10},R.toGrayScale=function(e,n,r,i){e=t.color(e);var s=.299*e.r+.587*e.g+.114*e.b;void 0===r?r=200:null==r&&(r=255),void 0===i?i=30:null==i&&(i=0);var o=r-i;return s=0>=o?r:i+s/255*o,null==n?n=e.opacity:0>n&&(n=-n*e.opacity),s=Math.round(s),t.rgb(s,s,s,n)},R.time={intervals:{y:31536e6,m:2592e6,d30:2592e6,w:6048e5,d7:6048e5,d:864e5,h:36e5,M:6e4,s:1e3,ms:1},withoutTime:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},weekday:{previousOrSelf:function(e,t){var n=e.getDay(),r=n-t;if(r){var i=0>r?7+r:r;e=new Date(e-i*R.time.intervals.d)}return e},nextOrSelf:function(e,t){var n=e.getDay(),r=n-t;if(r){var i=r>0?7-r:-r;e=new Date(e+i*R.time.intervals.d)}return e},closestOrSelf:function(e,t){var n=e.getDay(),r=n-t;if(r){var i=R.time.intervals.d,s=r>0?1:-1;r=Math.abs(r),e=new Date(r>=4?e.getTime()+s*(7-r)*i:e.getTime()-s*r*i)}return e}}};var W=t.Mark,X=W.prototype.zOrder;W.prototype.zOrder=function(e){var t=this.borderPanel;return t&&t!==this?X.call(t,e):X.call(this,e)},W.prototype.wrapper=function(e){return this._wrapper=e,this},W.prototype.wrap=function(t,n){return t&&e.fun.is(t)&&this._wrapper&&!t._cccWrapped&&(t=this._wrapper(t,n),t._cccWrapped=!0),t},t.Mark.prototype.call=function(e){e.call(this,this)},W.prototype.lock=function(e,t){return void 0!==t&&this[e](t),(this._locked||(this._locked={}))[e]=!0,this},W.prototype.isIntercepted=function(e){return this._intercepted&&this._intercepted[e]},W.prototype.isLocked=function(e){return this._locked&&this._locked[e]},W.prototype.ensureEvents=function(e){var t=this.propertyValue("events",!0);return t&&"none"!==t||this.events(e||"all"),this},W.prototype.addMargin=function(n,r){if(0!==r){var i=e.nullyTo(this.propertyValue(n),0),s=t.functor(i);this[n](function(){return r+s.apply(this,U.call(arguments))})}return this},W.prototype.addMargins=function(t){var n=e.get(t,"all",0);return this.addMargin("left",e.get(t,"left",n)),this.addMargin("right",e.get(t,"right",n)),this.addMargin("top",e.get(t,"top",n)),this.addMargin("bottom",e.get(t,"bottom",n)),this},W.prototype.eachInstanceWithData=function(e,t){this.eachInstance(function(n,r,i){n.mark.sign&&n[r].data&&e.call(t,n,r,i)})},W.prototype.eachSceneWithDataOnRect=function(e,t,n,r){function i(r,i){if(r.intersectsRect(e)){var s=i.data;s&&s.datum&&t.call(n,s)}}var s=this,o=s.sign;o&&!o.selectable(),null==r&&(r=s.rubberBandSelectionMode||"partial");var u="center"===r;s.eachInstanceWithData(function(e,t,n){var r=s.getShape(e,t,.15);r=(u?r.center():r).apply(n),i(r,e[t])})},W.prototype.eachDatumOnRect=function(e,t,n,r){function i(r,i){if(r.intersectsRect(e)){var s=i.data;s&&s.datum&&s.datums().each(function(e){e.isNull||t.call(n,e)})}}var s=this,o=s.sign;if(!o||o.selectable()){null==r&&(r=s.rubberBandSelectionMode||"partial");var u="center"===r;s.eachInstanceWithData(function(e,t,n){var r=s.getShape(e,t,.15);r=(u?r.center():r).apply(n),i(r,e[t])})}},W.prototype.getOwnerInstance=function(e,t){var n=e[t].data;return n instanceof R.visual.Scene&&(n=n.ownerScene)?n.childIndex():t},t.Transform.prototype.transformHPosition=function(e){return this.x+this.k*e},t.Transform.prototype.transformVPosition=function(e){return this.y+this.k*e},t.Transform.prototype.transformLength=function(e){return this.k*e},t.Format.createParser=function(t){function n(n){return n instanceof Date?n:e.number.is(n)?new Date(n):t.parse(n)}return n},t.Format.createFormatter=function(e){function t(t){return null!=t?e(t):""}return t},t.Color.prototype.describe=function(t,n,r){return e.describeRecursive(t,this.key,n,r)},W.prototype.hasDelegateValue=function(e,t){var n=this.$propertiesMap[e];return n?!t||n.tag===t:!!this.proto&&this.proto.hasDelegateValue(e,t)},R.parseValuesOverflow=R.makeEnumParser("valuesOverflow",["show","trim","hide"],"hide"),R.parseMultiChartOverflow=R.makeEnumParser("multiChartOverflow",["grow","fit","clip"],"grow"),R.parseLegendClickMode=R.makeEnumParser("legendClickMode",["toggleSelected","toggleVisible","none"],"toggleVisible"),R.parseTooltipAutoContent=R.makeEnumParser("tooltipAutoContent",["summary","value"],"value"),R.parseSelectionMode=R.makeEnumParser("selectionMode",["rubberBand","focusWindow"],"rubberBand"),R.parseClearSelectionMode=R.makeEnumParser("clearSelectionMode",["emptySpaceClick","manual"],"emptySpaceClick"),R.parsePointingMode=R.makeEnumParser("pointingMode",["over","near"],"near"),R.parsePointingCollapse=R.makeEnumParser("pointingCollapse",["none","x","y"],"none"),R.parseShape=R.makeEnumParser("shape",t.Scene.hasSymbol,null),R.parseContinuousColorScaleType=function(t){if(t){t=(""+t).toLowerCase();switch(t){case"linear":case"normal":case"discrete":break;default:e.debug>=2&&e.log("[Warning] Invalid 'ScaleType' option value: '"+t+"'."),t=null}}return t},R.parseDomainScope=function(t,n){if(t){t=(""+t).toLowerCase();switch(t){case"cell":case"global":break;case"section":if(!n)throw e.error.argumentRequired("orientation");t="y"===n?"row":"column";break;case"column":case"row":n&&n!==("row"===t?"y":"x")&&(t="section",e.debug>=2&&e.log("[Warning] Invalid 'DomainScope' option value: '"+t+"' for the orientation: '"+n+"'."));break;default:e.debug>=2&&e.log("[Warning] Invalid 'DomainScope' option value: '"+t+"'."),t=null}}return t},R.parseDomainRoundingMode=function(t){if(t){t=(""+t).toLowerCase();switch(t){case"none":case"nice":case"tick":break;default:e.debug>=2&&e.log("[Warning] Invalid 'DomainRoundMode' value: '"+t+"'."),t=null}}return t},R.parseOverlappedLabelsMode=function(t){if(t){t=(""+t).toLowerCase();switch(t){case"leave":case"hide":case"rotatethenhide":break;default:e.debug>=2&&e.log("[Warning] Invalid 'OverlappedLabelsMode' option value: '"+t+"'."),t=null}}return t},R.parseTrendType=function(t){if(t){t=(""+t).toLowerCase();if("none"===t)return t;if(R.trends.has(t))return t;e.debug>=2&&e.log("[Warning] Invalid 'TrendType' value: '"+t+"'.")}},R.parseNullInterpolationMode=function(t){if(t){t=(""+t).toLowerCase();switch(t){case"none":case"linear":case"zero":return t}e.debug>=2&&e.log("[Warning] Invalid 'NullInterpolationMode' value: '"+t+"'.")}},R.parseAlign=function(t,n){n&&(n=(""+n).toLowerCase());var r,i;return"left"===t||"right"===t?(r=n&&R.BasePanel.verticalAlign[n],r||(r="middle",i=!!n)):(r=n&&R.BasePanel.horizontalAlign[n],r||(r="center",i=!!n)),i&&e.debug>=2&&e.log(e.format("Invalid alignment value '{0}'. Assuming '{1}'.",[n,r])),r},R.parseAnchor=function(t){if(t){t=(""+t).toLowerCase();switch(t){case"top":case"left":case"center":case"bottom":case"right":return t}e.debug>=2&&e.log(e.format("Invalid anchor value '{0}'.",[t]))}},R.parseAnchorWedge=function(t){if(t){t=(""+t).toLowerCase();switch(t){case"outer":case"inner":case"center":case"start":case"end":return t}e.debug>=2&&e.log(e.format("Invalid wedge anchor value '{0}'.",[t]))}},R.parsePosition=function(t,n){if(t){t=(""+t).toLowerCase();if(!e.hasOwn(J.namesSet,t)){var r=n||"left";e.debug>=2&&e.log(e.format("Invalid position value '{0}. Assuming '{1}'.",[t,r])),t=r}}return t||n||"left"};var V=e.type("pvc.Offset").init(function(e,t){1===arguments.length?null!=e&&this.setOffset(e):(null!=e&&(this.x=e),null!=t&&(this.y=t))}).add({describe:function(t,n,r){return e.describeRecursive(t,e.copyOwn(this),n,r)},setOffset:function(t,n){if("string"==typeof t){var r=t.split(/\s+/).map(function(e){return $.parse(e)});switch(r.length){case 1:return this.set(e.get(n,"singleProp","all"),r[0]),this;case 2:return this.set("x",r[0]),this.set("y",r[1]),this;case 0:return this}}else{if("number"==typeof t)return this.set(e.get(n,"singleProp","all"),t),this;if("object"==typeof t){this.set("all",t.all);for(var i in t)"all"!==i&&this.set(i,t[i]);return this}}return e.debug&&e.log("Invalid 'offset' value: "+e.describe(t)),this},set:function(t,n){null!=n&&e.hasOwn(V.namesSet,t)&&(n=$.parse(n),null!=n&&("all"===t?V.names.forEach(function(e){this[e]=n},this):this[t]=n))},resolve:function(e){var t={};return K.names.forEach(function(n){var r=V.namesSizeToOffset[n],i=this[r];if(null!=i)if("number"==typeof i)t[r]=i;else if(e){var s=e[n];null!=s&&(t[r]=i.resolve(s))}},this),t}});V.type().add({names:["x","y"],namesSizeToOffset:{width:"x",height:"y"},namesSidesToOffset:{left:"x",right:"x",top:"y",bottom:"y"},as:function(e){return null==e||e instanceof V||(e=(new V).setOffset(e)),e}}).add({namesSet:t.dict(V.names,e.retTrue)});var $=R.PercentValue=function(e){this.percent=e};$.prototype.resolve=function(e){return this.percent*e},$.prototype.divide=function(e){return new $(this.percent/e)},$.divide=function(e,t){return e instanceof $?e.divide(t):e/t},$.parse=function(t){if(null!=t&&""!==t){switch(typeof t){case"number":return t;case"string":var n=t.match(/^(.+?)\s*(%)?$/);if(n){var r=+n[1];if(!isNaN(r)){if(!n[2])return r;if(r>=0)return new $(r/100)}}break;case"object":if(t instanceof $)return t}e.debug&&e.log(e.format("Invalid margins component '{0}'",[""+t]))}},$.resolve=function(e,t){return e instanceof $?e.resolve(t):e};var J=R.Sides=function(e){null!=e&&this.setSides(e)};J.hnames="left right".split(" "),J.vnames="top bottom".split(" "),J.names="left right top bottom".split(" "),J.namesSet=t.dict(J.names,e.retTrue),J.as=function(e){return null==e||e instanceof J||(e=(new J).setSides(e)),e},J.to=function(e){return null!=e&&e instanceof J||(e=(new J).setSides(e)),e},J.prototype.describe=function(t,n,r){return e.describeRecursive(t,e.copyOwn(this),n,r)},J.prototype.setSides=function(t){if("string"==typeof t){var n=t.split(/\s+/).map(function(e){return $.parse(e)});switch(n.length){case 1:return this.set("all",n[0]),this;case 2:return this.set("top",n[0]),this.set("left",n[1]),this.set("right",n[1]),this.set("bottom",n[0]),this;case 3:return this.set("top",n[0]),this.set("left",n[1]),this.set("right",n[1]),this.set("bottom",n[2]),this;case 4:return this.set("top",n[0]),this.set("right",n[1]),this.set("bottom",n[2]),this.set("left",n[3]),this;case 0:return this}}else{if("number"==typeof t)return this.set("all",t),this;if("object"==typeof t){if(t instanceof $)this.set("all",t);else{this.set("all",t.all),this.set("width",t.width),this.set("height",t.height);for(var r in t)J.namesSet.hasOwnProperty(r)&&this.set(r,t[r])}return this}}return e.debug&&e.log("Invalid 'sides' value: "+e.describe(t)),this},J.prototype.set=function(t,n){n=$.parse(n);if(null!=n)switch(t){case"all":J.names.forEach(function(e){this[e]=n},this);break;case"width":this.left=this.right=$.divide(n,2);break;case"height":this.top=this.bottom=$.divide(n,2);break;default:e.hasOwn(J.namesSet,t)&&(this[t]=n)}},J.prototype.resolve=function(e,t){"object"==typeof e&&(t=e.height,e=e.width);var n={};return J.names.forEach(function(r){var i=0,s=this[r];null!=s&&(i="number"==typeof s?s:s.resolve("left"===r||"right"===r?e:t)),n[r]=i},this),J.updateSize(n)},J.updateSize=function(e){return e.width=(e.left||0)+(e.right||0),e.height=(e.bottom||0)+(e.top||0),e},J.resolvedMax=function(e,t){var n={};return J.names.forEach(function(r){n[r]=Math.max(e[r]||0,t[r]||0)}),n},J.inflate=function(e,t){var n={};return J.names.forEach(function(r){n[r]=(e[r]||0)+t}),J.updateSize(n)};var K=e.type("pvc.Size").init(function(e,t){1===arguments.length?null!=e&&this.setSize(e):(null!=e&&(this.width=e),null!=t&&(this.height=t))}).add({describe:function(t,n,r){return e.describeRecursive(t,e.copyOwn(this),n,r)},setSize:function(t,n){if("string"==typeof t){var r=t.split(/\s+/).map(function(e){return $.parse(e)});switch(r.length){case 1:return this.set(e.get(n,"singleProp","all"),r[0]),this;case 2:return this.set("width",r[0]),this.set("height",r[1]),this;case 0:return this}}else{if("number"==typeof t)return this.set(e.get(n,"singleProp","all"),t),this;if("object"==typeof t){if(t instanceof $)this.set(e.get(n,"singleProp","all"),t);else{this.set("all",t.all);for(var i in t)"all"!==i&&this.set(i,t[i])}return this}}return e.debug&&e.log("Invalid 'size' value: "+e.describe(t)),this},set:function(t,n){return null!=n&&("all"===t||e.hasOwn(K.namesSet,t))&&(n=$.parse(n),null!=n&&("all"===t?K.names.forEach(function(e){this[e]=n},this):this[t]=n)),this},clone:function(){return new K(this.width,this.height)},intersect:function(e){return new K(Math.min(this.width,e.width),Math.min(this.height,e.height))},resolve:function(e){var t={};return K.names.forEach(function(n){var r=this[n];if(null!=r)if("number"==typeof r)t[n]=r;else if(e){var i=e[n];null!=i&&(t[n]=r.resolve(i))}},this),t}});K.names=["width","height"],K.namesSet=t.dict(K.names,e.retTrue),K.toOrtho=function(e,t){if(null!=e){var n;t&&(n=R.BasePanel.orthogonalLength[t]),e=K.to(e,{singleProp:n}),t&&delete e[R.BasePanel.oppositeLength[n]]}return e},K.to=function(e,t){return null==e||e instanceof K||(e=(new K).setSize(e,t)),e},e.type("pvc.Abstract").init(function(){this.log=e.logger(this._getLogId,this)}).add({invisibleLineWidth:.001,defaultLineWidth:1.5,_logId:null,_getLogId:function(){return this._logId||(this._logId=this._processLogId(this._createLogId()))},_createLogId:function(){return String(e.qualNameOf(this.constructor))},_processLogId:function(t){var n=30,r=t.substr(0,n);return r.length<n&&(r+=e.array.create(n-r.length," ").join("")),"["+r+"]"}}),s.resolvers=o,s.constant=u,s.specify=a,s.defaultValue=f,R.options=s;var Q=e.type().init(function(t,n,r,i){this.name=t,this.option=n,this._dv=this.value=e.get(i,"value"),this._resolve=e.get(i,"resolve");var s=!this._resolve;this.isResolved=s,this.isSpecified=!1,this._setCalled=!1,this._context=r,this._cast=e.get(i,"cast"),this._getDefault=s?null:e.get(i,"getDefault"),this.data=e.get(i,"data")}).add({resolve:function(){if(!this.isResolved){this.isResolved=!0,this._setCalled=!1,this._getFunProp("_resolve").call(this._context,this);if(!this._setCalled){this.isSpecified=!1;var e=this._dynDefault();null!=e&&(this.value=this._dv=e)}}return this},specify:function(e){return this.set(e,!1)},defaultValue:function(e){return arguments.length&&this.set(e,!0),this._dv},cast:function(e){if(null!=e){var t=this._getFunProp("_cast");t&&(e=t.call(this._context,e))}return e},set:function(e,t){this._setCalled=!0,null!=e&&(e=this.cast(e));if(null==e){e=this._dynDefault();if(null==e){if(!this.isSpecified)return this;e=this._dv}t=!0}return t?(this._dv=e,this.isSpecified||(this.value=e)):(this.isResolved=this.isSpecified=!0,this.value=e),this},_dynDefault:function(){var e=this._getFunProp("_getDefault");return e&&this.cast(e.call(this._context,this))},_getFunProp:function(t){var n,r=this[t];return r&&(n=this._context)&&e.string.is(r)&&(r=n[r]),r}});e.MetaType.subType(l,{methods:{options:function(t){return e.mixin(this.optionsDef,t),this},_addInitSteps:function(e){function t(){this.option=R.options(n.optionsDef,this)}this.base(e);var n=this;e.push(t)}}});var G=l.Ctor;e("pvc.visual.OptionsBase",G.configure({init:function(t,n,r,i){this.type=n,this.chart=t,this.index=null==r?0:r,this.name=e.get(i,"name"),this.id=e.indexedId(this.type,this.index),this.optionId=this._buildOptionId(i);var s=this._resolvers=[];this._registerResolversFull(s,i)},methods:{_buildOptionId:function(){return this.id},_chartOption:function(e){return this.chart.options[e]},_registerResolversFull:function(t,n){var r=e.get(n,"fixed");r&&(this._fixed=r,t.push(R.options.specify(function(e){return r[e.name]}))),this._registerResolversNormal(t,n);var i=e.get(n,"defaults");i&&(this._defaults=i),t.push(this._resolveDefault)},_registerResolversNormal:function(t,n){e.get(n,"byV1",1)&&this.chart.compatVersion()<=1&&t.push(this._resolveByV1OnlyLogic),this.name&&e.get(n,"byName",1)&&t.push(this._resolveByName),e.get(n,"byId",1)&&t.push(this._resolveByOptionId),e.get(n,"byNaked",!this.index)&&t.push(this._resolveByNaked)},_resolveFull:function(e){for(var t=this._resolvers,n=0,r=t.length;r>n;n++)if(t[n].call(this,e))return!0;return!1},_resolveFixed:R.options.specify(function(e){return this._fixed?this._fixed[e.name]:void 0}),_resolveByV1OnlyLogic:function(e){var t,n=e.data;return n&&(t=n.resolveV1)?t.call(this,e):void 0},_resolveByName:R.options.specify(function(t){return this.name?this._chartOption(this.name+e.firstUpperCase(t.name)):void 0}),_resolveByOptionId:R.options.specify(function(t){return this._chartOption(this.optionId+e.firstUpperCase(t.name))}),_resolveByNaked:R.options.specify(function(t){return this._chartOption(e.firstLowerCase(t.name))}),_resolveDefault:function(e){var t,n=e.data;if(n&&(t=n.resolveDefault)&&t.call(this,e))return!0;if(this._defaults){var r=this._defaults[e.name];if(void 0!==r)return e.defaultValue(r),!0}},_specifyChartOption:function(e,t){var n=this._chartOption(t);return null!=n?(e.specify(n),!0):void 0}}})),e.scope(function(){var t=e.makeEnum(["Interactive","ShowsActivity","ShowsSelection","ShowsTooltip","Selectable","Unselectable","Hoverable","Clickable","DoubleClickable","SelectableByClick","SelectableByRubberband","SelectableByFocusWindow","Animatable"]);t.ShowsInteraction=t.ShowsActivity|t.ShowsSelection,t.Actionable=t.Hoverable|t.Clickable|t.DoubleClickable|t.SelectableByClick,t.HandlesEvents=t.Actionable|t.ShowsTooltip,t.HandlesClickEvent=t.Clickable|t.SelectableByClick,e("pvc.visual.Interactive",e.Object.extend({"type.methods":[t,{ShowsAny:t.ShowsInteraction|t.ShowsTooltip,SelectableAny:t.Selectable|t.SelectableByClick|t.SelectableByRubberband|t.SelectableByFocusWindow}],methods:[{_ibits:-1,ibits:function(){return this._ibits}},e.query(e.ownKeys(t)).object({name:e.firstLowerCase,value:function(e){var n=t[e];return function(){return!!(this.ibits()&n)}}})]}))}),R.color={scale:p,scales:h,toGray:R.toGrayScale,isGray:c},e.type("pvc.color.ScalesBuild").init(function(n){this.keyArgs=n,this.data=n.data||e.fail.argumentRequired("keyArgs.data"),this.domainDimName=n.colorDimension||e.fail.argumentRequired("keyArgs.colorDimension"),this.domainDim=this.data.dimensions(this.domainDimName);var r=this.domainDim.type;r.isComparable?this.domainComparer=function(e,t){return r.compare(e,t)}:(this.domainComparer=null,e.log("Color value dimension should be comparable. Generated color scale may be invalid.")),this.nullRangeValue=n.colorMissing?t.color(n.colorMissing):t.Color.transparent,this.domainRangeCountDif=0}).add({build:function(){this.range=this._getRange(),this.desiredDomainCount=this.range.length+this.domainRangeCountDif;var e=this._getDomain();return this._createScale(e)},buildMap:function(){this.range=this._getRange(),this.desiredDomainCount=this.range.length+this.domainRangeCountDif;var t;if(this.keyArgs.normPerBaseCategory)t=function(e){var t=this._ensureDomain(null,!1,e);return this._createScale(t)};else{var n=this._getDomain(),r=this._createScale(n);t=e.fun.constant(r)}return this._createCategoryScalesMap(t)},_createScale:e.abstractMethod,_createCategoryScalesMap:function(e){return this.data.children().object({name:function(e){return e.absKey},value:e,context:this})},_getRange:function(){var e=this.keyArgs,n=e.colors||["red","yellow","green"];return null!=e.colorMin&&null!=e.colorMax?n=[e.colorMin,e.colorMax]:null!=e.colorMin?n.unshift(e.colorMin):null!=e.colorMax&&n.push(e.colorMax),n.map(function(e){return t.color(e)})},_getDataExtent:function(e){var t=e.dimensions(this.domainDimName).extent({visible:!0});if(!t)return null;var n=t.min.value,r=t.max.value;return r==n&&(r>=1?n=r-1:r=n+1),{min:n,max:r}},_getDomain:function(){var e=this.keyArgs.colorDomain;return null!=e?(e=e.slice(),this.domainComparer&&e.sort(this.domainComparer),e.length>this.desiredDomainCount&&(e=e.slice(0,this.desiredDomainCount))):e=[],this._ensureDomain(e,!0,this.data)},_ensureDomain:function(n,r,i){var s;if(n&&r){var o=this.desiredDomainCount-n.length;if(o>0){s=this._getDataExtent(i);if(s)switch(o){case 1:this.domainComparer?e.array.insert(n,s.max,this.domainComparer):n.push(s.max);break;case 2:this.domainComparer?(e.array.insert(n,s.min,this.domainComparer),e.array.insert(n,s.max,this.domainComparer)):(n.unshift(s.min),n.push(s.max));break;default:e.debug>=2&&e.log("Ignoring option 'colorDomain' due to unsupported length."+e.format(" Should have '{0}', but instead has '{1}'.",[this.desiredDomainCount,n.length])),n=null}}}if(!n){s||(s=this._getDataExtent(i));if(s){var u=s.min,a=s.max,f=(a-u)/(this.desiredDomainCount-1);n=t.range(u,a+f,f)}}return n}}),e.type("pvc.color.LinearScalesBuild",R.color.ScalesBuild).add({_createScale:function(e){var n=t.Scale.linear();return e&&n.domain.apply(n,e),n.range.apply(n,this.range),n}}),e.type("pvc.color.DiscreteScalesBuild",R.color.ScalesBuild).init(function(e){this.base(e),this.domainRangeCountDif=1}).add({_createScale:function(n){function r(e){if(null==e)return o;for(var t=0;i>t;t++)if(e<=n[t+1])return s[t];return s[u]}var i=n.length-1,s=this.range,o=this.nullRangeValue,u=s.length-1;return e.copy(r,t.Scale.common),r.domain=function(){return n},r.range=function(){return s},r}}),e.type("pvc.visual.Context").init(function(e,t,n){this.chart=e.chart,this.panel=e,d.call(this,t,n)}).add({isPinned:!1,pin:function(){return this.isPinned=!0,this},compatVersion:function(){return this.panel.compatVersion()},finished:function(e){return this.sign.finished(e)},delegate:function(e){return this.sign.delegate(e)},getV1Series:function(){var t;return e.nullyTo(this.scene.firstAtoms&&(t=this.scene.firstAtoms[this.panel._getV1DimName("series")])&&t.rawValue,"Series")},getV1Category:function(){var e;return this.scene.firstAtoms&&(e=this.scene.firstAtoms[this.panel._getV1DimName("category")])&&e.rawValue},getV1Value:function(){var e;return this.scene.firstAtoms&&(e=this.scene.firstAtoms[this.panel._getV1DimName("value")])&&e.value},getV1Datum:function(){return this.panel._getV1Datum(this.scene)},get:function(e,t){return this.scene.get(e,t)},getSeries:function(){return this.scene.get("series")},getCategory:function(){return this.scene.get("category")},getValue:function(){return this.scene.get("value")},getTick:function(){return this.scene.get("tick")},getX:function(){return this.scene.get("x")},getY:function(){return this.scene.get("y")},getColor:function(){return this.scene.get("color")},getSize:function(){return this.scene.get("size")},getSeriesLabel:function(){return this.scene.get("series","label")},getCategoryLabel:function(){return this.scene.get("category","label")},getValueLabel:function(){return this.scene.get("value","label")},getTickLabel:function(){return this.scene.get("tick","label")},getXLabel:function(){return this.scene.get("x","label")},getYLabel:function(){return this.scene.get("y","label")},getColorLabel:function(){return this.scene.get("color","label")},getSizeLabel:function(){return this.scene.get("size","label")},select:function(e){return this.scene.select(e)},toggleVisible:function(){return this.scene.toggleVisible()},click:function(){var e=this;e.clickable()&&e.panel._onClick(e);if(e.selectableByClick()){var t=e.event;e.select({replace:!t||!t.ctrlKey})}},doubleClick:function(){this.doubleClickable()&&this.panel._onDoubleClick(this)},clickable:function(){var e=this;return(e.sign?e.sign.clickable():e.panel.clickable())&&(!e.scene||e.scene.clickable())},selectableByClick:function(){var e=this;return(e.sign?e.sign.selectableByClick():e.panel.selectableByClick())&&(!e.scene||e.scene.selectableByClick())},doubleClickable:function(){var e=this;return(e.sign?e.sign.doubleClickable():e.panel.doubleClickable())&&(!e.scene||e.scene.doubleClickable())},hoverable:function(){var e=this;return(e.sign?e.sign.hoverable():e.panel.hoverable())&&(!e.scene||e.scene.hoverable())}});if(Object.defineProperty)try{Object.defineProperty(R.visual.Context.prototype,"parent",{get:function(){throw e.error.operationInvalid("The 'this.parent.index' idiom has no equivalent in this version. Please try 'this.pvMark.parent.index'.")}})}catch(Y){}R.text={getFitInfo:function(e,n,r,i,s){if(""===r)return{h:!0,v:!0,d:!0};var o=t.Text.measureWidth(r,i);return{h:e>=o,v:n>=o,d:o<=Math.sqrt(e*e+n*n)-s}},trimToWidthB:function(e,n,r,i,s){var o=t.Text.measureWidth(i,r),u=1.5*o;return R.text.trimToWidth(e,n,r,i,s,u)},trimToWidth:function(e,n,r,i,s,o){if(""===n)return n;var u=t.Text.measureWidth(n,r);if(e>=u)return n;if(u>1.5*e)return R.text.trimToWidthBin(e,n,r,i,s,o);e=Math.max(0,e-t.Text.measureWidth(i,r));for(;u>e;)n=s?n.slice(1):n.slice(0,n.length-1),u=t.Text.measureWidth(n,r);return o&&o>=u?"":s?i+n:n+i},trimToWidthBin:function(e,n,r,i,s,o){e=Math.max(0,e-t.Text.measureWidth(i,r));for(var u,a,f=n.length,l=f-2,c=0;l>=c&&l>0;){u=Math.ceil((c+l)/2);var h=s?n.slice(f-u):n.slice(0,u);a=t.Text.measureWidth(h,r);if(a>e)l=u-1;else{if(!(t.Text.measureWidth(s?n.slice(f-u-1):n.slice(0,u+1),r)<e))return o&&o>=a?"":s?i+h:h+i;c=u+1}}return n=s?n.slice(f-l):n.slice(0,l),a=n.length,o&&o>=a?"":s?i+n:n+i},justify:function(e,n,r){var i=[];if(n<t.Text.measureWidth("a",r))return i;for(var s=(e||"").split(/\s+/),o="";s.length;){var u=s.shift();if(u){var a=o?o+" "+u:u;t.Text.measureWidth(a,r)>n?(o&&i.push(o),o=u):o=a}}return o&&i.push(o),i},getLabelBBox:function(e,n,r,i,s,o){var u=t.Label.getPolygon(e,n,r,i,s,o),a=u.bbox();return a.source=u,a.sourceAngle=s,a.sourceAlign=r,a.sourceTextWidth=e,a}},e.space("pvc.trends",function(t){var n={};e.set(t,"define",function(t,r){t||e.fail.argumentRequired("type"),r||e.fail.argumentRequired("trendSpec"),e.object.is(r)||e.fail.argumentInvalid("trendSpec","Must be a trend specification object."),t=(""+t).toLowerCase(),e.debug>=2&&e.hasOwn(n,t)&&e.log(e.format("[WARNING] A trend type with the name '{0}' is already defined.",[t]));var i=r.label||e.fail.argumentRequired("trendSpec.label"),s=r.model||e.fail.argumentRequired("trendSpec.model");e.fun.is(s)||e.fail.argumentInvalid("trendSpec.mode","Must be a function.");var o={dataPartAtom:{v:"trend",f:i},type:t,label:i,model:s};n[t]=o},"get",function(t){return t||e.fail.argumentRequired("type"),e.getOwn(n,t)||e.fail.operationInvalid("Undefined trend type '{0}'.",[t])},"has",function(t){return e.hasOwn(n,t)},"types",function(){return e.ownKeys(n)}),t.define("linear",{label:"Linear trend",model:function(t){for(var n=e.get(t,"rows"),r=e.get(t,"x"),i=e.get(t,"y"),s=0,o=0,u=0,a=0,f=0,l=0,c=function(e){return null!=e?+e:0/0};n.next();){var h=n.item,p=r?c(r(h)):s;if(!isNaN(p)){var d=c(i(h));isNaN(d)||(o++,u+=p,a+=d,f+=p*d,l+=p*p)}s++}if(o>=2){var v=u/o,m=a/o,g=f/o,y=l/o,b=y-v*v,w=0===b?0:(g-v*m)/b,E=m-w*v;return{alpha:E,beta:w,reset:e.noop,sample:function(e){return E+w*+e}}}}}),t.define("moving-average",{label:"Moving average",model:function(t){var n=Math.max(+(e.get(t,"periods")||3),2),r=0,i=[];return{reset:function(){r=0,i.length=0},sample:function(e,t){var s=n;return null!=t&&(i.unshift(t),r+=t,s=i.length,s>n&&(r-=i.pop(),s=n)),r/s}}}}),t.define("weighted-moving-average",{label:"Weighted Moving average",model:function(t){var n=Math.max(+(e.get(t,"periods")||3),2),r=0,i=0,s=[],o=0,u=0;return{reset:function(){r=i=u=o=0,s.length=0},sample:function(e,t){if(null!=t)if(n>o)s.push(t),o++,u+=o,i+=o*t,r+=t;else{i+=o*t-r,r+=t-s[0];for(var a=1;n>a;a++)s[a-1]=s[a];s[n-1]=t}return i/u}}}})}),e.type("pvc.visual.Scene").init(function(r,i){e.debug>=4&&(this.id=e.nextId("scene")),this._renderId=0,this.renderState={},t.Dom.Node.call(this,null),this.parent=r||null;if(r){this.root=r.root;var s=e.get(i,"index",null);r.insertAt(this,s)}else this.root=this,this._active=null,this._panel=e.get(i,"panel")||e.fail.argumentRequired("panel","Argument is required on root scene.");var o,u,a,f,l,c,h,p=e.array.to(e.get(i,"source"));p&&p.length?(this.source=p,o=p[0],o instanceof n.Data?(u=o,l=p,a=u.firstDatum()||e.query(l).select(function(e){return e.firstDatum()}).first(e.notNully)):(o instanceof n.Datum||e.assert("not a datum"),a=o,f=p),c=o.atoms,h=a&&a.atoms||c):c=h=r?Object.create(r.atoms):{},this.atoms=c,this.firstAtoms=h,l&&(this.groups=l),u&&(this.group=u),f&&(this._datums=f),a&&(this.datum=a),(!o||o.isNull)&&(this.isNull=!0),this.vars=r?Object.create(r.vars):{}}).add(t.Dom.Node).add(R.visual.Interactive).add({source:null,groups:null,group:null,_datums:null,datum:null,isNull:!1,get:function(e,t){var n=this.vars[e];return n&&n[t||"value"]},getSeries:function(){return this.get("series")},getCategory:function(){return this.get("category")},getValue:function(){return this.get("value")},getTick:function(){return this.get("tick")},getX:function(){return this.get("x")},getY:function(){return this.get("y")},getColor:function(){return this.get("color")},getSize:function(){return this.get("size")},getSeriesLabel:function(){return this.get("series","label")},getCategoryLabel:function(){return this.get("category","label")},getValueLabel:function(){return this.get("value","label")},getTickLabel:function(){return this.get("tick","label")},getXLabel:function(){return this.get("x","label")},getYLabel:function(){return this.get("y","label")},getColorLabel:function(){return this.get("color","label")},getSizeLabel:function(){return this.get("size","label")},data:function(){var e=this.group;if(!e){for(var t=this;!e&&(t=t.parent);)e=t.group;e||(e=this.panel.data)}return e},allGroup:function(){return 1===this.groups.length?this.group:this._allGroup||(this._allGroup=this._calcAllGroup())},_calcAllGroup:function(){var e=this.groups;return new n.Data(e&&e.length?{linkParent:n.Data.lca(e),datums:this.datums(),where:function(t){return!!e&&e.some(function(e){return e.contains(t)})}}:{linkParent:this.data(),datums:this.datums()})},datums:function(){return this.groups?e.query(this.groups).selectMany(function(e){return e.datums()}):this._datums?e.query(this._datums):e.query()},format:function(t){return e.format(t,this._formatScope,this)},_formatScope:function(t){if("#"===t.charAt(0)){t=t.substr(1).split(".");if(t.length>2)throw e.error.operationInvalid("Scene format mask is invalid.");var n=this.firstAtoms[t[0]];if(n){if(t.length>1)switch(t[1]){case"value":return n.value;case"label":break;default:throw e.error.operationInvalid("Scene format mask is invalid.")}return n}return null}return e.getPath(this.vars,t)},isRoot:function(){return this.root===this},panel:function(){return this.root._panel},chart:function(){return this.root._panel.chart},compatVersion:function(){return this.root._panel.compatVersion()},children:function(){var t=this.childNodes;return t.length?e.query(t):e.query()},leafs:function(){function t(e){for(;e.childNodes.length;)e=e.childNodes[0];return e}var n=this;return e.query(function(e){if(!e){var r=t(n);return r===n?0:(this.item=r,1)}var i=this.item.nextSibling;if(i)return this.item=i,1;for(var s=this.item;s!==n&&(s=s.parentNode);)if(i=s.nextSibling)return this.item=t(i),1;return 0})},anyInteraction:function(){return!!this.root._active||this.anySelected()},isActive:!1,setActive:function(e){e=!!e,this.isActive!==e&&m.call(this.root,this.isActive?null:this)},clearActive:function(){return m.call(this.root,null)},anyActive:function(){return!!this.root._active},active:function(){return this.root._active},activeSeries:function(){var e,t=this.active();return t&&(e=t.vars.series)?e.value:void 0},isActiveSeries:function(){if(this.isActive)return!0;var e=this.renderState.isActiveSeries;if(null==e){var t;e=void 0!==(t=this.activeSeries())&&t===this.vars.series.value,this.renderState.isActiveSeries=e}return e},isActiveDatum:function(){return this.isActive?!0:!1},isActiveDescendantOrSelf:function(){return this.isActive||e.lazy(this.renderState,"isActiveDescOrSelf",this._calcIsActiveDescOrSelf,this)},_calcIsActiveDescOrSelf:function(){var e=this.active();if(e)for(;e=e.parent;)if(e===this)return!0;return!1},isVisible:function(){return this._visibleInfo().is},anyVisible:function(){return this._visibleInfo().any},_visibleInfo:function(){return e.lazy(this.renderState,"visibleInfo",this._createVisibleInfo,this)},_createVisibleInfo:function(){var t=this.chart().data.owner.visibleCount()>0,n=t&&this.datums().any(e.propGet("isVisible"));return{any:t,is:n}},isSelected:function(){return this._selectedInfo().is},anySelected:function(){return this._selectedInfo().any},_selectedInfo:function(){return e.lazy(this.renderState,"selectedInfo",this._createSelectedInfo,this)},_createSelectedInfo:function(){var e=this.chart().data.owner.selectedCount()>0,t=e&&this.datums().any(n.Datum.isSelected);return{any:e,is:t}},select:function(t){var r=this,i=r.datums().array();if(i.length){var s=r.chart();s._updatingSelections(function(){i=s._onUserSelection(i),i&&i.length&&(s.options.ctrlSelectMode&&e.get(t,"replace",!0)?s.data.replaceSelected(i):n.Data.toggleSelected(i))})}},isSelectedDescendantOrSelf:function(){return this.isSelected()||e.lazy(this.renderState,"isSelectedDescOrSelf",this._calcIsSelectedDescOrSelf,this)},_calcIsSelectedDescOrSelf:function(){var e=this.firstChild;if(e)do if(e.isSelectedDescendantOrSelf())return!0;while(e=e.nextSibling);return!1},toggleVisible:function(){n.Data.toggleVisible(this.datums())&&this.chart().render(!0,!0,!1)}}).type().add({variable:function(t,n){var r;this._vars||(this._vars=e.create(this.baseType&&this.baseType._vars));if(this._vars[t])void 0!==n&&(r=e.set({},"_"+t+"EvalCore",e.fun.to(n)));else{this._vars[t]=!0;var i=this.Ctor.prototype;r={};var s="_"+t+"Eval";r[t]=y(t,s);var o=s+"Core";e.hasOwn(i,s)||(r[s]=e.methodCaller(o)),e.hasOwn(i,o)||(r[o]=e.fun.to(void 0===n?null:n))}return r&&this.methods(r),this}}).inst();var Z=R.visual.ValueLabelVar=function(e,t,n,r){this.value=e,this.label=t,void 0!==n&&(this.rawValue=n),void 0!==r&&(this.absLabel=r)};e.set(Z.prototype,"rawValue",void 0,"absLabel",void 0,"setValue",function(e){return this.value=e,this},"setLabel",function(e){return this.label=e,this},"clone",function(){return new Z(this.value,this.label,this.rawValue)},"toString",function(){var e=this.label||this.value;return null==e?"":"string"!=typeof e?""+e:e}),Z.fromComplex=function(e){return e?new Z(e.value,e.label,e.rawValue,e.absLabel):new Z(null,"",null)},Z.fromAtom=Z.fromComplex,e.space("pvc.visual").TraversalMode=e.makeEnum(["Tree","FlattenLeafs","FlattenDfsPre","FlattenDfsPost"],{all:"AllMask"}),e.type("pvc.visual.Role").init(function(t,n){this.name=t,this.label=e.get(n,"label")||e.titleFromName(t),this.index=e.get(n,"index")||0,this.plot=e.get(n,"plot"),this._legend={visible:!0},this.dimensionDefaults=e.get(n,"dimensionDefaults")||{},e.get(n,"isRequired",!1)&&(this.isRequired=!0),e.get(n,"autoCreateDimension",!1)&&(this.autoCreateDimension=!0);var r=e.get(n,"defaultSourceRole");r&&(this.defaultSourceRoleName=this.plot?this.plot.ensureAbsRoleRef(r):r);var i=e.get(n,"defaultDimension");i&&(this.defaultDimensionName=i);var s=e.get(n,"rootLabel");null!=s&&(this.rootLabel=s);var o=e.get(n,"traversalModes");o&&this.setTraversalModes(o);var u=e.get(n,"traversalMode");u&&this.setTraversalMode(u);if(!i&&this.autoCreateDimension)throw e.error.argumentRequired("defaultDimension");var a=e.get(n,"requireSingleDimension"),f=e.get(n,"requireIsDiscrete"),l=null!=f&&!f;null==a&&(a=l),!f&&e.get(n,"isMeasure")&&(this.isMeasure=!0,e.get(n,"isPercent")&&(this.isPercent=!0));var c=e.get(n,"valueType",null);c!==this.valueType&&(this.valueType=this.dimensionDefaults.valueType=c),a!==this.requireSingleDimension&&(this.requireSingleDimension=a),null!=f&&(this.requireIsDiscrete=this.dimensionDefaults.isDiscrete=!!f)}).add({isRequired:!1,requireSingleDimension:!1,valueType:null,requireIsDiscrete:null,isMeasure:!1,isPercent:!1,defaultSourceRoleName:null,defaultDimensionName:null,grouping:null,traversalMode:R.visual.TraversalMode.FlattenLeafs,traversalModes:R.visual.TraversalMode.AllMask,rootLabel:"",autoCreateDimension:!1,isReversed:!1,label:null,sourceRole:null,_legend:null,prettyId:function(){return(this.plot?this.plot.prettyId+".":"")+this.name},legend:function(t){if(arguments.length){if(null!=t)switch(typeof t){case"boolean":this._legend.visible=!!t;break;case"object":e.each(t,function(e,t){void 0!==e&&("visible"===t&&(e=!!e),this[t]=e)},this._legend)}return this}return this._legend},firstDimensionType:function(){var e=this.grouping;return e&&e.firstDimensionType()},firstDimensionName:function(){var e=this.grouping;return e&&e.firstDimensionName()},firstDimensionValueType:function(){var e=this.grouping;return e&&e.firstDimensionValueType()},lastDimensionType:function(){var e=this.grouping;return e&&e.lastDimensionType()},lastDimensionName:function(){var e=this.grouping;return e&&e.lastDimensionName()},lastDimensionValueType:function(){var e=this.grouping;return e&&e.lastDimensionValueType()},isDiscrete:function(){var e=this.grouping;return e&&e.isDiscrete()},setSourceRole:function(e){this.sourceRole=e},setIsReversed:function(e){e?this.isReversed=!0:delete this.isReversed},setTraversalMode:function(t){var n=R.visual.TraversalMode;t=e.nullyTo(t,n.FlattenLeafs);if(t!==this.traversalMode){if(!(t&this.traversalModes))throw e.error.argumentInvalid("traversalMode","Value is not currently valid.");t===n.FlattenLeafs?delete this.traversalMode:this.traversalMode=t}},setTraversalModes:function(t){t=this.traversalModes&=t;if(!t)throw e.error.argumentInvalid("traversalModes","Cannot become empty.");var n=this.traversalMode&t;n||(n=t&-t,this.setTraversalMode(n))},setRootLabel:function(e){e!==this.rootLabel&&(e?this.rootLabel=e:delete this.rootLabel,this.grouping&&this._updateBind(this.grouping))},flatten:function(t,n){var r=this.flattenedGrouping(n)||e.fail.operationInvalid("Role is unbound.");return t.groupBy(r,n)},flattenedGrouping:function(e){var t=this.grouping;if(t){e=e?Object.create(e):{};var n=e.flatteningMode;return null==n&&(n=e.flatteningMode=this._flatteningMode()),null!=e.isSingleLevel||n||(e.isSingleLevel=!0),t.ensure(e)}},_flatteningMode:function(){var e=R.visual.TraversalMode,t=n.FlatteningMode;switch(this.traversalMode){case e.FlattenDfsPre:return t.DfsPre;case e.FlattenDfsPost:return t.DfsPost}return t.None},select:function(t,r){var i=this.grouping;if(i)return e.setUDefaults(r,"flatteningMode",n.FlatteningMode.None),t.groupBy(i.ensure(r),r)},view:function(e){var t=this.grouping;return t?t.view(e):void 0},preBind:function(e){return this.__grouping=e,this},isPreBound:function(){return!!this.__grouping},preBoundGrouping:function(){return this.__grouping},isBound:function(){return!!this.grouping},postBind:function(e){var t=this.__grouping;return t&&(delete this.__grouping,t.bind(e),this.bind(t)),this},bind:function(e){return e=this._validateBind(e),this._updateBind(e),this},_validateBind:function(t){if(t)if(t.isNull())t=null;else{if(this.requireSingleDimension&&!t.isSingleDimension)throw e.error.operationInvalid("Role '{0}' only accepts a single dimension.",[this.name]);var r=this.valueType,i=this.requireIsDiscrete;t.dimensions().each(function(t){var s=t.type;if(r&&s.valueType!==r)throw e.error.operationInvalid("Role '{0}' cannot be bound to dimension '{1}'. \nIt only accepts dimensions of type '{2}' and not of type '{3}'.",[this.name,s.name,n.DimensionType.valueTypeName(r),s.valueTypeName]);if(null!=i&&s.isDiscrete!==i){if(!i)throw e.error.operationInvalid("Role '{0}' cannot be bound to dimension '{1}'.\nIt only accepts continuous dimensions.",[this.name,s.name]);s._toDiscrete()}},this)}return t},canHaveSource:function(e){var t=this.valueType;return null==t||t===e.valueType},_updateBind:function(e){this.grouping=e,this.grouping&&(this.grouping=this.grouping.ensure({reverse:this.isReversed,rootLabel:this.rootLabel}))}}).type().add({parse:function(t,r,i){var s,o={isReversed:!1,source:null,grouping:null,legend:null};if(e.object.is(i)){i.isReversed&&(o.isReversed=!0),o.legend=i.legend;var u=i.from;if(u){if(u===r)throw e.error.operationInvalid("Invalid source role.");o.source=t(u)||e.fail.operationInvalid("Source visual role '{0}' is not defined.",[u])}else s=i.dimensions}else(null===i||e.string.is(i))&&(s=i);return void 0!==s&&(o.grouping=n.GroupingSpec.parse(s)),o}}),R.visual.rolesBinder=function(){function t(){w(x,0);if(!m)throw e.error.argumentRequired("context");if(!g)throw e.error.argumentRequired("complexTypeProject");return x=1,S=!!E&&E.level()>=3,m.query().each(function(e){var t=m.getOptions(e);void 0!==t&&r(e,t)||a(e)}),T.forEach(function(e){f(e)},this),T=[],l(),x=2,this}function r(e,t){var n,r=R.visual.Role.parse(m,e.name,t);return r.isReversed&&e.setIsReversed(!0),null!=r.legend&&e.legend(r.legend),r.source?(e.setSourceRole(r.source),i(e),1):(n=r.grouping)?(s(e,n),1):0}function i(e){T.push(e)}function s(e,t){e.preBind(t),t.isNull()?b(e):o(e,t.dimensionNames())}function o(e,t){t.forEach(function(t){u(e,t)})}function u(e,t){C[t]?delete N[t]:(C[t]=!0,N[t]=e,g.setDim(t))}function a(e){var t=m(e.name);t&&t!==e&&e.canHaveSource(t)&&(e.setSourceRole(t),i(e))}function f(t,n){var r=t.prettyId();if(n){if(e.hasOwn(n,r))throw e.error.argumentInvalid("visualRoles","Cyclic source role definition.")}else n={};n[r]=!0;if(t.isPreBound())return t.preBoundGrouping();var i=t.sourceRole;if(!i)return t.isPreBound()?t.preBoundGrouping():null;var s=f(i,n);return s&&(i.isReversed&&t.setIsReversed(!t.isReversed),t.preBind(s)),s}function l(){e.eachOwn(N,function(e,t){g.setDimDefaults(t,e.dimensionDefaults)})}function c(){w(x,2),x=3,m.query().each(function(e){e.isPreBound()||h(e)}),T.forEach(function(e){f(e)||d(e)}),l();var e=new n.ComplexType;return g.configureComplexType(e,y),S&&E(e.describe()),m.query().each(function(t){t.isPreBound()&&t.postBind(e)}),S&&v(),x=4,e}function h(t){if(t.sourceRole)return i(t);var n=t.defaultDimensionName;if(n){var r=n.match(/^(.*?)(\*)?$/)||e.fail.argumentInvalid("defaultDimensionName"),s=r[1],o=r[2];if(o){var u=g.groupDimensionsNames(s);if(u)return p(t,u)}else if(g.hasDim(s))return p(t,s);if(t.autoCreateDimension)return g.setDim(s,{isHidden:!0}),p(t,s)}if(t.defaultSourceRoleName){var a=m(t.defaultSourceRoleName);if(a)return t.setSourceRole(a),i(t)}d(t)}function p(e,t){var r=n.GroupingSpec.parse(t);s(e,r)}function d(e){b(e),e.bind(null),e.setSourceRole(null)}function v(){var t=e.textTable(3).rowSep().row("Visual Role","Source/From","Bound to Dimension(s)").rowSep();m.query().each(function(e){t.row(e.prettyId(),e.sourceRole?e.sourceRole.prettyId():"-",String(e.grouping||"-"))}),t.rowSep(!0),E("VISUAL ROLES MAP SUMMARY\n"+t()+"\n")}var m,g,y,E,S,x=0,T=[],N={},C={};return{logger:function(e){return arguments.length?(w(x,0),E=e,this):E},dimensionsOptions:function(e){return arguments.length?(w(x,0),y=e,this):y},context:function(e){return arguments.length?(w(x,0),m=e,this):m},complexTypeProject:function(e){return arguments.length?(w(x,0),g=e,this):g},begin:t,end:c}},e.type("pvc.visual.RoleVarHelper").init(function(t,n,r,i){var s,o=e.get(i,"hasPercentSubVar",!1),u=this.grouping=r&&r.grouping;u&&(this.role=r,this.sourceRoleName=r.sourceRole&&r.sourceRole.name,s=t.panel(),this.panel=s,u.isDiscrete()||(this.rootContDim=s.data.owner.dimensions(u.lastDimensionName()),o&&(this.percentFormatter=s.chart.options.percentValueFormat)));if(!n){if(!r)throw e.error.operationInvalid("Role is not defined, so the roleName argument is required.");n=r.name}if(!u){var a=t.vars[n]=new Z(null,"");o&&(a.percent=new Z(null,""))}this.roleName=n,t["is"+e.firstUpperCase(n)+"Bound"]=!!u,e.get(i,"allowNestedVars")&&(this.allowNestedVars=!0)}).add({allowNestedVars:!1,isBound:function(){return!!this.grouping},onNewScene:function(t,n){if(this.grouping){var r=this.roleName;if(this.allowNestedVars?!e.hasOwnProp.call(t.vars,r):!t.vars[r]){var i,s=this.sourceRoleName;if(s&&(i=e.getOwn(t.vars,s)))t.vars[r]=i.clone();else if(n){var o,u=this.rootContDim;if(u){var a,f,l=t.group,c=l?l.singleDatum():t.datum;if(c)c.isNull||(o=Z.fromAtom(c.atoms[u.name]),null!=o.value&&this.percentFormatter&&(l?(f=l.dimensions(u.name),a=f.valuePercent({visible:!0})):a=t.data().dimensions(u.name).percent(o.value)));else if(l){f=l.dimensions(u.name);var h=f.value({visible:!0,zeroIfNone:!1});if(null!=h){var p=u.format(h);o=new Z(h,p,h),this.percentFormatter&&(a=f.valuePercent({visible:!0}))}}o&&this.percentFormatter&&(o.percent=null==o.value?new Z(null,""):new Z(a,this.percentFormatter.call(null,a)))}else{var d=t.datum;if(d&&!d.isNull){var v=this.grouping.view(d);o=Z.fromComplex(v)}}o||(o=new Z(null,""),this.percentFormatter&&(o.percent=new Z(null,""))),t.vars[r]=o}}}}}),e.type("pvc.visual.DataCell").init(function(e,t,n,r,i){this.plot=e,this.axisType=t,this.axisIndex=n,this.role=r,this.dataPartValue=i,this.key=[t,n,r.prettyId(),i].join("~")}).add({legendVisible:function(){return this.role.legend().visible}}),e.type("pvc.visual.ColorDataCell",R.visual.DataCell).init(function(e,t,n,r,i){this.base(e,t,n,r,i),this._legendGroupScene=null,this._legendSymbolRenderer=null}).add({legendSymbolRenderer:function(e){return arguments.length?(e&&"object"==typeof e&&(e=R.visual.legend.symbolRenderer(e)),this._legendSymbolRenderer=e,this):this._legendSymbolRenderer}});var et=e("pvc.visual.Axis",R.visual.OptionsBase.extend({init:function(e,t,n,r){this.base(e,t,n,r),e._addAxis(this)},methods:{_buildOptionId:function(){return this.id+"Axis"},scaleTreatsNullAs:function(){return"null"},scaleNullRangeValue:function(){return null},scaleUsesAbs:e.retFalse,scaleSumNormalized:e.retFalse,domainVisibleOnly:e.retTrue,domainIgnoreNulls:e.retFalse,domainGroupOperator:function(){return"flatten"},domainItemValueProp:function(){return"value"},bind:function(t){var n=this;return t||e.fail.argumentRequired("dataCells"),!n.dataCells||e.fail.operationInvalid("Axis is already bound."),n.dataCells=e.array.to(t),n._dataCellsByKey=e.query(n.dataCells).uniqueIndex(function(e){return e.key}),n.dataCell=n.dataCells[0],n.role=n.dataCell&&n.dataCell.role,n.scaleType=S(n.role.grouping),n._domainData=null,n._domainValues=null,n._domainItems=null,n._conciliateVisualRoles(),this},setDataCellScaleInfo:function(t,n){if(this._dataCellsByKey[t.key]!==t)throw e.error.argumentInvalid("dataCell","Not present in this axis.");e.lazy(this,"_dataCellsScaleInfoByKey")[t.key]=n},getDataCellScaleInfo:function(t){return e.getOwn(this._dataCellsScaleInfoByKey,t.key)},domainData:function(){this.isBound()||e.fail.operationInvalid("Axis is not bound.");var t=this._domainData;if(!t){var n=this.dataCells.map(E),r=this.chart.partData(n);this._domainData=t=this._createDomainData(r)}return t},domainCellData:function(e){var t=this.dataCells;if(1===t.length)return this.domainData();var n=t[e],r=this.chart.partData(n.dataPartValue);return this._createDomainData(r)},domainCellItems:function(t){var n=this.dataCells;if(1===n.length)return this.domainItems();var r=e.number.is(t)?this.domainCellData(t):t;return this._selectDomainItems(r).array()},domainValues:function(){var e=this._domainValues;return e||(e=(this._calcDomainItems(),this._domainValues)),e},domainItems:function(){var e=this._domainItems;return e||(e=(this._calcDomainItems(),this._domainItems)),e},domainItemCount:function(){return this.domainItems().length},domainItemValue:function(t){return e.nullyTo(t[this.domainItemValueProp()],"")},isDiscrete:function(){return!!this.role&&this.role.isDiscrete()},isBound:function(){return!!this.role},setScale:function(t,n){return this.isBound()||e.fail.operationInvalid("Axis is not bound."),this.scale=t?n?t:this._wrapScale(t):null,this},_wrapScale:function(t){t.type=this.scaleType;var n;if("discrete"!==t.type){var r=this.scaleUsesAbs(),i=this.scaleTreatsNullAs();if(i&&"null"!==i){var s="min"===i;n=r?function(e){return t(null==e?s?t.domain()[0]:0:0>e?-e:e)}:function(e){return t(null==e?s?t.domain()[0]:0:e)}}else{var o=this.scaleNullRangeValue();n=r?function(e){return null==e?o:t(0>e?-e:e)}:function(e){return null==e?o:t(e)}}}else n=function(e){return t(null==e?"":e)};return e.copy(n,t)},sceneScale:function(t){var n=e.get(t,"sceneVarName")||this.role.name,r=this.role.grouping,i=this.scale;if(r.lastDimensionValueType()===Number){var s=e.get(t,"nullToZero",!0),o=function(e){var t=e.vars[n].value;if(null==t){if(!s)return t;t=0}return i(t)};return e.copy(o,i),o}return i.by1(function(e){return e.vars[n].value})},_conciliateVisualRoles:function(){function t(t,n){return e.error.operationInvalid(e.format(t,n))}var n=this.dataCells.length;if(n>1){var r,i,s,o,u,a,f,l,c=this._getBoundRoleGrouping(this.role);if("discrete"===this.scaleType){s=this.role.traversalModes,a=this.role.rootLabel,f=String(this.role.grouping.dimensionNames());for(l=1;n>l&&s;l++){r=this.dataCells[l].role,s&=r.traversalModes,a||(a=r.rootLabel),i=this._getBoundRoleGrouping(r);if(f!==String(i.dimensionNames()))throw t("The visual roles '{0}', on axis '{1}', assumed discrete, should be bound to the same dimension list.",[[this.role.prettyId(),r.prettyId()].join("', '"),this.id])}if(!s)throw t("The visual roles on axis '{0}', assumed discrete, do not share a possible traversal mode.",[this.id]);o=0;for(l=0;n>l;l++)r=this.dataCells[l].role,u=r.traversalMode,u&s&&u>o&&(o=u);o||(o=s&-s);for(l=0;n>l;l++)r=this.dataCells[l].role,r.setRootLabel(a),r.setTraversalMode(o),r.setTraversalModes(o)}else{if(!c.lastDimensionType().isComparable)throw t("The visual roles on axis '{0}', assumed continuous, should have 'comparable' groupings.",[this.id]);for(l=1;n>l;l++){i=this._getBoundRoleGrouping(this.dataCells[l].role);if(this.scaleType!==S(i))throw t("The visual roles on axis '{0}', assumed continuous, should have scales of the same type.",[this.id])}}}},_getBoundRoleGrouping:function(t){var n=t.grouping;if(!n)throw e.error.operationInvalid("Axis' role '"+t.name+"' is unbound.");return n},_createDomainData:function(e){var t={visible:this.domainVisibleOnly()?!0:null,isNull:this.chart.options.ignoreNulls||this.domainIgnoreNulls()?!1:null};return this.role[this.domainGroupOperator()](e,t)},_selectDomainItems:function(e){return e.children()},_calcDomainItems:function(){var t=e.hasOwnProp,n={},r=[],i=[],s=this.domainData();this._selectDomainItems(s).each(function(e){var s=this.domainItemValue(e);t.call(n,s)||(n[s]=1,r.push(s),i.push(e))},this),this._domainItems=i,this._domainValues=r}}}));e("pvc.visual.ColorAxis",et.extend({methods:{scaleNullRangeValue:function(){return this.option("Missing")||null},scaleUsesAbs:function(){return this.option("UseAbs")},domainVisibleOnly:function(){return"discrete"!==this.scaleType},bind:function(t){return this.base(t),this._legendGroupScene=null,this._plotList=e.query(t).select(function(e){return e.plot}).distinct(function(e){return e&&e.id}).array(),this},_wrapScale:function(e){var t=this.option.isSpecified,n="discrete"!==this.scaleType||t("Transform")||!t("Colors")&&!t("Map");if(n){var r=this.option("Transform");r&&(e=e.transform(r))}return this.base(e)},scheme:function(){return e.lazy(this,"_scheme",this._createScheme,this)},_createColorMapFilter:function(t){var n=e.uniqueIndex(t,function(e){return e.key});return{domain:function(n){return!e.hasOwn(t,n)},color:function(t){return!e.hasOwn(n,t.key)}}},_getBaseScheme:function(){return this.option("Colors")},_createScheme:function(){var t=this,n=t._getBaseScheme();if("discrete"!==t.scaleType)return function(){var e=n.apply(null,arguments);return t._wrapScale(e)};var r=t.option("Map");if(!r)return function(){var e=n.apply(null,arguments);return t._wrapScale(e)};var i=this._createColorMapFilter(r);return function(s){var o;s instanceof Array||(s=e.array.copy(arguments)),s=s.filter(i.domain);var u=n(s),a=u.range().filter(i.color);u.range(a),o=function(t){var n=e.getOwn(r,t);return n||u(t)},e.copy(o,u);var f,l;return o.domain=function(){if(arguments.length)throw e.operationInvalid("The scale cannot be modified.");return f||(f=e.array.append(e.ownKeys(r),s)),f},o.range=function(){if(arguments.length)throw e.operationInvalid("The scale cannot be modified.");return l||(l=e.array.append(e.own(r),a)),l},t._wrapScale(o)}},sceneScale:function(t){var n=e.get(t,"sceneVarName")||this.role.name,r=this.scalesByCateg;if(r){var i=this.option("Missing");return function(e){var t=e.vars[n].value;if(null==t)return i;var s=e.group.parent.absKey;return r[s](t)}}return this.scale.by1(function(e){return e&&e.vars[n].value})},_resolveByNaked:R.options.specify(function(t){return this._chartOption(this.id+e.firstUpperCase(t.name))}),_specifyV1ChartOption:function(e,t){return!this.index&&this.chart.compatVersion()<=1&&this._specifyChartOption(e,t)?!0:void 0}}}));var tt,nt={resolveDefault:function(t){return!this.index&&this._specifyChartOption(t,e.firstLowerCase(t.name))?!0:void 0}};R.visual.ColorAxis.options({Colors:{resolve:"_resolveFull",getDefault:T,data:{resolveV1:function(e){return"discrete"===this.scaleType?0===this.index?this._specifyChartOption(e,"colors"):1===this.index&&this.chart._allowV1SecondAxis&&this._specifyChartOption(e,"secondAxisColor"):this._specifyChartOption(e,"colorRange"),!0},resolveDefault:function(e){0===this.index&&this._specifyChartOption(e,"colors")}},cast:R.colorScheme},Map:{resolve:"_resolveFull",cast:x},Transform:{resolve:"_resolveFull",data:{resolveDefault:function(t){var n=this._plotList;if(n.length){var r=!1;e.query(n).each(function(e){if(e.isMain)return r=!1;var t=e.name;("plot2"===t||"trend"===t)&&(r=!0)});if(r)return t.defaultValue(R.brighterColorTransform),!0}}},cast:e.fun.to},NormByCategory:{resolve:function(e){return this.chart._allowColorPerCategory?this._resolveFull(e):(e.specify(!1),!0)},data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"normPerBaseCategory"),!0}},cast:Boolean,value:!1},ScaleType:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"scalingType"),!0}},cast:R.parseContinuousColorScaleType,value:"linear"},UseAbs:{resolve:"_resolveFull",cast:Boolean,value:!1},Domain:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"colorRangeInterval"),!0}},cast:e.array.to},Min:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"minColor"),!0}},cast:t.color},Max:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"maxColor"),!0}},cast:t.color},Missing:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"nullColor"),!0}},cast:t.color,value:t.color("lightgray")},Unbound:{resolve:"_resolveFull",getDefault:function(){var e=this.option("Colors");return e().range()[0]||R.defaultColor},cast:t.color},LegendVisible:{resolve:"_resolveFull",data:nt,cast:Boolean,value:!0},LegendClickMode:{resolve:"_resolveFull",data:nt,cast:R.parseLegendClickMode,value:"togglevisible"},LegendDrawLine:{resolve:"_resolveFull",data:nt,cast:Boolean,value:!1},LegendDrawMarker:{resolve:"_resolveFull",data:nt,cast:Boolean,value:!0},LegendShape:{resolve:"_resolveFull",data:nt,cast:R.parseShape}}),e("pvc.visual.SizeAxis",et.extend({init:function(t,n,r,i){i=e.set(i,"byNaked",!1),this.base(t,n,r,i)},methods:{scaleTreatsNullAs:function(){return"min"},scaleUsesAbs:function(){return this.option("UseAbs")},setScaleRange:function(t){var n=this.scale;return n.min=t.min,n.max=t.max,n.size=t.max-t.min,n.range(n.min,n.max),e.debug>=4&&e.log("Scale: "+e.describe(e.copyOwn(n))),this}},options:{OriginIsZero:{resolve:"_resolveFull",cast:Boolean,value:!1},FixedMin:{resolve:"_resolveFull",cast:e.number.to},FixedMax:{resolve:"_resolveFull",cast:e.number.to},UseAbs:{resolve:"_resolveFull",cast:Boolean,value:!1}}})),e("pvc.visual.NormalizedAxis",et.extend({init:function(t,n,r,i){i=e.set(i,"byNaked",!1),this.base(t,n,r,i)},methods:{scaleTreatsNullAs:function(){return"zero"},scaleUsesAbs:e.retTrue,scaleSumNormalized:e.retTrue,setScaleRange:function(t){var n=this.scale;return n.min=t.min,n.max=t.max,n.size=t.max-t.min,n.range(n.min,n.max),e.debug>=4&&e.log("Scale: "+e.describe(e.copyOwn(n))),this}},options:{OriginIsZero:{value:!0}}})),e.type("pvc.BasePanel",R.Abstract).add(R.visual.Interactive).init(function(t,n,i){this.chart=t,this.base(),this.axes=Object.create(t.axes);if(i){i.scenes&&(this._sceneTypeExtensions=i.scenes,delete i.scenes);var s=i.axes;s&&(e.copy(this.axes,s),delete i.axes)}r.extend(this,i),this.axes.color||(this.axes.color=t.axes.color),this.position={};var o=i&&i.margins;n||void 0!==o||(o=3),this.margins=new J(o),this.paddings=new J(i&&i.paddings),this.size=new K(i&&i.size),this.sizeMax=new K(i&&i.sizeMax),this.parent=n||null,n?(this.isTopRoot=!1,this.isRoot=n.chart!==t,this.root=this.isRoot?this:n.root,this.topRoot=n.topRoot,this.isRoot&&(this.position.left=t.left,this.position.top=t.top),n._addChild(this)):(this.root=this,this.topRoot=this,this.isRoot=!0,this.isTopRoot=!0);var u=n||t;this.data=u.data;if(this.isRoot)this.anchor=null,this.align=null,this.alignTo=null,this.offset=null;else{this.align=R.parseAlign(this.anchor,this.align);var a=this.alignTo,f=this.anchor;null==a||""===a||"left"!==f&&"right"!==f?a=this.align:"page-middle"!==a&&(a=isNaN(+a.charAt(0))?R.parseAlign(f,a):$.parse(a)),this.alignTo=a,this.offset=new V(this.offset)}if(null==this.borderWidth){var l,c=this._getExtensionId();if(c){var h=this._getExtension(c,"strokeStyle");null!=h&&(l=+this._getConstantExtension(c,"lineWidth"),(isNaN(l)||!isFinite(l))&&(l=null))}this.borderWidth=null==l?0:1.5}var p=u.ibits(),d=R.visual.Interactive,v=t.ibits();p=e.bit.set(p,d.Clickable,v&d.Clickable&&!!this.clickAction),p=e.bit.set(p,d.DoubleClickable,v&d.DoubleClickable&&!!this.doubleClickAction),p=e.bit.set(p,d.Animatable,v&d.Animatable),this._ibits&=p}).add({_ibits:~R.visual.Interactive.Animatable,chart:null,parent:null,_children:null,type:t.Panel,_extensionPrefix:"",_rubberSelectableMarks:null,height:null,width:null,borderWidth:null,anchor:"top",pvPanel:null,margins:null,paddings:null,isRoot:!1,isTopRoot:!1,root:null,topRoot:null,_layoutInfo:null,_signs:null,data:null,dataPartValue:null,_animating:0,_selectingByRubberband:!1,_v1DimRoleName:{series:"series",category:"category",value:"value"},_sceneTypeExtensions:null,clickAction:null,doubleClickAction:null,compatVersion:function(e){return this.chart.compatVersion(e)},_createLogId:function(){return""+e.qualNameOf(this.constructor)+this.chart._createLogChildSuffix()},_getLegendRootScene:function(){return this.chart._getLegendRootScene()},_addChild:function(t){t.parent===this||e.assert("Child has a != parent."),(this._children||(this._children=[])).push(t)},_addSign:function(t){e.array.lazy(this,"_signs").push(t),t.selectableByRubberband()&&e.array.lazy(this,"_rubberSelectableMarks").push(t.pvMark)},visibleData:function(e){return this.chart.visibleData(this.dataPartValue,e)},partData:function(){return this.chart.partData(this.dataPartValue)},layout:function(t,n){if(!this._layoutInfo||e.get(n,"force",!1)){var r=e.get(n,"referenceSize");!r&&t&&(r=e.copyOwn(t));var i=this.size.resolve(r),s=this.sizeMax.resolve(r);if(!t){if(null==i.width||null==i.height)throw e.error.operationInvalid("Panel layout without width or height set.");t=e.copyOwn(i)}!r&&t&&(r=e.copyOwn(t)),null!=s.width&&t.width>s.width&&(t.width=s.width),null!=s.height&&t.height>s.height&&(t.height=s.height);var o=this.borderWidth/2,u=(e.get(n,"margins")||this.margins).resolve(r),a=(e.get(n,"paddings")||this.paddings).resolve(r),f=J.inflate(u,o),l=J.inflate(a,o),c=f.width+l.width,h=f.height+l.height,p=new K(Math.max(t.width-c,0),Math.max(t.height-h,0)),d=e.copyOwn(i);null!=d.width&&(d.width=Math.max(d.width-c,0)),null!=d.height&&(d.height=Math.max(d.height-h,0));var v=this._layoutInfo||null,m=e.get(n,"canChange",!0),g=this._layoutInfo={canChange:m,referenceSize:r,realMargins:u,realPaddings:a,borderWidth:this.borderWidth,margins:f,paddings:l,desiredClientSize:d,clientSize:p,pageClientSize:v?v.pageClientSize:p.clone(),previous:v};v&&(delete v.previous,delete v.pageClientSize);var y,b=this._calcLayout(g);b?(g.clientSize=b,y={width:b.width+c,height:b.height+h}):(y=t,b=p),this.isVisible=b.width>0&&b.height>0,delete g.desiredClientSize,this.width=y.width,this.height=y.height,!m&&v&&delete g.previous,e.debug>=5&&(this.log("Size       = "+e.describe(y)),this.log("Margins    = "+e.describe(g.margins)),this.log("Paddings   = "+e.describe(g.paddings)),this.log("ClientSize = "+e.describe(g.clientSize))),this._onLaidOut()}},_onLaidOut:function(){this.isRoot&&this.chart._onLaidOut()},_calcLayout:function(t){function n(e,t,n){for(var r=0;e--;){if(t.call(n,e,r)===!1)return!0;r++}return!1}function r(t,n){h&&p.log.group("LayoutCycle #"+(n+1)+" (remaining: "+t+")");try{l=new J(0),c=e.copyOwn(f);for(var r,s=t>0,o=0,u=b.length;u>o;){r=b[o],h&&p.log.group("SIDE Child #"+(o+1)+" at "+r.anchor);try{if(i.call(this,r,s))return!0}finally{h&&p.log.groupEnd()}o++}o=0,u=y.length;for(;u>o;){r=y[o],h&&p.log.group("FILL Child #"+(o+1));try{if(i.call(this,r,s))return!0}finally{h&&p.log.groupEnd()}o++}return!1}finally{h&&p.log.groupEnd()}}function i(t,r){var i,f=!1;return w.canChange=r,n(6,function(n,l){h&&p.log.group("Attempt #"+(l+1));try{w.paddings=i,w.canChange=n>0,t.layout(new K(c),w);if(t.isVisible){f=o.call(this,t,r);if(f)return!1;var d=t._layoutInfo.requestPaddings;if(s(i,d)){i=d;if(n>0)return i=new J(i),h&&this.log("Child requested paddings change: "+e.describe(i)),!0;e.debug>=2&&this.log.warn("Child requests paddings change but iterations limit has been reached.")}u.call(this,t),"fill"!==t.anchor&&a.call(this,t)}return!1}finally{h&&p.log.groupEnd()}},this),f}function s(t,n){return n?e.query(J.names).each(function(e){var r=t&&t[e]||0,i=n&&n[e]||0;return Math.abs(i-r)>=.1?!1:void 0}):!1}function o(t,n){var r=!1,i=t.width-c.width;i>0&&(e.debug>=3&&this.log("Child added width = "+i),n?(r=!0,c.width+=i,f.width+=i):e.debug>=2&&this.log.warn("Child wanted more width, but layout iterations limit has been reached."));var s=t.height-c.height;return s>0&&(e.debug>=3&&this.log("Child added height ="+s),n?(r=!0,c.height+=s,f.height+=s):e.debug>=2&&this.log.warn("Child wanted more height, but layout iterations limit has been reached.")),r}function u(n){var r,i=n.anchor,s=n.align,o=n.alignTo;"fill"===i?(i="left",r=l.left+c.width/2-n.width/2,s=o="middle"):r=l[i];var u,a;switch(s){case"top":case"bottom":case"left":case"right":u=s,a=0;break;case"center":case"middle":u=m[v[i]],a=-n[d[u]]/2}var f,h;switch(o){case"top":case"bottom":case"left":case"right":h=o,f=h!==u?c[d[u]]:0;break;case"center":case"middle":h=m[v[i]],f=c[d[u]]/2;break;case"page-center":case"page-middle":h=m[v[i]];var p=d[u],y=Math.min(c[p],t.pageClientSize[p]);f=y/2}var b=l[h]+f+a,w=n.offset.resolve(c);w&&(r+=w[g[i]]||0,b+=w[g[u]]||0),n.keepInBounds&&(0>r&&(r=0),0>b&&(b=0)),n.setPosition(e.set({},i,r,u,b))}function a(e){var t=e.anchor,n=d[t],r=e[n];l[t]+=r,c[n]-=r}var f,l,c,h,p=this;if(p._children){var d=R.BasePanel.orthogonalLength,v=R.BasePanel.relativeAnchor,m=R.BasePanel.leftTopAnchor,g=V.namesSidesToOffset,y=[],b=[];p._children.forEach(function(t){var n=t.anchor;n&&("fill"===n?y.push(t):(e.hasOwn(v,n)||e.fail.operationInvalid("Unknown anchor value '{0}'",[n]),b.push(t)))}),h=e.debug>=5,f=e.copyOwn(t.clientSize);var w={force:!0,referenceSize:f};h&&p.log.group("CCC DOCK LAYOUT clientSize = "+e.describe(f));try{n(5,r,p)}finally{h&&p.log.groupEnd()}}return f},invalidateLayout:function(){this._layoutInfo=null,this._children&&this._children.forEach(function(e){e.invalidateLayout()})},_create:function(n){if(!this.pvPanel||n){var r;delete this._invalidDataError,this.pvPanel=null,this.pvRootPanel&&(this.pvRootPanel=null),delete this._signs;try{this.layout()}catch(i){if(!(i instanceof InvalidDataException))throw i;this._invalidDataError=r=i}if(this.isTopRoot&&this.chart._isMultiChartOverflowClip)return;if(!this.isVisible)return;this.isRoot&&this._creating();var s=this._layoutInfo.margins,o=this._layoutInfo.paddings;if(this.isTopRoot){this.pvRootPanel=this.pvPanel=(new t.Panel).canvas(this.chart.options.canvas);var u=new R.visual.Scene(null,{panel:this});this.pvRootPanel.lock("data",[u]);if(s.width>0||s.height>0)this.pvPanel.width(this.width).height(this.height),this.pvPanel=this.pvPanel.add(t.Panel)}else this.pvPanel=this.parent.pvPanel.add(this.type);var a=this.pvPanel,f=this.width-s.width,l=this.height-s.height;a.width(f).height(l),e.debug>=15&&(s.width>0||s.height>0)&&(this.isTopRoot?this.pvRootPanel:this.parent.pvPanel).add(this.type).width(this.width).height(this.height).left(null!=this.position.left?this.position.left:null).right(null!=this.position.right?this.position.right:null).top(null!=this.position.top?this.position.top:null).bottom(null!=this.position.bottom?this.position.bottom:null).strokeStyle("orange").lineWidth(1).strokeDasharray("- .");var c={};e.eachOwn(this.position,function(e,t){a[t](e+s[t]),c[this.anchorLength(t)]=!0},this),c.width||(s.left>0&&a.left(s.left),s.right>0&&a.right(s.right)),c.height||(s.top>0&&a.top(s.top),s.bottom>0&&a.bottom(s.bottom)),(o.width>0||o.height>0)&&(this.pvPanel=a.add(t.Panel).width(f-o.width).height(l-o.height).left(o.left).top(o.top)),a.borderPanel=a,a.paddingPanel=this.pvPanel,this.pvPanel.paddingPanel=this.pvPanel,this.pvPanel.borderPanel=a,e.debug>=15&&(this.pvPanel.strokeStyle("lightgreen").lineWidth(1).strokeDasharray("- "),this.pvPanel!==a&&a.strokeStyle("blue").lineWidth(1).strokeDasharray(". "));var h=this._getExtensionId();new R.visual.Panel(this,null,{panel:a,extensionId:h});if(!r)try{this._createCore(this._layoutInfo)}catch(i){if(!(i instanceof InvalidDataException))throw i;this._invalidDataError=r=i}if(r){var p=a.anchor("center").add(t.Label).text(r.message);this.chart.extend(p,"invalidDataMessage")}this.isTopRoot&&(this.chart._multiChartOverflowClipped&&this._addMultichartOverflowClipMarker(),this._initSelection(),this.interactive()&&"near"===this.chart._pointingOptions.mode&&this._requirePointEvent()),this.applyExtensions();if(this.isRoot&&e.debug>5){var d=["SCALES SUMMARY",e.logSeparator];this.chart.axesList.forEach(function(t){var n=t.scale;if(n){var r=n.domain&&n.domain(),i=n.range&&n.range();d.push(t.id),d.push("    domain: "+(r?e.describe(r):"?")),d.push("    range : "+(i?e.describe(i):"?"))}},this),this.log(d.join("\n"))}}},_creating:function(){this._children&&this._children.forEach(function(e){e._creating()})},_createCore:function(){this._children&&this._children.forEach(function(e){e._create()})},render:function(t){if(!this.isTopRoot)return this.topRoot.render(t);this._create(e.get(t,"recreate",!1));if((!this.isTopRoot||!this.chart._isMultiChartOverflowClip)&&this.isVisible){var n=this.pvRootPanel;if(this._invalidDataError)n.render();else{this._onRender();var r=this._animating,i=this.animatable();this._animating=i&&!e.get(t,"bypassAnimation",!1)?1:0;try{n.render();if(this._animating){this._animating=2;var s=this;n.transition().duration(2e3).ease("cubic-in-out").start(function(){r?r=0:(s._animating=0,s._onRenderEnd(!0))})}else this._onRenderEnd(!1)}finally{this._animating=0}}}},_onRender:function(){var e=this.chart.options.renderCallback;if(e)if(this.compatVersion()<=1)e.call(this.chart);else{var t=this.context();e.call(t,t.scene)}},_onRenderEnd:function(e){this._children&&this._children.forEach(function(t){t._onRenderEnd(e)})},renderInteractive:function(){if(this.isVisible){var e=this._getSelectableMarks();if(e&&e.length)e.forEach(function(e){e.render()});else if(!this._children)return void this.pvPanel.render();this._children&&this._children.forEach(function(e){e.renderInteractive()})}},_getSelectableMarks:function(){return this._rubberSelectableMarks},animatable:function(){return this.base()||!!this._children&&this._children.some(function(e){return e.animatable()})},animate:function(e,t){return 1===this.topRoot._animating?e:t},animatingStart:function(){return 1===this.topRoot._animating},animating:function(){return this.topRoot._animating>0},setPosition:function(t){for(var n in t)if(e.hasOwn(J.namesSet,n)){var r=t[n];null===r?delete this.position[n]:(r=+r,!isNaN(r)&&isFinite(r)&&(this.position[n]=r))}},createAnchoredSize:function(e,t){return this.isAnchorTopOrBottom()?new K(t.width,Math.min(t.height,e)):new K(Math.min(t.width,e),t.height)},applyExtensions:function(){this._signs&&this._signs.forEach(function(e){e.applyExtensions()})},extend:function(e,t,n){this.chart.extend(e,this._makeExtensionAbsId(t),n)},extendAbs:function(e,t,n){this.chart.extend(e,t,n)},_extendSceneType:function(t,n,r){var i=e.get(this._sceneTypeExtensions,t);i&&R.extendType(n,i,r)},_absBaseExtId:{abs:"base"},_absSmallBaseExtId:{abs:"smallBase"},_getExtensionId:function(){return this.isRoot?this.chart.parent?this._absSmallBaseExtId:this._absBaseExtId:void 0},_getExtensionPrefix:function(){return this._extensionPrefix},_makeExtensionAbsId:function(e){return R.makeExtensionAbsId(e,this._getExtensionPrefix())},_getExtension:function(e,t){return this.chart._getExtension(this._makeExtensionAbsId(e),t)},_getExtensionAbs:function(e,t){return this.chart._getExtension(e,t)},_getConstantExtension:function(e,t){return this.chart._getConstantExtension(this._makeExtensionAbsId(e),t)},getPvPanel:function(n){var r=this.pvPanel;if(!n)return r;if(!this.parent)throw e.error.operationInvalid("Layers are not possible in a root panel.");if(!r)throw e.error.operationInvalid("Cannot access layer panels without having created the main panel.");var i=null;this._layers?i=this._layers[n]:this._layers={};if(!i){var s=this.parent.pvPanel;i=s.borderPanel.add(this.type).extend(r.borderPanel);var o=i;r!==r.borderPanel&&(i=o.add(t.Panel).extend(r)),o.borderPanel=o,o.paddingPanel=i,i.paddingPanel=i,i.borderPanel=o,this.initLayerPanel(i,n),this._layers[n]=i}return i},initLayerPanel:function(){},_getV1DimName:function(e){var t=this._v1DimName||(this._v1DimNameCache={}),n=t[e];if(null==n){var r=this.visualRoles[this._v1DimRoleName[e]];n=r?r.lastDimensionName():"",t[e]=n}return n},_getV1Datum:function(e){return e.datum},context:function(){var e=this._context;return!e||e.isPinned?e=this._context=new R.visual.Context(this):d.call(e),e},visualRolesOf:function(e,t){return t?this.chart.visualRolesOf(e):null},_isTooltipEnabled:function(){return!this.selectingByRubberband()&&!this.animating()},_getTooltipFormatter:function(e){var t=this.compatVersion()<=1,n=e.format;if(!n){if(!t)return this._summaryTooltipFormatter.bind(this);n=this.chart.options.v1StyleTooltipFormat;if(!n)return}return t?function(e){return n.call(e.panel,e.getV1Series(),e.getV1Category(),e.getV1Value()||"",e.getV1Datum())}:function(e){return n.call(e,e.scene)}},CSS_TT_CLASS:"ccc-tt",_summaryTooltipFormatter:function(t){function n(){var e=[];return c.isTrend&&e.push(S("tr",{"class":x("trendLabel","trend-"+b(c.trend.type))},S("td",{colspan:3},S("span",null,w(c.trend.label))))),O&&(e.push.apply(e,r()),v&&_&&e.push(S("tr",{"class":x("dimSep")},'<td colspan="3"><hr/></td>'))),e.push.apply(e,i()),_&&e.push(S("tr",{"class":x("datumCount")},'<td colspan="3"><span>'+L.length+"</span></td>")),e}function r(){var t=N.atoms;return k.sortDimensionNames(e.keys(t)).map(function(e){var n,r,i=t[e];if(null!=(n=i.value)){(v||(v={}))[e]=!0,r=i.dimension.type;if(!r.isHidden)return o(r,n,i.label)}return""})}function i(){return k.dimensionsList().map(s)}function s(t){var n=t.name;if(t.isHidden||e.getOwn(v,n))return"";var r,i,s,m,g,b,w;return M?(b=c.atoms[n],i=b.value,s=b.label,t.valueType===Number&&null!=i&&(g=a.bind(null,b)),w=c.isInterpolated&&c.interpDimName===n?c.interpolation:null):(d||(d=l.allGroup()),r=d.dimensions(n),t.valueType===Number?(_&&(m="sum"),i=r.value(y),s=r.format(i),g=null!=i?u.bind(null,r):null,null==p&&(p=T.interpolatable()),p&&(w=h(f).where(function(e){return e.isInterpolated&&e.interpDimName===n}).select(function(e){return e.interpolation}).first())):(_&&(m="list"),i=s=r.atoms(y).filter(function(e){return null!=e.value}).map(function(e){return e.label||"- "}).join(", "),i||(i=null))),o(t,i,s,m,g,w)}function o(t,n,r,i,s,o){var u=x("dim","dimValueType-"+t.valueTypeName,"dim"+(t.isDiscrete?"Discrete":"Continuous"),i?"dimAgg":"",i?"dimAgg-"+i:""),a=!1,f=m.visualRolesOf(t.name,!0),l=f?f.map(function(e){return s&&(a|=e.isPercent),S("span",{"class":x("role","role-"+e.name)},S("span",{"class":x("roleIcon")},""),S("span",{"class":x("roleLabel")},w(e.label)))}):"";return S("tr",{"class":u},S("td",{"class":x("dimLabel")},S("span",null,w(t.label))),S("td",{"class":x("dimRoles")},l),S("td",{"class":x("dimValue",null==n?"valueNull":"")},S("span",{"class":x("value")},w(r)),a?" "+S("span",{"class":x("valuePct")},function(){var e=s(),n=t.format().percent();return w(n(e))}):"",o?" "+S("span",{"class":x("interp","interp-"+b(o))},w(e.firstUpperCase(o)+" interp.")):""))}function u(e){return e.valuePercent(y)}function a(e){var t=e.dimension.name;return O?u(N.dimensions(t)):C.dimensions(t).percent(e.value,y)}var f,l=t.scene,c=l.datum,h=e.query;if(!c)return"";f=l.datums().array();if(h(f).all(function(e){return e.isNull}))return"";var p,d,v,m=this,g=this.CSS_TT_CLASS,y={visible:!0},b=e.css.escapeClass,w=e.html.escape,E=e.html.classes,S=e.html.tag,x=E.bind(null,g),T=t.chart,N=l.group,C=l.data(),k=C.type,L=h(f).where(function(e){return!e.isVirtual}).array(),A=t.sign.defaultColor(l),O=!!N&&1===l.groups.length,M=1===f.length,_=L.length>1;return S("div",{"class":g},function(){var t=e.array.appendMany(["ds"],m._getTooltipPanelClasses(),"chartOrient-"+(T.isOrientationVertical()?"v":"h"));return S("table",{"class":x.apply(null,t),"data-ccc-color":A&&"none"!==A.color?A.color:""},S("tBody",null,n))})},_getTooltipPanelClasses:function(){},_requirePointEvent:function(){if(!this.isTopRoot)return this.topRoot._requirePointEvent();this._attachedPointEvent||(this.pvPanel.root.events("all").event("mousemove",t.Behavior.point(this.chart._pointingOptions)),this._attachedPointEvent=!0)},_requireTipsy:function(){if(!this.isTopRoot)return this.topRoot._requireTipsy();if(!this._tipsy){var n=this.chart,r=e.create(n._tooltipOptions);r.isEnabled=this._isTooltipEnabled.bind(this),"near"===n._pointingOptions.mode&&(r.usesPoint=!0),this._tipsy=t.Behavior.tipsy(r)}return this._tipsy},_onClick:function(e){var t=this.clickAction;t&&(this.compatVersion()<=1?this._onV1Click(e,t):t.call(e,e.scene))},_onDoubleClick:function(e){var t=this.doubleClickAction;t&&(this.compatVersion()<=1?this._onV1DoubleClick(e,t):t.call(e,e.scene))},_onV1Click:function(e,t){t.call(e.pvMark,e.getV1Series(),e.getV1Category(),e.getV1Value(),e.event,e.getV1Datum())},_onV1DoubleClick:function(e,t){t.call(e.pvMark,e.getV1Series(),e.getV1Category(),e.getV1Value(),e.event,e.getV1Datum())},_addMultichartOverflowClipMarker:function(){function t(e){var t=e.shapeRadius();if(null==t){var n=e.shapeSize();null!=n&&(t=Math.sqrt(n))}return t||r}var n=10,r=5,i=(new R.visual.Dot(this,this.pvPanel,{noSelect:!0,noHover:!0,noClick:!0,noDoubleClick:!0,noTooltip:!1,freePosition:!0,extensionId:"multiChartOverflowMarker"})).lock("data").pvMark.shape("triangle").shapeRadius(r).top(null).left(null).bottom(function(){return t(this)+n}).right(function(){return t(this)+n}).shapeAngle(0).lineWidth(1.5).strokeStyle("red").fillStyle("rgba(255, 0, 0, 0.2)");e.fun.is(i.tooltip)&&i.tooltip("Some charts did not fit the available space.")},selectingByRubberband:function(){return this.topRoot._selectingByRubberband},_initSelection:function(){var n=this,r=n.chart;if(n.interactive()){var i=n.unselectable(),s=n.selectableByRubberband();if(s||i){var o=n.data,u=n.pvRootPanel||n.pvPanel.paddingPanel;n._getExtensionAbs("base","fillStyle")||u.fillStyle(R.invisibleFill),u.lock("events","all");if(s){var a=4;n._selectingByRubberband=!1;var f,l,c,h=this.selectBar=(new R.visual.Bar(n,u,{extensionId:"rubberBand",normalStroke:!0,noHover:!0,noSelect:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0})).override("defaultStrokeWidth",e.fun.constant(1.5)).override("defaultColor",function(e,t){return"stroke"===t?"#86fe00":"rgba(203, 239, 163, 0.6)"}).override("interactiveColor",function(e,t){return t}).pvMark.lock("visible",function(){return!!l}).lock("left",function(){return l.x}).lock("right").lock("top",function(){return l.y}).lock("bottom").lock("width",function(){return l.dx}).lock("height",function(){return l.dy}).lock("cursor").lock("events","none");u.intercept("data",function(){var e=this.delegate();return e&&e.forEach(function(e){null==e.x&&(e.x=e.y=e.dx=e.dy=0)}),e}).event("mousedown",t.Behavior.select().autoRender(!1)).event("select",function(e){if(l)l=new t.Shape.Rect(e.x,e.y,e.dx,e.dy);else{if(n.animating())return;if(e.dx*e.dx+e.dy*e.dy<=a)return;l=new t.Shape.Rect(e.x,e.y,e.dx,e.dy),n._selectingByRubberband=!0,f||(f=u.toScreenTransform()),n.rubberBand=l.apply(f)}h.render()}).event("selectend",function(){if(l){var e=arguments[arguments.length-1];f||(f=u.toScreenTransform());var t=l.apply(f);l=null,n._selectingByRubberband=!1,h.render();try{n._processRubberBand(t,e)}finally{c=new Date}}}),i&&u.event("click",function(){if(c){var e=new Date-c;if(300>e){c=null;return}}o.clearSelected()&&r.updateSelections()})}else i&&u.event("click",function(){o.clearSelected()&&r.updateSelections()})}}},_processRubberBand:function(e,t,n){this.rubberBand=e;try{this._onRubberBandSelectionEnd(t,n)}finally{this.rubberBand=null}},_onRubberBandSelectionEnd:function(t,r){e.debug>=20&&this.log("rubberBand "+e.describe(this.rubberBand)),r=Object.create(r||{}),r.toggle=!1;var i=this._getDatumsOnRubberBand(t,r);if(i){var s=this.chart;s._updatingSelections(function(){var e=!t.ctrlKey&&s.options.ctrlSelectMode;e?(s.data.owner.clearSelected(),n.Data.setSelected(i,!0)):r.toggle?n.Data.toggleSelected(i):n.Data.setSelected(i,!0)})}},_getDatumsOnRubberBand:function(t,n){var r=new e.Map;this._getDatumsOnRect(r,this.rubberBand,n);var i=r.values();return i.length&&(i=this.chart._onUserSelection(i),i&&!i.length&&(i=null)),i},_getDatumsOnRect:function(e,t,n){this._getOwnDatumsOnRect(e,t,n);var r=this._children;r&&r.forEach(function(r){r._getDatumsOnRect(e,t,n)})},_getOwnDatumsOnRect:function(t,n,r){var i=this;if(!i.isVisible)return!1;var s=i._getSelectableMarks();if(!s||!s.length)return!1;var o=t.count,u=e.get(r,"markSelectionMode"),a=function(e){e.isNull||t.set(e.id,e)},f=function(e){e.selectableByRubberband()&&e.datums().each(a)},l=function(e){e.eachSceneWithDataOnRect(n,f,null,u)};return s.forEach(l),o<t.count},isAnchorTopOrBottom:function(e){return e||(e=this.anchor),"top"===e||"bottom"===e},isOrientationVertical:function(e){return this.chart.isOrientationVertical(e)},isOrientationHorizontal:function(e){return this.chart.isOrientationHorizontal(e)}}).type().add({relativeAnchor:{top:"left",bottom:"left",left:"bottom",right:"bottom"},leftBottomAnchor:{top:"bottom",bottom:"bottom",left:"left",right:"left"},leftTopAnchor:{top:"top",bottom:"top",left:"left",right:"left"},horizontalAlign:{top:"right",bottom:"left",middle:"center",right:"right",left:"left",center:"center"},verticalAlign:{top:"top",bottom:"bottom",middle:"middle",right:"bottom",left:"top",center:"middle"},verticalAlign2:{top:"top",bottom:"bottom",middle:"middle",right:"top",left:"bottom",center:"middle"},relativeAnchorMirror:{top:"right",bottom:"right",left:"top",right:"top"},oppositeAnchor:{top:"bottom",bottom:"top",left:"right",right:"left"},parallelLength:{top:"width",bottom:"width",right:"height",left:"height"},orthogonalLength:{top:"height",bottom:"height",right:"width",left:"width"},oppositeLength:{width:"height",height:"width"}}),e.scope(function(){var t=R.BasePanel,n={},r={anchorOrtho:"relativeAnchor",anchorOrthoMirror:"relativeAnchorMirror",anchorOpposite:"oppositeAnchor",anchorLength:"parallelLength",anchorOrthoLength:"orthogonalLength"};e.eachOwn(r,function(e,r){var i=t[e];n[r]=function(e){return i[e||this.anchor]}}),t.add(n)});var rt={};e("pvc.visual.Plot",R.visual.OptionsBase.extend({init:function(t,n){var r=e.getPath(t,["plotsByType",this.type]),i=r?r.length:0,s=t.plotList.length,o=!s,u=e.get(n,"isInternal",!0);n=e.setDefaults(n,"byNaked",o,"byName",u,"byV1",u),u||(n.optionId=R.uniqueExtensionAbsPrefix()),this.base(t,this.type,i,n);if(this.name&&("$"===this.name||this.name.indexOf(".")>=0))throw e.error.argumentInvalid("name",e.format("Invalid plot name '{0}'.",[this.name]));this.prettyId=this.name||this.id,this.isInternal=!!u,this.isMain=o;var a=this.extensionPrefixes=[this.optionId];u&&(o&&a.push(""),this.name&&a.push(this.name)),this.visualRoles={},this.visualRoleList=[],this.dataCellList=[],this.dataCellsByRole={};var f=e.get(n,"spec");f&&this.processSpec(f)},methods:{_buildOptionId:function(t){return e.get(t,"optionId",this.id)},processSpec:function(t){var n=this,r=n.chart.options,i=(n.isInternal?n.name:null)||n.optionId;n.chart._processExtensionPointsIn(t,i,function(t,i,s){switch(s){case"name":case"type":break;case"visualRoles":n._visualRolesOptions=t,e.object.is(t)&&e.each(t,function(t){e.object.is(t)&&t.from&&(t.from=n.ensureAbsRoleRef(t.from))});break;default:r[i]=t}})},ensureAbsRoleRef:function(e){return e&&e.indexOf(".")<0?this.prettyId+"."+e:e},_getColorRoleSpec:e.fun.constant(null),_addVisualRole:function(t,n){var r=this.visualRoleList;n=e.set(n,"index",r.length,"plot",this);var i=new R.visual.Role(t,n);return this.visualRoles[t]=i,r.push(i),i},_addDataCell:function(t){this.dataCellList.push(t),e.array.lazy(this.dataCellsByRole,t.role.name).push(t)},interpolatable:function(){return!1},visualRole:function(t){return e.getOwn(this.visualRoles,t)},initEnd:function(){this._initVisualRoles(),this._initDataCells()},_initVisualRoles:function(){var e=this._getColorRoleSpec();e&&this._addVisualRole("color",e)},_initDataCells:function(){if(this.visualRoles.color){var e=this._getColorDataCell();e&&this._addDataCell(e)}},createVisibleData:function(e,t){var n=this.visualRoles.series;return n&&n.isBound()?n.flatten(e,t):e.where(null,t)},interpolateDataCell:function(){},generateTrendsDataCell:function(){},getContinuousVisibleCellExtent:function(t,n,r){if(r.plot!==this)throw e.error.operationInvalid("Datacell not of this plot.");var i=r.role;t._warnSingleContinuousValueRole(i);if("series"===i.name)throw e.error.notImplemented();var s=n.scaleSumNormalized(),o=t.visiblePlotData(this,r.dataPartValue),u=i.lastDimensionName();if(s){var a=o.dimensionsSumAbs(u);if(a)return{min:0,max:a}}else{var f=n.scaleUsesAbs(),l=o.dimensions(u).extent({abs:f});if(l){var c=l.min.value,h=l.max.value;return{min:f?Math.abs(c):c,max:f?Math.abs(h):h}}}},_getColorDataCell:function(){var e=this.visualRoles.color;return e?new R.visual.ColorDataCell(this,"color",this.option("ColorAxis")-1,e,this.option("DataPart")):void 0}},options:{Orientation:{resolve:function(e){return e.specify(this._chartOption("orientation")||"vertical"),!0},cast:String},ValuesVisible:{resolve:"_resolveFull",data:{resolveV1:function(e){if(0===this.globalIndex){var t=this._chartOption("showValues");return void 0!==t?e.specify(t):(t="point"!==this.type,e.defaultValue(t)),!0}}},cast:Boolean,value:!1},ValuesAnchor:{resolve:"_resolveFull",cast:R.parseAnchor},ValuesFont:{resolve:"_resolveFull",cast:String,value:"10px sans-serif"},ValuesMask:{resolve:"_resolveFull",cast:String,value:"{value}"},ValuesOptimizeLegibility:{resolve:"_resolveFull",cast:Boolean,value:!1},ValuesOverflow:{resolve:"_resolveFull",cast:R.parseValuesOverflow,value:"hide"},DataPart:{resolve:"_resolveFull",cast:String,value:"0"},ColorAxis:{resolve:R.options.resolvers([function(e){return 0===this.globalIndex?(e.specify(1),!0):void 0},"_resolveFull"]),cast:function(t){return t=e.number.to(t),null!=t?e.between(t,1,10):1},value:1}},"type.methods":{registerClass:function(e){rt[e.prototype.type]=e},getClass:function(t){return e.getOwn(rt,t)}}}));var it={};e.type("pvc.PlotPanel",R.BasePanel).init(function(e,t,n,r){this.base(e,t,r),this.plot=n,this._extensionPrefix=n.extensionPrefixes,this.dataPartValue=n.option("DataPart"),this.axes.color=e._getAxis("color",(n.option("ColorAxis")||0)-1),this.orientation=n.option("Orientation"),this.valuesVisible=n.option("ValuesVisible"),this.valuesAnchor=n.option("ValuesAnchor"),this.valuesMask=n.option("ValuesMask"),this.valuesFont=n.option("ValuesFont"),this.valuesOverflow=n.option("ValuesOverflow"),this.valuesOptimizeLegibility=n.option("ValuesOptimizeLegibility"),this.visualRoles=n.visualRoles,this.visualRoleList=n.visualRoleList}).add({anchor:"fill",visualRoles:null,visibleData:function(e){return this.chart.visiblePlotData(this.plot,this.dataPartValue,e)},_getExtensionId:function(){return["chart","plot"]},visualRolesOf:function(t,n){var r=this._visRolesByDim;r||(r=this._visRolesByDim={},this.visualRoleList.forEach(function(t){var n=t.grouping;n&&n.dimensionNames().forEach(function(n){e.array.lazy(r,n).push(t)})}));var i=e.getOwn(r,t,null),s=n?this.chart.visualRolesOf(t):null;return i&&s?i.concat(s):i||s},_getTooltipPanelClasses:function(){return["plot","plot-"+this.plot.type]},isOrientationVertical:function(){return this.orientation===R.orientation.vertical},isOrientationHorizontal:function(){return this.orientation===R.orientation.horizontal}}).type().add({registerClass:function(e,t){it[t||e.prototype.plotType]=e},getClass:function(t){return e.getOwn(it,t)}}),e.type("pvc.PlotBgPanel",R.BasePanel).init(function(e,t,n){this.base(e,t,n)}).add({anchor:"fill",_getExtensionId:function(){return"plotBg"},_createCore:function(e){this.pvPanel.borderPanel.lock("zOrder",-13).antialias(!1),this.base(e)}}),e("pvc.visual.Legend",R.visual.OptionsBase.extend({init:function(t,n,r,i){i=e.set(i,"byNaked",!1),this.base(t,n,r,i)},options:{Position:{resolve:"_resolveFull",cast:R.parsePosition,value:"bottom"},Size:{resolve:"_resolveFull",cast:N},SizeMax:{resolve:"_resolveFull",cast:N},Align:{resolve:"_resolveFull",data:{resolveDefault:function(e){var t,n=this.option("Position");return"top"!==n&&"bottom"!==n?t="top":this.chart.compatVersion()<=1&&(t="left"),e.defaultValue(t),!0}},cast:C},Margins:{resolve:"_resolveFull",data:{resolveDefault:function(t){if(this.chart.compatVersion()>1){var n=this.option("Position"),r=e.set({},R.BasePanel.oppositeAnchor[n],5);t.defaultValue(r)}return!0}},cast:J.as},Paddings:{resolve:"_resolveFull",cast:J.as,value:5},Font:{resolve:"_resolveFull",cast:String},ItemSize:{resolve:"_resolveFull",cast:k}}})),e.type("pvc.LegendPanel",R.BasePanel).init(function(e,t,n){this.base(e,t,n);if(void 0===n.font){var r=this._getConstantExtension("label","font");r&&(this.font=r)}var i=R.visual.Interactive;this._ibits&i.Interactive&&(this._ibits|=i.Clickable)}).add({pvRule:null,pvDot:null,pvLabel:null,anchor:"bottom",pvLegendPanel:null,textMargin:6,itemPadding:2.5,itemSize:null,markerSize:15,font:"10px sans-serif",_calcLayout:function(e){return this._getRootScene().layout(e)},_createCore:function(n){var r=n.clientSize,i=this._getRootScene(),s=i.vars.itemPadding,o=i.vars.contentSize,u=this.isAnchorTopOrBottom(),a=u?"top":"left",f=this.anchorOpposite(a),l=this.anchorLength(a),c=this.anchorOrthoLength(a),h=u?"center":"middle",p=u?"left":"top",d=this.anchorOpposite(p),v=0;switch(this.align){case d:v=r[l]-o[l];break;case h:v=(r[l]-o[l])/2}this.pvPanel.borderPanel.overflow("hidden");var m,g=this.pvPanel.add(t.Panel).data(i.vars.sections)[p](v)[a](function(){var e=this.sibling();return e?e[a]+e[c]+s[c]:0})[l](function(e){return e.size[l]})[c](function(e){return e.size[c]});this.compatVersion()<=1&&(m=function(e){return function(t){return e.call(this,t.vars.value.rawValue)}});var y=this.pvLegendPanel=(new R.visual.Panel(this,g,{extensionId:"panel",wrapper:m,noSelect:!1,noHover:!0,noClick:!1,noClickSelect:!0})).pvMark.lock("data",function(e){return e.items})[d](null)[f](null)[p](function(e){for(var t,n=this.index;n>0&&!(t=this.scene[--n]).visible;);return t&&t.visible?t[p]+t[l]+e.vars.itemPadding[l]:0})[a](u?function(e){var t=e.vars;return t.section.size.height/2-t.itemClientSize.height/2}:0).height(function(e){return e.vars.itemClientSize.height}).width(u?function(e){return e.vars.itemClientSize.width}:function(){return this.parent.width()}),b=(new R.visual.Panel(this,y,{extensionId:"markerPanel"})).pvMark.left(0).top(0).right(null).bottom(null).width(function(e){return e.vars.markerSize}).height(function(e){return e.vars.itemClientSize.height});e.debug>=20&&(g.strokeStyle("red").lineWidth(.5).strokeDasharray("."),y.strokeStyle("green").lineWidth(.5).strokeDasharray("."),b.strokeStyle("blue").lineWidth(.5).strokeDasharray(".")),i.childNodes.forEach(function(e){var t=(new R.visual.Panel(this,b)).pvMark.visible(function(t){return t.parent===e});e.renderer()(this,t,m)},this),this.pvLabel=(new R.visual.Label(this,b.anchor("right"),{extensionId:"label",noTooltip:!1,noClick:!1,wrapper:m})).intercept("textStyle",function(e){this._finished=!1;var t=this.delegateExtension()||"black";return this._finished||e.isOn()?t:R.toGrayScale(t,null,void 0,150)}).pvMark.textAlign("left").text(function(e){var t=e.labelText(),n=e.vars;return n.textSize.width>n.labelWidthMax&&(t=R.text.trimToWidthB(n.labelWidthMax,t,n.font,"..",!1)),t}).textMargin(function(e){return e.vars.textMargin}).font(function(e){return e.vars.font}).textDecoration(function(e){return e.isOn()?"":"line-through"}),e.debug>=16&&b.anchor("right").add(t.Panel)[this.anchorLength()](0)[this.anchorOrthoLength()](0).fillStyle(null).strokeStyle(null).lineWidth(0).add(t.Line).data(function(e){var t=e.vars,n=R.text.getLabelBBox(Math.min(t.labelWidthMax,t.textSize.width),2*t.textSize.height/3,"left","middle",0,t.textMargin),r=n.source.points();return r.length>1&&(r=r.concat(r[0])),r}).left(function(e){return e.x}).top(function(e){return e.y}).strokeStyle("red").lineWidth(.5).strokeDasharray("-")},_onClick:function(t){var n=t.scene;e.fun.is(n.execute)&&n.executable()&&n.execute()},_getExtensionPrefix:function(){return"legend"},_getExtensionId:function(){return"area"},_getSelectableMarks:function(){return[this.pvLegendPanel]},_getRootScene:function(){var e=this._rootScene;return e||(this._rootScene=e=new R.visual.legend.LegendRootScene(null,{panel:this,source:this.chart.data,horizontal:this.isAnchorTopOrBottom(),font:this.font,markerSize:this.markerSize,textMargin:this.textMargin,itemPadding:this.itemPadding,itemSize:this.itemSize})),e},_getTooltipFormatter:function(e){return e.isLazy=!1,function(e){var t=e.scene.vars.value,n=t.absLabel||t.label,r=e.pvMark.text();return n!==r?n:""}}}),e.type("pvc.visual.legend.LegendRootScene",R.visual.Scene).init(function(t,n){this.base(t,n),this._unresolvedMarkerDiam=e.get(n,"markerSize"),this._unresolvedItemPadding=new J(e.get(n,"itemPadding",5)),this._unresolvedItemSize=K.to(e.get(n,"itemSize"))||new K,e.set(this.vars,"horizontal",e.get(n,"horizontal",!1),"font",e.get(n,"font"),"textMargin",e.get(n,"textMargin",6)-3)}).add({layout:function(t){function n(t){var n=t.labelTextSize(),i=!n||!n.width||!n.height;t.isHidden=i;if(!i){var s,u={width:h+n.width,height:Math.max(n.height,l)},f={width:a.width||o.width+u.width,height:a.height||o.height+u.height},p={width:Math.max(0,f.width-o.width),height:Math.max(0,f.height-o.height)};c?s=!c.items.length:(c=new R.visual.legend.LegendItemSceneSection(0),s=!0);var m=c.size[d]+p[d];s||(m+=o[d]),!s&&m>b&&(r(!1),m=p[d]);var g=c.size;g[d]=m,g[v]=Math.max(g[v],p[v]);var y=c.items.length;c.items.push(t),e.set(t.vars,"section",c,"sectionIndex",y,"textSize",n,"itemSize",f,"itemClientSize",p,"itemContentSize",u)}}function r(e){var t=c.size;g[v]+=t[v],m.length&&(g[v]+=o[v]),g[d]=Math.max(g[d],t[d]),m.push(c),e||(c=new R.visual.legend.LegendItemSceneSection(m.length))}var i=t.clientSize;if(i.width>0&&i.height>0){var s=t.desiredClientSize,o=this._unresolvedItemPadding.resolve(i),u={width:i.width+o.width,height:i.height+o.height},a=this._unresolvedItemSize.resolve(u),f={width:a.width&&Math.max(0,a.width-o.width),height:a.height&&Math.max(0,a.height-o.height)},l=this._unresolvedMarkerDiam||f.height||15;this.vars.itemPadding=o,this.vars.desiredItemSize=a,this.vars.desiredItemClientSize=f,this.vars.markerSize=l;var c,h=l+this.vars.textMargin,p=Math.max(0,Math.min(f.width||1/0,s.width||1/0,i.width)-h),d=this.vars.horizontal?"width":"height",v=R.BasePanel.oppositeLength[d],m=[],g={width:0,height:0},y=s[d],b=y;(!b||0>b)&&(b=i[d]),this.childNodes.forEach(function(e){e.childNodes.forEach(n,this)},this);if(!c)return new K(0,0);r(!0),e.set(this.vars,"sections",m,"contentSize",g,"labelWidthMax",p);var w=this.compatVersion()<=1,E=w?b:y,S=s[v];return(!E||0>E)&&(E=g[d]),(!S||0>S)&&(S=g[v]),this.vars.size=e.set({},d,Math.min(E,i[d]),v,Math.min(S,i[v]))}return new K(0,0)},defaultGroupSceneType:function(){var t=this._groupType;return t||(t=e.type(R.visual.legend.LegendGroupScene),this._groupType=t),t},createGroup:function(e){var t=this.defaultGroupSceneType();return new t(this,e)}}),e.type("pvc.visual.legend.LegendGroupScene",R.visual.Scene).init(function(t,n){this.base(t,n),this.legendBaseIndex=e.get(n,"legendBaseIndex")||0,this.colorAxis=e.get(n,"colorAxis"),this.clickMode=e.get(n,"clickMode"),!this.clickMode&&this.colorAxis&&(this.clickMode=this.colorAxis.option("LegendClickMode"))}).add({_rendererCreate:function(t,n,r){function i(e){var r=(new R.visual.Panel(t,n)).pvMark;return f&&r.visible(function(t){return!!t.group.dimensions(f).atom(e)}),r}function s(){var i=(new R.visual.Panel(t,n)).pvMark,s={drawLine:o.option("LegendDrawLine"),drawMarker:o.option("LegendDrawMarker"),markerShape:o.option("LegendShape")},a=R.visual.legend.symbolRenderer(s);a(t,i,r,e.indexedId("",u))}var o=this.colorAxis;if(o){var u=this.legendBaseIndex,a=!1,f=o.chart._getDataPartDimName();o.dataCells.forEach(function(n,s){var o=n.legendSymbolRenderer();if(o){a=!0;var f=i(n.plot.option("DataPart"));o(t,f,r,e.indexedId("",u+s))}}),a||s()}},hasRenderer:function(){return!!this._renderer},renderer:function(e){return arguments.length?(e&&"object"==typeof e&&(e=R.visual.legend.symbolRenderer(e)),this._renderer=e,this):this._renderer||(this._renderer=this._rendererCreate.bind(this))},itemSceneType:function(){var t=this._itemSceneType;if(!t){t=e.type(R.visual.legend.LegendItemScene);var n=this.clickMode;switch(n){case"toggleselected":t.add(R.visual.legend.LegendItemSceneSelection);break;case"togglevisible":t.add(R.visual.legend.LegendItemSceneVisibility)}var r=this.panel();r._extendSceneType("item",t,["isOn","executable","execute","value","labelText"]);var i=R.makeExtensionAbsId(R.makeExtensionAbsId("ItemScene",[this.extensionPrefix,"$"]),r._getExtensionPrefix()),s=r.chart._getExtension(i,"value");void 0!==s&&t.variable("value",s),this._itemSceneType=t}return t},createItem:function(e){var t=this.itemSceneType();return new t(this,e)}}),e.type("pvc.visual.legend.LegendItemSceneSection").init(function(e){this.index=e,this.items=[],this.size={width:0,height:0}}),e.type("pvc.visual.legend.LegendItemScene",R.visual.Scene).add({_ibits:null,ibits:function(){var e=this._ibits;if(null==e){if(this.executable())e=-1;else{var t=R.visual.Interactive;e=t.Interactive|t.ShowsInteraction|t.Hoverable|t.SelectableAny}this._ibits=e}return e},isOn:e.fun.constant(!0),executable:e.fun.constant(!1),execute:e.fun.constant(),labelText:function(){return this.value().label},labelTextSize:function(){return t.Text.measure(this.labelText(),this.vars.font)},_valueEval:function(){var e=this._valueEvalCore();return e instanceof Z||(e=new Z(e,e)),e},_valueEvalCore:function(){var e,t,n,r,i,s=this.group||this.datum;return s&&(e=s.value,t=s.rawValue,i=this._getTrendLineSuffix(s),n=s.ensureLabel()+i,r=s.absLabel?s.absLabel+i:n),new Z(e||null,n||"",t,r)},_getTrendLineSuffix:function(e){var t,n;return(t=e.firstDatum())&&(n=t.trend)?" ("+n.label+")":""}}).variable("value"),e.type("pvc.visual.legend.LegendItemSceneSelection").add({isOn:function(){var e=this.group||this.datum;return!e.owner.selectedCount()||this.isSelected()},executable:function(){return this.chart().selectableByClick()},execute:function(){var e=this.datums().array();if(e.length){var t=this.chart();t._updatingSelections(function(){e=t._onUserSelection(e),e&&e.length&&n.Data.toggleSelected(e,!0)})}}}),e.type("pvc.visual.legend.LegendItemSceneVisibility").add({isOn:function(){var e=this._isOn;return null==e&&(e=this._isOn=this.datums().any(function(e){return!e.isNull&&e.isVisible})),e},executable:function(){return e.lazy(this,"_execble",this._calcExecutable,this)},_calcExecutable:function(){if(this._executableApriori())for(var e,t=this.root.childNodes,n=-1,r=t.length;++n<r;)if("togglevisible"===(e=t[n]).clickMode)for(var i,s=e.childNodes,o=-1,u=s.length;++o<u;)if((i=s[o])!==this&&i._executableApriori()&&i.isOn())return!0;return!1},_executableApriori:function(){return e.lazy(this,"_execApriori",this._calcExecutableApriori,this)},_calcExecutableApriori:function(){return this.datums().any(function(e){return!e.isTrend})},execute:function(){n.Data.toggleVisible(this.datums())&&(this.clearCachedState(),this.chart().render(!0,!0,!1))},clearCachedState:function(){delete this._execble,delete this._isOn,delete this._execApriori}}),e.space("pvc.visual.legend").symbolRenderer=function(t){function n(e,t){var n=R.makeExtensionAbsId(e,t);return f?n.concat(R.makeExtensionAbsId(e,f)):n}function r(e,t,r,f){var l=R.extensionTag,c=function(e){return e.color},h=["$",f];if(o){var p=(new W).left(0).top(function(){return this.parent.height()/2}).width(function(){return this.parent.width()}).lineWidth(1,l).strokeStyle(c,l);a&&(p=a.extend(p)),new R.visual.Rule(e,t,{proto:p,noSelect:!1,noHover:!1,activeSeriesAware:!1,extensionId:n("Rule",h),showsInteraction:!0,wrapper:r})}if(u){var d=(new W).left(function(){return this.parent.width()/2}).top(function(){return this.parent.height()/2}).shapeSize(function(){return this.parent.width()},l).lineWidth(2,l).fillStyle(c,l).strokeStyle(c,l).shape(i,l).angle(o?0:Math.PI/2,l).antialias(function(){var e=Math.abs(Math.cos(this.angle()));if(0!==e&&1!==e)switch(this.shape()){case"square":case"bar":return!1}return!0},l);s&&(d=s.extend(d)),(new R.visual.Dot(e,t,{proto:d,freePosition:!0,activeSeriesAware:!1,noTooltip:!0,noClick:!0,extensionId:n("Dot",h),wrapper:r})).pvMark.pointingRadiusMax(0)}}var i,s,o=e.get(t,"drawLine",!1),u=!o||e.get(t,"drawMarker",!0),a=o?e.get(t,"rulePvProto"):null,f=e.array.to(e.get(t,"extensionPrefix"));return u&&(i=e.get(t,"markerShape","square"),s=e.get(t,"markerPvProto")),r},e.type("pvc.TitlePanelAbstract",R.BasePanel).init(function(e,t,n){n||(n={});var r=n.anchor||this.anchor;if(null==n.size){var i=n.titleSize;null!=i&&(n.size=(new K).setSize(i,{singleProp:this.anchorOrthoLength(r)}))}if(null==n.sizeMax){var s=n.titleSizeMax;null!=s&&(n.sizeMax=(new K).setSize(s,{singleProp:this.anchorOrthoLength(r)}))}null==n.paddings&&(n.paddings=this.defaultPaddings),this.base(e,t,n);if(void 0===n.font){var o=this._getExtension("label","font");"string"==typeof o&&(this.font=o)}}).add({pvLabel:null,anchor:"top",title:null,titleSize:void 0,font:"12px sans-serif",defaultPaddings:2,_extensionPrefix:"title",_calcLayout:function(e){var n=new K,r=this.anchor,i=this.anchorLength(r),s=this.anchorOrthoLength(r),o=t.Text.measureWidth(this.title,this.font)+2,u=e.clientSize[i],a=e.desiredClientSize[i];null==a?a=o>u?u:o:a>u&&(a=u);var f=this.title,l=f?o>a?R.text.justify(f,a,this.font):[f]:[],c=t.Text.fontHeight(this.font),h=l.length*c,p=e.clientSize[s],d=e.desiredClientSize[s];null==d?d=h:d>p&&(d=p);if(h>d){var v=Math.max(1,Math.floor(d/c));if(l.length>v){var m=l[v];l.length=v,h=d=v*c;var g=l[v-1]+" "+m;l[v-1]=R.text.trimToWidthB(a,g,this.font,"..")}}return e.lines=l,e.topOffset=(d-h)/2,e.lineSize={width:a,height:c},e.a_width=i,e.a_height=s,n[i]=a,n[s]=d,n},_createCore:function(e){var t,n=this._buildScene(e),r={top:0,right:Math.PI/2,bottom:0,left:-Math.PI/2},i=R.BasePanel.horizontalAlign[this.align],s=R.BasePanel.leftTopAnchor[this.anchor];this.compatVersion()<=1&&(t=function(e){return function(){return e.call(this)}}),this.pvLabel=(new R.visual.Label(this,this.pvPanel,{extensionId:"label",wrapper:t})).lock("data",n.lineScenes).pvMark[s](function(t){return e.topOffset+t.vars.size.height/2+this.index*t.vars.size.height}).textAlign(i)[this.anchorOrtho(s)](function(e){switch(this.textAlign()){case"center":return e.vars.size.width/2;case"left":return 0;case"right":return e.vars.size.width}}).text(function(e){return e.vars.textLines[this.index]}).font(this.font).textBaseline("middle").textAngle(r[this.anchor])},_buildScene:function(t){var n=new R.visual.Scene(null,{panel:this,source:this.chart.data}),r=t.lines;return n.vars.size=t.lineSize,n.vars.textLines=r,n.lineScenes=e.array.create(r.length,n),n},_getExtensionId:e.fun.constant("")}),e.type("pvc.TitlePanel",R.TitlePanelAbstract).init(function(e,t,n){n||(n={});var r=e.compatVersion()<=1;if(r){var i=n.titleSize;null==i&&(n.titleSize=25)}this._extensionPrefix=e.parent?"smallTitle":"title",this.base(e,t,n)}).add({font:"14px sans-serif",defaultPaddings:4}),e.type("pvc.GridDockingPanel",R.BasePanel).add({anchor:"fill",_calcLayout:function(t){function n(r,i){g&&m.log.group("LayoutCycle "+(P?"- Disaster MODE":"#"+(i+1)));try{for(var s,a,f=t.canChange!==!1&&!P&&r>0,l=!1,c=!1,h=0,p=k.length;p>h;){g&&m.log.group("SIDE Child #"+(h+1));try{s=u(k[h],f);if(!P&&s){a=!1,0!==(s&M)&&(g&&m.log("SIDE Child #"+(h+1)+" changed overflow paddings"),l||(l=!0,t.requestPaddings=t.paddings)),0!==(s&O)&&(r>0?(g&&m.log("SIDE Child #"+(h+1)+" changed normal paddings"),a=!0):e.debug>=2&&m.log.warn("SIDE Child #"+(h+1)+" changed paddings but no more iterations possible."));if(0!==(s&A))return P=!0,n(0),!1;if(a)return!0}}finally{g&&m.log.groupEnd()}h++}if(l)return g&&m.log("Restarting due to overflowPaddings change"),!1;h=0,p=C.length;for(;p>h;){g&&m.log.group("FILL Child #"+(h+1));try{s=o(C[h],f);if(!P&&s){a=!1,0!==(s&_)&&(c=!0,g&&m.log("FILL Child #"+(h+1)+" increased client size")),0!==(s&O)&&(r>0?(e.debug>=5&&m.log("FILL Child #"+(h+1)+" increased paddings"),c||(a=!0)):e.debug>=2&&m.log.warn("FILL Child #"+(h+1)+" increased paddings but no more iterations possible."));if(0!==(s&A))return P=!0,n(0),!1;if(a)return!0}}finally{g&&m.log.groupEnd()}h++}return c&&g&&m.log("Restarting due to clientSize increase"),!1}finally{g&&m.log.groupEnd()}}function r(e,t){for(var n=0;e--;){if(t(e,n)===!1)return!0;n++}return!1}function i(t){var n=t.anchor;if(n)if("fill"===n){C.push(t);var r=t.paddings.resolve(N.referenceSize);b=J.resolvedMax(b,r)}else e.hasOwn(x,n)||e.fail.operationInvalid("Unknown anchor value '{0}'",[n]),k.push(t)}function s(e,n){g&&m.log.group("SIDE Child #"+(n+1));try{var r=0,i=e.anchor,s=t.canChange!==!1;return N.paddings=c(i,b),e.layout(new K(w),N),e.isVisible&&(r|=h(i,b,e)|d(e,s,!1),a(i,e),f(i,e)),r}finally{g&&m.log.groupEnd()}}function o(e,t){var n=0,r=e.anchor;return N.paddings=c(r,b),N.canChange=t,e.layout(new K(w),N),e.isVisible&&(n|=h(r,b,e,t)|d(e,t,!0),a(r,e),l(e,r)),n}function u(n,r){var i=0;if(n.isVisible){var s=n.anchor,o=T[s],u=S[s],a=w[o],f=n[u],v=new K(e.set({},o,a,u,f));N.paddings=c(s,b),N.canChange=r,n.layout(v,N),n.isVisible&&(i=h(s,b,n,r)|p(s,t.paddings,n,r)|d(n,r,!1),i||l(n,n.align))}return i}function a(t,n){var r;"fill"===t?(t="left",r=y.left+w.width/2-n.width/2):r=y[t],n.setPosition(e.set({},t,r))}function f(e,t){var n=S[e],r=t[n];y[e]+=r,w[n]-=r}function l(t,n){var r;"fill"===n&&(n="middle");var i;switch(n){case"top":case"bottom":case"left":case"right":r=n,i=y[r];break;case"middle":r="bottom",i=y.bottom+w.height/2-t.height/2;break;case"center":r="left",i=y.left+w.width/2-t.width/2}t.setPosition(e.set({},r,i))}function c(e,t){var n=new J;return v(e).forEach(function(e){n.set(e,t[e])}),n}function h(t,n,r,i){var s=r._layoutInfo.requestPaddings,o=0;if(s){g&&e.debug>=10&&(m.log("=> clientSize="+e.describe(r._layoutInfo.clientSize)),m.log("<= requestPaddings="+e.describe(s))),v(t).forEach(function(t){var r=n[t]||0,u=Math.floor(1e4*(s[t]||0))/1e4,a=u-r,f=Math.max(1,Math.abs(.01*r));0!==a&&Math.abs(a)>=f&&(i?(o|=O,n[t]=u,g&&m.log("Changed padding "+t+" <- "+u)):e.debug>=2&&m.log.warn("CANNOT change but child wanted to: "+t+"="+u))});if(o){var u=J.names.map(function(e){return(n[e]||0).toFixed(0)}).join("|");e.hasOwn(L,u)?(e.debug>=2&&m.log.warn("LOOP detected!!!!"),o|=A):L[u]=!0,n.width=n.left+n.right,n.height=n.top+n.bottom}}return o}function p(t,n,r,i){var s=r._layoutInfo.overflowPaddings||D,o=0;return g&&e.debug>=10&&m.log("<= overflowPaddings="+e.describe(s)),v(t).forEach(function(t){if(s.hasOwnProperty(t)){var r=n[t]||0,u=Math.floor(1e4*(s[t]||0))/1e4-y[t],a=u-r,f=Math.max(1,Math.abs(.05*r));a>=f&&(i?(o|=M,n[t]=u,g&&m.log("changed overflow padding "+t+" <- "+u)):e.debug>=2&&m.log.warn("CANNOT change overflow padding but child wanted to: "+t+"="+u))}}),o&&(n.width=n.left+n.right,n.height=n.top+n.bottom),o}function d(n,r,i){function s(i){var s=(w[i]||0)+E[i],u=n[i]||0,a=u-s;a>0&&(r?(E[i]+=a,o|=_,t.clientSize[i]+=a,g&&m.log("changed child size "+i+" <- "+u)):e.debug>=2&&m.log.warn("CANNOT change child size but child wanted to: "+i+"="+u+" available="+s))}var o=0;return i?K.names.forEach(s):s(n.anchorLength()),o}function v(e){switch(e){case"left":case"right":return J.vnames;case"top":case"bottom":return J.hnames;case"fill":return J.names}}var m=this;if(m._children){var g=e.debug>=5,y=new J(0),b=new J(0),w=e.copyOwn(t.clientSize),E=new K(0,0),S=R.BasePanel.orthogonalLength,x=R.BasePanel.relativeAnchor,T=R.BasePanel.parallelLength,N={force:!0,referenceSize:t.clientSize},C=[],k=[],L={},A=1,O=2,M=4,_=8,D=new J,P=!1;g&&m.log.group("CCC GRID LAYOUT clientSize = "+e.describe(w));try{this._children.forEach(i),g&&m.log.group("Phase 1 - Determine MARGINS and FILL SIZE from SIDE panels");try{!function(){for(var e=0,n=k.length;n>e;e++)if(0!=(s(k[e],e)&_))return g&&m.log("Restarting due to clientSize increase"),t.clientSize}()}finally{g&&(m.log.groupEnd(),m.log("Final FILL margins = "+e.describe(y)),m.log("Final FILL border size = "+e.describe(w)))}g&&m.log.group("Phase 2 - Determine COMMON PADDINGS");try{r(9,n)}finally{g&&(m.log.groupEnd(),m.log("Final FILL clientSize = "+e.describe({width:w.width||0-b.width||0,height:w.height||0-b.height||0})),m.log("Final COMMON paddings = "+e.describe(b)))}return t.gridMargins=new J(y),t.gridPaddings=new J(b),t.gridSize=new K(w),t.clientSize}finally{g&&m.log.groupEnd()}}}}),e.type("pvc.BaseChart",R.Abstract).add(R.visual.Interactive).init(function(t){var r=t,i=this.parent=e.get(t,"parent")||null;i?t||e.fail.argumentRequired("options"):(st&&st(),t=e.mixin.copy({},this.defaults,t)),this.options=t,i?(this.root=i.root,this.smallColIndex=t.smallColIndex,this.smallRowIndex=t.smallRowIndex):(this.root=this,this._format=n.format()),this.base(),e.debug>=3&&this.log.info("NEW CHART\n"+e.logSeparator.replace(/-/g,"=")+"\n  DebugLevel: "+e.debug),e.debug>=3&&!i&&r&&(this.log.info("OPTIONS:\n",r),e.debug>=5&&this.log.debug(e.describe(r,{ownOnly:!1,funs:!0}))),i&&i._addChild(this),this._constructData(t),this._constructVisualRoles(t)}).add({_disposed:!1,parent:null,children:null,root:null,isCreated:!1,_createVersion:0,renderCallback:void 0,multiChartPageCount:null,multiChartPageIndex:null,_multiChartOverflowClipped:!1,left:0,top:0,width:null,height:null,margins:null,paddings:null,_allowV1SecondAxis:!1,compatVersion:function(e){return(e||this.options).compatVersion},_createLogId:function(){return""+e.qualNameOf(this.constructor)+this._createLogChildSuffix()},_createLogChildSuffix:function(){return this.parent?" ("+(this.smallRowIndex+1)+","+(this.smallColIndex+1)+")":""},_addChild:function(t){t.parent===this||e.assert("Not a child of this chart."),this.children.push(t)},_create:function(e){this._createPhase1(e),this._createPhase2()},_createPhase1:function(t){this._createVersion++,this.isCreated=!1,e.debug>=3&&this.log("Creating");var n,r=!this.parent,i=this._isMultiChartOverflowClipRetry,s=r&&!i&&!this.data;r&&(this.children=[]),this.plotPanels={},this.plotPanelList=[],r&&i||this._processOptions(),s&&(this._processDataOptions(this.options),R.removeTipsyLegends(),this._checkNoDataI(),this._initChartVisualRoles()),(s||!r)&&this._initPlots(),i||(this._initData(t),r&&this._checkNoDataII()),n=this.visualRoles.multiChart.isBound(),i||this._initAxes(n),r&&(n&&this._initMultiCharts(),this._interpolate(n),this._generateTrends(n)),this._setAxesScales(this._chartLevel())},_createPhase2:function(){var e=this.visualRoles.multiChart.isBound();this._initChartPanels(e),this.isCreated=!0},_setSmallLayout:function(t){function n(e){var n=t[e];return null!=n?(r[e]=n,!0):void 0}if(t){var r=this,i=r.basePanel;n("left")|n("top")&&i&&e.set(i.position,"left",this.left,"top",this.top),n("width")|n("height")&&i&&(i.size=new K(this.width,this.height)),n("margins")&&i&&(i.margins=new J(this.margins)),n("paddings")&&i&&(i.paddings=new J(this.paddings))}},_processOptions:function(){var t,n=this.options;return this.parent||(this.width=n.width,this.height=n.height,this.margins=n.margins,this.paddings=n.paddings),this.compatVersion()<=1?n.plot2=this._allowV1SecondAxis&&!!n.secondAxis:!n.plot2&&(t=n.plots)&&(n.plot2=e.array.is(t)?e.query(t).where(function(e){return"plot2"===e.name}).any():!!t.plot2),this._processFormatOptions(n),this._processOptionsCore(n),this._processExtensionPoints(),n},_processOptionsCore:function(e){var n=this.parent;if(n)s=n.ibits(),this._tooltipOptions=n._tooltipOptions,this._pointingOptions=n._pointingOptions;else{var i="batik"!==t.renderer();i&&null==(i=e.interactive)&&(i=!0);var s=0;if(i){var o=R.visual.Interactive;s=o.Interactive|o.ShowsInteraction,this._processTooltipOptions(e)&&(s|=o.ShowsTooltip),e.animate&&r.support.svg&&(s|=o.Animatable);var u=!1;if(e.selectable){s|=o.Selectable;switch(R.parseSelectionMode(e.selectionMode)){case"rubberband":s|=o.SelectableByRubberband|o.SelectableByClick;break;case"focuswindow":s|=o.SelectableByFocusWindow,u=!0}}u||"emptyspaceclick"!==R.parseClearSelectionMode(e.clearSelectionMode)||(s|=o.Unselectable),e.hoverable&&(s|=o.Hoverable),e.clickable&&(s|=o.Clickable|o.DoubleClickable),this._processPointingOptions(e)}}this._ibits=s},_pointingDefaults:{radius:10,radiusHyst:4,stealClick:!0,collapse:"none"},_tooltipDefaults:{gravity:"s",animate:void 0,delayIn:200,delayOut:80,offset:2,opacity:.9,html:!0,fade:!0,useCorners:!1,arrowVisible:!0,followMouse:!1,format:void 0,className:""},_processTooltipOptions:function(t){var n=this.compatVersion()<=1,r=t.tooltip,i=t.tooltipEnabled;return null==i&&(r&&(i=r.enabled),null==i&&(n&&(i=t.showTooltips),null==i&&(i=!0))),i&&(r=r?e.copy(r):{},n&&this._importV1TooltipOptions(r,t),e.eachOwn(this._tooltipDefaults,function(n,i){var s=t["tooltip"+e.firstUpperCase(i)];void 0!==s?r[i]=s:void 0===r[i]&&(r[i]=n)})),this._tooltipOptions=r||{},i},_importV1TooltipOptions:function(e,t){var n=t.tipsySettings;if(n){this.extend(n,"tooltip");for(var r in n)void 0===e[r]&&(e[r]=n[r]);null==e.html&&(e.html=!1)}},_processPointingOptions:function(t){var n=t.pointing,r=t.pointingMode;null==r&&(n&&(r=n.mode),r||(r="near")),n=n?e.copyOwn(n):{},n.mode=R.parsePointingMode(r),e.eachOwn(this._pointingDefaults,function(e,t){void 0===n[t]&&(n[t]=e)}),n.collapse=R.parsePointingCollapse(n.collapse),n.painted=!0,this._pointingOptions=n||{}},_processFormatOptions:function(e){if(!this.parent){var t=e.format;void 0!=t&&this.format(t);var n=this._format;this._processFormatOption(e,n,"number","valueFormat"),this._processFormatOption(e,n,"percent","percentValueFormat")}},_processFormatOption:function(e,r,i,s){var o=r[i]();if(o!==n.format.defaults[i]())e[s]=o;else{var u=e[s];u&&u!==o&&(u._nullWrapped||(e[s]=u=t.Format.createFormatter(u),u._nullWrapped=1),r[i](u))}},_processDataOptions:function(t){function n(e,n,i){var s=t[e];void 0!==s?r[n]=null==s||""===s?i:s:void 0!=i&&void 0===r[n]&&(r[n]=i)}var r=t.dataOptions||(t.dataOptions={});n("dataSeparator","separator","~"),n("dataMeasuresInColumns","measuresInColumns"),n("dataCategoriesCount","categoriesCount"),n("dataIgnoreMetadataLabels","ignoreMetadataLabels"),n("dataWhere","where");var i,s,o=t.plot2;if(o){if(this._allowV1SecondAxis&&this.compatVersion()<=1)s=t.secondAxisIdx;else{i=t.plot2Series?e.array.as(t.plot2Series):null;if(!i||!i.length)i=null,s=t.plot2SeriesIndexes}i||(s=e.parseDistinctIndexArray(s,-1/0)||-1)}t.plot2Series=i,t.plot2SeriesIndexes=s,r.measuresIndex=r.measuresIndex||r.measuresIdx,r.measuresCount=r.measuresCount||r.numMeasures},format:function(t){var r=this.root;if(r!==this)return r.format.apply(r,arguments);var i=this._format;if(arguments.length){if(!t)throw e.error.argumentRequired("format");if(t!==i){if(!e.is(t,n.format)){if(i)return e.configure(i,t),this;t=n.format(t)}this._format=t}return this}return i},render:function(t,n,r){var i;e.debug>1&&this.log.group("CCC RENDER"),this._suspendSelectionUpdate();try{this.useTextMeasureCache(function(){try{for(;;){!this.isCreated||n?this._create({reloadData:r}):!this.parent&&this.isCreated&&R.removeTipsyLegends(),this.basePanel.render({bypassAnimation:t,recreate:n});if(!this._isMultiChartOverflowClip){this._isMultiChartOverflowClipRetry=!1;break}n=!0,r=!1,this._isMultiChartOverflowClipRetry=!0,this._isMultiChartOverflowClip=!1,this._multiChartOverflowClipped=!0}}catch(s){s instanceof NoDataException?(e.debug>1&&this.log("No data found."),this._addErrorPanelMessage("No data found",!0)):(i=!0,this.log.error(s.message),e.debug>0&&this._addErrorPanelMessage("Error: "+s.message,!1))}})}finally{i||this._resumeSelectionUpdate(),e.debug>1&&this.log.groupEnd()}return this},_addErrorPanelMessage:function(e,n){var r=this.options,i=(new t.Panel).canvas(r.canvas).width(this.width).height(this.height),s=i.anchor("center").add(t.Label).text(e);n&&this.extend(s,"noDataMessage"),i.render()},useTextMeasureCache:function(e,n){var r=this.root,i=r._textMeasureCache||(r._textMeasureCache=t.Text.createCache());return t.Text.usingCache(i,e,n||this)},animate:function(e,t){return this.basePanel.animate(e,t)},animatingStart:function(){return this.basePanel.animatingStart()},isOrientationVertical:function(e){return(e||this.options.orientation)===R.orientation.vertical},isOrientationHorizontal:function(e){return(e||this.options.orientation)===R.orientation.horizontal},dispose:function(){this._disposed||(this._disposed=!0)},defaults:{width:400,height:300,orientation:"vertical",ignoreNulls:!0,crosstabMode:!0,isMultiValued:!1,seriesInRows:!1,groupedLabelSep:void 0,animate:!0,titlePosition:"top",titleAlign:"center",legend:!1,legendPosition:"bottom",v1StyleTooltipFormat:function(e,t,n,r){return e+", "+t+":  "+this.chart.options.valueFormat(n)+(r&&r.percent?" ("+r.percent.label+")":"")},clickable:!1,doubleClickMaxDelay:300,hoverable:!1,selectable:!1,selectionMode:"rubberband",ctrlSelectMode:!0,clearSelectionMode:"emptySpaceClick",compatVersion:1/0}});var st=function(){var e=R.BaseChart.prototype.defaults;e.valueFormat||(e.valueFormat=n.format.defaults.number()),e.percentValueFormat||(e.percentValueFormat=n.format.defaults.percent()),st=null};R.BaseChart.add({visualRoles:null,visualRoleList:null,_measureVisualRoles:null,visualRole:function(t){var n=e.getOwn(this.visualRoles,t);if(!n)throw e.error.operationInvalid("roleName","There is no visual role with name '{0}'.",[t]);return n},measureVisualRoles:function(){return this.parent?this.parent.measureVisualRoles():this._measureVisualRoles||(this._measureVisualRoles=this.visualRoleList.filter(function(e){return e.isBound()&&!e.isDiscrete()&&e.isMeasure}))},measureDimensionsNames:function(){return e.query(this.measureVisualRoles()).selectMany(function(e){return e.grouping.dimensionNames()}).distinct().array()},visualRolesOf:function(t){var n=this._visRolesByDim;return n||(n=this._visRolesByDim={},this.visualRoleList.forEach(function(t){if(!t.plot){var r=t.grouping;r&&r.dimensionNames().forEach(function(r){e.array.lazy(n,r).push(t)})}})),e.getOwn(n,t,null)},_constructVisualRoles:function(){var e=this.parent;e?(this.visualRoles=e.visualRoles,this.visualRoleList=e.visualRoleList):(this.visualRoles={},this.visualRoleList=[])},_addVisualRole:function(t,n){n=e.set(n,"index",this.visualRoleList.length);var r=new R.visual.Role(t,n),i=[t];return r.plot||i.push("$."+t),this._addVisualRoleCore(r,i)},_addVisualRoleCore:function(t,n){return n||(n=t.name),this.visualRoleList.push(t),e.array.is(n)?n.forEach(function(e){this.visualRoles[e]=t},this):this.visualRoles[n]=t,t},_initChartVisualRoles:function(){this._addVisualRole("multiChart",{defaultDimension:"multiChart*",requireIsDiscrete:!0}),this._addVisualRole("dataPart",{defaultDimension:"dataPart",requireIsDiscrete:!0,requireSingleDimension:!0,dimensionDefaults:{isHidden:!0,comparer:e.compare}})},_getDataPartDimName:function(e){var t,n=this.visualRoles.dataPart;return n.isBound()?n.lastDimensionName():(t=n.preBoundGrouping())?t.lastDimensionName():e?n.defaultDimensionName:null}}),R.BaseChart.add({dataEngine:null,data:null,_partsDataCache:null,_visibleDataCache:null,resultset:[],metadata:[],_constructData:function(t){this.parent&&(this.dataEngine=this.data=t.data||e.fail.argumentRequired("options.data"))},_checkNoDataI:function(){if(!this.allowNoData&&!this.resultset.length)throw new NoDataException},_checkNoDataII:function(){if(!(this.allowNoData||this.data&&this.data.count()))throw this.data=null,new NoDataException},_initData:function(t){if(!this.parent){var n=this.data;n?e.get(t,"reloadData",!0)?this._reloadData():(n.disposeChildren(),n.clearVirtuals()):this._loadData()}delete this._partsDataCache,delete this._visibleDataCache,e.debug>=3&&this.log(this.data.getInfo())},_loadData:function(){q&&(!this.data&&!this._translation||e.assert("Invalid state."));var t,r,i,s=this.options,o=this._createDimensionsOptions(s),u=this._createComplexTypeProject(),a=R.visual.rolesBinder().dimensionsOptions(o).logger(this._createLogger()).context(this._createVisualRolesContext()).complexTypeProject(u).begin(),f=this._getDataPartDimName(!0);this._maybeAddPlot2SeriesDataPartCalc(u,f)||!this.visualRoles.dataPart.isPreBound()&&this.plots.trend&&u.setDim(f),this.metadata.length&&(i=this._translation=this._createTranslation(u,o,f)),u.hasDim(f)&&!u.isReadOrCalc(f)&&this._addDefaultDataPartCalculation(u,f),t=a.end(),r=this.dataEngine=this.data=new n.Data({type:t,labelSep:s.groupedLabelSep,keySep:s.dataOptions.separator}),i&&this._loadDataCore(r,i)},_reloadData:function(){var t=this.data,n=this._translation;t&&n||e.assert("Invalid state."),n.setSource(this.resultset),e.debug>=3&&this.log(n.logSource()),this._loadDataCore(t,n)},_loadDataCore:function(e,t){var n={where:this.options.dataOptions.where,isNull:this._getIsNullDatum()},r=t.execute(e);e.load(r,n)},_createVisualRolesContext:function(){var t=this.options,n=t.visualRoles,r=this.visualRoles,i=this.visualRoleList,s=function(t){return e.getOwn(r,t)};return s.query=function(){return e.query(i)},s.getOptions=function(e){var r,i,s,o=e.plot,u=e.name;if(!o||o.isMain){if((r=t[u+"Role"])!==s)return r;if(n&&(r=n[u])!==s)return r}return o&&(i=o._visualRolesOptions)?i[u]:void 0},s},_createLogger:function(){function t(){n.log.apply(n,arguments)}var n=this;return t.level=function(){return e.debug},t},_createComplexTypeProject:function(){var e=this.options,t=new n.ComplexTypeProject(e.dimensionGroups),r=e.dimensions;for(var i in r)t.setDim(i,r[i]);var s=e.calculations;return s&&s.forEach(t.setCalc,t),t},_getIsNullDatum:function(){var e,t,n=this;return function(r){e||(e=n.measureDimensionsNames(),t=e.length);if(!t)return!1;for(var i=r.atoms,s=0;t>s;s++)if(null!=i[e[s]].value)return!1;return!0}},_createTranslation:function(t,n,r){var i=this._createTranslationOptions(n,r),s=this._createTranslationCore(t,i);return e.debug>=3&&(this.log(s.logSource()),this.log(s.logTranslatorType())),s.configureType(),e.debug>=3&&this.log(s.logVItem()),s},_createTranslationCore:function(e,t){var n=this._getTranslationClass(t);return new n(this,e,this.resultset,this.metadata,t)},_getTranslationClass:function(e){return e.crosstabMode?n.CrosstabTranslationOper:n.RelationalTranslationOper},_createDimensionsOptions:function(e){return{isCategoryTimeSeries:e.timeSeries,formatProto:this._format,timeSeriesFormat:e.timeSeriesFormat,dimensionGroups:e.dimensionGroups}},_createTranslationOptions:function(t,n){var r=this.options,i=r.dataOptions;return e.create(t,{compatVersion:this.compatVersion(),plot2DataSeriesIndexes:r.plot2SeriesIndexes,seriesInRows:r.seriesInRows,crosstabMode:r.crosstabMode,isMultiValued:r.isMultiValued,dataPartDimName:n,readers:r.readers,measuresIndexes:r.measuresIndexes,multiChartIndexes:r.multiChartIndexes,ignoreMetadataLabels:i.ignoreMetadataLabels,separator:i.separator,measuresInColumns:i.measuresInColumns,categoriesCount:i.categoriesCount,measuresIndex:i.measuresIndex,measuresCount:i.measuresCount})},_maybeAddPlot2SeriesDataPartCalc:function(t,r){if(this.compatVersion()<=1)return!1;var i=this.options,s=this.visualRoles.series,o=s?i.plot2Series:null;if(!o)return!1;var u,a,f,l,c,h=e.query(o).uniqueIndex(),p=e.hasOwnProp,d=function(e){s.isBound()&&(u=s.grouping.dimensionNames(),a=e.owner.dimensions(r),u.length>1?c=n.Complex.compositeKey:(u=u[0],c=function(e,t){return e.atoms[t].key})),d=null};return t.setCalc({names:r,calculation:function(e,t){d&&d(e);if(a){var n=c(e,u);t[r]=p.call(h,n)?l||(l=a.intern("1")):f||(f=a.intern("0"))}}}),!0},_addDefaultDataPartCalculation:function(e,t){var n,r;e.setCalc({names:t,calculation:function(e,i){n||(n=e.owner.dimensions(t)),i[t]=r||(r=n.intern("0"))}})},partData:function(t,n){n||(n=this.data);if(null==t)return n;if(this.parent)return this.root.partData(t,n);var r=this.visualRoles.dataPart;if(!r||!r.isBound())return n;var i="\0"+n.id+":"+e.nullyTo(t,""),s=e.lazy(this,"_partsDataCache"),o=s[i];return o||(o=this._createPartData(n,r,t),s[i]=o),o},_createPartData:function(t,r,i){var s=r.lastDimensionName(),o=t.dimensions(s).getDistinctAtoms(e.array.to(i)),u=n.whereSpecPredicate([e.set({},s,o)]);return t.where(null,{where:u})},visibleData:function(t,n){var r=this.plots.main||e.fail.operationInvalid("There is no main plot defined.");return this.visiblePlotData(r,t,n)},visiblePlotData:function(t,n,r){var i=e.get(r,"baseData")||this.data;if(this.parent)return r=r?Object.create(r):{},r.baseData=i,this.root.visiblePlotData(t,n,r);var s=!!e.get(r,"inverted",!1),o=!!this.options.ignoreNulls||!!e.get(r,"ignoreNulls",!0),u=[t.id,i.id,s,o,null!=n?n:null].join("|"),a=e.lazy(this,"_visibleDataCache"),f=a[u];if(!f){var l=this.partData(n,i);r=r?Object.create(r):{},r.visible=!0,r.isNull=o?!1:null,f=a[u]=t.createVisibleData(l,r)}return f},_initMultiCharts:function(){var t=this;t.multiOptions=new R.visual.MultiChart(t),t.smallOptions=new R.visual.SmallChart(t);var n,r,i,s,o=t.multiOptions.option,u=t.visualRoles.multiChart.flatten(t.data,{visible:!0,isNull:null}),a=u.childNodes;t._isMultiChartOverflowClipRetry?(r=t._clippedMultiChartRowsMax,n=t._clippedMultiChartColsMax,s=n,i=r*n):i=o("Max");var f=Math.min(a.length,i);0===f?n=r=s=0:t._isMultiChartOverflowClipRetry||(s=o("ColumnsMax"),n=Math.min(f,s),n>=1&&isFinite(n)||e.assert("Must be at least 1 and finite"),r=Math.ceil(f/n),r>=1||e.assert("Must be at least 1")),t._multiInfo={data:u,smallDatas:a,count:f,rowCount:r,colCount:n,colsMax:s}},interpolatable:function(){var e=this.plotList;return!!e&&e.some(function(e){return e.interpolatable()})},_interpolate:function(t){if(this.interpolatable()){var n=e.query(this.axesList).selectMany(e.propGet("dataCells")).where(function(e){var t=e.nullInterpolationMode;return!!t&&"none"!==t}).distinct(function(e){return[e.nullInterpolationMode,e.role.grouping.id,e.dataPartValue||""].join()}).array();this._eachLeafDatasAndDataCells(t,n,function(e,t){e.plot.interpolateDataCell(e,t)})}},_generateTrends:function(t){var n=this._getDataPartDimName();if(n&&this.plots.trend){var r=e.query(this.axesList).selectMany(e.propGet("dataCells")).where(e.propGet("trend")).distinct(function(e){return e.role.name+"|"+(e.dataPartValue||"")}).array(),i=[];this._eachLeafDatasAndDataCells(t,r,function(e,t){e.plot.generateTrendsDataCell(i,e,t)}),i.length&&this.data.owner.add(i)}},_eachLeafDatasAndDataCells:function(e,t,n,r){var i=t.length;if(i){var s,o;e?(s=this._multiInfo.smallDatas,o=this._multiInfo.count):(s=[this.data],o=1);for(var u=0;o>u;u++)for(var a=s[u],f=0;i>f;f++)n.call(r,t[f],a,f,u)}},_getTrendDataPartAtom:function(){var e=this._getDataPartDimName();return e?this.data.owner.dimensions(e).intern("trend"):void 0},setData:function(e,t){return this.setResultset(e&&e.resultset),this.setMetadata(e&&e.metadata),r.extend(this.options,t),this},setResultset:function(t){return!this.parent||e.fail.operationInvalid("Can only set resultset on root chart."),this.resultset=t||[],this.resultset.length||this.log.warn("Resultset is empty"),this},setMetadata:function(t){return!this.parent||e.fail.operationInvalid("Can only set metadata on root chart."),this.metadata=t||[],this.metadata.length||this.log.warn("Metadata is empty"),this}}),R.BaseChart.add({_initPlots:function(){var e=this.parent;if(e)this.plots=e.plots,this.plotList=e.plotList,this.plotsByType=e.plotsByType;else{this.plots={},this.plotList=[],this.plotsByType={},this._createPlotsInternal();var t=this._defPlotsExternal();this._initPlotTrend(t)}this._initPlotsEnd()},_createPlotsInternal:function(){},_defPlotsExternal:function(){var e,t=this.plots,n=this.options.plots;return n&&n.forEach(function(n){if(n){var r=n.name;"trend"===r?e=n:("plot2"!==r||t.plot2)&&this._defPlotExternal(r,n)}},this),e},_initPlotTrend:function(e){var t=this.plotList.some(function(e){return e.option.isDefined("Trend")&&!!e.option("Trend")});t&&(this._createPlotTrend(),e&&this.plots.trend&&this._defPlotExternal("trend",e))},_defPlotExternal:function(t,n){var r,i=n.type;if(t){t=e.firstLowerCase(t),r=this.plots&&this.plots[t];if(r&&i&&i!==r.type)throw e.error.argumentInvalid("plots","Plot named '{0}' is already defined and is of a different type: '{1}'",[t,r.type])}r?r.processSpec(n):this._addPlot(this._createPlotExternal(t,i,n))},_createPlotExternal:function(t,n,r){if(!n)throw e.error.argumentInvalid("plots","Plot 'type' option is required.");var i=R.visual.Plot.getClass(n);if(!i)throw e.error.argumentInvalid("plots","The plot type '{0}' is not defined.",[n]);return!this.plotList.length,new i(this,{name:t,isInternal:!1,spec:r})},_createPlotTrend:function(){},_addPlot:function(t){var n=this.plots,r=t.index,i=t.name,s=t.id;if(i&&e.hasOwn(n,i))throw e.error.operationInvalid("Plot name '{0}' already taken.",[i]);if(e.hasOwn(n,s))throw e.error.operationInvalid("Plot id '{0}' already taken.",[s]);var o=e.array.lazy(this.plotsByType,t.type);if(e.hasOwn(o,r))throw e.error.operationInvalid("Plot index '{0}' of type '{1}' already taken.",[r,t.type]);t.globalIndex=this.plotList.length;var u=!t.globalIndex;o[r]=t,this.plotList.push(t),n[s]=t,i&&(n[i]=t),u&&(n.main=t)},_initPlotsEnd:function(){var e;this.parent?e=this.parent._dataCellsByAxisTypeThenIndex:(e={},this.plotList.forEach(function(t){t.initEnd(),this._registerPlotVisualRoles(t),this._indexPlotDataCells(t,e)},this)),this._dataCellsByAxisTypeThenIndex=e},_registerPlotVisualRoles:function(e){var t=e.name,n=e.id,r=e.isMain;e.visualRoleList.forEach(function(e){var i=e.name,s=[];r&&(i in this.visualRoles||s.push(i),s.push("main."+i)),s.push(n+"."+i),t&&s.push(t+"."+i),this._addVisualRoleCore(e,s)},this)},_indexPlotDataCells:function(t,n){t.dataCellList.forEach(function(t){var r=e.array.lazy(n,t.axisType);e.array.lazy(r,t.axisIndex).push(t)})}}),R.BaseChart.add({colors:null,axes:null,axesList:null,axesByType:null,_axisClassByType:{color:R.visual.ColorAxis,size:R.visual.SizeAxis},_axisCreateChartLevel:{color:1,size:2,base:3,ortho:3},_axisSetScaleChartLevel:{color:1,size:2,base:2,ortho:2},_axisCreationOrder:["color","size","base","ortho"],_axisCreateIfUnbound:{},_chartLevel:function(){var e=0;return this.parent||(e|=1),(this.parent||!this.visualRoles.multiChart.isBound())&&(e|=2),e},_initAxes:function(){this.axes={},this.axesList=[],this.axesByType={},delete this._rolesColorScale;var t=this._dataCellsByAxisTypeThenIndex;this.parent||e.eachOwn(t,function(e,n){for(var r=0,i=e.length;i>r;){var s=e[r];s?(s=s.filter(function(e){return e.role.isBound()}),s.length?(e[r]=s,r++):(e.splice(r,1),i--)):r++}e.length||delete t[n]});var n=this._chartLevel();this._axisCreationOrder.forEach(function(e){if(0!==(this._axisCreateChartLevel[e]&n)){var r,i=t[e];i?(r=this._axisClassByType[e]||R.visual.Axis,i.forEach(function(t){var n=t[0].axisIndex;new r(this,e,n)},this)):this._axisCreateIfUnbound[e]&&(r=this._axisClassByType[e]||R.visual.Axis,r&&new r(this,e,0))}},this),this.parent&&this.root.axesList.forEach(function(t){e.hasOwn(this.axes,t.id)||this._addAxis(t)},this),e.eachOwn(t,function(t,r){this._axisCreateChartLevel[r]&n&&t.forEach(function(t){var n=t[0].axisIndex,i=this.axes[e.indexedId(r,n)];i.isBound()||i.bind(t)},this)},this),this._initAxesEnd()},_initAxesEnd:function(){},_addAxis:function(t){this.axes[t.id]=t,t.chart===this&&(t.axisIndex=this.axesList.length),this.axesList.push(t);var n=e.array.lazy(this.axesByType,t.type),r=n.count||0;return t.typeIndex=r,n[t.index]=t,r||(n.first=t),n.count=r+1,"color"===t.type&&t.isBound()&&this._onColorAxisScaleSet(t),this},_getAxis:function(e,t){var n;return null!=t&&+t>=0&&(n=this.axesByType[e])?n[t]:void 0},_setAxesScales:function(e){this.axesList.forEach(function(t){this._axisSetScaleChartLevel[t.type]&e&&t.isBound()&&this._setAxisScale(t,e)},this)},_setAxisScale:function(e,t){this._setAxisScaleByScaleType(e,t)},_setAxisScaleByScaleType:function(t,n){switch(t.scaleType){case"discrete":this._setDiscreteAxisScale(t,n);break;case"numeric":this._setNumericAxisScale(t,n);break;case"timeSeries":this._setTimeSeriesAxisScale(t,n);break;default:throw e.error("Unknown axis scale type.")}},_describeScale:function(t,n){n.isNull&&e.debug>=3&&this.log(e.format("{0} scale for axis '{1}'- no data",[t.scaleType,t.id]))},_setDiscreteAxisScale:function(e){if("color"===e.type)return this._setDiscreteColorAxisScale(e);var n=e.domainValues(),r=new t.Scale.ordinal;n.length?r.domain(n):r.isNull=!0,this._describeScale(e,r),e.setScale(r)},_setTimeSeriesAxisScale:function(e){var n=this._getContinuousVisibleExtentConstrained(e),r=new t.Scale.linear;if(n){var i=n.min,s=n.max,o=1;normalize=function(){var e=s-i;e&&Math.abs(e)<o&&(s=i=new Date(Math.round((i+s)/2)),e=0),e?0>e&&(!n.maxLocked||n.minLocked?s=new Date(i.getTime()+R.time.intervals.h):i=new Date(s.getTime()-R.time.intervals.h)):(n.minLocked||(i=new Date(i.getTime()-R.time.intervals.h)),(!n.maxLocked||n.minLocked)&&(s=new Date(s.getTime()+R.time.intervals.h)))},normalize(),r.domain(i,s),r.minLocked=n.minLocked,r.maxLocked=n.maxLocked}else r.isNull=!0;this._describeScale(e,r),e.setScale(r)},_setNumericAxisScale:function(e){if("color"===e.type)return this._setNumericColorAxisScale(e);var n=this._getContinuousVisibleExtentConstrained(e),r=new t.Scale.linear;if(n){var i=n.min,s=n.max,o=1e-10,u=function(){var e=s-i;e&&Math.abs(e)<=o&&(i=(i+s)/2,i=s=+i.toFixed(10),e=0),e?0>e&&(!n.maxLocked||n.minLocked?s=Math.abs(i)>o?1.01*i:.1:i=Math.abs(s)>o?.99*s:-0.1):(n.minLocked||(i=Math.abs(i)>o?.99*i:-0.1),(!n.maxLocked||n.minLocked)&&(s=Math.abs(s)>o?1.01*s:.1))};u();var a=e.option.isDefined("OriginIsZero")&&e.option("OriginIsZero");a&&(0===i?n.minLocked=!0:0===s?n.maxLocked=!0:i*s>0&&(i>0?n.minLocked||(n.minLocked=!0,i=0):n.maxLocked||(n.maxLocked=!0,s=0),u())),r.domain(i,s),r.minLocked=n.minLocked,r.maxLocked=n.maxLocked}else r.isNull=!0;this._describeScale(e,r),e.setScale(r)},_warnSingleContinuousValueRole:function(t){t.grouping.isSingleDimension||this.log.warn("A linear scale can only be obtained for a single dimension role."),t.grouping.isDiscrete()&&this.log.warn(e.format("The single dimension of role '{0}' should be continuous.",[t.name]))},_getContinuousVisibleExtentConstrained:function(e,t,n){var r,i=function(){return r||(r=this.data.owner.dimensions(e.role.grouping.lastDimensionName()))},s=!1,o=!1;null==t&&e.option.isDefined("FixedMin")&&(t=e.option("FixedMin"),null!=t&&(t=i.call(this).read(t)),s=null!=t,s&&(t=t.value,0>t&&e.scaleUsesAbs()&&(t=-t))),null==n&&e.option.isDefined("FixedMax")&&(n=e.option("FixedMax"),null!=n&&(n=i.call(this).read(n)),o=null!=n,o&&(n=n.value,0>n&&e.scaleUsesAbs()&&(n=-n)));if(null==t||null==n){var u=this._getContinuousVisibleExtent(e);if(!u)return null;null==t&&(t=u.min),null==n&&(n=u.max)}return{min:t,max:n,minLocked:s,maxLocked:o}},_getContinuousVisibleExtent:function(t){var n=t.dataCells;if(1===n.length){var r=n[0];return r.plot.getContinuousVisibleCellExtent(this,t,r)}return e.query(n).select(function(e){return e.plot.getContinuousVisibleCellExtent(this,t,e)},this).reduce(R.unionExtents,null)},_setDiscreteColorAxisScale:function(e){var t=e.scheme()(e.domainValues());this._describeScale(e,t),e.setScale(t,!0),this._onColorAxisScaleSet(e)},_setNumericColorAxisScale:function(t){if(1!==t.dataCells.length)throw e.error("Can't handle multiple continuous datacells in color axis.");this._warnSingleContinuousValueRole(t.role);var n=this.visiblePlotData(t.dataCell.plot,t.dataCell.dataPartValue),r=t.option("NormByCategory"),i={type:t.option("ScaleType"),colors:t.option("Colors")().range(),colorDomain:t.option("Domain"),colorMin:t.option("Min"),colorMax:t.option("Max"),colorMissing:t.option("Missing"),data:n,colorDimension:t.role.lastDimensionName(),normPerBaseCategory:r};if(r)t.scalesByCateg=h(i);else{var s=p(i);this._describeScale(t,s),t.setScale(s)}this._onColorAxisScaleSet(t)},_onColorAxisScaleSet:function(e){switch(e.index){case 0:this.colors=e.scheme();break;case 1:this._allowV1SecondAxis&&(this.secondAxisColor=e.scheme())}},_getRoleColorScale:function(t){return e.lazy(e.lazy(this,"_rolesColorScale"),t.id,this._createRoleColorScale,this)},_createRoleColorScale:function(t){function n(t){var n=""+t;e.hasOwnProp.call(s,n)||(s[n]=i(t))}var r,i,s={};return this.axesByType.color.forEach(function(e){var s=e.role;if(s&&e.scale&&"discrete"===e.scaleType&&s.grouping.id===t&&0===e.index||e.option.isSpecified("Colors")||e.option.isSpecified("Map"))i=e.scale,r||(r=i),e.domainValues().forEach(n)},this),r?(i=function(t){var n=""+t;return e.hasOwnProp.call(s,n)?s[n]:s[n]=r(t)},e.copy(i,r),i):R.createColorScheme()()},_onLaidOut:function(){}}),R.BaseChart.add({basePanel:null,titlePanel:null,legendPanel:null,_multiChartPanel:null,_initChartPanels:function(e){this._initBasePanel(),this._initTitlePanel();var t=this._initLegendPanel(),n=e&&!this.parent;n&&this._initMultiChartPanel(),t&&this._initLegendScenes(t);if(!n){var r=this.options;this._createContent(this.basePanel,{margins:e?r.smallContentMargins:r.contentMargins,paddings:e?r.smallContentPaddings:r.contentPaddings,clickAction:r.clickAction,doubleClickAction:r.doubleClickAction})}},_initBasePanel:function(){var e=this.parent;this.basePanel=new R.BasePanel(this,e&&e._multiChartPanel,{margins:this.margins,paddings:this.paddings,size:{width:this.width,height:this.height}})},_initTitlePanel:function(){var t=this,n=t.options,r=n.title;e.empty(r)||(this.titlePanel=new R.TitlePanel(t,t.basePanel,{title:r,font:n.titleFont,anchor:n.titlePosition,align:n.titleAlign,alignTo:n.titleAlignTo,offset:n.titleOffset,keepInBounds:n.titleKeepInBounds,margins:n.titleMargins,paddings:n.titlePaddings,titleSize:n.titleSize,titleSizeMax:n.titleSizeMax}))},_initLegendPanel:function(){var t=this.options;if(t.legend){var n=new R.visual.Legend(this,"legend",0);return this.legendPanel=new R.LegendPanel(this,this.basePanel,{anchor:n.option("Position"),align:n.option("Align"),alignTo:t.legendAlignTo,offset:t.legendOffset,keepInBounds:t.legendKeepInBounds,size:n.option("Size"),sizeMax:n.option("SizeMax"),margins:n.option("Margins"),paddings:n.option("Paddings"),font:n.option("Font"),scenes:e.getPath(t,"legend.scenes"),textMargin:t.legendTextMargin,itemPadding:t.legendItemPadding,itemSize:n.option("ItemSize"),markerSize:t.legendMarkerSize})}},_getLegendRootScene:function(){return this.legendPanel&&this.legendPanel._getRootScene()},_initMultiChartPanel:function(){var e=this.basePanel,t=this.options;this._multiChartPanel=new R.MultiChartPanel(this,e,{margins:t.contentMargins,paddings:t.contentPaddings}),this._multiChartPanel.createSmallCharts(),e._children.unshift(e._children.pop())},_coordinateSmallChartsLayout:function(){},_registerInitLegendScenes:function(t){e.array.lazy(this,"_initLegendScenesHandlers").push(t)},_initLegendScenes:function(t){this._initLegendScenesHandlers&&this._initLegendScenesHandlers.forEach(function(e){e(t)});var n=this.axesByType.color;if(n){var r,i=this._getDataPartDimName(),s=0,o=function(){return r||(r=t._getRootScene())};n.forEach(function(t){var n;if(t.option("LegendVisible")&&t.isBound()&&t.isDiscrete()&&(n=t.dataCells.filter(function(e){return e.legendVisible()})).length){var r,u=t.scale,a=t.domainData(),f=i&&e.query(n).uniqueIndex(function(e){return e.dataPartValue});r=o().createGroup({source:a,colorAxis:t,legendBaseIndex:s}),t.domainItems(a).forEach(function(n){if(i){var s=n.dimensions(i).atoms().some(function(t){return e.hasOwn(f,t.value)});if(!s)return}var o=r.createItem({source:n}),a=t.domainItemValue(n);o.color=u(a)}),s+=t.dataCells.length}})}},_createContent:function(e,t){this.plotList.forEach(function(n){this._createPlotPanel(n,e,t)},this)},_createPlotPanel:function(t,n,r){var i=R.PlotPanel.getClass(t.type);if(!i)throw e.error.invalidOperation("There is no registered panel class for plot type '{0}'.",[t.type]);var s=new i(this,n,t,Object.create(r)),o=t.name,u=this.plotPanels;u[t.id]=s,o&&(u[o]=s),t.globalIndex||(u.main=s),this.plotPanelList.push(s)}}),R.BaseChart.add({_updateSelectionSuspendCount:0,_lastSelectedDatums:null,clearSelections:function(){return this.data.owner.clearSelected()&&this.updateSelections(),this},_updatingSelections:function(e,t){this._suspendSelectionUpdate();try{e.call(t||this)}finally{this._resumeSelectionUpdate()}},_suspendSelectionUpdate:function(){this===this.root?this._updateSelectionSuspendCount++:this.root._suspendSelectionUpdate()},_resumeSelectionUpdate:function(){this===this.root?this._updateSelectionSuspendCount>0&&!--this._updateSelectionSuspendCount&&this.updateSelections():this.root._resumeSelectionUpdate()},renderInteractive:function(){return this.useTextMeasureCache(function(){this.basePanel.renderInteractive()},this),this},renderResize:function(e,t){return void 0!==e&&(this.options.width=e),void 0!==t&&(this.options.height=t),this.render(!0,!0,!1)},updateSelections:function(t){if(this===this.root){if(this._inUpdateSelections||this._updateSelectionSuspendCount)return this;var n=this._calcSelectedChangedDatums();if(!n)return this;R.removeTipsyLegends(),this._inUpdateSelections=!0;try{var r=this.options.selectionChangedAction;if(r){var i=this.data.selectedDatums(),s=n.values();r.call(this.basePanel.context(),i,s)}e.get(t,"render",!0)&&this.useTextMeasureCache(function(){this.basePanel.renderInteractive()},this)}finally{this._inUpdateSelections=!1}}else this.root.updateSelections(t);return this},_calcSelectedChangedDatums:function(){if(this.data){var e,t=this.data.selectedDatumMap(),n=this._lastSelectedDatums;if(n){e=n.symmetricDifference(t);if(!e.count)return}else{if(!t.count)return;e=t.clone()}return this._lastSelectedDatums=t,e}},_onUserSelection:function(e){if(!e||!e.length)return e;if(this===this.root){var t=this.options.userSelectionAction;return t?t.call(this.basePanel.context(),e)||e:e}return this.root._onUserSelection(e)}}),R.BaseChart.add({_processExtensionPoints:function(){this.parent?this._components=this.parent._components:(this._processExtensionPointsIn(this.options),this._processExtensionPointsIn(this.options.extensionPoints))},_processExtensionPointsIn:function(t,n,r){var s,o,u,a,f=this._components||(this._components={});for(s in t)a=s.indexOf("_"),a>0?(o=s.substring(0,a),u=s.substring(a+1),o&&u&&(n&&(o=i(o,n)),(e.getOwn(f,o)||(f[o]=new e.OrderedMap)).add(u,t[s]))):r&&(o=n?i(s,n):s,r(t[s],o,s))},extend:function(t,n,r){e.array.is(n)?n.forEach(function(e){this._extendCore(t,e,r)},this):this._extendCore(t,n,r)},_extendCore:function(t,n,r){if(t){var i=e.getOwn(this._components,n);if(i){t.borderPanel&&(t=t.borderPanel);var s=e.debug>=3?[]:null,o=e.get(r,"constOnly",!1),u=t.wrap,a={tag:R.extensionTag},f=t instanceof W,l=f&&(u||o),c=function(n,r){if(null!=n){var i=typeof n;if("object"===i){if("svg"===r||"css"===r){var s=t.propertyValue(r);s&&(n=e.copy(s,n))}else if(n instanceof Array)return n.map(function(e){return c(e,r)})}else if(l&&"function"===i){if(o)return;"add"!==r&&"call"!==r&&(n=u.call(t,n,r))}}return n},h=function(e,n){return n instanceof Array?e.apply(t,n):e.call(t,n)};i.forEach(function(n,r){if(t.isLocked&&t.isLocked(r))s&&s.push(r+": locked extension point!");else if(t.isIntercepted&&t.isIntercepted(r))s&&s.push(r+":"+e.describe(n)+" (controlled)");else{s&&s.push(r+": "+e.describe(n)),n=c(n,r);if(void 0!==n){var i=t[r];"function"==typeof i?f&&t.properties[r]?t.intercept(r,n,a):n instanceof Array?n.forEach(function(e){h(i,e)}):h(i,n):t[r]=n}}}),s&&(s.length?this.log("Applying Extension Points for: '"+n+"'\n	* "+s.join("\n	* ")):e.debug>=5&&this.log("No Extension Points for: '"+n+"'"))}}else e.debug>=4&&this.log("Applying Extension Points for: '"+n+"' (target mark does not exist)")},_getExtension:function(t,n){var r;if(e.array.is(t))for(var i,s=t.length-1;s>=0;){r=e.getOwn(this._components,t[s--]);if(r&&void 0!==(i=r.get(n)))return i}else{r=e.getOwn(this._components,t);if(r)return r.get(n)}},_getComponentExtensions:function(t){return e.getOwn(this._components,t)},_getConstantExtension:function(t,n){var r=this._getExtension(t,n);return e.fun.is(r)?void 0:r}}),e("pvc.visual.MultiChart",R.visual.OptionsBase.extend({init:function(e){this.base(e,"multiChart",0,{byV1:!1,byNaked:!1})},options:{Max:{resolve:"_resolveFull",cast:e.number.toPositive,value:1/0},ColumnsMax:{resolve:"_resolveFull",cast:e.number.toPositive,value:3},SingleRowFillsHeight:{resolve:"_resolveFull",cast:Boolean,value:!0},SingleColFillsHeight:{resolve:"_resolveFull",cast:Boolean,value:!0},Overflow:{resolve:"_resolveFull",cast:R.parseMultiChartOverflow,value:"grow"}}})),e.type("pvc.MultiChartPanel",R.BasePanel).add({anchor:"fill",createSmallCharts:function(){var t,n=this.chart,r=n._multiInfo;if(r&&(t=r.count)){var i,s,o,u=this._getCoordinatedRootAxesByScopeType();u&&(i={},s=function(t,n,r){var s=e.array.lazy(i,n);e.array.lazy(s,r).push(t)},o=function(e){u.row&&s(e,"row",e.smallRowIndex),u.column&&s(e,"column",e.smallColIndex),u.global&&s(e,"global",0)});for(var a=this._buildSmallChartsBaseOptions(),f=n.constructor,l=r.smallDatas,c=r.colCount,h=0;t>h;h++){var p=l[h],d=h%c,v=Math.floor(h/c),m=e.set(Object.create(a),"smallColIndex",d,"smallRowIndex",v,"title",p.absLabel,"data",p),g=new f(m);u?(g._createPhase1(),o(g)):g._create()}if(u){var y=this;e.eachOwn(u,function(e,t){e.forEach(function(e){i[t].forEach(function(t){y._coordinateScopeAxes(e.id,t)})})}),n.children.forEach(function(e){e._createPhase2()})}r.coordScopesByType=i}},_getCoordinatedRootAxesByScopeType:function(){var t=!1,n=e.query(this.chart.axesList).multipleIndex(function(e){if("discrete"!==e.scaleType&&e.option.isDefined("DomainScope")){var n=e.option("DomainScope");if("cell"!==n)return t=!0,n}});return t?n:null},_coordinateScopeAxes:function(t,n){var r=e.query(n).select(function(e){var n=e.axes[t].scale;if(!n.isNull){var r=n.domain();return{min:r[0],max:r[1]}}}).reduce(R.unionExtents,null);r&&n.forEach(function(e){var n=e.axes[t],i=n.scale;i.isNull||(i.domain(r.min,r.max),n.setScale(i))})},_buildSmallChartsBaseOptions:function(){var t=this.chart,n=t.options;return e.set(Object.create(n),"parent",t,"legend",!1,"titleFont",n.smallTitleFont,"titlePosition",n.smallTitlePosition,"titleAlign",n.smallTitleAlign,"titleAlignTo",n.smallTitleAlignTo,"titleOffset",n.smallTitleOffset,"titleKeepInBounds",n.smallTitleKeepInBounds,"titleMargins",n.smallTitleMargins,"titlePaddings",n.smallTitlePaddings,"titleSize",n.smallTitleSize,"titleSizeMax",n.smallTitleSizeMax)},_calcLayout:function(t){var n=this.chart,r=n._multiInfo;if(r){var i=n.multiOptions.option,s=n.smallOptions.option,o=t.clientSize,u=t.previous,a=u?u.initialClientWidth:o.width,f=u?u.initialClientHeight:o.height,l=s("Width");null!=l&&(l=$.resolve(l,a));var c=s("Height");null!=c&&(c=$.resolve(c,f));var h=s("AspectRatio"),p=r.rowCount,d=r.colCount;null==l&&(isFinite(r.colsMax)?l=o.width/d:(null==c&&(c=f),l=h*c)),null==c&&(c=1===p&&i("SingleRowFillsHeight")||1===d&&i("SingleColFillsHeight")?f:l/h);var v=l*d,m=c*p;if(!n._isMultiChartOverflowClipRetry){n._isMultiChartOverflowClip=!1;switch(i("Overflow")){case"fit":v>a&&(v=a,l=v/d),m>f&&(m=f,c=m/p);break;case"clip":var g=d,y=p,b=v>a;b&&(g=Math.floor(a/l));var w=m>f;w&&(y=Math.floor(f/c));if(w||b)n._isMultiChartOverflowClip=!0,n._clippedMultiChartRowsMax=y,n._clippedMultiChartColsMax=g}}return e.set(t,"initialClientWidth",a,"initialClientHeight",f,"width",l,"height",c),{width:v,height:Math.max(o.height,m)}}},_getExtensionId:function(){return"content"},_createCore:function(t){var n=this.chart;!n._isMultiChartOverflowClip||e.assert("Overflow&clip condition should be resolved.");var r=n._multiInfo;if(r){var i=n.smallOptions.option,s=i("Margins"),o=i("Paddings");n.children.forEach(function(e){e._setSmallLayout({left:e.smallColIndex*t.width,top:e.smallRowIndex*t.height,width:t.width,height:t.height,margins:this._buildSmallMargins(e,s,r),paddings:o})},this);var u=r.coordScopesByType;u&&n._coordinateSmallChartsLayout(u),this.base(t)}},_buildSmallMargins:function(e,t,n){var r=n.colCount-1,i=n.rowCount-1,s=e.smallColIndex,o=e.smallRowIndex,u={};return s>0&&(u.left=t.left),r>s&&(u.right=t.right),o>0&&(u.top=t.top),i>o&&(u.bottom=t.bottom),u}}),e("pvc.visual.SmallChart",R.visual.OptionsBase.extend({init:function(e){this.base(e,"small",0,{byV1:!1,byNaked:!1})},options:{Width:{resolve:"_resolveFull",cast:$.parse,value:null},Height:{resolve:"_resolveFull",cast:$.parse,value:null},AspectRatio:{resolve:"_resolveFull",cast:e.number.toPositive,getDefault:function(){return this.chart instanceof R.PieChart?10/7:5/4}},Margins:{resolve:"_resolveFull",cast:J.as,value:new J(new $(.02))},Paddings:{resolve:"_resolveFull",cast:J.as,value:0}}})),W.prototype.getSign=function(){return this.sign||A(this)},W.prototype.getScene=function(){return this.getSign().scene()},W.prototype.getContext=function(){return this.getSign().context()},W.prototype.preBuildInstance=function(e){var t=e.data;t instanceof R.visual.Scene&&v.call(t,this.renderId())},e("pvc.visual.BasicSign",e.Object.extend({init:function(t,n){this.chart=t.chart,this.panel=t,!n.sign||e.assert("Mark already has an attached Sign."),this.pvMark=n,n.sign=this},methods:{compatVersion:function(){return this.chart.compatVersion()},localProperty:function(e,t){return this.pvMark.localProperty(e,t),this},lock:function(e,t){return this.lockMark(e,this._bindWhenFun(t,e))},optional:function(e,t,n){return this.optionalMark(e,this._bindWhenFun(t,e),n)},lockMark:function(e,t){return this.pvMark.lock(e,t),this},optionalMark:function(e,t,n){return this.pvMark[e](t,n),this},delegate:function(e,t){return this.pvMark.delegate(e,t)},delegateExtension:function(e){return this.pvMark.delegate(e,R.extensionTag)},delegateNotExtension:function(e){return this.pvMark.delegateExcept(e,R.extensionTag)},hasDelegate:function(e){return this.pvMark.hasDelegate(e)},_createPropInterceptor:function(e,t){var n=this;return function(){var r=this.sign;return r&&r===n?t.apply(n,arguments):n._getPvSceneProp(e,this.index)}},_getPvSceneProp:function(t,n){var r=this.pvMark,i=r.scene;if(i){var s=r.hasOwnProperty("index")?r.index:Math.min(n,i.length-1);if(null!=s)return i[s][t]}throw e.error.operationInvalid("Cannot evaluate inherited property.")},_bindWhenFun:function(t,n){if(e.fun.is(t)){var r=this;return r._createPropInterceptor(n,function(e){return t.call(r,e)})}return t},_lockDynamic:function(e,t){var n=this;return n.lockMark(e,n._createPropInterceptor(e,function(e){return n[t].call(n,e)}))},scene:function(){var e=this.pvMark.instance(),t=e&&e.data;return t instanceof R.visual.Scene?t:null},instanceState:function(e){return this.pvMark.instanceState(e)},context:function(e,t){var n;return t||!(n=this.instanceState())?this._createContext(e):n.cccContext||(n.cccContext=this._createContext(e))},_createContext:function(e){return new R.visual.Context(this.panel,this.pvMark,e)}}})),e("pvc.visual.Sign",R.visual.BasicSign.extend([{init:function(t,n,r){var i=this;i.base(t,n,r),i._ibits=t.ibits();var s=e.get(r,"extensionId");null!=s&&(i.extensionAbsIds=e.array.to(t._makeExtensionAbsId(s))),i.isActiveSeriesAware=e.get(r,"activeSeriesAware",!0);if(i.isActiveSeriesAware){var o=t.visualRoles,u=o&&o.series;u&&u.isBound()||(i.isActiveSeriesAware=!1)}n.wrapper(e.get(r,"wrapper")||i.createDefaultWrapper()),e.get(r,"freeColor",!0)||i._bindProperty("fillStyle","fillColor","color")._bindProperty("strokeStyle","strokeColor","color")},postInit:function(e,t,n){this._addInteractive(n),e._addSign(this)},methods:[R.visual.Interactive],"type.methods":{properties:function(t){var n;for(var r in t)void 0!==(n=t[r])&&(isNaN(+r)?this.property(r):e.string.is(n)&&this.property(n));return this},property:e.configurable(!1,function(t){var n=e.firstUpperCase(t),r="base"+n,i="default"+n,s="normal"+n,o="interactive"+n,u={};return u[t]=function(e,t){this._finished=!1,this._arg=t;var n=this[r](e,t);return null==n?null:this._finished?n:(n=this[this.showsInteraction()&&e.anyInteraction()?o:s](e,n,t),this._arg=null,n)},u[r]=function(){return this.delegateExtension()},u[i]=function(){},u[s]=function(e,t){return t},u[o]=function(e,t){return t},this.methods(u)})}},{properties:["color"]},{methods:{extensionAbsIds:null,createDefaultWrapper:function(){var e=this;return function(t){return function(n){return t.call(e.context(),n)}}},anyInteraction:function(e){return e.anyInteraction()},finished:function(e){return this._finished=!0,e},applyExtensions:function(){if(!this._extended){this._extended=!0;var e=this.extensionAbsIds;e&&e.forEach(function(e){this.panel.extendAbs(this.pvMark,e)},this)}return this},intercept:function(e,t){var n=this._createPropInterceptor(e,t);return this._intercept(e,n)},lockDimensions:function(){return this.pvMark.lock("left").lock("right").lock("top").lock("bottom").lock("width").lock("height"),this},_extensionKeyArgs:{tag:R.extensionTag},_bindProperty:function(t,n,r){var i=this;r||(r=n);var s="default"+e.firstUpperCase(r);if(e.fun.is(i[s])&&!i.pvMark.hasDelegateValue(t,R.extensionTag)){var o=function(e){return i[s](e,i._arg)};i.pvMark.intercept(t,o,i._extensionKeyArgs)}var u=this._createPropInterceptor(t,function(e){return i[n](e)});return i._intercept(t,u)},_intercept:function(t,n){var r=this.pvMark,i=this.extensionAbsIds;return i&&e.query(i).select(function(e){return this.panel._getExtensionAbs(e,t)},this).where(e.notUndef).each(function(e){e=r.wrap(e,t),r.intercept(t,e,this._extensionKeyArgs)},this),(r._intercepted||(r._intercepted={}))[t]=!0,r.intercept(t,n),this},_addInteractive:function(t){var n=this,r=e.get;if(n.interactive()){var i=n.ibits(),s=R.visual.Interactive;r(t,"noTooltip")&&(i&=~s.ShowsTooltip),r(t,"noHover")&&(i&=~s.Hoverable),r(t,"noClick")&&(i&=~s.Clickable),r(t,"noDoubleClick")&&(i&=~s.DoubleClickable),r(t,"noSelect")?i&=~s.SelectableAny:this.selectable()&&(r(t,"noClickSelect")&&(i&=~s.SelectableByClick),r(t,"noRubberSelect")&&(i&=~s.SelectableByRubberband)),n.showsInteraction()&&(r(t,"showsInteraction")===!1&&(i&=~s.ShowsInteraction),n.showsActivity()&&r(t,"showsActivity")===!1&&(i&=~s.ShowsActivity),n.showsSelection()&&r(t,"showsSelection")===!1&&(i&=~s.ShowsSelection)),n._ibits=i}n.handlesEvents()?(n.showsTooltip()&&n._addPropTooltip(r(t,"tooltipArgs")),n.hoverable()&&n._addPropHoverable(),n.handlesClickEvent()&&n._addPropClick(),n.doubleClickable()&&n._addPropDoubleClick()):n.pvMark.events("none")},fillColor:function(e){return this.color(e,"fill")},strokeColor:function(e){return this.color(e,"stroke")},defaultColor:function(e){return this.scaleColor(e)},scaleColor:function(e){return this.defaultColorSceneScale()(e)},dimColor:function(e,t){return"text"===t?R.toGrayScale(e,-0.75,null,null):R.toGrayScale(e,-0.3,null,null)},defaultColorSceneScale:function(){return e.lazy(this,"_defaultColorSceneScale",this._initDefColorScale,this)},_initDefColorScale:function(){var t=this.panel.axes.color;return t?t.sceneScale({sceneVarName:"color"}):e.fun.constant(R.defaultColor)},mayShowActive:function(e,t){if(!this.showsActivity())return!1;var n;return e.isActive||((n=e.ownerScene)&&n!==e?n.isActive:!1)||!t&&this.isActiveSeriesAware&&e.isActiveSeries()||e.isActiveDatum()},mayShowNotAmongSelected:function(e){return this.mayShowAnySelected(e)&&!e.isSelected()},mayShowSelected:function(e){return this.showsSelection()&&e.isSelected()},mayShowAnySelected:function(e){return this.showsSelection()&&e.anySelected()},_addPropTooltip:function(t){if(!this.pvMark.tooltipOptions){var n=this.panel._requireTipsy(),r=this.chart._pointingOptions,i=e.create(this.chart._tooltipOptions,e.get(t,"options"));i.isLazy=e.get(t,"isLazy",!0);var s=e.get(t,"buildTooltip")||this._getTooltipFormatter(i);if(s){var o=e.get(t,"tipsyEvent")||("near"===r.mode?"point":"mouseover");this.pvMark.localProperty("tooltip").tooltip(this._createTooltipProp(s,i.isLazy)).title(e.fun.constant("")).ensureEvents().event(o,n).tooltipOptions=i}}},_getTooltipFormatter:function(e){return this.panel._getTooltipFormatter(e)},_isTooltipEnabled:function(){return this.panel._isTooltipEnabled()},_createTooltipProp:function(e,t){var n,r=this;return n=t?function(t){var n,i=r.context(t,!0);return function(){return i&&(n=e(i),i=null),n}}:function(t){var n=r.context(t);return e(n)},function(e){return e&&e.showsTooltip()?n(e):void 0}},_addPropHoverable:function(){var e,t,n=this.chart._pointingOptions,r=this.panel;"near"===n.mode?(e="point",t="unpoint"):(e="mouseover",t="mouseout"),this.pvMark.ensureEvents().event(e,function(e){e.hoverable()&&!r.selectingByRubberband()&&!r.animating()&&(e.setActive(!0),r.renderInteractive())}).event(t,function(e){!e.hoverable()||r.selectingByRubberband()||r.animating()||e.clearActive()&&r.renderInteractive()})},_ignoreClicks:0,_propCursorClick:function(e){var t=this.ibits()&e.ibits(),n=R.visual.Interactive;return t&n.HandlesClickEvent||t&n.DoubleClickable?"pointer":null},_addPropClick:function(){var e=this;e.pvMark.cursor(e._propCursorClick.bind(e)).ensureEvents().event("click",e._handleClick.bind(e))},_addPropDoubleClick:function(){var e=this;e.pvMark.cursor(e._propCursorClick.bind(e)).ensureEvents().event("dblclick",e._handleDoubleClick.bind(e))},_handleClick:function(){var e=this,n=e.pvMark,r=n.instance(),i=r.data,s=e.doubleClickable()&&i.doubleClickable();if(s){var o=n.scene,u=n.index,a=t.event;window.setTimeout(function(){if(e._ignoreClicks)e._ignoreClicks--;else try{t.event=a,n.context(o,u,function(){e._handleClickCore()})}catch(r){t.error(r)}finally{delete t.event}},e.chart.options.doubleClickMaxDelay||300)}else e._ignoreClicks?e._ignoreClicks--:e._handleClickCore()},_handleClickCore:function(){this._onClick(this.context())},_handleDoubleClick:function(){var e=this,t=e.scene();t&&t.doubleClickable()&&(e._ignoreClicks=2,e._onDoubleClick(e.context(t)))},_onClick:function(e){e.click()},_onDoubleClick:function(e){e.doubleClick()}}}])),R.finished=function(t){return void 0===t?function(){return this.finished(this.delegate())}:e.fun.is(t)?function(){return(this.finished?this:this.getSign()).finished(t.apply(this,arguments))}:function(){return(this.finished?this:this.getSign()).finished(t)}},e("pvc.visual.Panel",R.visual.Sign.extend({init:function(n,r,i){var s=e.get(i,"panel");if(!s){var o=e.get(i,"panelType")||t.Panel;s=r.add(o)}this.base(n,s,i)},methods:{_addInteractive:function(t){var n=!0;t=e.setDefaults(t,"noSelect",n,"noHover",n,"noTooltip",n,"noClick",n,"noDoubleClick",n),this.base(t)}}})),e("pvc.visual.Label",R.visual.Sign.extend({init:function(e,n,r){var i=n.add(t.Label);this.base(e,i,r)},methods:{_addInteractive:function(t){var n=!0;t=e.setDefaults(t,"noSelect",n,"noHover",n,"noTooltip",n,"noClick",n,"noDoubleClick",n,"showsInteraction",!1),this.base(t)},defaultColor:e.fun.constant(t.Color.names.black)}}));var ot=t.Color.names.white;e("pvc.visual.ValueLabel",R.visual.Label.extend({init:function(t,n,r){this.valuesFont=e.get(r,"valuesFont")||t.valuesFont,this.valuesMask=e.get(r,"valuesMask")||t.valuesMask,this.valuesOptimizeLegibility=e.get(r,"valuesOptimizeLegibility",t.valuesOptimizeLegibility),this.valuesOverflow=e.get(r,"valuesOverflow",t.valuesOverflow),this.hideOverflowed="hide"===this.valuesOverflow,this.trimOverflowed=!this.hideOverflowed&&"trim"===this.valuesOverflow,this.hideOrTrimOverflowed=this.hideOverflowed||this.trimOverflowed;var i=e.get(r,"noAnchor",!1)?n:n.anchor(t.valuesAnchor);r&&null==r.extensionId&&(r.extensionId="label"),this.base(t,i,r),this.pvMark.font(this.valuesFont),this._bindProperty("text","text")._bindProperty("textStyle","textColor","color").intercept("visible",this.visible)},properties:["text","textStyle"],type:{methods:{maybeCreate:function(e,t,n){return e.valuesVisible&&e.valuesMask?new R.visual.ValueLabel(e,t,n):null},isNeeded:function(e){return e.valuesVisible&&e.valuesMask}}},methods:{_addInteractive:function(t){t=e.setDefaults(t,"showsInteraction",!0,"noSelect",!0,"noTooltip",!0,"noClick",!0,"noDoubleClick",!0,"noHover",!0),this.base(t)},visible:function(e){var t=this.getAnchoredToMark();if(t&&!t.visible())return!1;if(!this.hideOrTrimOverflowed)return this.delegate(!0);var n;if(this.hasDelegate(R.extensionTag)){n=this.delegateExtension();if(null!=n)return n}n=this.delegateNotExtension();if(n===!1)return!1;if(e.isActive&&this.showsActivity())return!0;var r=this.textFitInfo(e);return!r||!r.hide},textFitInfo:function(e){var t=e.renderState,n=t.textFitInfo;return void 0!==n?n:t.textFitInfo=this.calcTextFitInfo(e,this._evalBaseText())||null},calcTextFitInfo:function(){return null},_evalBaseText:function(){var e=this.pvMark,t=e.binds.properties.text.proto;return e.evalInPropertyContext(this.baseText.bind(this),t)},baseText:function(e){var t=e.renderState,n=t.baseText;return void 0!==n?n:this.base(e)},defaultText:function(e){return e.format(this.valuesMask)},normalText:function(e,t){var n;return this.trimOverflowed&&(n=this.textFitInfo(e))?this.trimText(e,t,n):t},interactiveText:function(e,t){var n;return!this.trimOverflowed||e.isActive&&this.showsActivity()||!(n=this.textFitInfo(e))?t:this.trimText(e,t,n)},trimText:function(e,t,n){var r=n&&n.widthMax;return null!=r?R.text.trimToWidthB(r,t,this.pvMark.font(),".."):t},textColor:function(e){return this.color(e,"text")},backgroundColor:function(t,n){var r=this.instanceState();if(!r)return this.calcBackgroundColor(t,n);var i=e.lazy(r,"cccBgColorCache");return e.getOwn(i,n)||(i[n]=this.calcBackgroundColor(t,n))},calcBackgroundColor:function(e){var t=this.getAnchoredToMark();if(t){var n=t.fillStyle();if(n&&n!==ot&&this.isAnchoredInside(e,t))return n}return ot},getAnchoredToMark:function(){return this.pvMark.target||this.pvMark.parent},isAnchoredInside:function(e,n){if(!n&&!(n=this.getAnchoredToMark()))return!1;var r,i=this.pvMark,s=i.text(),o=t.Text.measure(s,i.font()),u=i.left(),a=i.top();null==u&&(r=i.parent,u=r.width()-(i.right()||0)),null==a&&(r||(r=i.parent),a=r.height()-(i.bottom()||0));var f=t.Label.getPolygon(o.width,o.height,i.textAlign(),i.textBaseline(),i.textAngle(),i.textMargin()).center().plus(u,a),l=n.getShape(n.scene,i.index);return l.containsPoint(f)},maybeOptimizeColorLegibility:function(e,t,n){if(this.valuesOptimizeLegibility){var r=this.backgroundColor(e,n);return r&&r!==ot&&r.isDark()===t.isDark()?t.complementary().alpha(.9):t}return t},normalColor:function(e,t,n){return this.maybeOptimizeColorLegibility(e,t,n)},interactiveColor:function(e,t,n){return!this.mayShowActive(e)&&this.mayShowNotAmongSelected(e)?this.dimColor(t,n):this.maybeOptimizeColorLegibility(e,t,n)}}})),e("pvc.visual.Dot",R.visual.Sign.extend({init:function(n,r,i){var s=r.add(t.Dot),o=e.get(i,"proto");o&&s.extend(o),i=e.setDefaults(i,"freeColor",!1),this.base(n,s,i);if(!e.get(i,"freePosition",!1)){var u=n.isOrientationVertical()?"left":"bottom",a=n.anchorOrtho(u);this._lockDynamic(u,"x")._lockDynamic(a,"y")}this._bindProperty("shape","shape")._bindProperty("shapeRadius","radius")._bindProperty("shapeSize","size"),this.optional("strokeDasharray",void 0).optional("lineWidth",1.5)},properties:["size","shape"],methods:{y:e.fun.constant(0),x:e.fun.constant(0),radius:function(){this.instanceState().cccRadius=this.delegateExtension()},baseSize:function(t){var n=this.instanceState().cccRadius;return null!=n?e.sqr(n):this.base(t)},defaultSize:e.fun.constant(12),interactiveSize:function(e,t){return this.mayShowActive(e,!0)?2.5*Math.max(t,5):t},interactiveColor:function(e,t,n){if(this.mayShowActive(e,!0)){if("stroke"===n)return t.brighter(1)}else if(this.mayShowNotAmongSelected(e)){if(this.mayShowActive(e))return t.alpha(.8);switch(n){case"fill":return this.dimColor(t,n);case"stroke":return t.alpha(.45)}}return this.base(e,t,n)}}})),e("pvc.visual.DotSizeColor",R.visual.Dot.extend({init:function(e,n,r){this.base(e,n,r),this._bindProperty("lineWidth","strokeWidth").intercept("visible",function(e){if(!this.canShow(e))return!1;var t=this.delegateExtension();return null==t?this.defaultVisible(e):t}),this._initColor(),this._initSize();if(this.isSizeBound){var i=e.axes.size;if(i.scaleUsesAbs()){this.isSizeAbs=!0;var s=this._sceneDefColor;this._sceneDefColor=function(e,n){return"stroke"===n&&e.vars.size.value<0?t.Color.names.black:s.call(this,e,n)},this.pvMark.lineCap("round").strokeDasharray(function(e){return e.vars.size.value<0?"dash":null})}}},properties:["strokeWidth"],methods:{isColorBound:!1,isColorDiscrete:!1,isSizeBound:!1,isSizeAbs:!1,canShow:function(e){return!e.isIntermediate},defaultVisible:function(e){return!e.isNull&&(!this.isSizeBound&&!this.isColorBound||this.isSizeBound&&null!=e.vars.size.value||this.isColorBound&&(this.isColorDiscrete||null!=e.vars.color.value))},_initColor:function(){var t,n,r=this.panel,i=r.visualRoles.color;if(i){this.isColorDiscrete=i.isDiscrete();var s=r.axes.color;i.isBound()?(this.isColorBound=!0,n=s.sceneScale({sceneVarName:"color"})):s&&(t=s.option("Unbound"))}this._sceneDefColor=n||e.fun.constant(t||R.defaultColor)},_initSize:function(){var t,n,r=this.panel,i=r.plot,s=i.option("Shape"),o=i.option("NullShape"),u=r.visualRoles.size;if(u){var a=r.axes.size,f=a&&a.scale,l=!!f&&u.isBound();if(l){this.isSizeBound=!0;var c=f.min+.05*(f.max-f.min);this.nullSizeShapeHasStrokeOnly="cross"===o,n=function(e){return null!=e.vars.size.value?s:o},t=function(e){var t=e.vars.size.value;return null!=t?f(t):o?c:0}}}t||(n=e.fun.constant(s),t=function(e){return this.base(e)}),this._sceneDefSize=t,this._sceneDefShape=n},defaultColor:function(e,t){return this._sceneDefColor(e,t)},normalColor:function(e,t,n){return"stroke"===n?t.darker():this.base(e,t,n)},interactiveColor:function(e,t,n){if(this.mayShowActive(e,!0))switch(n){case"fill":return this.isSizeBound?t.alpha(.75):t;case"stroke":return t.darker()}else if(this.showsSelection()){var r=e.isSelected(),i=!r&&e.anySelected();if(i){if(this.mayShowActive(e))return t.alpha(.8);switch(n){case"fill":return this.dimColor(t,n);case"stroke":return t.alpha(.45)}}if(r&&c(t))return t.darker("stroke"===n?3:2)}return"stroke"===n?t.darker():t},defaultSize:function(e){return this._sceneDefSize(e)},defaultShape:function(e){return this._sceneDefShape(e)},interactiveSize:function(t,n){if(!this.mayShowActive(t,!0))return n;var r=Math.sqrt(n),i=Math.max(1,Math.min(1.1*r,2));return e.sqr(r+i)},defaultStrokeWidth:function(e){return this.nullSizeShapeHasStrokeOnly&&null==e.vars.size.value?1.8:1},interactiveStrokeWidth:function(e,t){return this.mayShowActive(e,!0)?2*t:this.mayShowSelected(e)?1.5*t:t}}})),t.LineInterm=function(){t.Line.call(this)},t.LineInterm.prototype=t.extend(t.Line),t.LineInterm.prototype.getNearestInstanceToMouse=function(e,n){var r=t.Line.prototype.getNearestInstanceToMouse.call(this,e,n),i=e[r];return i&&i.data&&i.data.isIntermediate&&r+1<e.length&&r++,r},e("pvc.visual.Line",R.visual.Sign.extend({init:function(n,r,i){var s=r.add(t.LineInterm);this.base(n,s,i),this.lock("segmented","smart").lock("antialias",!0);if(!e.get(i,"freePosition",!1)){var o=n.isOrientationVertical()?"left":"bottom",u=n.anchorOrtho(o);this._lockDynamic(u,"y")._lockDynamic(o,"x")}this._bindProperty("strokeStyle","strokeColor","color")._bindProperty("lineWidth","strokeWidth")},properties:["strokeWidth"],methods:{_addInteractive:function(t){t=e.setDefaults(t,"noTooltip",!0),this.base(t)},y:e.fun.constant(0),x:e.fun.constant(0),defaultStrokeWidth:e.fun.constant(1.5),interactiveStrokeWidth:function(e,t){return this.mayShowActive(e)?2.5*Math.max(1,t):t},interactiveColor:function(e,n,r){return this.mayShowNotAmongSelected(e)?this.mayShowActive(e)?t.Color.names.darkgray.darker().darker():this.dimColor(n,r):this.base(e,n,r)}}})),t.AreaInterm=function(){t.Area.call(this)},t.AreaInterm.prototype=t.extend(t.Area),t.AreaInterm.prototype.getNearestInstanceToMouse=function(e,n){var r=t.Area.prototype.getNearestInstanceToMouse.call(this,e,n),i=e[r];return i&&i.data&&i.data.isIntermediate&&r+1<e.length&&r++,r},e("pvc.visual.Area",R.visual.Sign.extend({init:function(n,r,i){var s=r.add(t.AreaInterm);i||(i={}),i.freeColor=!0,this.base(n,s,i);var o=e.get(i,"antialias",!0);this.lock("segmented","smart").lock("antialias",o);if(!e.get(i,"freePosition",!1)){var u=n.isOrientationVertical()?"left":"bottom",a=n.anchorOrtho(u),f=n.anchorOrthoLength(a);this._lockDynamic(u,"x")._lockDynamic(a,"y")._lockDynamic(f,"dy")}this._bindProperty("fillStyle","fillColor","color"),this.lock("strokeStyle",null).lock("lineWidth",0)},methods:{_addInteractive:function(t){t=e.setDefaults(t,"noTooltip",!0),this.base(t)},y:e.fun.constant(0),x:e.fun.constant(0),dy:e.fun.constant(0),interactiveColor:function(e,t,n){return"fill"===n&&this.mayShowNotAmongSelected(e)?this.dimColor(t,n):this.base(e,t,n)}}})),e("pvc.visual.Bar",R.visual.Sign.extend({init:function(n,r,i){var s=r.add(t.Bar);i=e.setDefaults(i,"freeColor",!1),this.base(n,s,i),this.normalStroke=e.get(i,"normalStroke",!1),this._bindProperty("lineWidth","strokeWidth")},properties:["strokeWidth"],methods:{normalColor:function(e,t,n){return"stroke"!==n||this.normalStroke?t:null},interactiveColor:function(e,n,r){if("stroke"===r){if(this.mayShowActive(e,!0))return n.brighter(1.3).alpha(.7);if(!this.normalStroke)return null;if(this.mayShowNotAmongSelected(e))return this.mayShowActive(e)?t.Color.names.darkgray.darker().darker():this.dimColor(n,r);if(this.mayShowActive(e))return n.brighter(1).alpha(.7)}else if("fill"===r){if(this.mayShowActive(e,!0))return n.brighter(.2).alpha(.8);if(this.mayShowNotAmongSelected(e))return this.mayShowActive(e)?t.Color.names.darkgray.darker(2).alpha(.8):this.dimColor(n,r);if(this.mayShowActive(e))return n.brighter(.2).alpha(.8)}return this.base(e,n,r)},defaultStrokeWidth:function(){return.5},interactiveStrokeWidth:function(e,t){return this.mayShowActive(e,!0)?1.3*Math.max(1,t):t}}})),e("pvc.visual.Rule",R.visual.Sign.extend({init:function(n,r,i){var s=r.add(t.Rule);s.pointingRadiusMax(2);var o=e.get(i,"proto");o&&s.extend(o),this.base(n,s,i),e.get(i,"freeStyle")||this._bindProperty("strokeStyle","strokeColor","color")._bindProperty("lineWidth","strokeWidth")},properties:["strokeWidth"],methods:{_addInteractive:function(t){var n=!0;t=e.setDefaults(t,"noHover",n,"noSelect",n,"noTooltip",n,"noClick",n,"noDoubleClick",n,"showsInteraction",!1),this.base(t)},defaultStrokeWidth:e.fun.constant(1),interactiveStrokeWidth:function(e,t){return this.mayShowActive(e,!0)?2.2*Math.max(1,t):t},interactiveColor:function(e,t,n){return e.datum&&!this.mayShowActive(e,!0)&&this.mayShowNotAmongSelected(e)?this.dimColor(t,n):this.base(e,t,n)}}})),e.space("pvc.visual").discreteBandsLayout=M;var ut=e("pvc.visual.CartesianAxis",et.extend({init:function(e,t,n,r){var i=e.options;this.orientation=ut.getOrientation(t,i.orientation),this.orientedId=ut.getOrientedId(this.orientation,n),e._allowV1SecondAxis&&1===n&&(this.v1SecondOrientedId="second"+this.orientation.toUpperCase()),this.base(e,t,n,r),e.axes[this.orientedId]=this,this.v1SecondOrientedId&&(e.axes[this.v1SecondOrientedId]=this),this.extensionPrefixes=B.call(this)},methods:{bind:function(e){return this.base(e),this._syncExtensionPrefixes(),this},_syncExtensionPrefixes:function(){this.extensionPrefixes=B.call(this)},setScale:function(e){var t=this.scale;this.base(e),t&&(delete this.domain,delete this.ticks,delete this._roundingPaddings);if(e&&!e.isNull&&"discrete"!==this.scaleType){this.domain=e.domain(),this.domain.minLocked=!!e.minLocked,this.domain.maxLocked=!!e.maxLocked;var n=this.option("DomainRoundMode");"nice"===n&&e.nice();var r=this.option("TickFormatter");r&&e.tickFormatter(r)}return this},setTicks:function(t){var n=this.scale;n&&!n.isNull||e.fail.operationInvalid("Scale must be set and non-null."),this.ticks=t;if("discrete"!==n.type&&"tick"===this.option("DomainRoundMode")){delete this._roundingPaddings;var r=t?t.length:0,i=this.domain[0],s=this.domain[1];r>=2?this.scale.domain(Math.min(i,t[0]),Math.max(s,t[r-1])):this.scale.domain(i,s)}},setScaleRange:function(e){var t=this.getScaleRangeInfo();t&&(null!=t.value?e=t.value:null!=t.min&&(e=Math.max(Math.min(e,t.max),t.min)));var n=this.scale;return n.min=0,n.max=e,n.size=e,"discrete"===n.type?t&&("abs"===t.mode?n.splitBandedCenterAbs(n.min,n.max,t.band,t.space):n.splitBandedCenter(n.min,n.max,t.ratio)):n.range(n.min,n.max),n},getScaleRangeInfo:function(){if(!this.isDiscrete())return null;var e=R.visual.discreteBandsLayout(this.domainItemCount(),this.option("BandSize"),this.option("BandSizeMin")||0,this.option("BandSizeMax"),this.option("BandSpacing"),this.option("BandSpacingMin")||0,this.option("BandSpacingMax"),this.option("BandSizeRatio"));return e&&this.chart.parent?{mode:"rel",min:0,max:1/0,ratio:e.ratio}:e},getScaleRoundingPaddings:function(){var t=this._roundingPaddings;if(!t){t={begin:0,end:0,beginLocked:!1,endLocked:!1};var n=this.scale;if(n&&!n.isNull&&"discrete"!==n.type){var r=this.domain;t.beginLocked=r.minLocked,t.endLocked=r.maxLocked;if("numeric"===n.type&&"none"!==this.option("DomainRoundMode")){var i=n.domain(),s=this.domain||e.assert("Original domain must be set"),o=i[1]-i[0];if(o){var u=s[0]-i[0];u>0&&(t.begin=u/o),u=i[1]-s[1],u>0&&(t.end=u/o)}}}this._roundingPaddings=t}return t},calcContinuousTicks:function(e){return this.scale.ticks(this.desiredTickCount(),{roundInside:"tick"!==this.option("DomainRoundMode"),tickCountMax:e,precision:this.option("TickUnit"),precisionMin:this.tickUnitMinEf(),precisionMax:this.tickUnitMaxEf()})},desiredTickCount:function(){var e=this.option("DesiredTickCount"),t="timeSeries"===this.scaleType;return null==e?t?null:1/0:t&&isFinite(e)&&e>10?10:e},tickUnitMinEf:function(){var e=this.option("TickUnitMin"),t=this.option("TickExponentMin");return null==e&&(e=0),null!=t&&isFinite(t)&&(e=Math.max(e,Math.pow(10,Math.floor(t)))),e},tickUnitMaxEf:function(){var e=this.option("TickUnitMax"),t=this.option("TickExponentMax");return null==e&&(e=1/0),null!=t&&isFinite(t)&&(e=Math.min(e,9.999*Math.pow(10,Math.floor(t)))),e},_registerResolversNormal:function(e){this.chart.compatVersion()<=1&&e.push(this._resolveByV1OnlyLogic),e.push(this._resolveByOptionId,this._resolveByOrientedId),1===this.index&&e.push(this._resolveByV1OptionId),e.push(this._resolveByScaleType,this._resolveByCommonId)},_resolveByOrientedId:R.options.specify(function(e){return this._chartOption(this.orientedId+"Axis"+e.name)}),_resolveByV1OptionId:R.options.specify(function(e){return this._chartOption("secondAxis"+e.name)}),_resolveByScaleType:R.options.specify(function(e){var t=this.scaleType;if(t){var n=e.name,r=this._chartOption(t+"Axis"+n);return void 0===r&&"discrete"!==t&&(r=this._chartOption("continuousAxis"+n)),r}}),_resolveByCommonId:R.options.specify(function(e){return this._chartOption("axis"+e.name)})}}));ut.getOrientation=function(e,t){return"base"===e==("vertical"===t)?"x":"y"},ut.getOrientedId=function(e,t){return 0===t?e:e+(t+1)};var at={resolve:"_resolveFull",data:{resolveV1:function(e){return this.index||"ortho"!==this.type||this._specifyChartOption(e,this.id+e.name),!0}}},ft={resolveV1:function(e){if(this.index){if(this._resolveByV1OptionId(e))return!0}else if(this._resolveByOrientedId(e))return!0;return this._resolveDefault(e),!0}},lt=R.options.defaultValue(function(){if(!this.typeIndex)return"x"===this.orientation?"bottom":"left";var e=this.chart.axesByType[this.type].first,t=e.option("Position");return R.BasePanel.oppositeAnchor[t]});ut.options({Visible:{resolve:"_resolveFull",data:{resolveV1:function(t){if(this.index<=1){var n=0===this.index?e.firstUpperCase(this.orientation):"Second";this._specifyChartOption(t,"show"+n+"Scale")}return!0}},cast:Boolean,value:!0},Composite:{resolve:function(e){return this.index>0?(e.specify(!1),!0):this._resolveFull(e)},data:{resolveV1:function(e){return this._specifyChartOption(e,"useCompositeAxis"),!0}},cast:Boolean,value:!1},Size:{resolve:"_resolveFull",data:ft,cast:P},SizeMax:{resolve:"_resolveFull",cast:P},Position:{resolve:"_resolveFull",data:{resolveV1:ft.resolveV1,resolveDefault:lt},cast:D},FixedMin:at,FixedMax:at,OriginIsZero:{resolve:"_resolveFull",data:{resolveV1:function(e){switch(this.index){case 0:this._specifyChartOption(e,"originIsZero");break;case 1:this.chart._allowV1SecondAxis&&this._specifyChartOption(e,"secondAxisOriginIsZero")}return!0}},cast:Boolean,value:!0},DomainScope:{resolve:"_resolveFull",cast:_,value:"global"},Offset:{resolve:"_resolveFull",data:{resolveV1:function(e){switch(this.index){case 0:this._specifyChartOption(e,"axisOffset");break;case 1:this.chart._allowV1SecondAxis&&this._specifyChartOption(e,"secondAxisOffset")}return!0}},cast:e.number.to},BandSizeRatio:{resolve:function(e){return this._resolveFull(e)||this._specifyChartOption(e,"panelSizeRatio")},cast:function(t){return t=e.number.toNonNegative(t),null!=t&&t>1&&(t=null),t},getDefault:function(){return this.chart._defaultAxisBandSizeRatio}},BandSize:{resolve:"_resolveFull",cast:e.number.toNonNegative},BandSpacing:{resolve:"_resolveFull",cast:e.number.toNonNegative},BandSizeMin:{resolve:"_resolveFull",cast:e.number.toNonNegative},BandSpacingMin:{resolve:"_resolveFull",cast:e.number.toNonNegative},BandSizeMax:{resolve:"_resolveFull",cast:e.number.toNonNegative},BandSpacingMax:{resolve:"_resolveFull",cast:e.number.toNonNegative},LabelSpacingMin:{resolve:"_resolveFull",cast:e.number.to},OverlappedLabelsMode:{resolve:"_resolveFull",cast:R.parseOverlappedLabelsMode,value:"rotatethenhide"},Grid:{resolve:"_resolveFull",data:{resolveV1:function(e){return this.index||this._specifyChartOption(e,this.orientation+"AxisFullGrid"),!0}},cast:Boolean,value:!1},GridCrossesMargin:{resolve:"_resolveFull",cast:Boolean,value:!0},EndLine:{resolve:"_resolveFull",cast:Boolean},ZeroLine:{resolve:"_resolveFull",cast:Boolean,value:!0},RuleCrossesMargin:{resolve:"_resolveFull",cast:Boolean,value:!0},Ticks:{resolve:"_resolveFull",cast:Boolean},DesiredTickCount:{resolve:"_resolveFull",data:{resolveV1:ft.resolveV1,resolveDefault:function(e){return this.chart.compatVersion()<=1?(e.defaultValue(5),!0):void 0}},cast:e.number.toPositive},MinorTicks:{resolve:"_resolveFull",data:ft,cast:Boolean,value:!0},TickFormatter:{resolve:"_resolveFull",cast:e.fun.as},DomainRoundMode:{resolve:"_resolveFull",data:{resolveV1:ft.resolveV1,resolveDefault:function(e){return this.chart.compatVersion()<=1?(e.defaultValue("none"),!0):void 0}},cast:R.parseDomainRoundingMode,value:"tick"},TickExponentMin:{resolve:"_resolveFull",cast:e.number.to},TickExponentMax:{resolve:"_resolveFull",cast:e.number.to},TickUnit:{resolve:"_resolveFull"},TickUnitMin:{resolve:"_resolveFull"},TickUnitMax:{resolve:"_resolveFull"},Title:{resolve:"_resolveFull",cast:String},TitleSize:{resolve:"_resolveFull",cast:H},TitleSizeMax:{resolve:"_resolveFull",cast:H},TitleFont:{resolve:"_resolveFull",cast:String},TitleMargins:{resolve:"_resolveFull",cast:J.as},TitlePaddings:{resolve:"_resolveFull",cast:J.as},TitleAlign:{resolve:"_resolveFull",cast:function(e){var t=this.option("Position");return R.parseAlign(t,e)}},Font:{resolve:"_resolveFull",cast:String},ClickAction:{resolve:"_resolveFull",data:ft},DoubleClickAction:{resolve:"_resolveFull",data:ft},TooltipEnabled:{resolve:"_resolveFull",cast:Boolean,value:!0},TooltipFormat:{resolve:"_resolveFull",cast:e.fun.as,value:null},TooltipAutoContent:{resolve:"_resolveFull",cast:R.parseTooltipAutoContent,value:"value"}}),e.type("pvc.visual.CartesianAxisRootScene",R.visual.Scene),e.type("pvc.visual.CartesianAxisTickScene",R.visual.Scene).init(function(t,n){this.base(t,n),this.vars.tick=new Z(e.get(n,"tick"),e.get(n,"tickLabel"),e.get(n,"tickRaw")),e.get(n,"isHidden")&&(this.isHidden=!0)}).add({isHidden:!1}),e.type("pvc.AxisPanel",R.BasePanel).init(function(t,n,r,i){i=e.create(i,{anchor:r.option("Position")});var s=i.anchor||this.anchor;this.axis=r,this.base(t,n,i),this.roleName=r.role.name,this.isDiscrete=r.role.isDiscrete(),this._extensionPrefix=r.extensionPrefixes,null==this.labelSpacingMin&&(this.labelSpacingMin=this.isDiscrete?.25:1.1),null==this.showTicks&&(this.showTicks=!this.isDiscrete);if(void 0===i.font){var o=this._getConstantExtension("label","font");o&&(this.font=o)}if(void 0===i.tickLength){var u=+this._getConstantExtension("ticks",this.anchorOrthoLength(s));!isNaN(u)&&isFinite(u)&&(this.tickLength=u)}var a=this._getConstantExtension("label","visible");null==a||a||(this.showLabels=!1)}).add({pvRule:null,pvTicks:null,pvLabel:null,pvRuleGrid:null,pvScale:null,isDiscrete:!1,roleName:null,axis:null,anchor:"bottom",tickLength:6,scale:null,ruleCrossesMargin:!0,font:"9px sans-serif",labelSpacingMin:null,showMinorTicks:!0,showTicks:null,showLabels:!0,hiddenLabelText:"·",_isScaleSetup:!1,_createLogId:function(){return this.base()+" - "+this.axis.id},getTicks:function(){return this._layoutInfo&&this._layoutInfo.ticks},_calcLayout:function(e){var t=this.axis.scale,n=e.clientSize;this._isScaleSetup||(this.pvScale=t,this.scale=t,this.extend(t,"scale"),this._isScaleSetup=!0);if(t.isNull)e.axisSize=0;else{var r=this.anchorLength(),i=this.axis.getScaleRangeInfo();i&&(null!=i.value?n[r]=i.value:null!=i.min&&(n[r]=Math.max(Math.min(n[r],i.max),i.min))),this._calcLayoutCore(e)}return this.createAnchoredSize(e.axisSize,n)},_calcLayoutCore:function(e){var t=e.desiredClientSize[this.anchorOrthoLength()];e.axisSize=t,this.isDiscrete&&this.useCompositeAxis?null==e.axisSize&&(e.axisSize=50):(this._readTextProperties(e),this._calcTicks(),"discrete"===this.scale.type&&(this._tickIncludeModulo=this._calcDiscreteTicksIncludeModulo()),this._calcAxisSizeFromLabel(e),null==e.axisSize&&(e.axisSize=e.requiredAxisSize),this._calcMaxTextLengthThatFits(),this._calcOverflowPaddings())},_calcAxisSizeFromLabel:function(e){this.showLabels&&this._calcTicksLabelBBoxes(e),this._calcAxisSizeFromLabelBBox(e)},_readTextProperties:function(t){var n=this._getExtension("label","textAngle");t.isTextAngleFixed=null!=n,t.textAngle=e.number.to(n,0),t.textMargin=e.number.to(this._getExtension("label","textMargin"),3);var r=this._getExtension("label","textAlign");"string"!=typeof r&&(r=this.isAnchorTopOrBottom()?"center":"left"==this.anchor?"right":"left"),t.textAlign=r;var i=this._getExtension("label","textBaseline");if("string"!=typeof i)switch(this.anchor){case"right":case"left":case"center":i="middle";break;case"bottom":i="top";break;default:i="bottom"}t.textBaseline=i},_calcAxisSizeFromLabelBBox:function(t){var n=t.maxLabelBBox,r=n?this._getLabelBBoxQuadrantLength(n,this.anchor):0,i=(this.showTicks||this.showLabels?this.tickLength:0)+r,s=n?n.sourceAngle:0;!this.showLabels||0===s&&this.isAnchorTopOrBottom()||(i+=this.tickLength),t.requiredAxisSize=Math.max(1,i,e.number.as(this._getConstantExtension("rule","linewidth"),1)/2)},_getLabelBBoxQuadrantLength:function(e,t){var n;switch(t){case"left":n=-e.x;break;case"right":n=e.x2;break;case"top":n=-e.y;break;case"bottom":n=e.y2}return Math.max(n,0)},_calcOverflowPaddings:function(){this._layoutInfo.canChange?this.showLabels&&this._calcOverflowPaddingsFromLabelBBox():e.debug>=2&&this.log.warn("Layout cannot change. Skipping calculation of overflow paddings.")},_calcOverflowPaddingsFromLabelBBox:function(){var t=null,n=this,r=n._layoutInfo,i=r.ticks,s=i.length;if(s){var o=r.ticksBBoxes,u=r.paddings,a=n.isAnchorTopOrBottom(),f=a?"left":"bottom",l=a?"right":"top",c=n.scale,h="discrete"===c.type,p=r.clientSize[n.anchorLength()];this.axis.setScaleRange(p);var d=function(r,s,o,a){var f=n._getLabelBBoxQuadrantLength(r,s);if(f>1){var l=c(h?i[a].value:i[a]),d=o?l-f:l+f,v=Math.max(0,o?-d:d-p);if(v>1){v-=u[s]||0;if(v>1){h&&(v*=1.05);if(t){var m=t[s];(null==m||v>m)&&(t[s]=v)}else t=e.set({},s,v)}}}};o.forEach(function(e,t){d(e,f,!0,t),d(e,l,!1,t)}),e.debug>=6&&t&&n.log("OverflowPaddings = "+e.describe(t))}r.overflowPaddings=t},_calcMaxTextLengthThatFits:function(){var n=this._layoutInfo;if(this.compatVersion()<=1)n.maxTextWidth=null;else{var r=n.clientSize[this.anchorOrthoLength()],i=Math.min(n.axisSize,r);if(i>=n.requiredAxisSize-this.tickLength)n.maxTextWidth=null;else{var s,o,u=n.maxLabelBBox,a=i-this.tickLength;switch(this.anchor){case"left":o=t.vector(0,1),s=t.vector(-a,0);break;case"right":o=t.vector(0,1),s=t.vector(a,0);break;case"top":o=t.vector(1,0),s=t.vector(0,-a);break;case"bottom":o=t.vector(1,0),s=t.vector(0,a)}var f=s.norm(),l=u.source.points(),c=l[0],h=l[1],p=l[2],d=l[3],v=p.minus(d),m=h.minus(c),g=t.SvgScene.lineIntersect,y=g(s,o,c,m),b=g(s,o,d,v),w=u.sourceTextWidth,E=w,S=y.minus(c),x=S.length();w>=x&&S.dot(v)>=0&&(E=c.dot(f)<h.dot(f)?x:y.minus(h).length());var T=b.minus(d),N=T.length();w>=N&&T.dot(v)>=0&&(E=d.dot(f)<p.dot(f)?Math.min(E,N):Math.min(E,b.minus(p).length()));if("center"===u.sourceAlign){var C=w-E;E-=C}n.maxTextWidth=E,e.debug>=3&&this.log("Trimming labels' text at length "+E.toFixed(2)+"px maxOrthoLength="+a.toFixed(2)+"px")}}},_calcTicks:function(){var n=this._layoutInfo;n.textHeight=4*t.Text.fontHeight(this.font)/5,n.maxTextWidth=null,this.axis.setTicks(null);switch(this.scale.type){case"discrete":this._calcDiscreteTicks();break;case"timeSeries":case"numeric":this._calcContinuousTicks();break;default:throw e.error.operationInvalid("Undefined axis scale type")}this.axis.setTicks(n.ticks);var r=n.clientSize[this.anchorLength()];this.axis.setScaleRange(r),null==n.maxTextWidth&&this._calcTicksTextLength(n)},_calcDiscreteTicks:function(){var n=this.axis,r=this._layoutInfo;r.ticks=n.domainItems();var i,s=n.role.grouping,o=n.option("TickFormatter");if(s.lastDimensionValueType()===Date){var u=n.domainValues(),a=e.query(u).range();if(a&&a.min!==a.max){var f=new t.Scale.linear(a.min,a.max),l=f.ticks();o?(e.copyProps(u,l,["step","base","mult","format"]),i=function(e,t){return o.call(u,u[t],u.step,t)}):i=function(e,t){return l.format(u[t])}}else if(o){var c=s.lastDimensionType().formatter();u.step=u.base=R.time.intervals.d,u.mult=1,u.format=function(e){return c(e)},i=function(e,t){return o.call(u,u[t],u.step,t)}}}else o&&(i=function(e){return o(e.value,e.absLabel)});i||(i=function(e){return e.absLabel}),r.ticksText=r.ticks.map(i),this._clearTicksTextDeps(r)},_clearTicksTextDeps:function(e){e.maxTextWidth=e.ticksTextLength=e.ticksBBoxes=null},_calcContinuousTicks:function(){var t=e.debug>=7;t&&this.log("_calcContinuousTicks");var n=this._layoutInfo;n.ticks=n.ticksText=null;var r=this._calcContinuousBandSizeMin(),i=n.clientSize[this.anchorLength()],s=this._calcContinuousTickCountMax(r,i),o=n.ticks,u="tick"===this.axis.option("DomainRoundMode");if(!o||o.length>(u?3:1)&&o.length>s)this._calcContinuousTicksValue(n,s),this._calcContinuousTicksText(n),o=n.ticks;if(u){var a=o.length;a>s&&2>=s&&3>=a&&(a-1)*r>i&&(3===a?(n.ticksText[0]="",n.ticksText[2]="",n.maxTextWidth=null):2===a&&(n.ticksText[o[1]?1:0]="",n.maxTextWidth=null))}e.debug>=5&&this.log("_calcContinuousTicks RESULT count="+o.length+" step="+o.step),t&&this.log("_calcContinuousTicks END")},_calcContinuousTicksValue:function(t,n){t.ticks=this.axis.calcContinuousTicks(n),e.debug>4&&(this.log("DOMAIN: "+e.describe(this.scale.domain())),this.log("TICKS:  "+e.describe(t.ticks)))},_calcContinuousTicksText:function(e){var t=e.ticksText=e.ticks.map(function(e,t){return this.scale.tickFormat(e,t)},this);return this._clearTicksTextDeps(e),t},_calcContinuousTickCountMax:function(e,t){if(!e&&this.showLabels)return 1;var n=this._layoutInfo,r=n.textHeight*Math.max(0,this.labelSpacingMin);return 1+Math.floor(t/(e+r))},_calcContinuousBandSizeMin:function(){var e=this.scale.domain(),t=Math.abs(e[1]-e[0]);if(1e-10>t||!isFinite(t))return 0;var n=this._layoutInfo;return this.isAnchorTopOrBottom()?(this._calcContinuousTicksValue(n),this._calcTicksTextLength(n),Math.max(n.maxTextWidth,n.textHeight)):n.textHeight},_calcTicksTextLength:function(e){var n=0,r=this.font,i=e.ticksText||this._calcContinuousTicksText(e),s=e.ticksTextLength=i.map(function(e){var i=t.Text.measureWidth(e,r);return i>n&&(n=i),i});return e.maxTextWidth=n,e.ticksBBoxes=null,s},_calcTicksLabelBBoxes:function(e){var t,n=this,r=n._layoutInfo,i=e.ticksTextLength||n._calcTicksTextLength(e),s=r.maxTextWidth;e.ticksBBoxes=i.map(function(e){var r=n._calcLabelBBox(e);return t||e!==s||(t=r),r},n),r.maxLabelBBox=t},_calcLabelBBox:function(e){var t=this._layoutInfo;return R.text.getLabelBBox(e,t.textHeight,t.textAlign,t.textBaseline,t.textAngle,t.textMargin)},_calcDiscreteTicksIncludeModulo:function(){var e=this.axis.option("OverlappedLabelsMode");if("hide"!==e&&"rotatethenhide"!==e)return 1;var n=this._layoutInfo,r=n.ticks,i=r.length;if(2>=i)return 1;var s=this.scale.range().step,o=n.textHeight,u=n.maxTextWidth;if(u>0&&o>0&&s>0){var a=o*this.labelSpacingMin,f=a,l=t.Text.measureWidth("x",this.font),c=l+a,h=n.textAngle,p=this.isAnchorTopOrBottom(),d=Math.abs(Math[p?"sin":"cos"](h)),v=Math.abs(Math[p?"cos":"sin"](h)),m=1e-8>d?1/0:Math.ceil((f+o)/(s*d)),g=1e-8>v?1/0:Math.ceil((c+u)/(s*v)),y=Math.min(m,g);return(!isFinite(y)||1>y||Math.ceil(i/y)<2)&&(y=1),y}return 1},_createCore:function(){if(!this.scale.isNull){var t=this._layoutInfo.clientSize,n=this._layoutInfo.paddings,r=this.anchorOrtho(),i=this.anchorOpposite(r),s=this.anchorOrthoLength(r),o=this.ruleCrossesMargin?-n[r]:0,u=t[s]+(this.ruleCrossesMargin?n[i]:0),a=u-o;this._rSize=a;var f=this._getRootScene();this.pvRule=(new R.visual.Rule(this,this.pvPanel,{extensionId:"rule"})).lock("data",[f]).override("defaultColor",e.fun.constant("#666666")).lock(this.anchorOpposite(),0).lock(r,o).lock(s,a).pvMark.zOrder(30).strokeDasharray(null).lineCap("square"),this.isDiscrete?this.useCompositeAxis?this.renderCompositeOrdinalAxis():this.renderOrdinalAxis():this.renderLinearAxis()}},_getExtensionId:function(){return""},_getRootScene:function(){if(!this._rootScene){var t=this._rootScene=new R.visual.CartesianAxisRootScene(null,{panel:this,source:this._getRootData()}),n=this._layoutInfo,r=n.ticks,i=n.ticksText;if(this.isDiscrete)if(this.useCompositeAxis)this._buildCompositeScene(t);else{var s,o,u,a,f,l=this._tickIncludeModulo,c=this.hiddenLabelText;t.vars.tickIncludeModulo=l,t.vars.hiddenLabelText=c,l>2&&(e.debug>=3&&this.log.info("Showing only one in every "+l+" tick labels"),f=t.group.owner.keySep,u=function(){var e=s.map(function(e){return e.key}).join(f),n=o.slice(0,10).join(", ")+(o.length>10?", ...":""),r=new R.visual.CartesianAxisTickScene(t,{source:s,tick:e,tickRaw:e,tickLabel:n,isHidden:!0});r.dataIndex=a,s=o=a=null}),r.forEach(function(e,n){var r=n%l!==0;if(r&&l>2)null==a&&(a=n),(s||(s=[])).push(e),(o||(o=[])).push(i[n]);else{s&&u();var f=new R.visual.CartesianAxisTickScene(t,{source:e,tick:e.value,tickRaw:e.rawValue,tickLabel:i[n],isHidden:r});f.dataIndex=n}}),s&&u()}else r.forEach(function(e,n){var r=new R.visual.CartesianAxisTickScene(t,{tick:e,tickRaw:e,tickLabel:i[n]});r.dataIndex=n},this)}return this._rootScene},_buildCompositeScene:function(e){function t(e){var i=e.group;if(n){var s=e.vars.tick;e.nodeValue=e.value=s.rawValue,e.nodeLabel=e.label=s.label}i.childCount()&&i.children().each(function(n){var i=r?r(n.value,n.label):n.label,s=new R.visual.CartesianAxisTickScene(e,{source:n,tick:n.value,tickRaw:n.rawValue,tickLabel:i});s.dataIndex=n.childIndex(),t(s)})}var n=this.compatVersion()<=1,r=this.axis.option("TickFormatter");e.vars.tick=new Z("",""),t(e)},_getRootData:function(){var e;if(this.isDiscrete&&this.useCompositeAxis){var t=this.anchor,n={visible:this.axis.domainVisibleOnly()?!0:null,isNull:this.chart.options.ignoreNulls||this.axis.domainIgnoreNulls()?!1:null,reverse:"bottom"==t||"left"==t};e=this.axis.role.select(this.data,n)}else e=this.data;return e},renderOrdinalAxis:function(){var e,n=this.scale,r=this.hiddenLabelText,i=this._tickIncludeModulo,s=i*n.range().step/2,o=this.anchorOpposite(),u=this.anchorLength(),a=this.anchorOrtho(),f=this.anchorOrthoLength(),l=this.pvRule,c=this._getRootScene(),h=this._layoutInfo,p=this.compatVersion()<=1;if(p){var d=function(e){this.value=this.absValue=e.rawValue,this.nodeName=""+(this.value||""),this.path=this.nodeName?[this.nodeName]:[],this.label=this.absLabel=e.label};d.prototype.toString=function(){return""+this.value},e=function(e){return function(t){var n=Object.create(this);return n.index=this.parent.index,e.call(n,new d(t.vars.tick))}}}var v=(new R.visual.Panel(this,this.pvPanel,{extensionId:"ticksPanel"})).lock("data",c.childNodes).lock(o,0).lockMark(a,function(e){return e.isHidden?n(e.previousSibling.vars.tick.value)+s:n(e.vars.tick.value)}).lock("strokeDasharray",null).lock("strokeStyle",null).lock("fillStyle",null).lock("lineWidth",0).pvMark.zOrder(20);(p||this.showTicks)&&(this.pvTicks=(new R.visual.Rule(this,v,{extensionId:"ticks",wrapper:e})).lock("data").intercept("visible",function(e){return!e.isHidden&&this.delegateExtension(!0)}).optional("lineWidth",1).lock(o,0).lock(a,0).lock(u,null).optional(f,2*this.tickLength/3).override("defaultColor",function(){return p?t.Color.names.transparent:l.scene?l.scene[0].strokeStyle:"#666666"}).pvMark);var m=this.font,g=this._layoutInfo.maxTextWidth;isFinite(g)||(g=0),this.pvLabel=(new R.visual.Label(this,v,{extensionId:"label",showsInteraction:!0,noClick:!1,noDoubleClick:!1,noSelect:!1,noTooltip:!1,noHover:!1,wrapper:e})).intercept("visible",function(e){return e.isHidden?!!e.vars.hiddenLabelText:this.delegateExtension(!0)}).intercept("text",function(e){var t;return e.isHidden?t=r:(t=this.delegateExtension(),void 0===t&&(t=e.vars.tick.label),!g||this.showsInteraction()&&e.isActive||(t=R.text.trimToWidthB(g,t,m,"..",!1))),t}).pvMark.zOrder(40).lock(o,this.tickLength).lock(a,0).font(m).textStyle("#666666").textAlign(h.textAlign).textBaseline(h.textBaseline),this._debugTicksPanel(v)},_getTooltipFormatter:function(e){if(this.axis.option("TooltipEnabled")){e.gravity=this._calcTipsyGravity();var t=this.axis.option("TooltipFormat");if(t)return function(e){return t.call(e,e.scene)};var n=this.axis.option("TooltipAutoContent");if("summary"===n)return this._summaryTooltipFormatter.bind(this);if("value"===n)return e.isLazy=!1,function(e){return e.scene.vars.tick.label}}},_getTooltipPanelClasses:function(){return["cart-axis"]},_debugTicksPanel:function(n){if(e.debug>=16&&this.showLabels){var r=this._layoutInfo,i=r.ticksBBoxes||this._calcTicksLabelBBoxes(r);n.add(t.Panel)[this.anchorOpposite()](this.tickLength)[this.anchorOrtho()](0)[this.anchorLength()](0)[this.anchorOrthoLength()](0).fillStyle(null).strokeStyle(null).lineWidth(0).visible(function(e){return!e.isHidden}).add(t.Line).data(function(e){var t=i[e.dataIndex],n=t.source.points();return n.length>1&&(n=n.concat(n[0])),n}).left(function(e){return e.x}).top(function(e){return e.y}).strokeStyle("red").lineWidth(.5).strokeDasharray("-")}},renderLinearAxis:function(){var e,t=this.scale,n=this.pvRule,r=this.anchorOpposite(),i=this.anchorLength(),s=this.anchorOrtho(),o=this.anchorOrthoLength(),u=this._getRootScene();this.compatVersion()<=1&&(e=function(e){return function(t){var n=Object.create(this);return n.index=this.parent.index,e.call(n,t.vars.tick.rawValue)}});var a=(new R.visual.Panel(this,this.pvPanel,{extensionId:"ticksPanel"})).lock("data",u.childNodes).lock(r,0).lockMark(s,function(e){return t(e.vars.tick.value)}).lock("strokeStyle",null).lock("fillStyle",null).lock("lineWidth",0).pvMark.zOrder(20);if(this.showTicks){var f=this.pvTicks=(new R.visual.Rule(this,a,{extensionId:"ticks",wrapper:e})).lock("data").override("defaultColor",function(){return n.scene?n.scene[0].strokeStyle:"#666666"}).lock(r,0).lock(s,0).lock(i,null).optional(o,this.tickLength).pvMark;if(this.showMinorTicks){var l=this._layoutInfo,c=l.ticks,h=c.length,p=h>1?Math.abs(t(c[1])-t(c[0]))/2:0;this.pvMinorTicks=(new R.visual.Rule(this,this.pvTicks,{extensionId:"minorTicks",wrapper:e})).lock("data").intercept("visible",function(e){var t=e.childIndex()<h-1&&(!f.scene||f.scene[0].visible);return t&&this.delegateExtension(!0)}).override("defaultColor",function(){return f.scene?f.scene[0].strokeStyle:"#666666"}).lock(r,0).lock(i,null).optional(o,this.tickLength/2).lockMark(s,p).pvMark}}this.renderLinearAxisLabel(a,e),this._debugTicksPanel(a)},renderLinearAxisLabel:function(e,t){var n=this.anchorOpposite(),r=this.anchorOrtho(),i=this.font,s=this._layoutInfo.maxTextWidth;isFinite(s)||(s=0);var o=this.pvLabel=(new R.visual.Label(this,e,{extensionId:"label",noHover:!1,showsInteraction:!0,wrapper:t})).lock("data").optional("text",function(e){var t=e.vars.tick.label;return!s||this.showsInteraction()&&e.isActive||(t=R.text.trimToWidthB(s,t,i,"..",!1)),t}).pvMark.lock(n,this.tickLength).lock(r,0).zOrder(40).font(this.font).textStyle("#666666"),u=this.pvPanel.root;this.isAnchorTopOrBottom()?o.textBaseline(n).textAlign(function(e){var t;if(0===this.index){t=o.toScreenTransform().transformHPosition(o.left());if(0>=t)return"left"}else if(this.index===e.parent.childNodes.length-1){t=o.toScreenTransform().transformHPosition(o.left());if(t>=u.width())return"right"}return"center"}):o.textAlign(n).textBaseline(function(e){var t;if(0===this.index){t=o.toScreenTransform().transformVPosition(o.top());if(t>=u.height())return"bottom"}else if(this.index===e.parent.childNodes.length-1){t=o.toScreenTransform().transformVPosition(o.top());if(0>=t)return"top"}return"middle"})},_onV1Click:function(e,t){this.isDiscrete&&this.useCompositeAxis&&t.call(e.pvMark,e.scene,e.event)},_onV1DoubleClick:function(e,t){this.isDiscrete&&this.useCompositeAxis&&t.call(e.pvMark,e.scene,e.event)},_getSelectableMarks:function(){return this.isDiscrete&&this.isVisible&&this.pvLabel?this.base():void 0},renderCompositeOrdinalAxis:function(){var n,r=this.isAnchorTopOrBottom(),i=r?"h":"v",s=.3,o=1.27,u=2,a=2,f=this.font,l=t.Text.fontHeight(f)/2,c=this._pvLayout=this._getCompositeLayoutSingleCluster(),h=r?"center":"left"==this.anchor?"right":"left";c.node.def("fitInfo",null).height(function(e){var t=R.text.getFitInfo(e.dx,e.dy,e.vars.tick.label,f,l);return t.h||("v"===i&&t.v?a=Math.min(u,e.depth):u=Math.min(u,e.depth)),this.fitInfo(t),e.dy}),c.node.add(t.Bar).fillStyle("rgba(127,127,127,.001)").strokeStyle(function(e){return 1!==e.maxDepth&&e.maxDepth?"rgba(127,127,127,0.3)":null}).lineWidth(function(e){return 1!==e.maxDepth&&e.maxDepth?.5:0}).text(function(e){return e.vars.tick.label}),this.compatVersion()<=1&&(n=function(e){return function(t){return e.call(this,t)}}),this.pvLabel=(new R.visual.Label(this,c.label,{extensionId:"label",noClick:!1,noDoubleClick:!1,noSelect:!1,noTooltip:!1,noHover:!1,showsInteraction:!0,wrapper:n,tooltipArgs:{options:{offset:2*l}}})).pvMark.def("lblDirection","h").textAngle(function(e){if(e.depth>=a&&e.depth<u)return this.lblDirection("v"),-Math.PI/2;if(e.depth>=u){var t=e.dy/e.dx,n=Math.atan(t);if(n>o)return this.lblDirection("v"),-Math.PI/2;if(n>s)return this.lblDirection("d"),-n}return this.lblDirection("h"),0}).textMargin(1).textAlign(function(e){return"v"!=i||e.depth>=a||e.depth>=u?"center":h}).left(function(e){return"v"!=i||e.depth>=a||e.depth>=u?e.x+e.dx/2:"right"==h?e.x+e.dx:e.x}).font(f).textStyle("#666666").text(function(t){var n=t.vars.tick.label;if(!t.isActive||!this.sign.showsInteraction()){var r=this.fitInfo();switch(this.lblDirection()){case"h":if(!r.h)return R.text.trimToWidthB(t.dx,n,f,"..");break;case"v":if(!r.v)return R.text.trimToWidthB(t.dy,n,f,"..");break;case"d":if(!r.d){var i=Math.sqrt(e.sqr(t.dy)+e.sqr(t.dx));return R.text.trimToWidthB(i-l,n,f,"..")}}}return n})},_getCompositeLayoutSingleCluster:function(){var n=this._getRootScene(),r=this.anchor,i=n.group.treeHeight+1,s=this._layoutInfo.axisSize,o=i>2?1/12*s:0,u=s/i-o,a=i/(i-1),f=R.BasePanel.orthogonalLength[r],l="width"==f?"left"===r?[-u,0]:[u,0]:"top"===r?[0,-u]:[0,u];this.pvRule.sign.override("defaultColor",e.fun.constant(null)).override("defaultStrokeWidth",e.fun.constant(0));var c=this.pvRule.add(t.Panel)[f](s).strokeStyle(null).lineWidth(0).add(t.Panel)[f](s*a).strokeStyle(null).lineWidth(0);return c.transform(t.Transform.identity.translate(l[0],l[1])),c.add(t.Layout.Cluster.Fill).nodes(n.nodes()).orient(r)},_calcTipsyGravity:function(){switch(this.anchor){case"bottom":return"s";case"top":return"n";case"left":return"w";case"right":return"e"}return"s"}}),e.type("pvc.AxisTitlePanel",R.TitlePanelAbstract).init(function(e,t,n,r){this.axis=n,this.base(e,t,r),this._extensionPrefix=n.extensionPrefixes.map(function(e){return e+"Title"})}).add({_calcLayout:function(e){var t=this.axis.scale;return!t||t.isNull?new K(0,0):this.base(e)},_createCore:function(e){var t=this.axis.scale;return t&&!t.isNull?this.base(e):void 0}}),e("pvc.visual.CartesianFocusWindow",R.visual.OptionsBase.extend({init:function(e){this.base(e,"focusWindow",0,{byNaked:!1});var t=e.axes.base;this.base=new R.visual.CartesianFocusWindowAxis(this,t)},methods:{_exportData:function(){return{base:e.copyProps(this.base,R.visual.CartesianFocusWindowAxis.props)}},_importData:function(e){var t=e.base;this.base.option.specify({Begin:t.begin,End:t.end,Length:t.length})},_initFromOptions:function(){this.base._initFromOptions()},_onAxisChanged:function(){var e=this.option("Changed");e&&e.call(this.chart.basePanel.context())}},options:{Changed:{resolve:"_resolveFull",cast:e.fun.as}}})),e("pvc.visual.CartesianFocusWindowAxis",R.visual.OptionsBase.extend({init:function(t,n){this.window=t,this.axis=n,this.isDiscrete=n.isDiscrete(),this.base(n.chart,"focusWindow"+e.firstUpperCase(n.type),0,{byNaked:!1})},type:{methods:{props:["begin","end","length"]}},methods:{_initFromOptions:function(){var e=this.option;this.set({begin:e("Begin"),end:e("End"),length:e("Length")})},set:function(t){var n,r,i,s=this,o=e.get(t,"render"),u=e.get(t,"select",!0);t=s._readArgs(t);if(t)n=t.begin,r=t.end,i=t.length;else if(null!=this.begin&&null!=this.end&&null!=this.length)return;var a,f,l,c,h,p,d,v=s.axis,m=v.scale,g=s.isDiscrete,y=g?null:v.role.lastDimensionType().cast,b=m.domain();if(g)f=b.length,null!=n&&(p=+n,isNaN(p)||(1/0===p?(l=f-1,n=b[l]):p===-1/0&&(l=0,n=b[l])),null==l&&(l=b.indexOf(""+n),0>l&&(l=0,n=b[l]))),null!=r&&(d=+r,isNaN(d)||(1/0===d?(c=f-1,r=b[c]):d===-1/0&&(c=0,r=b[c])),null==c&&(c=b.indexOf(""+r),0>c&&(c=f-1,r=b[c]))),null!=i&&(i=+i,isNaN(i)?i=null:0>i&&(null!=n||null!=r)&&(a=n,h=l,n=r,l=c,r=a,c=h,i=-i)),null!=n?null!=r?(l>c&&(a=n,h=l,n=r,l=c,r=a,c=h),i=c-l+1):(null==i&&(i=f-l),c=l+i-1,c>f-1&&(c=f-1,i=c-l+1),r=b[c]):null!=r?(null==i&&(i=c),l=c-i+1,0>l&&(l=0,i=c-l+1),n=b[l]):(null==i&&(i=Math.max(~~(f/3),1)),i>f?(i=f,l=0,c=f-1):(h=~~(f/2),l=h-~~(i/2),c=l+i-1),n=b[l],r=b[c]);else{null!=i&&(i=+i,isNaN(i)?i=null:0>i&&(null!=n||null!=r)&&(a=n,n=r,r=a,i=-i));var w,E,S=b[0],x=b[1];f=x-S,null!=n&&(S>n&&(n=S),n>x&&(n=x)),null!=r&&(S>r&&(r=S),r>x&&(r=x)),null!=n?null!=r?(n>r&&(a=n,n=r,r=a),i=r-n):(null==i&&(i=x-n),r=n+i,r>x&&(r=x,i=r-n)):null!=r?(null==i&&(i=r-S),n=r-i,S>n&&(n=S,i=r-n)):(null==i&&(i=Math.max(~~(f/3),1)),i>f?(i=f,n=S,r=x):(a=~~(f/2),n=a-~~(i/2),w=+n,E=+i,r=w+E)),n=y(n),r=y(r),i=y(i);var T=s.option("Constraint");if(T){var N={type:"new",target:"begin",value:n,length:i,length0:i,min:S,max:x,minView:S,maxView:x};T(N),n=y(N.value),i=y(N.length),w=+n,E=+i,r=y(w+E)}}s._set(n,r,i,u,o)},_updatePosition:function(e,t,n,r){var i,s,o,u=this,a=u.axis,f=a.scale;if(u.isDiscrete){var l=f.invertIndex(e),c=f.invertIndex(t)-1,h=f.domain();i=h[l],s=h[c],o=c-l+1}else i=f.invert(e),s=f.invert(t),o=s-i;this._set(i,s,o,n,r)},_constraintPosition:function(e){var t,n=this,r=n.axis,i=r.scale;if(n.isDiscrete){var s=Math.floor(i.invertIndex(e.point,!0));if(s>=0){var o=i.range(),u=i.domain().length,a=(o.max-o.min)/u;s>=u&&("new"===e.type||"resize-begin"===e.type)&&(s=u-1),e.point=s*a}}else if(t=n.option("Constraint")){var f,l,c,h=r.role.lastDimensionType().cast,p=h(i.invert(e.point)),d="begin"===e.target?1:-1,v=e.point+d*e.length,m=h(i.invert(v)),g=h(d*(m-p));e.length===e.length0?f=g:(l=e.point+d*e.length0,c=h(i.invert(l)),f=h(d*(c-p)));var y=h(i.invert(e.min)),b=h(i.invert(e.max)),w={type:e.type,target:e.target,value:p,length:g,length0:f,min:y,max:b,minView:h(i.invert(e.minView)),maxView:h(i.invert(e.maxView))};t(w),+w.value!==+p&&(p=w.value,e.point=i(p));var E=w.length;if(+E!==+g)if(+E===+f)e.length=e.length0;else{var S=+p+d*+E,x=i(S);e.length=x-d*e.point}+w.min!==+y&&(e.min=i(w.min)),+w.max!==+b&&(e.max=i(w.max))}},_compare:function(e,t){return this.isDiscrete?""+e==""+t:+e===+t},_set:function(e,t,n,r,i){var s=this,o=!1;return s._compare(e,s.begin)||(s.begin=e,o=!0),s._compare(t,s.end)||(s.end=t,o=!0),s._compare(n,s.length)||(s.length=n,o=!0),o&&s.window._onAxisChanged(s),r&&s._updateSelection({render:i}),o},_readArgs:function(e){if(e){var t={},n=0,r=function(r){var i=e[r];null!=i?n=!0:i=this[r],t[r]=i};R.visual.CartesianFocusWindowAxis.props.forEach(r,this);if(n)return t}},_updateSelection:function(t){var r,i,s=this,o=s.axis,u=o.isDiscrete(),a=o.chart,f=o.dataCell,l=f.role,c=a.partData(f.dataPartValue);if(u){i=l.flatten(c);var h=i.child(s.begin),p=i.child(s.end);if(h&&p){var d=h.childIndex(),v=p.childIndex();r=e.range(d,v-d+1).select(function(e){return i.childNodes[e]}).selectMany(e.propGet("_datums")).where(n.Datum.isVisibleT).distinct(e.propGet("key"))}}else{i=c;var m=l.lastDimensionName();r=e.query(c._datums).where(n.Datum.isVisibleT).where(function(e){var t=e.atoms[m].value;return null!=t&&t>=s.begin&&t<=s.end})}r&&(a.data.replaceSelected(r),a.root.updateSelections(t))}},options:{Resizable:{resolve:"_resolveFull",cast:Boolean,value:!0},Movable:{resolve:"_resolveFull",cast:Boolean,value:!0},Begin:{resolve:"_resolveFull"},End:{resolve:"_resolveFull"},Length:{resolve:"_resolveFull"},Constraint:{resolve:"_resolveFull",cast:e.fun.as}}})),e.type("pvc.visual.CartesianOrthoDataCell",R.visual.DataCell).init(function(e,t,n,r,i,s,o,u){this.base(e,t,n,r,i),this.isStacked=s,this.nullInterpolationMode=o,this.trend=u}),e("pvc.visual.CartesianPlot",R.visual.Plot.extend({init:function(t,n){this.base(t,n);if(!(t instanceof R.CartesianAbstract))throw e.error(e.format("Plot type '{0}' can only be used from within a cartesian chart.",[this.type]))},methods:{_initVisualRoles:function(){this.base();var e=this._getSeriesRoleSpec();e&&this._addVisualRole("series",e)},_getColorRoleSpec:function(){return{isRequired:!0,defaultDimension:"color*",defaultSourceRole:"series",requireIsDiscrete:!0}},_getSeriesRoleSpec:function(){return{isRequired:!0,defaultDimension:"series*",autoCreateDimension:!0,requireIsDiscrete:!0}},_initDataCells:function(){this.base();var e=this.option("DataPart"),t=this._getBaseRole(),n=this._getOrthoRoles();t&&this._addDataCell(new R.visual.DataCell(this,"base",this.option("BaseAxis")-1,t,e));if(n){var r=this.option("OrthoAxis")-1,i=this.option.isDefined("Stacked")?this.option("Stacked"):void 0,s=this.option("NullInterpolationMode"),o=this.option("Trend");n.forEach(function(t){this._addDataCell(new R.visual.CartesianOrthoDataCell(this,"ortho",r,t,e,i,s,o))},this)}},_getOrthoRoles:function(){},_getBaseRole:function(){}},options:{BaseAxis:{value:1},OrthoAxis:{resolve:function(e){return 0===this.globalIndex?(e.specify(1),!0):this._resolveFull(e)},data:{resolveV1:function(e){return"plot2"===this.name&&this.chart._allowV1SecondAxis&&this._chartOption("secondAxisIndependentScale")&&e.specify(2),!0}},cast:function(t){return t=e.number.to(t),null!=t?e.between(t,1,10):1},value:1},Trend:{resolve:"_resolveFull",data:{resolveDefault:function(e){var t=this.option("TrendType");return t?(e.defaultValue({type:t}),!0):void 0}},cast:j},TrendType:{resolve:"_resolveFull",cast:R.parseTrendType},TrendLabel:{resolve:"_resolveFull",cast:String},NullInterpolationMode:{resolve:"_resolveFull",cast:R.parseNullInterpolationMode,value:"none"}}})),e.type("pvc.CartesianAbstract",R.BaseChart).init(function(e){this.axesPanels={},this.base(e)}).add({_axisClassByType:{base:ut,ortho:ut},_gridDockPanel:null,_defaultAxisBandSizeRatio:.9,axesPanels:null,yAxisPanel:null,xAxisPanel:null,secondXAxisPanel:null,secondYAxisPanel:null,yScale:null,xScale:null,_setAxisScale:function(e,t){this.base(e,t);var n="ortho"===e.type,r=n||"base"===e.type;r&&(n&&1===e.index?this.secondScale=e.scale:e.index||(this[e.orientation+"Scale"]=e.scale))},_initAxesEnd:function(){var e=this.parent;this._axisOffsetPaddings=e?e._axisOffsetPaddings:this._calcAxesOffsetPaddings(),this._plotsClientSizeInfo=e?e._plotsClientSizeInfo:this._calcPlotsClientSizeInfo(),this.base()},_eachCartAxis:function(e,t){var n=this.axesByType;["base","ortho"].forEach(function(r){var i=n[r];i&&i.forEach(function(n){e.call(t,n)})})},_calcPlotsClientSizeInfo:function(){if(!this.parent){var e=new K(0,0),n=new K(1/0,1/0),r=new K;return this._eachCartAxis(function(t){var i="x"===t.orientation?"width":"height",s=t.getScaleRangeInfo();s&&(null!=s.value?r[i]=Math.max(r[i]||0,s.value):null!=s.min&&(e[i]=Math.max(e[i],s.min),n[i]=Math.min(n[i],s.max)))}),n.width=Math.max(n.width,e.width),n.height=Math.max(n.height,e.height),null!=r.width?r.width=Math.max(Math.min(r.width,n.width),e.width):t.floatEqual(e.width,n.width)&&(r.width=e.width),null!=r.height?r.height=Math.max(Math.min(r.height,n.height),e.height):t.floatEqual(e.height,n.height)&&(r.height=e.height),{value:r,min:e,max:n}}},_calcAxesOffsetPaddings:function(){function e(e,t){var i=n[e];if(null==i||t>i)r=!0,n[e]=t}function t(t){var n=t&&t.option("Offset");null!=n&&n>0&&1>n&&("x"===t.orientation?(e("left",n),e("right",n)):(e("top",n),e("bottom",n)))}var n={},r=!1;return this._eachCartAxis(t),r?n:null},_createContent:function(t,n){this._createFocusWindow(),this._gridDockPanel=new R.CartesianGridDockingPanel(this,t,{margins:n.margins,paddings:n.paddings}),["base","ortho"].forEach(function(t){var n=this.axesByType[t];n&&e.query(n).reverse().each(function(e){this._createAxisPanel(e)},this)},this),this.base(this._gridDockPanel,{clickAction:n.clickAction,doubleClickAction:n.doubleClickAction})},_createFocusWindow:function(){if(this.selectableByFocusWindow()){var e,t=this.focusWindow;t&&(e=t._exportData()),t=this.focusWindow=new R.visual.CartesianFocusWindow(this),e&&t._importData(e),t._initFromOptions()}else this.focusWindow&&delete this.focusWindow},_createAxisPanel:function(t){if(t.option("Visible")){var n,r=t.option("Title");e.empty(r)||(n=new R.AxisTitlePanel(this,this._gridDockPanel,t,{title:r,font:t.option("TitleFont")||t.option("Font"),anchor:t.option("Position"),align:t.option("TitleAlign"),margins:t.option("TitleMargins"),paddings:t.option("TitlePaddings"),titleSize:t.option("TitleSize"),titleSizeMax:t.option("TitleSizeMax")}));var i=new R.AxisPanel(this,this._gridDockPanel,t,{anchor:t.option("Position"),size:t.option("Size"),sizeMax:t.option("SizeMax"),clickAction:t.option("ClickAction"),doubleClickAction:t.option("DoubleClickAction"),useCompositeAxis:t.option("Composite"),font:t.option("Font"),labelSpacingMin:t.option("LabelSpacingMin"),grid:t.option("Grid"),gridCrossesMargin:t.option("GridCrossesMargin"),ruleCrossesMargin:t.option("RuleCrossesMargin"),zeroLine:t.option("ZeroLine"),showTicks:t.option("Ticks"),showMinorTicks:t.option("MinorTicks")});return n&&(i.titlePanel=n),this.axesPanels[t.id]=i,this.axesPanels[t.orientedId]=i,t.v1SecondOrientedId&&(this[t.v1SecondOrientedId+"AxisPanel"]=i),i}},_onLaidOut:function(){this.plotPanelList&&this.plotPanelList[0]&&this._eachCartAxis(this._setCartAxisScaleRange,this)},_setCartAxisScaleRange:function(e){var t=this.plotPanelList[0]._layoutInfo,n=t.clientSize,r="x"===e.orientation?n.width:n.height;return e.setScaleRange(r),e.scale},_getAxesRoundingPaddings:function(){function e(e,t,r){var i=n[e];null==i||t>i?(n[e]=t,n[e+"Locked"]=r):r&&(n[e+"Locked"]=r)}function t(t){if(t){var n=t.getScaleRoundingPaddings();if(n){var r="x"===t.orientation;e(r?"left":"bottom",n.begin,n.beginLocked),e(r?"right":"top",n.end,n.endLocked)}}}var n={},r=this.axesByType;return["base","ortho"].forEach(function(e){var n=r[e];n&&n.forEach(t)}),n},_coordinateSmallChartsLayout:function(t){this.base(t);var n,r=0,i=null,s={};this.children.forEach(function(t){t.basePanel.layout();var o,u=t.titlePanel;u&&(n||(n=u.anchorOrthoLength()),o=u[n],o>r&&(r=o));var a=t.axesPanels;i||(i=e.query(e.ownKeys(a)).where(function(e){return e===a[e].axis.id}).select(function(e){return s[e]={axis:0,title:0},e}).array()),i.forEach(function(e){var t=a[e],n=s[e],r="x"===t.axis.orientation?"height":"width";o=t[r],o>n.axis&&(n.axis=o);var i=t.titlePanel;i&&(o=i[r],o>n.title&&(n.title=o))})},this),this.children.forEach(function(e){if(r>0){var t=e.titlePanel;t.size=t.size.clone().set(n,r)}var o=e.axesPanels;i.forEach(function(e){var t=o[e],n=s[e],r="x"===t.axis.orientation?"height":"width";t.size=t.size.clone().set(r,n.axis);var i=t.titlePanel;i&&(i.size=i.size.clone().set(r,n.title))}),e.basePanel.invalidateLayout()},this)},markEventDefaults:{strokeStyle:"#5BCBF5",lineWidth:"0.5",textStyle:"#5BCBF5",verticalOffset:10,verticalAnchor:"bottom",horizontalAnchor:"right",forceHorizontalAnchor:!1,horizontalAnchorSwapLimit:80,font:"10px sans-serif"},markEvent:function(n,i,s){var o=this,u=o.axes.base,a=o.axes.ortho,f=u.role,l=u.scale,c=o.data.owner.dimensions(f.grouping.lastDimensionName());if(u.isDiscrete())return o.log.warn("Can only mark events in charts with a continuous base scale."),o;var h=r.extend({},o.markEventDefaults,s),p=c.read(n,i),d=l(p.value),v=l.range(),m=v[1];if(d<v[0]||d>m)return o.log.warn("Cannot mark event because it is outside the base scale's domain."),o;var g=this.plotPanelList[0].pvPanel,y=a.scale.range()[1],b=h.horizontalAnchor;if(!h.forceHorizontalAnchor){var w="right"===b,E=w?m-d:d,S=t.Text.measureWidth(p.label,h.font);S>E&&(b=w?"left":"right")}var x="top"===h.verticalAnchor?h.verticalOffset:y-h.verticalOffset,T=g.add(t.Line).data([0,y]).bottom(e.identity).left(d).lineWidth(h.lineWidth).strokeStyle(h.strokeStyle);return T.anchor(b).visible(function(){return!this.index}).top(x).add(t.Label).font(h.font).text(p.label).textStyle(h.textStyle),o},defaults:{timeSeries:!1,timeSeriesFormat:"%Y-%m-%d"}}),e.type("pvc.CartesianGridDockingPanel",R.GridDockingPanel).init(function(e,t,n){this.base(e,t,n),this._plotBgPanel=new R.PlotBgPanel(e,this)}).add({_getExtensionId:function(){return this.chart.parent?"smallContent":"content"},_createCore:function(t){var n=this.chart,r=n.axes,i=r.x,s=r.y;i.isBound()||(i=null),s.isBound()||(s=null),i&&i.option("Grid")&&(this.xGridRule=this._createGridRule(i)),s&&s.option("Grid")&&(this.yGridRule=this._createGridRule(s)),this.base(t),n.focusWindow&&this._createFocusWindow(t);var o=n.compatVersion()>1?e.get(n.options,"plotFrameVisible",!0):!!i.option("EndLine")||!!s.option("EndLine");o&&(this.pvFrameBar=this._createFrame(t,r)),i&&"discrete"!==i.scaleType&&i.option("ZeroLine")&&(this.xZeroLine=this._createZeroLine(i,t)),s&&"discrete"!==s.scaleType&&s.option("ZeroLine")&&(this.yZeroLine=this._createZeroLine(s,t))},_createGridRule:function(n){var r=n.scale;if(!r.isNull){var i=n.role.grouping.isDiscrete(),s=this._getAxisGridRootScene(n);if(s){var o,u=this._layoutInfo.gridMargins,a=this._layoutInfo.gridPaddings,f="x"===n.orientation?"left":"bottom",l=this.anchorLength(f),c=this.anchorOrtho(f),h=this.anchorOpposite(c),p=this.chart.plotPanelList[0],d="x"===n.orientation?(p.position.left||0)+a.left:(p.position.bottom||0)+a.bottom,v=u[c],m=u[h],g=s.leafs().array(),y=g.length;i&&y&&g.push(g[y-1]),this.compatVersion()<=1&&(o=function(e){return function(t){return e.call(this,t.vars.tick.rawValue)}});var b=(new R.visual.Rule(this,this.pvPanel,{extensionId:n.extensionPrefixes.map(function(e){return e+"Grid"}),wrapper:o})).lock("data",g).lock(l,null).override("defaultColor",e.fun.constant(t.color("#f0f0f0"))).pvMark.antialias(!0)[c](v)[h](m).zOrder(-12).events("none");if(i){var w=r.range().step/2;b[f](function(e){var t=d+r(e.vars.tick.value),n=this.index===y;return t+(n?w:-w)})}else b[f](function(e){return d+r(e.vars.tick.value)});return b}}},_getAxisGridRootScene:function(e){var t=e.isDiscrete(),n=t?e.domainData():this.data,r=new R.visual.CartesianAxisRootScene(null,{panel:this,source:n});if(t)n.childNodes.forEach(function(e){new R.visual.CartesianAxisTickScene(r,{source:e,tick:e.value,tickRaw:e.rawValue,tickLabel:e.label})});else{var i=e.ticks||e.calcContinuousTicks();i.forEach(function(t,n){new R.visual.CartesianAxisTickScene(r,{tick:t,tickRaw:t,tickLabel:e.scale.tickFormat(t,n)})},this)}return r},_createFrame:function(e,t){if(!t.base.scale.isNull&&(!t.ortho.scale.isNull||t.ortho2&&!t.ortho2.scale.isNull)){var n=e.gridMargins,r=n.left,i=n.right,s=n.top,o=n.bottom,u=[];return this.compatVersion()<=1&&u.push("xAxisEndLine","yAxisEndLine"),u.push("plotFrame"),(new R.visual.Panel(this,this.pvPanel,{extensionId:u})).pvMark.lock("left",r).lock("right",i).lock("top",s).lock("bottom",o).lock("fillStyle",null).events("none").strokeStyle("#666666").lineWidth(1).antialias(!1).zOrder(-8)}},_createZeroLine:function(n,r){var i=n.scale;if(!i.isNull){var s=i.domain();if(s[0]*s[1]<-1e-12){var o="x"===n.orientation?"left":"bottom",u=this.anchorLength(o),a=this.anchorOrtho(o),f=this.anchorOpposite(a),l=r.gridMargins,c=r.gridPaddings,h=l[o]+c[o]+i(0),p=l[a],d=l[f],v=new R.visual.Scene(null,{panel:this});return(new R.visual.Rule(this,this.pvPanel,{extensionId:n.extensionPrefixes.map(function(e){return e+"ZeroLine"})})).lock("data",[v]).lock(u,null).lock(a,p).lock(f,d).lock(o,h).override("defaultColor",e.fun.constant(t.color("#666666"))).pvMark.events("none").lineWidth(1).antialias(!0).zOrder(-9)}}},_createFocusWindow:function(n){function r(){q[L]=0-M[E],q[A]=j+M[E]+M[N]}function i(e){return function(){return q[e]}}function s(){var e=q[C];return Math.max(0,Math.min(B,e))}function o(){var e=s(),t=q[C]+q[k];return t=Math.max(0,Math.min(B,t)),t-e}function u(e,t){return(new R.visual.Bar(l,e,{extensionId:t,normalStroke:!0,noHover:!0,noSelect:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0,showsInteraction:!1})).pvMark.lock("data").lock("visible").lock(w,s).lock(S,o).lock(E,i(L)).lock(T,i(A)).lock(N).lock(x).sign}function a(){var e=arguments[arguments.length-1],t="end"===e.drag.phase;c._selectingByRubberband=!t,W.render(),V.render();var n=q[C],r=q[C]+q[k];if(!b){var i=B-n;n=B-r,r=i}p._updatePosition(n,r,t,!0)}function f(e,t){var n,r,i=e.m,s=i[Q],o=q[G];switch(t){case"new":n=0,r="begin";break;case"resize-begin":n=q[Q]+o-s,r="begin";break;case"move":n=o,r="begin";break;case"resize-end":n=s-q[Q],r="end"}var u=e.min[Q],a=e.max[Q],f={type:t,target:r,point:s,length:n,length0:o,min:u,max:a,minView:0,maxView:B};p._constraintPosition(f),i[Q]=f.point;switch(t){case"new":f.length!==n&&(e[G+"min"]=n=f.length);break;case"resize-begin":f.max=Math.min(f.max,q[Q]+q[G]);break;case"resize-end":f.min=Math.max(f.min,q[Q])}e.min[Q]=f.min,e.max[Q]=f.max}var l=this,c=l.topRoot,h=l.chart,p=h.focusWindow.base,d=p.axis,v=d.scale;if(!v.isNull){var m=p.option("Resizable"),g=p.option("Movable"),y=d.isDiscrete(),b=h.isOrientationVertical(),w=b?"left":"top",E=b?"top":"left",S=l.anchorOrthoLength(w),x=l.anchorOpposite(w),T=l.anchorOrthoLength(E),N=l.anchorOpposite(E),C=b?"x":"y",k="d"+C,L=b?"y":"x",A="d"+L,O=n.gridMargins,M=n.gridPaddings,_={left:O.left+M.left,right:O.right+M.right,top:O.top+M.top,bottom:O.bottom+M.bottom},D=n.clientSize,P=D[S],H=D[T];_.width=_.left+_.right,_.height=_.top+_.bottom;var B=P-_[S],j=H-_[T],F=M[w],I=M[x],q=new R.visual.Scene(null,{panel:this}),U=y?v.range().step:0,z=U/2;q[C]=v(p.begin)-z,q[k]=U+(v(p.end)-z)-q[C],r();var W=this._plotBgPanel.pvPanel.borderPanel;W.lock("data",[q]),g&&m?W.paddingPanel.events("all").cursor("crosshair").event("mousedown",t.Behavior.select().autoRender(!1).collapse(b?"y":"x").positionConstraint(function(e){var t="start"===e.phase?"new":"resize-end";return f(e,t)})).event("selectstart",function(){r(),a.apply(null,arguments)}).event("select",a).event("selectend",a):W.paddingPanel.events("all");var X=u(W.paddingPanel,"focusWindowBg").override("defaultColor",e.fun.constant(R.invisibleFill)).pvMark;g?X.events("all").cursor("move").event("mousedown",t.Behavior.drag().autoRender(!1).collapse(b?"y":"x").positionConstraint(function(e){f(e,"move")})).event("drag",a).event("dragend",a):X.events("none");var V=(new R.visual.Panel(l,l.pvPanel)).pvMark.lock("data",[q]).lock("visible").lock("fillStyle",R.invisibleFill).lock("left",_.left).lock("right",_.right).lock("top",_.top).lock("bottom",_.bottom).lock("zOrder",10).events(function(){var e=q.drag;return e&&"end"!==e.phase?"all":"none"}).cursor(function(){var e=q.drag;return e&&"end"!==e.phase?"drag"===e.type||"select"===e.type&&!m?"move":b?"ew-resize":"ns-resize":null}).antialias(!1),$="rgba(20, 20, 20, 0.1)";(new R.visual.Bar(l,V,{extensionId:"focusWindowBaseCurtain",normalStroke:!0,noHover:!0,noSelect:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0,showsInteraction:!1})).override("defaultColor",function(e,t){return"stroke"===t?null:$}).pvMark.lock("data",[q,q]).lock("visible").events("none").lock(w,function(){return this.index?s()+o():-F}).lock(x,function(){return this.index?-I:null}).lock(S,function(){return this.index?null:F+s()}).lock(E,i(L)).lock(T,i(A)).lock(N);var J=u(V,"focusWindow").override("defaultColor",e.fun.constant(null)).pvMark.events("none"),K=function(n){var r="left"===n||"top"===n?"begin":"end",i=l.anchorOpposite(n),s="linear-gradient(to "+i+", "+$+", #444 90%)",o=(new R.visual.Bar(l,J.anchor(n),{extensionId:p.id+"Grip"+e.firstUpperCase(r),normalStroke:!0,noHover:!0,noSelect:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0,showsInteraction:!1})).override("defaultColor",function(e,t){return"stroke"===t?null:s}).pvMark.lock("data").lock("visible")[E](q[L])[T](q[A]);if(m){var u="resize-"+r;o.events("all")[S](5).cursor(b?"ew-resize":"ns-resize").event("mousedown",t.Behavior.resize(n).autoRender(!1).positionConstraint(function(e){f(e,u)}).preserveOrtho(!0)).event("resize",a).event("resizeend",a)}else o.events("none")[S](1);return o};K(w),K(x);var Q=C,G=k}},_getDatumsOnRect:function(t,n,r){var i,s,o=this.chart,u=o.axesPanels.x,a=o.axesPanels.y;u&&(i=new e.Map,u._getDatumsOnRect(i,n,r),i.count||(i=null)),a&&(s=new e.Map,a._getOwnDatumsOnRect(s,n,r),s.count||(s=null)),i&&s?(i.intersect(s,t),r.toggle=!0):i?t.copy(i):s?t.copy(s):o.plotPanelList.forEach(function(e){e._getDatumsOnRect(t,n,r)},this)}}),e.type("pvc.CartesianAbstractPanel",R.PlotPanel).init(function(e,t,n,r){function i(e){s[e.type]=e,s[e.orientedId]=e,e.v1SecondOrientedId&&(s[e.v1SecondOrientedId]=e)}this.base(e,t,n,r);var s=this.axes;i(e._getAxis("base",n.option("BaseAxis")-1)),i(e._getAxis("ortho",n.option("OrthoAxis")-1))}).add({_calcLayout:function(e){var t,n=this.chart._plotsClientSizeInfo;if(n){t=e.clientSize;var r=n.value,i=n.min,s=n.max;t.width=null!=r.width?r.width:Math.max(Math.min(t.width,s.width),i.width),t.height=null!=r.height?r.height:Math.max(Math.min(t.height,s.height),i.height)}return e.requestPaddings=this._calcRequestPaddings(e),t},_calcRequestPaddings:function(e){var t,n=this.chart._axisOffsetPaddings;if(n){var r=this.chart._getAxesRoundingPaddings(),i=e.clientSize,s=e.paddings;J.names.forEach(function(e){var o=R.BasePanel.orthogonalLength[e],u=i[o],a=s[o],f=u+a;if(!r[e+"Locked"]){var l=f*(n[e]||0),c=u*(r[e]||0);(t||(t={}))[e]=Math.max(l-c,0)}},this)}return t},_createCore:function(){this.pvPanel.zOrder(-10);var t,n=this.chart.options.leafContentOverflow||"auto";t="auto"===n?e.query(["ortho","base"]).select(function(e){return this.axes[e]},this).any(function(e){return null!=e.option("FixedMin")||null!=e.option("FixedMax")}):"hidden"===n,t&&this.pvPanel.borderPanel.overflow("hidden")}}),e("pvc.visual.CategoricalPlot",R.visual.CartesianPlot.extend({methods:{createVisibleData:function(t,n){var r=this.visualRoles.series,i=r&&r.flattenedGrouping(),s=this.visualRole("category").flattenedGrouping();return i?t.groupBy(e.get(n,"inverted",!1)?[i,s]:[s,i],n):t.groupBy(s,n)},interpolatable:function(){return!0},_initVisualRoles:function(){this.base(),this._addVisualRole("category",this._getCategoryRoleSpec())},_getCategoryRoleSpec:function(){return{isRequired:!0,defaultDimension:"category*",autoCreateDimension:!0}},getContinuousVisibleCellExtent:function(t,n,r){var i=r.role;switch(i.name){case"series":case"category":return this.base(t,n,r)}if(r.plot!==this)throw e.error.operationInvalid("DataCell not of this plot.");t._warnSingleContinuousValueRole(i);var s=r.dataPartValue,o=i.lastDimensionName(),u=t.visiblePlotData(this,s),a=n.scaleUsesAbs();return"ortho"===n.type&&r.isStacked?u.children().select(function(e){var t=this._getStackedCategoryValueExtent(e,o,a);return t?{range:t,group:e}:void 0},this).where(e.notNully).reduce(function(e,i){return this._reduceStackedCategoryValueExtent(t,e,i.range,i.group,n,r)}.bind(this),null):u.leafs().select(function(e){var t=e.dimensions(o).value();return a&&0>t?-t:t}).range()},_getStackedCategoryValueExtent:function(e,t,n){var r=null,i=null;return e.children().select(function(e){var r=e.dimensions(t).value();return n&&0>r?-r:r}).each(function(e){null!=e&&(e>=0?r+=e:i+=e)}),null==r&&null==i?null:{max:r||0,min:i||0}},_reduceStackedCategoryValueExtent:function(e,t,n){return R.unionExtents(t,n)},_getBaseRole:function(){return this.visualRoles.category},_getOrthoRoles:function(){return[this.visualRoles.value]},interpolateDataCell:function(e,t){var n=this._getNullInterpolationOperType(e.nullInterpolationMode);if(n){this.chart._warnSingleContinuousValueRole(e.role);var r=e.dataPartValue,i=this.chart.partData(r,t),s=this.chart.visiblePlotData(this,r,{baseData:t});s.childCount()>0&&(new n(t,i,s,this.visualRoles.category,this.visualRoles.series,e.role,!0)).interpolate()}},_getNullInterpolationOperType:function(t){switch(t){case"linear":return n.LinearInterpolationOper;case"zero":return n.ZeroInterpolationOper;case"none":break;default:throw e.error.argumentInvalid("nullInterpolationMode",""+t)}},generateTrendsDataCell:function(t,r,i){function s(r){var i=p?null:function(e){return e.atoms[c].value},s=function(e){var t=m.child(e.key);return t&&r&&(t=t.child(r.key)),t?t.dimensions(h).value(d):null},o=e.create(f,{rows:e.query(b),x:i,y:s}),u=l.model(o);u&&b.forEach(function(i,o){var a=p?o:i.atoms[c].value,l=u.sample(a,s(i),o);if(null!=l){var d,v=m.child(i.key),b=v||i;if(r){var w=v&&v.child(r.key);w?d=Object.create(w._datums[0].atoms):(d=Object.create(b._datums[0].atoms),e.copyOwn(d,r.atoms))}else d=Object.create(b._datums[0].atoms);d[h]=l,d[y]=g,t.push(new n.TrendDatum(b.owner,d,f))}})}var o=this.visualRoles.series,u=this.visualRoles.category,a=r.role,f=r.trend,l=f.info;this.chart._warnSingleContinuousValueRole(a);var c,h=a.lastDimensionName(),p=u.isDiscrete();p||(c=u.lastDimensionName());var d={zeroIfNone:!1},v=this.chart.partData(r.dataPartValue,i),m=this.chart.visiblePlotData(this,r.dataPartValue,{baseData:i}),g=this.chart._getTrendDataPartAtom(),y=g.dimension.name,b=u.flatten(i,{visible:!0}).childNodes,w=o&&o.isBound()?o.flatten(v,{visible:!0}).children():e.query([null]);w.each(s)}},options:{Stacked:{resolve:"_resolveFull",cast:Boolean,value:!1}}})),e.type("pvc.CategoricalAbstract",R.CartesianAbstract),e.type("pvc.CategoricalAbstractPanel",R.CartesianAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.stacked=n.option("Stacked")}),e("pvc.visual.MetricXYPlot",R.visual.CartesianPlot.extend({methods:{_initVisualRoles:function(){this.base(),this._addVisualRole("x",{isMeasure:!0,isRequired:!0,requireSingleDimension:!0,requireIsDiscrete:!1,defaultDimension:"x",dimensionDefaults:{valueType:this.chart.options.timeSeries?Date:Number}}),this._addVisualRole("y",{isMeasure:!0,isRequired:!0,requireSingleDimension:!0,requireIsDiscrete:!1,defaultDimension:"y",dimensionDefaults:{valueType:Number}})},_getBaseRole:function(){return this.visualRoles.x},_getOrthoRoles:function(){return[this.visualRoles.y]},generateTrendsDataCell:function(t,r,i){function s(r){var i=function(e){return e.atoms[c].value},s=function(e){return e.atoms[h].value},o=r.datums().sort(null,i).array(),u=e.create(f,{rows:e.query(o),x:i,y:s}),a=l.model(u);a&&o.forEach(function(o,u){var l,m=i(o);if(m&&null!=(l=a.sample(m,s(o),u))){var g=e.set(Object.create(r.atoms),c,m,h,l,v,d);t.push(new n.TrendDatum(p.owner,g,f))}})}var o=this.visualRoles.series,u=this.visualRoles.x,a=r.role,f=r.trend,l=f.info;this.chart._warnSingleContinuousValueRole(a);var c=u.lastDimensionName(),h=a.lastDimensionName(),p=this.chart.visiblePlotData(this,r.dataPartValue,{baseData:i}),d=this.chart._getTrendDataPartAtom(),v=d.dimension.name;(o.isBound()?p.children():e.query([p])).each(s)}},options:{OrthoAxis:{resolve:null}}})),e.type("pvc.MetricXYAbstract",R.CartesianAbstract).add({_defaultAxisBandSizeRatio:1}),e.type("pvc.BarAbstract",R.CategoricalAbstract),e("pvc.visual.BarPlotAbstract",R.visual.CategoricalPlot.extend({methods:{_initVisualRoles:function(){this.base(),this._addVisualRole("value",{isMeasure:!0,isRequired:!0,isPercent:this.option("Stacked"),requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"value"})},_getCategoryRoleSpec:function(){return e.set(this.base(),"requireIsDiscrete",!0)}},options:{BarSizeRatio:{resolve:"_resolveFull",cast:function(t){return t=e.number.to(t),null==t?1:.05>t?.05:t>1?1:t},value:.9},BarSizeMax:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyChartOption(e,"maxBarSize"),!0}},cast:function(t){return t=e.number.to(t),null==t?1/0:1>t?1:t},value:2e3},BarOrthoSizeMin:{resolve:"_resolveFull",cast:e.number.toNonNegative,value:1.5},BarStackedMargin:{resolve:"_resolveFull",cast:function(t){return t=e.number.to(t),null!=t&&0>t?0:t},value:0},OverflowMarkersVisible:{resolve:"_resolveFull",cast:Boolean,value:!0},ValuesAnchor:{value:"center"}}})),e.type("pvc.BarAbstractPanel",R.CategoricalAbstractPanel).add({pvBar:null,pvBarLabel:null,pvCategoryPanel:null,pvSecondLine:null,pvSecondDot:null,_creating:function(){var e=this.plot.dataCellsByRole.color[0];if(!e.legendSymbolRenderer()&&e.legendVisible()){var n=this.axes.color,r=n.option("LegendDrawLine"),i=!r||n.option("LegendDrawMarker");if(i){var s=R.uniqueExtensionAbsPrefix();this.chart._processExtensionPointsIn(e.role.legend(),s);var o={drawMarker:!0,markerShape:n.option("LegendShape"),drawLine:r,extensionPrefix:{abs:s},markerPvProto:new t.Dot};this.extend(o.markerPvProto,"bar",{constOnly:!0}),e.legendSymbolRenderer(o)}}},_createCore:function(){this.base();var e,n,r=this,i=r.chart,s=r.plot,o=!!r.stacked,u=r.isOrientationVertical(),a=r.visibleData({ignoreNulls:!1}),f=r.axes.ortho,l=r.axes.base,c=l.domainItems(),h=r.visualRoles.series.flatten(r.partData(),{visible:!0,isNull:i.options.ignoreNulls?!1:null}).childNodes,p=r._buildScene(a,h,c),d=f.scale,v=d(0),m=f.sceneScale({sceneVarName:"value",nullToZero:!1}),g=l.sceneScale({sceneVarName:"category"}),y=s.option("BarSizeRatio"),b=s.option("BarSizeMax"),w=s.option("BarStackedMargin"),E=s.option("BarOrthoSizeMin"),S=l.scale.range(),x=S.band,T=S.step,N=S.margin,C=u===o;o?e=x:(n=h.length,e=n?1===n?x:y*x/n:0),e>b&&(e=b),r.barWidth=e,r.barStepWidth=T;var k;r.compatVersion()<=1&&(k=function(e){return function(t){var n=Object.create(this.parent),r=Object.create(this);r.parent=n;var i=t.parent.childIndex(),s=t.childIndex();return o?(n.index=i,r.index=s):(n.index=s,r.index=i),e.call(r,t.vars.value.rawValue)}}),r.pvBarPanel=(new R.visual.Panel(r,r.pvPanel,{panelType:t.Layout.Band,extensionId:"panel"})).lock("layers",p.childNodes).lockMark("values",function(e){return e.childNodes}).lockMark("orient",u?"bottom-left":"left-bottom").lockMark("layout",o?"stacked":"grouped").lockMark("verticalMode",r._barVerticalMode()).lockMark("yZero",v).optionalMark("hZero",E).pvMark.band.x(g).w(x).differentialControl(r._barDifferentialControl()).item.order(C?"reverse":null).h(function(e){var t=m(e);return null!=t?i.animate(0,t-v):null}).w(e).horizontalRatio(y).verticalMargin(w).end;var L=4>=e||2>N,A=this.pvBar=(new R.visual.Bar(r,r.pvBarPanel.item,{extensionId:"bar",freePosition:!0,wrapper:k})).lockDimensions().pvMark.antialias(function(e){if(L)return!0;var t=m(e),n=null==t?0:Math.abs(t-v);return 1e-8>n});s.option("OverflowMarkersVisible")&&this._addOverflowMarkers(k);var O=R.visual.ValueLabel.maybeCreate(r,A,{wrapper:k});if(O){var M;O.hideOrTrimOverflowed&&(M=x,!o&&n>1&&(M/=n)),r.pvBarLabel=O.override("calcTextFitInfo",function(e,n){var r=this.pvMark,i=r.textMargin();if(!(-0.000001>i)){var s=r.textAngle(),o=Math.sin(s),a=Math.abs(o)<1e-6,f=!a&&Math.abs(Math.cos(s))<1e-6;if(a||f&&u){var l,c,h,p=A.height(),d=A.width(),v=u?p:d,m=u?d:p,g=t.Text.measure(n,r.font()),y=.75*g.height,b=g.width,w=r.name(),E=r.textBaseline(),S=r.textAlign(),x="center"===w,T=!1;if(u)if(a){c=x||w===E;if(!c)return;T|=x&&"middle"!==E?y+i>v/2:y+2*i>v}else T|=y>v,h="center"===S,c=x,c||h||(c=o>=1e-6?"left"===S?"top"===w:"bottom"===w:"left"===S?"bottom"===w:"top"===w),c?(l=!x||h?v-2*i:(v-i)/2,T|=("middle"===E?y>m:y>m/2)||this.hideOverflowed&&b>l):T|=y>=Math.max(m,M);else T|=y>v,c=x||w===S,c?(l=x&&"center"!==S?(v-i)/2:v-2*i,T|=("middle"===E?y>m:y>m/2)||this.hideOverflowed&&b>l):T|=y>=Math.max(m,M);return{hide:T,widthMax:l}}}}).pvMark}},_barVerticalMode:function(){return null},_barDifferentialControl:function(){return null},_getV1Datum:function(e){var t=e.datum;if(t){var n=Object.create(t);n.percent=e.vars.value.percent,t=n}return t},_addOverflowMarkers:function(e){var t=this.axes.ortho;null!=t.option("FixedMax")&&(this.pvOverflowMarker=this._addOverflowMarker(!1,t.scale,e)),null!=t.option("FixedMin")&&(this.pvUnderflowMarker=this._addOverflowMarker(!0,t.scale,e))},_addOverflowMarker:function(e,t,n){var r,i=this.isOrientationVertical(),s=i?"bottom":"left",o=this.anchorOpposite(s),u=this.anchorOrthoLength(s),a=this.anchorLength(s),f=this._layoutInfo.paddings,l=e?t.min-f[s]:t.max+f[o];return r=e?i?0:Math.PI/2:i?Math.PI:-Math.PI/2,(new R.visual.Dot(this,this.pvBar.anchor("center"),{noSelect:!0,noHover:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0,freePosition:!0,extensionId:e?"underflowMarker":"overflowMarker",wrapper:n})).intercept("visible",function(t){var n=this.delegateExtension();if(void 0!==n&&!n)return!1;var r=t.vars.value.value;if(null==r)return!1;var i=this.pvMark.scene.target[this.pvMark.index],o=i[s]+(r>0?i[u]:0);return e?l>o:o>l}).lock(o,null).lock("shapeSize").pvMark.shape("triangle").shapeRadius(function(){return Math.min(Math.sqrt(10),this.scene.target[this.index][a]/2)}).shapeAngle(r).lineWidth(1.5).strokeStyle("red").fillStyle("white")[s](function(){return l+(e?1:-1)*(this.shapeRadius()+2)})},renderInteractive:function(){this.pvPanel.render()},_buildScene:function(e,t,n){function r(t){var r=new R.visual.Scene(i,{source:t}),s=t.key;r.vars.series=Z.fromComplex(t),u.onNewScene(r,!1),n.forEach(function(t){var n=e.child(t.key),i=n&&n.child(s),a=new R.visual.Scene(r,{source:i}),f=a.vars.category=Z.fromComplex(n);f.group=n,o.onNewScene(a,!0),u.onNewScene(a,!0)})}var i=new R.visual.Scene(null,{panel:this,source:e}),s=this.visualRoles,o=new R.visual.RoleVarHelper(i,"value",s.value,{hasPercentSubVar:this.stacked}),u=new R.visual.RoleVarHelper(i,"color",s.color);return t.forEach(r),i}}),t.PieSlice=function(){t.Wedge.call(this)},t.PieSlice.prototype=t.extend(t.Wedge).property("offsetRadius");var ct=t.Shape.normalizeAngle;return t.PieSlice.prototype.midAngle=function(){var e=this.instance();return ct(e.startAngle)+ct(e.angle)/2},t.PieSlice.prototype.defaults=(new t.PieSlice).extend(t.Wedge.prototype.defaults).offsetRadius(0),e("pvc.visual.PieSlice",R.visual.Sign.extend({init:function(n,r,i){var s=r.add(t.PieSlice);i=e.setDefaults(i,"freeColor",!1),this.base(n,s,i),this._activeOffsetRadius=e.get(i,"activeOffsetRadius",0),this._maxOffsetRadius=e.get(i,"maxOffsetRadius",0),this._resolvePctRadius=e.get(i,"resolvePctRadius"),this._center=e.get(i,"center"),this.optional("lineWidth",.6)._bindProperty("angle","angle")._bindProperty("offsetRadius","offsetRadius")._lockDynamic("bottom","y")._lockDynamic("left","x").lock("top",null).lock("right",null)},properties:["offsetRadius"],methods:{angle:e.fun.constant(0),x:function(){return this._center.x+this._offsetSlice("cos")},y:function(){return this._center.y-this._offsetSlice("sin")},_offsetSlice:function(e){var t=this.pvMark.offsetRadius()||0;return t&&(t*=Math[e](this.pvMark.midAngle())),t},defaultColor:function(e,t){return"stroke"===t?null:this.base(e,t)},interactiveColor:function(e,t,n){if(this.mayShowActive(e,!0))switch(n){case"fill":return t.brighter(.2).alpha(.8);case"stroke":return t.brighter(1.3).alpha(.7)}else if(this.mayShowNotAmongSelected(e)&&"fill"===n)return this.dimColor(t,n);return this.base(e,t,n)},offsetRadius:function(e){var t=this.base(e);return Math.min(Math.max(0,t),this._maxOffsetRadius)},baseOffsetRadius:function(e){var t=this.base(e)||0;return this._resolvePctRadius($.parse(t))},interactiveOffsetRadius:function(e,t){return t+(this.mayShowActive(e,!0)?this._activeOffsetRadius:0)}}})),e("pvc.visual.PiePlot",R.visual.Plot.extend({init:function(t,n){this.base(t,n);if(!(t instanceof R.PieChart))throw e.error(e.format("Plot type '{0}' can only be used from within a pie chart.",[this.type]))},methods:{type:"pie",_initVisualRoles:function(){this.base(),this._addVisualRole("category",{isRequired:!0,defaultDimension:"category*",autoCreateDimension:!0}),this._addVisualRole("value",{isMeasure:!0,isRequired:!0,isPercent:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"value"})},_getColorRoleSpec:function(){return{isRequired:!0,defaultSourceRole:"category",defaultDimension:"color*",requireIsDiscrete:!0}},createVisibleData:function(e,t){return this.visualRoles.category.flatten(e,t)},_initDataCells:function(){this.base();var e=this.option("DataPart");this._addDataCell(new R.visual.DataCell(this,"category",this.index,this.visualRole("category"),e)),this._addDataCell(new R.visual.DataCell(this,"angle",this.index,this.visualRoles.value,e))}},options:{ActiveSliceRadius:{resolve:"_resolveFull",cast:$.parse,value:new $(.05)},ExplodedSliceRadius:{resolve:"_resolveFull",cast:$.parse,value:0},ExplodedSliceIndex:{resolve:"_resolveFull",cast:e.number.to,value:null},ValuesAnchor:{cast:R.parseAnchorWedge,value:"outer"},ValuesVisible:{value:!0},ValuesLabelStyle:{resolve:function(e){return this.chart.compatVersion()>1?this._resolveFull(e):(e.specify("inside"),!0)},cast:function(t){switch(t){case"inside":case"linked":return t}return e.debug>=2&&e.log("[Warning] Invalid 'ValuesLabelStyle' value: '"+t+"'."),"linked"},value:"linked"},ValuesMask:{resolve:"_resolveFull",data:{resolveDefault:function(e){return e.defaultValue("linked"===this.option("ValuesLabelStyle")?"{value} ({value.percent})":"{value}"),!0}}},LinkInsetRadius:{resolve:"_resolveFull",cast:$.parse,value:new $(.05)},LinkOutsetRadius:{resolve:"_resolveFull",cast:$.parse,value:new $(.025)},LinkMargin:{resolve:"_resolveFull",cast:$.parse,value:new $(.025)},LinkHandleWidth:{resolve:"_resolveFull",cast:e.number.to,value:.5},LinkLabelSize:{resolve:"_resolveFull",cast:$.parse,value:new $(.15)},LinkLabelSpacingMin:{resolve:"_resolveFull",cast:e.number.to,value:.5}}})),R.visual.Plot.registerClass(R.visual.PiePlot),e.type("pvc.PiePanel",R.PlotPanel).init(function(e,t,n,r){var i=n.option("ValuesLabelStyle");this.base(e,t,n,r),this.explodedOffsetRadius=n.option("ExplodedSliceRadius"),this.explodedSliceIndex=n.option("ExplodedSliceIndex"),this.activeOffsetRadius=n.option("ActiveSliceRadius"),this.labelStyle=i,"linked"===i&&(this.linkInsetRadius=n.option("LinkInsetRadius"),this.linkOutsetRadius=n.option("LinkOutsetRadius"),this.linkMargin=n.option("LinkMargin"),this.linkHandleWidth=n.option("LinkHandleWidth"),this.linkLabelSize=n.option("LinkLabelSize"),this.linkLabelSpacingMin=n.option("LinkLabelSpacingMin")),e.pieChartPanel||(e.pieChartPanel=this),this.axes.category=e._getAxis("category",n.index),this.axes.angle=e._getAxis("angle",n.index)}).add({plotType:"pie",_ibits:-1,pvPie:null,pvPieLabel:null,valueRoleName:"value",_getV1Datum:function(e){var t=e.datum;if(t){var n=Object.create(t);n.percent=e.vars.value.percent,t=n}return t},_calcLayout:function(n){function r(t){return e.between($.resolve(t,u),0,u)}function i(t){return e.between($.resolve(t,o),0,o)}var s=n.clientSize,o=s.width,u=Math.min(o,s.height)/2;if(!u)return new K(0,0);var a=t.vector(s.width/2,s.height/2),f=this._getConstantExtension("label","font");e.string.is(f)||(f=this.valuesFont);var l=u;if(this.valuesVisible&&"linked"===this.labelStyle){var c=e.number.to(this._getConstantExtension("label","textMargin"),3),h=t.Text.fontHeight(f),p=this.linkHandleWidth*h,d=r(this.linkInsetRadius),v=r(this.linkOutsetRadius),m=i(this.linkMargin)+p,g=i(this.linkLabelSize),y=this.linkLabelSpacingMin*h,b=Math.max(0,o/2-u),w=Math.max(0,v+m+g-b),E=v+h,S=Math.max(0,E,w);S>=l?(this.valuesVisible=!1,e.debug>=2&&this.log("Hiding linked labels due to insufficient space.")):(l-=S,n.link={insetRadius:d,outsetRadius:v,elbowRadius:l+v,linkMargin:m,handleWidth:p,labelSize:g,maxTextWidth:g-c,labelSpacingMin:y,textMargin:c,lineHeight:h})}var x=r(this.explodedOffsetRadius),T=0;this.hoverable()&&(T=r(this.activeOffsetRadius));var N=x+T,C=l-N;if(0>C)return new K(0,0);n.resolvePctRadius=r,n.center=a,n.clientRadius=u,n.normalRadius=C,n.explodedOffsetRadius=x,n.activeOffsetRadius=T,n.maxOffsetRadius=N,n.labelFont=f},_createCore:function(n){var r,i=this,s=i.chart,o=this._buildScene(),u=n.center,a=n.normalRadius,f=["slice"];this.compatVersion()<=1&&(f.push(""),r=function(e){return function(t){return e.call(this,t.vars.value.value)}}),this.pvPie=(new R.visual.PieSlice(this,this.pvPanel,{extensionId:f,center:u,activeOffsetRadius:n.activeOffsetRadius,maxOffsetRadius:n.maxOffsetRadius,resolvePctRadius:n.resolvePctRadius,wrapper:r,tooltipArgs:{options:{useCorners:!0,gravity:function(){var e=this.midAngle(),t=Math.cos(e)>=0,n=Math.sin(e)>=0;return t?n?"nw":"sw":n?"ne":"se"}}}})).lock("data",o.childNodes).override("angle",function(e){return e.vars.value.angle}).override("defaultOffsetRadius",function(){var e=i.explodedSliceIndex;return null==e||e==this.pvMark.index?n.explodedOffsetRadius:0}).optionalMark("outerRadius",function(){return s.animate(0,a)}).localProperty("innerRadiusEx",$.parse).intercept("innerRadius",function(){var e=this.delegateExtension();if(null==e){var t=this.pvMark.innerRadiusEx();e=null!=t?$.resolve(t,this.pvMark.outerRadius())||0:0}return e>0?s.animate(0,e):0}).pvMark;if(this.valuesVisible){this.valuesFont=n.labelFont;if("inside"===this.labelStyle)this.pvPieLabel=R.visual.ValueLabel.maybeCreate(this,this.pvPie,{wrapper:r}).override("defaultText",function(e){return e.vars.value.sliceLabel}).override("calcTextFitInfo",function(e,n){var r=this.pvMark,s=r.textMargin();if(!(-0.000001>s)){var o=r.textBaseline();if("middle"===o){var u=R.normAngle(i.pvPie.midAngle()),a=R.normAngle(r.textAngle()),f=Math.abs(u-a)<1e-6,l=!1;if(!f){var c=R.normAngle(a+Math.PI);l=Math.abs(u-c)<1e-6}if(f||l){var h=r.name(),p=r.textAlign(),d="outer"===h?p===(f?"right":"left"):!1;if(d){var v=!1,m=t.Text.measure(n,r.font()),g=.85*m.height,y=i.pvPie.outerRadius(),b=i.pvPie.innerRadius(),w=e.vars.value.angle,E=g+s/2,S=w<Math.PI?Math.max(b,E/(2*Math.tan(w/2))):b,x=y-s-S;return v|=0>=x,x-=s,v|=this.hideOverflowed&&m.width>x,{hide:v,widthMax:x}}}}}}).pvMark.textMargin(10);else if("linked"===this.labelStyle){var l=n.link;o.layoutLinkLabels(n),this.pvLinkPanel=this.pvPanel.add(t.Panel).data(o.childNodes).localProperty("pieSlice").pieSlice(function(){return i.pvPie.scene[this.index]});var c=!1,h=!0;this.pvLinkLine=(new R.visual.Line(this,this.pvLinkPanel,{extensionId:"linkLine",freePosition:h,noClick:h,noDoubleClick:h,noSelect:h,noTooltip:h,noHover:h,showsActivity:c})).lockMark("data",function(e){var t=this.parent.pieSlice(),n=t.startAngle+t.angle/2,r=t.outerRadius-l.insetRadius,i=t.left+r*Math.cos(n),s=t.top+r*Math.sin(n),o=e.childNodes[0];return o&&o._isFirstDynamicScene?(o.x=i,o.y=s):(o=new R.visual.PieLinkLineScene(e,i,s,0),o._isFirstDynamicScene=h),e.childNodes}).override("defaultColor",function(e,t){return"stroke"===t?"black":this.base(e,t)}).override("defaultStrokeWidth",e.fun.constant(.5)).pvMark.lock("visible").lock("top",function(e){return e.y}).lock("left",function(e){return e.x}),this.pvPieLabel=(new R.visual.Label(this,this.pvLinkPanel,{extensionId:"label",noClick:c,noDoubleClick:c,noSelect:c,noHover:c,showsInteraction:h})).lockMark("data",function(e){return e.lineScenes}).intercept("textStyle",function(e){this._finished=c;var t=this.delegate();return t&&!this._finished&&!this.mayShowActive(e)&&this.mayShowNotAmongSelected(e)&&(t=this.dimColor(t,"text")),t}).pvMark.lock("visible").left(function(e){return e.vars.link.labelX}).top(function(e){return e.vars.link.labelY+(this.index+1)*l.lineHeight}).textAlign(function(e){return e.vars.link.labelAnchor}).textMargin(l.textMargin).textBaseline("bottom").text(function(e){return e.vars.link.labelLines[this.index]});if(e.debug>=20){this.pvPanel.add(t.Panel).zOrder(-10).left(u.x-n.clientRadius).top(u.y-n.clientRadius).width(2*n.clientRadius).height(2*n.clientRadius).strokeStyle("red"),this.pvPanel.strokeStyle("green");var p=t.Colors.category10();this.pvLinkLine.segmented(h).strokeStyle(function(){return p(this.index)})}}this.pvPieLabel.font(n.labelFont)}},_getExtensionId:function(){var e=[{abs:"content"}];return this.chart.parent&&e.push({abs:"smallContent"}),e.concat(this.base())},renderInteractive:function(){this.pvPanel.render()},_buildScene:function(){var e=new R.visual.PieRootScene(this);return this.sum=e.vars.sumAbs.value,e}}),R.PlotPanel.registerClass(R.PiePanel),e.type("pvc.visual.PieRootScene",R.visual.Scene).init(function(t){function n(e,t){if(t){var n=t._datums;if(1===n.length)return n[0].atoms[o].label}return u.format(e)}var r=t.axes.category,i=r.domainData();this.base(null,{panel:t,source:i});var s=new R.visual.RoleVarHelper(this,"color",t.visualRoles.color),o=t.visualRoles[t.valueRoleName].lastDimensionName(),u=i.dimensions(o),a=t.chart.options.percentValueFormat,f=t.axes.angle.scale,l=f.isNull?0:f.domain()[1],c=this;this.vars.sumAbs=new Z(l,n(l));var h=e.type(R.visual.PieCategoryScene).init(function(e,t){this.base(c,{source:e}),this.vars.category=Z.fromComplex(e);var r=new Z(t,n(t,e));r.angle=f(t);var i=Math.abs(t)/l;r.percent=new Z(i,a(i)),this.vars.value=r,r.sliceLabel=this.sliceLabel(),s.onNewScene(this,!0)});t._extendSceneType("category",h,["sliceLabel","sliceLabelMask"]);var p=r.domainItems();if(p.length){p.forEach(function(e){var t=e.dimensions(o).value();0!==t&&new h(e,t)});if(!c.childNodes.length&&!t.chart.visualRoles.multiChart.isBound())throw new InvalidDataException("Unable to create a pie chart, please check the data values.")}}).add({layoutLinkLabels:function(e){var t=-Math.PI/2,n=[],r=[];this.childNodes.forEach(function(i){t=i.layoutI(e,t),(i.vars.link.dir>0?r:n).push(i)}),this._distributeLabels(-1,n,e),this._distributeLabels(1,r,e)},_distributeLabels:function(t,n,r){n.sort(function(t,n){return e.compare(t.vars.link.targetY,n.vars.link.targetY)}),this._distributeLabelsDownwards(n,r)&&this._distributeLabelsUpwards(n,r)&&this._distributeLabelsEvenly(n,r),n.forEach(function(e){e.layoutII(r)})},_distributeLabelsDownwards:function(e,t){for(var n=t.link,r=n.labelSpacingMin,i=t.clientSize.height,s=!1,o=0,u=e.length-1;u>o;o++){var a=e[o].vars.link;!o&&a.labelTop()<0&&(s=!0);var f=e[o+1].vars.link,l=a.labelBottom()+r;if(f.labelTop()<l){var c=f.labelHeight/2,h=l+c,p=i-c;h>p?(s=!0,f.targetY=p):f.targetY=h}}return s},_distributeLabelsUpwards:function(e,t){for(var n=t.link,r=n.labelSpacingMin,i=!1,s=e.length-1;s>0;s--){var o=e[s-1].vars.link,u=e[s].vars.link;1===s&&o.labelTop()<0&&(i=!0);var a=u.labelTop()-r;if(o.labelBottom()>a){var f=o.labelHeight/2,l=a-f,c=f;c>l?(i=!0,o.targetY=c):o.targetY=l}}return i},_distributeLabelsEvenly:function(e,t){var n=0;e.forEach(function(e){n+=e.vars.link.labelHeight});var r=t.clientSize.height-n,i=r;e.length>1&&(i/=e.length-1);var s=0;return e.forEach(function(e){var t=e.vars.link,n=t.labelHeight/2;s+=n,t.targetY=s,s+=n+i}),!0}}),e.type("pvc.visual.PieLinkLabelVar").add({labelTop:function(){return this.targetY-this.labelHeight/2},labelBottom:function(){return this.targetY+this.labelHeight/2}}),e.type("pvc.visual.PieCategoryScene",R.visual.Scene).add({sliceLabelMask:function(){return this.panel().valuesMask},sliceLabel:function(){return this.format(this.sliceLabelMask())},layoutI:function(t,n){var r=this.vars.value,i=n+r.angle,s=(n+i)/2,o=this.vars.link=new R.visual.PieLinkLabelVar,u=t.link,a=R.text.justify(r.sliceLabel,u.maxTextWidth,t.labelFont),f=a.length;o.labelLines=a,o.labelHeight=f*u.lineHeight,this.lineScenes=e.array.create(f,this);var l=Math.cos(s),c=Math.sin(s),h=l>=0,p=h?1:-1;o.labelAnchor=h?"left":"right";var d=t.center,v=u.elbowRadius,m=d.x+v*l,g=d.y+v*c,y=d.x+p*v,b=y+p*u.linkMargin;return new R.visual.PieLinkLineScene(this,m,g),new R.visual.PieLinkLineScene(this,y,g),o.elbowY=g,o.targetY=g+0,o.targetX=b,o.dir=p,i},layoutII:function(e){var t=this.vars.link,n=t.targetY,r=t.targetX,i=e.link.handleWidth;i>0&&new R.visual.PieLinkLineScene(this,r-t.dir*i,n),new R.visual.PieLinkLineScene(this,r,n),t.labelX=r,t.labelY=n-t.labelHeight/2}}),e.type("pvc.visual.PieLinkLineScene",R.visual.Scene).init(function(e,t,n,r){this.base(e,{source:e.group,index:r}),this.x=t,this.y=n}).add(t.Vector),e.type("pvc.PieChart",R.BaseChart).add({_axisClassByType:{category:R.visual.Axis,angle:R.visual.NormalizedAxis},_axisCreateChartLevel:{category:2,angle:2},_axisSetScaleChartLevel:{category:2,angle:2},_axisCreationOrder:function(){var e=R.BaseChart.prototype._axisCreationOrder.slice();return e.push("category","angle"),e}(),_createPlotsInternal:function(){this._addPlot(new R.visual.PiePlot(this))},_setAxisScale:function(e,t){this.base(e,t),2&t&&"angle"===e.type&&e.setScaleRange({min:0,max:2*Math.PI})},_createContent:function(t,n){var r=this.compatVersion()<=1;if(r){var i=e.number.to(this.options.innerGap)||.95;i=e.between(i,.1,1),n.paddings=(100*(1-i)/2).toFixed(2)+"%"}else null==n.paddings&&(n.paddings=new $(.025));n.scenes=e.getPath(this.options,"pie.scenes"),this.base(t,n)}}),e("pvc.visual.BarPlot",R.visual.BarPlotAbstract.extend({methods:{type:"bar"}})),R.visual.Plot.registerClass(R.visual.BarPlot),e.type("pvc.BarPanel",R.BarAbstractPanel).add({plotType:"bar",_ibits:-1}),R.PlotPanel.registerClass(R.BarPanel),e.type("pvc.BarChart",R.BarAbstract).add({_allowV1SecondAxis:!0,_createPlotsInternal:function(){this._addPlot(new R.visual.BarPlot(this)),this.options.plot2&&this._addPlot(new R.visual.PointPlot(this,{name:"plot2",defaults:{DataPart:"1",ColorAxis:2,LinesVisible:!0,DotsVisible:!0}}))},_createPlotTrend:function(){this._addPlot(new R.visual.PointPlot(this,{name:"trend",spec:{visualRoles:{color:{from:"series"}}},fixed:{TrendType:"none",NullInterpolatioMode:"none"},defaults:{DataPart:"trend",ColorAxis:2,LinesVisible:!0,DotsVisible:!1}}))},_createContent:function(e,t){this.base(e,t);var n=this.plotPanels.bar,r=this.plotPanels.plot2;r&&"point"===r.plot.type&&(n&&(n.pvSecondLine=r.pvLine,n.pvSecondDot=r.pvDot),r._applyV1BarSecondExtensions=!0)}}),e("pvc.visual.NormalizedBarPlot",R.visual.BarPlotAbstract.extend({methods:{type:"nbar"},options:{Stacked:{resolve:null,value:!0}}})),R.visual.Plot.registerClass(R.visual.NormalizedBarPlot),e.type("pvc.NormalizedBarPanel",R.BarAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),e.barChartPanel||(e.barChartPanel=this)}).add({plotType:"nbar",_barVerticalMode:function(){return"expand"}}),R.PlotPanel.registerClass(R.NormalizedBarPanel),e.type("pvc.NormalizedBarChart",R.BarAbstract).add({_getContinuousVisibleExtentConstrained:function(e,t,n){return"ortho"===e.type?{min:0,max:100,minLocked:!0,maxLocked:!0}:this.base(e,t,n)},_createPlotsInternal:function(){this._addPlot(new R.visual.NormalizedBarPlot(this))}}),R.parseWaterDirection=function(t){if(t){t=(""+t).toLowerCase();switch(t){case"up":case"down":return t}e.debug>=2&&e.log("[Warning] Invalid 'WaterDirection' value: '"+t+"'.")}},e("pvc.visual.WaterfallPlot",R.visual.BarPlotAbstract.extend({init:function(e,t){this.base(e,t),e._registerInitLegendScenes(this._initLegendScenes.bind(this))},methods:{type:"water",_waterColor:t.color("#1f77b4").darker(),_initEnd:function(){var e=R.makeExtensionAbsId("line",this.extensionPrefixes),n=this.chart._getConstantExtension(e,"strokeStyle");n&&(this._waterColor=t.color(n)),this.base()},_getCategoryRoleSpec:function(){var e=this.base(),t=this.isFalling()?"FlattenDfsPre":"FlattenDfsPost";return e.traversalModes=R.visual.TraversalMode[t],e.rootLabel=this.option("AllCategoryLabel"),e},isFalling:function(){return"down"===this.option("Direction")},_reduceStackedCategoryValueExtent:function(e,t,n,r,i,s){var o,u=t?t.offset:0,a=n.min+n.max;if(!t)return n?(o=u+a,i.setDataCellScaleInfo(s,[{offset:o,group:r,range:n}]),{min:n.min,max:n.max,offset:o}):null;var f=this.isFalling(),l=r._isFlattenGroup&&!r._isDegenerateFlattenGroup;if(l){var c=-n.min;if(c>0){var h=u+c;h>t.max&&(t.max=h)}var p=-n.max;if(0>p){var d=u+p;d<t.min&&(t.min=d)}}else{var v=f?-1:1;o=t.offset=u+v*a,o>t.max?t.max=o:o<t.min&&(t.min=o)}return i.getDataCellScaleInfo(s).push({offset:f?u:t.offset,group:r,range:n}),t},_initLegendScenes:function(t){var n=t._getLegendRootScene();new R.visual.legend.WaterfallLegendGroupScene(n,this,{extensionPrefix:e.indexedId("",1),label:this.option("TotalLineLabel"),color:this._waterColor})}},options:{Stacked:{resolve:null,value:!0},TotalLineLabel:{resolve:"_resolveFull",cast:String,value:"Accumulated"},TotalValuesVisible:{resolve:"_resolveFull",data:{resolveDefault:function(e){return e.defaultValue(this.option("ValuesVisible")),!0}},cast:Boolean},Direction:{resolve:"_resolveFull",cast:R.parseWaterDirection,value:"down"},AreasVisible:{resolve:"_resolveFull",cast:Boolean,value:!0},AllCategoryLabel:{resolve:"_resolveFull",cast:String,value:"All"}}})),R.visual.Plot.registerClass(R.visual.WaterfallPlot),e.type("pvc.visual.legend.WaterfallLegendGroupScene",R.visual.legend.LegendGroupScene).init(function(t,n,r){r=e.set(r,"clickMode","none"),this.base(t,r),this.plot=n,this.createItem(r)}).add({itemSceneType:function(){return R.visual.legend.WaterfallLegendItemScene}}),e.type("pvc.visual.legend.WaterfallLegendItemScene",R.visual.legend.LegendItemScene).init(function(t,n){this.base.apply(this,arguments);var r=R.visual.Interactive;this._ibits=r.Interactive|r.ShowsInteraction,this.color=e.get(n,"color"),this.vars.value=new Z(null,e.get(n,"label"))}),e.type("pvc.WaterfallPanel",R.BarAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),e.wfChartPanel||(e.wfChartPanel=this)}).add({plotType:"water",_ibits:-1,pvWaterfallLine:null,ruleData:null,_barDifferentialControl:function(){var e=this.plot.isFalling();return function(t){if(e&&!this.index)return 1;var n=t.vars.category.group,r=n._isFlattenGroup&&!n._isDegenerateFlattenGroup;return r?-2:e?-1:1}},_creating:function(){var n=this._getLegendRootScene();if(n){var r=e.query(n.childNodes).first(function(e){return e.plot===this},this.plot);if(r&&!r.hasRenderer()){var i={drawLine:!0,drawMarker:!1,rulePvProto:new t.Rule};this.extend(i.rulePvProto,"line",{constOnly:!0}),r.renderer(i)}}},_createCore:function(){this.base();var n=this.chart,r=this.isOrientationVertical(),i=r?"bottom":"left",s=this.anchorOrtho(i),o=this.axes.ortho,u=this.axes.base,a=this.plot.dataCellsByRole.value[0],f=o.getDataCellScaleInfo(a),l=this._buildRuleScene(f),c=o.scale,h=c(0),p=o.sceneScale({sceneVarName:"value"}),d=u.sceneScale({sceneVarName:"category"}),v=u.scale,m=this.barWidth/2,g=this.barWidth,y=this.barStepWidth,b=this.plot.isFalling(),w=this.plot._waterColor;if(this.plot.option("AreasVisible")){var E=t.Colors.category10(),S=this._buildWaterGroupScene(f),x=c.range(),T=.04*(x[1]-x[0]);this.pvWaterfallGroupPanel=(new R.visual.Panel(this,this.pvPanel,{extensionId:"group"})).lock("data",S.childNodes).pvMark.zOrder(-1).fillStyle(function(){return E(0).alpha(.15)})[s](function(e){var t=e.vars.category;return v(t.valueLeft)-y/2})[this.anchorLength(i)](function(e){var t=e.vars.category,n=Math.abs(v(t.valueRight)-v(t.valueLeft));return n+y})[i](function(e){var t=e.vars.value,r=c(t.valueBottom)-T/2;return n.animate(h,r)})[this.anchorOrthoLength(i)](function(e){var t=e.vars.value,r=c(t.valueTop)-c(t.valueBottom)+T;return n.animate(0,r)})}this.pvBar.sign.override("baseColor",function(e,n){var r=this.base(e,n);return"fill"!==n||e.vars.category.group._isFlattenGroup?r:t.color(r).alpha(.5)}),this.pvWaterfallLine=(new R.visual.Rule(this,this.pvPanel,{extensionId:"line",noTooltip:!1,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1})).lock("data",l.childNodes).optional("visible",function(e){return b&&!!e.previousSibling||!b&&!!e.nextSibling}).optional(i,function(e){return h+n.animate(0,p(e)-h)}).optional(this.anchorLength(i),y+g).optional(s,b?function(e){return d(e)-y-m}:function(e){return d(e)-m}).override("defaultColor",e.fun.constant(w)).pvMark.antialias(!0).lineCap("butt"),this.plot.option("TotalValuesVisible")&&(this.pvWaterfallLabel=(new R.visual.Label(this,this.pvWaterfallLine,{extensionId:"lineLabel"})).intercept("visible",function(e){return!e.vars.category.group._isFlattenGroup&&(b||!!e.nextSibling)}).pvMark[i](function(e){return h+n.animate(0,p(e)-h)})[this.anchorOrtho(i)](d).textAlign(r?"center":"left").textBaseline(function(e){if(!r)return"middle";var t=e.vars.direction;if(null==t)return"bottom";var n=!b;return n===("up"===t)?"bottom":"top"}).textStyle(t.Color.names.darkgray.darker(2)).textMargin(5).text(function(e){return e.vars.value.label}))},_buildRuleScene:function(t){function n(e){var t=e.group,n=new R.visual.Scene(u,{source:t}),r=n.vars.category=Z.fromComplex(t),i=e.offset;r.group=t,n.vars.value=new Z(i,o.format(i))}function r(e,t){var n=e.vars.value.value;e.vars.direction=t&&i!==n?s===n>i?"up":"down":null,i=n}var i,s,o,u=new R.visual.Scene(null,{panel:this,source:this.visibleData({ignoreNulls:!1})});if(t){o=this.chart.data.dimensions(this.visualRoles.value.lastDimensionName()),t.forEach(n,this);var a=e.query(u.childNodes);s=!this.plot.isFalling(),s||(a=a.reverse()),a.each(r,this)}return u},_buildWaterGroupScene:function(t){function n(e,t){var i=e.children().where(function(e){return""!==e.key});if(i.next()){t&&r(e,t),t++;do n(i.item,t);while(i.next())}}function r(e,t){var n=new R.visual.Scene(l,{source:e}),r=n.vars.category=Z.fromComplex(e);r.group=e,r.level=t;var a,f,c,h,p,d=n.vars.value={},v=o[e.absKey],m=v.offset,g=v.range,y=-g.min+g.max;u?(a=s(e),f=o[a.absKey],c=v.group.value,h=f.group.value,p=m-g.max):(a=i(e),f=o[a.absKey],c=f.group.value,h=v.group.value,p=m-g.max),r.valueLeft=c,r.valueRight=h,d.valueHeight=y,d.valueBottom=p,d.valueTop=p+y}function i(e){var t=e.childNodes,n=t&&t[0];return n?i(n):e}function s(e){var t=e.childNodes,n=t&&t[t.length-1];return n?s(n):e}var o,u,a=this.chart,f=this.visualRoles.category.select(a.partData(this.dataPartValue),{visible:!0}),l=new R.visual.Scene(null,{panel:this,source:f});return t&&(o=e.query(t).object({name:function(e){return e.group.absKey}}),u=this.plot.isFalling(),n(f,0)),l}}),R.PlotPanel.registerClass(R.WaterfallPanel),e.type("pvc.WaterfallChart",R.BarAbstract).add({_processOptionsCore:function(e){e.baseAxisComposite=!1,this.base(e)},_createPlotsInternal:function(){this._addPlot(new R.visual.WaterfallPlot(this))}}),e("pvc.visual.PointPlot",R.visual.CategoricalPlot.extend({methods:{type:"point",_initVisualRoles:function(){this.base(),this._addVisualRole("value",{isMeasure:!0,isRequired:!0,isPercent:this.option("Stacked"),requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"value"})}},options:{DotsVisible:{resolve:"_resolveFull",data:F("Dots",!0),cast:Boolean,value:!1},LinesVisible:{resolve:"_resolveFull",data:F("Lines",!0),cast:Boolean,value:!1},AreasVisible:{resolve:"_resolveFull",data:F("Areas",!1),cast:Boolean,value:!1},ValuesAnchor:{value:"right"}}})),R.visual.Plot.registerClass(R.visual.PointPlot),e.type("pvc.PointPanel",R.CategoricalAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.linesVisible=n.option("LinesVisible"),this.dotsVisible=n.option("DotsVisible"),this.areasVisible=n.option("AreasVisible"),!this.linesVisible&&!this.dotsVisible&&!this.areasVisible&&(this.linesVisible=!0,n.option.specify({LinesVisible:!0})),e.scatterChartPanel||(e.scatterChartPanel=this)}).add({plotType:"point",_ibits:-1,pvLine:null,pvArea:null,pvDot:null,pvLabel:null,pvScatterPanel:null,_creating:function(){var n=this.plot.dataCellsByRole.color[0];if(!n.legendSymbolRenderer()&&n.legendVisible()){var r=this.axes.color,i=e.nullyTo(r.option("LegendDrawMarker",!0),this.dotsVisible||this.areasVisible),s=!i||e.nullyTo(r.option("LegendDrawLine",!0),this.linesVisible&&!this.areasVisible),o=R.uniqueExtensionAbsPrefix(),u={drawMarker:i,drawLine:s,extensionPrefix:{abs:o}};this.chart._processExtensionPointsIn(n.role.legend(),o);if(i){var a=r.option("LegendShape",!0);u.markerPvProto=new t.Dot,this.dotsVisible&&(a||(a="circle"),u.markerPvProto.lineWidth(1.5,R.extensionTag).shapeSize(12,R.extensionTag)),u.markerShape=a,this._applyV1BarSecondExtensions&&this.chart.extend(u.markerPvProto,"barSecondDot",{constOnly:!0}),this.extend(u.markerPvProto,"dot",{constOnly:!0})}s&&(u.rulePvProto=(new t.Rule).lineWidth(1.5,R.extensionTag),this._applyV1BarSecondExtensions&&this.chart.extend(u.rulePvProto,"barSecondLine",{constOnly:!0}),this.extend(u.rulePvProto,"line",{constOnly:!0})),n.legendSymbolRenderer(u)}},_createCore:function(){this.base();var n,r=this,i=this.chart,s=this.stacked,o=this.dotsVisible,u=this.areasVisible,a=this.linesVisible,f=this.isOrientationVertical()?"bottom":"left",l=this.axes.base,c=l.domainItems(),h=l.role.grouping.isDiscrete(),p=this.visibleData({ignoreNulls:!1}),d=this._buildScene(p,c,h);this.pvPanel.zOrder(u?-7:1),this.pvScatterPanel=(new R.visual.Panel(this,this.pvPanel,{extensionId:"panel"})).lock("data",d.childNodes).pvMark;var v=u&&a&&!s?.5:null;this.compatVersion()<=1&&(n=s?function(e){return function(t){return e.call(this,t.vars.value.rawValue)}}:function(e){return function(t){var n={category:t.vars.category.rawValue,value:t.vars.value.rawValue},r=Object.create(this);return r.index=t.dataIndex,e.call(r,n)}});var m=h&&s?function(e){return!e.isNull||e.isIntermediate}:function(e){return!e.isNull},g=i.selectableByFocusWindow();this.pvArea=(new R.visual.Area(this,this.pvScatterPanel,{extensionId:"area",noTooltip:!1,wrapper:n,noSelect:g,noRubberSelect:!0,showsSelection:!g})).lockMark("data",function(e){return e.childNodes}).lockMark("visible",m).override("x",function(e){return e.basePosition}).override("y",function(e){return e.orthoPosition}).override("dy",function(e){return i.animate(0,e.orthoLength)}).override("color",function(e,t){return u?this.base(e,t):null}).override("baseColor",function(e,t){var n=this.base(e,t);return!this._finished&&n&&null!=v?n.alpha(v):n}).override("dimColor",function(e,t){return s?R.toGrayScale(e,1,null,null).brighter():this.base(e,t)}).lock("events",u?"painted":"none").pvMark;var y=o&&!a&&!u,b=s&&u,w=["line"];this._applyV1BarSecondExtensions&&w.push({abs:"barSecondLine"});var E=!y&&m,S=u&&!a;this.pvLine=(new R.visual.Line(this,this.pvArea.anchor(this.anchorOpposite(f)),{extensionId:w,freePosition:!0,wrapper:n,noTooltip:S,noDoubleClick:S,noClick:S,noHover:S,noSelect:S||g,showsSelection:!g})).lockMark("visible",E).override("defaultColor",function(e,t){var n=this.base(e,t);return!this._finished&&b&&n?n.darker(.6):n}).override("normalColor",function(e,t){return a?t:null}).override("interactiveColor",function(e,t,n){return a||this.mayShowAnySelected(e)||this.mayShowActive(e)?this.base(e,t,n):null}).override("baseStrokeWidth",function(e){var t;return a&&(t=this.base(e)),null==t?1.5:t}).intercept("strokeDasharray",function(e){var t=this.delegateExtension();if(void 0===t){var n=e.isInterpolated;if(!n){var r=e.nextSibling;n=r&&r.isIntermediate&&r.isInterpolated;if(!n){var i=e.previousSibling;n=i&&e.isIntermediate&&i.isInterpolated}}t=n?". ":null}return t}).pvMark;var x=!(u&&h&&s);w=["dot"],this._applyV1BarSecondExtensions&&w.push({abs:"barSecondDot"}),this.pvDot=(new R.visual.Dot(this,this.pvLine,{extensionId:w,freePosition:!0,wrapper:n,tooltipArgs:{options:{ignoreRadius:a}}})).intercept("visible",function(e){return!e.isNull&&!e.isIntermediate&&this.delegateExtension(!0)}).override("color",function(e,n){if(!o){var r=e.isActive||!x&&e.isSingle||x&&e.isAlone;if(!r)return R.invisibleFill}var i=this.base(e,n);return e.isInterpolated&&"fill"===n?i&&t.color(i).brighter(.5):i}).override("defaultColor",function(e,t){var n=this.base(e,t);return!this._finished&&b&&n?n.darker(.6):n}).override("baseSize",function(t){if(!o){var n=t.isActive||!x&&t.isSingle||x&&t.isAlone;if(n&&!t.isActive){var i=Math.max(r.pvLine.lineWidth(),.2)/2;return e.sqr(i)}}var s=this.base(t);return t.isInterpolated?.8*s:s}).pvMark;var T=R.visual.ValueLabel.maybeCreate(this,this.pvDot,{wrapper:n});T&&(this.pvLabel=T.pvMark)},renderInteractive:function(){this.pvScatterPanel.render()},_buildScene:function(t,n,r){function i(e){for(var t,n=[],r=e.childNodes,i=0,u=null,a=0,f=0,l=r.length;l>a;a++,f++){var c=r[f],p=2*a;n[p]=c,s.call(this,t,c,S&&S[p]),c.isAlone&&!u&&(u=c),c.isNull||i++;if(t){var d=o.call(this,e,t,c,f,S&&S[p-1]);d&&(n[p-1]=d,f++)}t=c}1===i&&u&&1===l&&(u.isSingle=!0),h&&(S=n)}function s(e,t,n){var i=t.vars.value.accValue;n&&(t.isNull&&!r?i=b:i+=n.vars.value.accValue,t.vars.value.accValue=i),t.basePosition=E(t),t.orthoPosition=w,t.orthoLength=y(i)-w;var s=!e||e.isNull,o=s&&!t.isNull;if(o){var u=t.nextSibling;o=!u||u.isNull}t.isAlone=o,t.isSingle=!1}function o(e,t,n,i,s){var o=t.isNull||n.isNull;if(o&&!this.areasVisible)return null;var u,a,f;if(o){if(s&&r){var l=s.vars.value;a=l.accValue,u=l[c.name]}else u=a=b;f=h&&r?n.basePosition-E.range().step/2:t.isNull?n.basePosition:t.basePosition}else{var p=t.vars.value,v=n.vars.value;u=(v.value+p.value)/2,a=(v.accValue+p.accValue)/2,f=(n.basePosition+t.basePosition)/2}var g=new R.visual.Scene(e,{index:i,source:n.source});g.dataIndex=n.dataIndex,g.vars.category=n.vars.category;var S=new Z(u,m.format(u),u);return S.accValue=a,g.vars.value=S,g.ownerScene=n,g.isInterpolated=n.isInterpolated,g.isIntermediate=!0,g.isSingle=!1,g.isNull=o,g.isAlone=o&&n.isNull&&t.isNull,g.basePosition=f,g.orthoPosition=w,g.orthoLength=y(a)-w,d.onNewScene(g,!0),g}function u(e){for(var t,n,r=e.childNodes,i=r.length;i&&(t=r[0]).isNull;){n=t.nextSibling;if(n&&!n.isNull)break;e.removeAt(0),i--}for(;i&&(t=r[i-1]).isNull;){n=t.previousSibling;if(n&&!n.isNull)break;e.removeAt(i-1),i--}}var a=new R.visual.Scene(null,{panel:this,source:t}),f=this.chart,l=this.visualRoles.series,c=this.visualRoles.value,h=this.stacked,p=new R.visual.RoleVarHelper(a,"value",c,{hasPercentSubVar:h}),d=new R.visual.RoleVarHelper(a,"color",this.visualRoles.color),v=c.lastDimensionName(),m=t.owner.dimensions(v),g=l.isBound()?l.flatten(this.partData(),{visible:!0,isNull:f.options.ignoreNulls?!1:null}):null,y=this.axes.ortho.scale,b=e.scope(function(){var e=y.domain(),t=e[0],n=e[1];return t*n>=0?t>=0?t:n:0}),w=y(b),E=this.axes.base.sceneScale({sceneVarName:"category"});(g?g.children():e.query([null])).each(function(r){var i=new R.visual.Scene(a,{source:r||t});i.vars.series=Z.fromComplex(r),d.onNewScene(i,!1),n.forEach(function(n,s){var o=t.child(n.key),u=o;u&&r&&(u=u.child(r.key));var a=new R.visual.Scene(i,{source:u});a.dataIndex=s,a.vars.category=Z.fromComplex(o),p.onNewScene(a,!0);var f=a.vars.value,l=f.value;f.accValue=null!=l?l:b,d.onNewScene(a,!0);var c=null!=u&&u.datums().prop("isInterpolated").any(e.truthy);a.isInterpolated=c,a.isNull=null==l,a.isIntermediate=!1},this)},this);var S,x=a.children().reverse().array();return x.forEach(i,this),x.forEach(u,this),a}}),R.PlotPanel.registerClass(R.PointPanel),e.type("pvc.PointAbstract",R.CategoricalAbstract).add({_defaultAxisBandSizeRatio:1,_createPlotsInternal:function(){this._addPlot(this._createPointPlot()),this.options.plot2&&this._addPlot(new R.visual.PointPlot(this,{name:"plot2",defaults:{DataPart:"1",ColorAxis:2,LinesVisible:!0,DotsVisible:!0}}))},_createPlotTrend:function(){this._addPlot(new R.visual.PointPlot(this,{name:"trend",spec:{visualRoles:{color:{from:"series"}}},fixed:{TrendType:"none",NullInterpolatioMode:"none"},defaults:{DataPart:"trend",ColorAxis:2,LinesVisible:!0,DotsVisible:!1}}))},_initAxesEnd:function(){var e=this.axesByType.base;e&&e.forEach(function(e){"discrete"!==e.scaleType&&e.option.defaults({Offset:.01})}),e=this.axesByType.ortho,e&&e.forEach(function(e){e.option.defaults({Offset:.04})}),this.base()},defaults:{tooltipOffset:10}}),e.type("pvc.DotChart",R.PointAbstract).add({_createPointPlot:function(){return new R.visual.PointPlot(this,{fixed:{DotsVisible:!0}})}}),e.type("pvc.LineChart",R.PointAbstract).add({_createPointPlot:function(){return new R.visual.PointPlot(this,{fixed:{LinesVisible:!0}})}}),e.type("pvc.AreaChart",R.PointAbstract).add({_createPointPlot:function(){return new R.visual.PointPlot(this,{fixed:{AreasVisible:!0}})}}),R.mStackedLineChart=e.type("pvc.StackedLineChart",R.PointAbstract).add({_createPointPlot:function(){return new R.visual.PointPlot(this,{fixed:{LinesVisible:!0,Stacked:!0}})}}),e.type("pvc.StackedDotChart",R.PointAbstract).add({_createPointPlot:function(){return new R.visual.PointPlot(this,{fixed:{DotsVisible:!0,Stacked:!0}})}}),R.mStackedAreaChart=e.type("pvc.StackedAreaChart",R.PointAbstract).add({_createPointPlot:function(){return new R.visual.PointPlot(this,{fixed:{AreasVisible:!0,Stacked:!0},defaults:{LinesVisible:!0}})}}),e("pvc.visual.MetricPointPlot",R.visual.MetricXYPlot.extend({methods:{type:"scatter",_initVisualRoles:function(){this.base(),this._addVisualRole("size",{isMeasure:!0,requireSingleDimension:!0,requireIsDiscrete:!1,defaultDimension:"size",dimensionDefaults:{valueType:Number}})},_getColorRoleSpec:function(){return{isMeasure:!0,defaultSourceRole:"series",defaultDimension:"color*",dimensionDefaults:{valueType:Number}}},_initDataCells:function(){this.base(),this.option("DotsVisible")&&this._addDataCell(new R.visual.DataCell(this,"size",this.option("SizeAxis")-1,this.visualRoles.size,this.option("DataPart")))}},options:{SizeRole:{resolve:"_resolveFixed",value:"size"},SizeAxis:{resolve:"_resolveFixed",value:1},Shape:{resolve:"_resolveFull",cast:R.parseShape,value:"circle"},NullShape:{resolve:"_resolveFull",cast:R.parseShape,value:"cross"},DotsVisible:{resolve:"_resolveFull",data:I("Dots"),cast:Boolean,value:!1},LinesVisible:{resolve:"_resolveFull",data:I("Lines"),cast:Boolean,value:!1},ValuesAnchor:{value:"right"},ValuesMask:{value:"{x},{y}"},AutoPaddingByDotSize:{resolve:"_resolveFull",cast:Boolean,value:!0}}})),R.visual.Plot.registerClass(R.visual.MetricPointPlot),e.type("pvc.data.MetricPointChartTranslationOper").add({_meaLayoutRoles:["x","y","color","size"],_configureTypeCore:function(){var e=[],t=[];this._collectFreeDiscreteAndContinuousIndexes(t,e);var n,r=[],i=e.length;if(i>0){for(var s=this._meaLayoutRoles.length,o=0;s>o&&r.length<i;)this._getUnboundRoleDefaultDimNames(this._meaLayoutRoles[o],1,r),o++;n=r.length,n>0&&(e.length=n,this.defReader({names:r,indexes:e}))}i=t.length,i>0&&(r.length=0,this._getUnboundRoleDefaultDimNames("series",i,r),n=r.length,n>0&&(t.length=n,this.defReader({names:r,indexes:t})))}}),R.parseMetricPointSizeAxisRatioTo=R.makeEnumParser("ratioTo",["minWidthHeight","height","width"],"minWidthHeight"),e("pvc.visual.MetricPointSizeAxis",R.visual.SizeAxis.extend({options:{Ratio:{resolve:"_resolveFull",cast:e.number.toNonNegative,value:.2},RatioTo:{resolve:"_resolveFull",cast:R.parseMetricPointSizeAxisRatioTo,value:"minwidthheight"}}})),e.type("pvc.MetricPointPanel",R.CartesianAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r);var i=this.axes.size=e._getAxis("size",(n.option("SizeAxis")||0)-1);i&&(this.sizeAxisRatio=i.option("Ratio"),this.sizeAxisRatioTo=i.option("RatioTo"),this.autoPaddingByDotSize=n.option("AutoPaddingByDotSize")),this.linesVisible=n.option("LinesVisible"),this.dotsVisible=n.option("DotsVisible"),!this.linesVisible&&!this.dotsVisible&&(this.linesVisible=!0,n.option.specify({LinesVisible:!0})),e.scatterChartPanel||(e.scatterChartPanel=this)}).add({plotType:"scatter",_v1DimRoleName:{category:"x",value:"y"},_creating:function(){var n=this.plot.dataCellsByRole.color[0];if(!n.legendSymbolRenderer()&&n.legendVisible()){var r=this.axes.color,i=e.nullyTo(r.option("LegendDrawMarker",!0),this.dotsVisible),s=e.nullyTo(r.option("LegendDrawLine",!0),this.linesVisible);if(i||s){var o=R.uniqueExtensionAbsPrefix(),u={drawMarker:i,drawLine:s,extensionPrefix:{abs:o}};this.chart._processExtensionPointsIn(n.role.legend(),o),i&&(u.markerShape=r.option("LegendShape",!0)||"circle",u.markerPvProto=(new t.Dot).lineWidth(1.5,R.extensionTag).shapeSize(12,R.extensionTag),this.extend(u.markerPvProto,"dot",{constOnly:!0})),s&&(u.rulePvProto=(new t.Rule).lineWidth(1.5,R.extensionTag),this.extend(u.rulePvProto,"line",{constOnly:!0})),n.legendSymbolRenderer(u)}}},_getRootScene:function(){return e.lazy(this,"_rootScene",this._buildScene,this)},_calcLayout:function(e){var t=this.base(e),n=this._getRootScene();return n.isSizeBound&&this.axes.size.setScaleRange(this._calcDotAreaRange(e)),this._calcAxesPadding(e,n),t},_getDotDiameterRefLength:function(t){var n=t.clientSize,r=t.paddings;switch(this.sizeAxisRatioTo){case"minwidthheight":return Math.min(n.width+r.width,n.height+r.height);case"width":return n.width+r.width;case"height":return n.height+r.height}return e.debug>=2&&this.log(e.format("Invalid option 'sizeAxisRatioTo' value. Assuming 'minWidthHeight'.",[this.sizeAxisRatioTo])),this.sizeRatioTo="minwidthheight",this._getDotDiameterRefLength(t)},_calcDotRadiusRange:function(e){return{min:Math.sqrt(12),max:this.sizeAxisRatio/2*this._getDotDiameterRefLength(e)}},_calcDotAreaRange:function(t){var n=this._calcDotRadiusRange(t);"diamond"===this.shape&&(n.max/=Math.SQRT2,n.min/=Math.SQRT2);var r=e.sqr(n.max),i=e.sqr(n.min),s=r-i;return 1>=s&&(r=Math.max(r,2),i=1,s=r-i,e.debug>=3&&this.log("Using rescue mode dot area calculation due to insufficient space.")),{min:i,max:r,span:s}},_calcAxesPadding:function(t,n){var r;if(this.autoPaddingByDotSize){var i=this.axes,s=t.clientSize,o=t.paddings;r={},i.x.setScaleRange(s.width),i.y.setScaleRange(s.height);var u=this.isOrientationVertical(),a=i.x.sceneScale({sceneVarName:u?"x":"y"}),f=i.y.sceneScale({sceneVarName:u?"y":"x"}),l=i.x.scale.max,c=i.y.scale.max,h=n.isSizeBound,p=h?i.size.scale:null;if(!p){var d=e.number.to(this._getExtension("dot","shapeRadius"),0);0>=d?(d=e.number.to(this._getExtension("dot","shapeSize"),0),0>=d&&(d=12)):d=e.sqr(d),p=e.fun.constant(d)}r={};var v,m=this.chart._axisOffsetPaddings;m&&(v={},J.names.forEach(function(e){var t=R.BasePanel.orthogonalLength[e];v[e]=(m[e]||0)*(s[t]+o[t])},this));var g=function(e,t){v&&(t+=v[e]||0),0>t&&(t=0);var n=r[e];(null==n||t>n)&&(r[e]=t)},y=function(e){var t=a(e),n=f(e),r=Math.sqrt(p(h?e.vars.size.value:0));g("left",r-t),g("bottom",r-n),g("right",t+r-l),g("top",n+r-c)};n.children().selectMany(function(e){return e.childNodes}).each(y)}else r=this._calcRequestPaddings(t);t.requestPaddings=r},_createCore:function(){var t=this;t.base();var n=t.chart,r=t._getRootScene(),i=t._buildSignsWrapper(),s=t.compatVersion()<=1;this._finalizeScene(r),t.pvPanel.zOrder(1),this.pvScatterPanel=(new R.visual.Panel(t,t.pvPanel,{extensionId:"panel"})).lock("data",r.childNodes).pvMark;var o=n.selectableByFocusWindow(),u=r.isColorBound&&this.visualRoles.color.isDiscrete(),a=(new R.visual.Line(t,t.pvScatterPanel,{extensionId:"line",wrapper:i,noTooltip:!1,noSelect:o,showsSelection:!o})).lockMark("data",function(e){return e.childNodes}).intercept("visible",function(e){if(!t.linesVisible)return!1;var n=this.delegateExtension();return null==n&&(n=!e.isNull&&(!r.isSizeBound&&!r.isColorBound||r.isSizeBound&&null!=e.vars.size.value||r.isColorBound&&(u||null!=e.vars.color.value))),n}).override("x",function(e){return e.basePosition}).override("y",function(e){return e.orthoPosition});t.pvLine=a.pvMark;var f=(new R.visual.DotSizeColor(t,t.pvLine,{extensionId:"dot",wrapper:i,activeSeriesAware:t.linesVisible,tooltipArgs:{options:{ignoreRadius:r.isSizeBound?!1:t.linesVisible}}})).override("x",function(e){return e.basePosition}).override("y",function(e){return e.orthoPosition}).override("color",function(e,n){return t.dotsVisible||e.isActive||e.isSingle?this.base(e,n):R.invisibleFill});r.isSizeBound?t.autoPaddingByDotSize&&"minwidthheight"===t.sizeAxisRatioTo||t.pvPanel.borderPanel.overflow("hidden"):f.override("baseSize",function(n){if(!t.dotsVisible&&n.isSingle){var r=Math.max(t.pvLine.scene[this.pvMark.index].lineWidth,.2)/2;return e.sqr(r)}return this.base(n)}),t.pvDot=f.pvMark,t.pvDot.rubberBandSelectionMode="center";if(R.visual.ValueLabel.isNeeded(t)){var l=["label"];s&&l.push("lineLabel");var c=R.visual.ValueLabel.maybeCreate(t,t.pvDot,{extensionId:l,wrapper:i});c&&(t.pvHeatGridLabel=c.pvMark)}},_buildSignsWrapper:function(){return this.compatVersion()>1?null:function(e){return function(t){var n={category:t.vars.x.rawValue,value:t.vars.y.rawValue},r=Object.create(this);return r.index=t.dataIndex,e.call(r,n)}}},renderInteractive:function(){this.pvScatterPanel.render()},_buildScene:function(){function e(e){var t=new R.visual.Scene(i,{source:e});t.vars.series=Z.fromComplex(e),o.onNewScene(t,!1),e.datums().each(function(e,n){var r=e.atoms[a.name];if(null!=r.value){var i=e.atoms[f.name];if(null!=i.value){var s=new R.visual.Scene(t,{source:e});s.dataIndex=n,s.vars.x=Z.fromAtom(r),s.vars.y=Z.fromAtom(i),u.onNewScene(s,!0),o.onNewScene(s,!0),s.isIntermediate=!1}}})}function t(e){for(var t,r=e.childNodes,i=0,s=0,o=r.length;o>i;i++,s++){var u=r[s];u.isSingle=!t&&!u.nextSibling;if(t){var a=n(e,t,u,s);a&&s++}t=u}}function n(e,t,n,r){var i=+n.vars.y.value,s=+t.vars.y.value,l=+n.vars.x.value,c=+t.vars.x.value,h=f.type.cast.call(null,(i+s)/2),p=a.type.cast.call(null,(l+c)/2),d=new R.visual.Scene(e,{index:r,source:n.datum});return d.dataIndex=n.dataIndex,d.vars.x=new Z(p,a.format(p),p),d.vars.y=new Z(h,f.format(h),h),u.onNewScene(d,!0),o.onNewScene(d,!0),d.ownerScene=n,d.isIntermediate=!0,d.isSingle=!1,d}var r=this.visibleData({ignoreNulls:!1}),i=new R.visual.Scene(null,{panel:this,source:r}),s=this.visualRoles,o=new R.visual.RoleVarHelper(i,"color",s.color),u=new R.visual.RoleVarHelper(i,"size",s.size),a=r.owner.dimensions(s.x.lastDimensionName()),f=r.owner.dimensions(s.y.lastDimensionName());return r.children().each(e,this),i.children().each(t,this),i},_finalizeScene:function(e){var t=this.axes,n=t.base.sceneScale({sceneVarName:"x"}),r=t.ortho.sceneScale({sceneVarName:"y"});return e.children().selectMany(function(e){return e.childNodes}).each(function(e){e.basePosition=n(e),e.orthoPosition=r(e)}),e}}),R.PlotPanel.registerClass(R.MetricPointPanel),e.type("pvc.MetricPointAbstract",R.MetricXYAbstract).add({_axisClassByType:{size:R.visual.MetricPointSizeAxis},_createPlotsInternal:function(){this._addPlot(this._createPointPlot())},_createPointPlot:function(){},_createPlotTrend:function(){this._addPlot(new R.visual.MetricPointPlot(this,{name:"trend",spec:{visualRoles:{color:{from:"series"},size:null}},fixed:{TrendType:"none",NullInterpolatioMode:"none",SizeRole:null,SizeAxis:null,OrthoAxis:1},defaults:{DataPart:"trend",ColorAxis:2,LinesVisible:!0,DotsVisible:!1}}))},_getTranslationClass:function(t){return e.type(this.base(t)).add(R.data.MetricPointChartTranslationOper)},_calcAxesOffsetPaddings:function(){var e=this.base();return e||new J(.01)},defaults:{axisOriginIsZero:!1,tooltipOffset:10}}),e.type("pvc.MetricDotChart",R.MetricPointAbstract).add({_createPointPlot:function(){return new R.visual.MetricPointPlot(this,{fixed:{DotsVisible:!0}})}}),e.type("pvc.MetricLineChart",R.MetricPointAbstract).add({_createPointPlot:function(){return new R.visual.MetricPointPlot(this,{fixed:{LinesVisible:!0}})}}),e("pvc.visual.HeatGridPlot",R.visual.CategoricalPlot.extend({methods:{type:"heatGrid",interpolatable:function(){return!1},_initVisualRoles:function(){this.base();var e=this.chart,t=e.compatVersion()>1||1===e.options.sizeValIdx?"value2":"value";this._addVisualRole("size",{isMeasure:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:t})},_getColorRoleSpec:function(){var e=this.chart,t=e.compatVersion()<=1&&1===e.options.colorValIdx?"value2":"value";return{isMeasure:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:t}},_getCategoryRoleSpec:function(){var e=this.base();return e.requireIsDiscrete=!0,e},_initDataCells:function(){this.base(),this.option("UseShapes")&&this._addDataCell(new R.visual.DataCell(this,"size",this.option("SizeAxis")-1,this.visualRoles.size,this.option("DataPart")))},_getOrthoRoles:function(){return[this.visualRole("series")]}},options:{SizeRole:{value:"size"},SizeAxis:{value:1},UseShapes:{resolve:"_resolveFull",cast:Boolean,value:!1},Shape:{resolve:"_resolveFull",cast:R.parseShape,value:"square"},NullShape:{resolve:"_resolveFull",cast:R.parseShape,value:"cross"},ValuesVisible:{getDefault:function(){return!this.option("UseShapes")},value:null},ValuesMask:{value:null},ValuesAnchor:{value:"center"},OrthoAxis:{resolve:null},NullInterpolationMode:{resolve:null,value:"none"},Stacked:{resolve:null,value:!1}}})),R.visual.Plot.registerClass(R.visual.HeatGridPlot),e.type("pvc.HeatGridPanel",R.CategoricalAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.axes.size=e._getAxis("size",n.option("SizeAxis")-1);var i=this.visualRoles;i.size=e.visualRole(n.option("SizeRole")),this.useShapes=n.option("UseShapes"),this.shape=n.option("Shape"),this.nullShape=n.option("NullShape"),e.heatGridChartPanel||(e.heatGridChartPanel=this)}).add({plotType:"heatGrid",defaultBorder:1,nullBorder:2,selectedBorder:2,_createCore:function(){var t=this;t.base();var n=t._calcCellSize(),r=t.isOrientationVertical()?"bottom":"left",i=R.BasePanel.relativeAnchor[r],s=R.BasePanel.parallelLength[r],o=R.BasePanel.orthogonalLength[r],u=t.visualRoles.series.flatten(t.partData(),{visible:!0,isNull:t.chart.options.ignoreNulls?!1:null}),a=t._buildScene(t.visibleData({ignoreNulls:!1}),u,n),f=a.isColorBound,l=a.isSizeBound,c=t._buildSignsWrapper(a),h=t.compatVersion()<=1,p=this.axes.base.scale,d=this.axes.ortho.scale,v=p.range().band,m=d.range().band,g=v/2,y=m/2,b=(new R.visual.Panel(t,t.pvPanel)).pvMark.data(a.childNodes)[r](function(e){return d(e.vars.series.value)-y})[o](m),w=["panel"];h&&w.push("");var E={extensionId:w,wrapper:c};if(!t.useShapes){var S=!1;e.copy(E,{noSelect:S,noHover:S,noClick:S,noDoubleClick:S,freeColor:S,noTooltip:h})}t.pvHeatGrid=(new R.visual.Panel(t,b,E)).pvMark.lock("data",function(e){return e.childNodes}).lock(i,function(e){return p(e.vars.category.value)-g}).lock(s,v).antialias(!1),t.shapes=t.useShapes?t._createShapesHeatMap(n,c,f,l):t._createNoShapesHeatMap(f),t.valuesVisible&&!t.valuesMask&&(t.valuesMask=t._getDefaultValuesMask(f,l));var x=R.visual.ValueLabel.maybeCreate(t,t.pvHeatGrid,{wrapper:c});x&&(t.pvHeatGridLabel=x.pvMark)},_calcCellSize:function(){var e=this.axes.x.scale,t=this.axes.y.scale,n=(e.max-e.min)/e.domain().length,r=(t.max-t.min)/t.domain().length;if(!this.isOrientationVertical()){var i=n;n=r,r=i}return{width:n,height:r}},_buildSignsWrapper:function(t){if(this.compatVersion()>1)return null;var n=e.query(t.childNodes).object({name:function(e){return""+e.vars.series.value},value:function(t){return e.query(t.childNodes).object({name:function(e){return""+e.vars.category.value},value:function(e){var t=e.vars.color;return t?""+t.value:null}})}});return function(e){return function(t){var r=n[t.vars.series.value],i=t.vars.category.rawValue,s=Object.create(this.parent),o=Object.create(this),u=t.childIndex(),a=t.parent.childIndex();return o.parent=s,s.index=u,o.index=a,e.call(o,r,i)}}},_getDefaultValuesMask:function(e,t){var n=this.visualRoles,r=e?"color":t?"size":null;if(r){var i=n[r].lastDimensionName();return"{#"+i+"}"}},_createNoShapesHeatMap:function(e){var t=this._buildGetBaseFillColor(e);return this.pvHeatGrid.sign.override("defaultColor",function(e,n){return"stroke"===n?null:t.call(this.pvMark,e)}).override("interactiveColor",function(e,t,n){return e.isActive?t.alpha(.6):e.anySelected()&&!e.isSelected()?this.dimColor(t,n):this.base(e,t,n)}).override("dimColor",function(e){return R.toGrayScale(e,.6)}).pvMark.lineWidth(1.5)},_buildGetBaseFillColor:function(t){var n=this.axes.color;return t?n.sceneScale({sceneVarName:"color"}):e.fun.constant(n.option("Unbound"))},_createShapesHeatMap:function(t,n,r,i){var s=this,o=s._calcDotAreaRange(t);i&&s.axes.size.setScaleRange(o);var u={extensionId:"dot",freePosition:!0,activeSeriesAware:!1,wrapper:n,tooltipArgs:s._buildShapesTooltipArgs(r,i)},a=(new R.visual.DotSizeColor(s,s.pvHeatGrid,u)).override("dimColor",function(e){return R.toGrayScale(e,.6)}).pvMark;return i||a.sign.override("defaultSize",e.fun.constant(o.max)),a},_calcDotAreaRange:function(t){var n=t.width,r=t.height,i=Math.min(n,r)/2;"diamond"===this.shape&&(i/=Math.SQRT2),i-=2;var s=e.sqr(i),o=12,u=s-o;return 1>=u&&(s=Math.max(s,2),o=1,u=s-o,e.debug>=2&&this.log.warn("Using rescue mode dot area calculation due to insufficient space.")),{min:o,max:s,span:u}},_buildShapesTooltipArgs:function(e,t){var r=this.chart;if(this.compatVersion()<=1&&this.showsTooltip()){var i=r.options,s=i.customTooltip;s||(s=function(e,t,n){return null!=n&&void 0!==n[0]?n.join(", "):n});var o=this.visualRoles,u=o.series.grouping.dimensionNames(),a=o.category.grouping.dimensionNames();return{buildTooltip:i.isMultiValued?function(r){var o=r.scene.group;if(!o)return"";var f=n.Complex.values(o,u),l=n.Complex.values(o,a),c=[],h=r.scene.vars;return t&&(c[i.sizeValIdx||0]=h.size.value),e&&(c[i.colorValIdx||0]=h.color.value),s.call(i,f,l,c)}:function(t){var n=t.scene.vars,r=n.series.rawValue,o=n.category.rawValue,u=n[e?"color":"size"],a=u?u.value:null;return s.call(i,r,o,a)}}}},renderInteractive:function(){this.pvPanel.render()},_buildScene:function(e,t,n){function r(e){var t=new R.visual.Scene(o,{source:e});t.vars.series=Z.fromComplex(e),u.forEach(function(n){i.call(s,t,n,e)})}function i(t,n,r){var i=e.child(n.key).child(r.key),s=new R.visual.Scene(t,{source:i});s.vars.category=Z.fromComplex(n),f.onNewScene(s,!0),l.onNewScene(s,!0)}var s=this,o=new R.visual.Scene(null,{panel:s,source:e}),u=e.childNodes,a=s.visualRoles,f=new R.visual.RoleVarHelper(o,"color",a.color),l=new R.visual.RoleVarHelper(o,"size",a.size);return o.cellSize=n,t.children().each(r),o}}),R.PlotPanel.registerClass(R.HeatGridPanel),e.type("pvc.HeatGridChart",R.CategoricalAbstract).add({_allowColorPerCategory:!0,_defaultAxisBandSizeRatio:1,_axisCreateIfUnbound:{color:!0},_processOptionsCore:function(e){this.base(e),e.legend=!1},_createPlotsInternal:function(){this._addPlot(new R.visual.HeatGridPlot(this))},defaults:{colorValIdx:0,sizeValIdx:1,measuresIndexes:[2],axisOffset:0,plotFrameVisible:!1,colorNormByCategory:!0,numSD:2}}),R.parseBoxLayoutMode=R.makeEnumParser("layoutMode",["overlapped","grouped"],"grouped"),e("pvc.visual.BoxPlot",R.visual.CategoricalPlot.extend({methods:{type:"box",_initVisualRoles:function(){this.base();var t={isMeasure:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number};[{name:"median",label:"Median",defaultDimension:"median"},{name:"lowerQuartil",label:"Lower Quartil",defaultDimension:"lowerQuartil"},{name:"upperQuartil",label:"Upper Quartil",defaultDimension:"upperQuartil"},{name:"minimum",label:"Minimum",defaultDimension:"minimum"},{name:"maximum",label:"Maximum",defaultDimension:"maximum"}].forEach(function(n){this._addVisualRole(n.name,e.create(t,n))},this)},_getOrthoRoles:function(){return R.visual.BoxPlot.measureRolesNames.map(this.visualRole,this)},_getCategoryRoleSpec:function(){return e.set(this.base(),"requireIsDiscrete",!0)}},type:{methods:{measureRolesNames:["median","lowerQuartil","upperQuartil","minimum","maximum"]}},options:{Stacked:{resolve:null,value:!1},LayoutMode:{resolve:"_resolveFull",cast:R.parseBoxLayoutMode,value:"grouped"},BoxSizeRatio:{resolve:"_resolveFull",cast:function(t){return t=e.number.to(t),null==t?1:.05>t?.05:t>1?1:t},value:.9},BoxSizeMax:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyChartOption(e,"maxBoxSize"),!0}},cast:function(t){return t=e.number.to(t),null==t?1/0:1>t?1:t},value:1/0}}})),R.visual.Plot.registerClass(R.visual.BoxPlot),e.type("pvc.data.BoxplotChartTranslationOper").add({_configureTypeCore:function(){var e=this.chart.visualRoles,t=[];if(!e.series.isPreBound()){var n=this._getLogicalGroupLength("series");n&&this._collectDimReaders(t,"series",null,n)}if(!e.category.isPreBound()){var r=this._getLogicalGroupLength("category");r&&this._collectDimReaders(t,"category",null,r)}var i=this._getLogicalGroupLength("value");if(i){var s=0;R.visual.BoxPlot.measureRolesNames.forEach(function(n){var r=e[n];r.isPreBound()||(s=this._collectDimReaders(t,"value",r.defaultDimensionName,1,s,1))},this)}t.forEach(this.defReader,this)}}),e.type("pvc.BoxplotPanel",R.CategoricalAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.boxSizeRatio=n.option("BoxSizeRatio"),this.boxSizeMax=n.option("BoxSizeMax"),e.bpChartPanel||(e.bpChartPanel=this)}).add({plotType:"box",_v1DimRoleName:{value:"median"},_createCore:function(){function t(e,t){var n=this.base(e,t);return"stroke"===t?n.darker(1):n}function n(e){return e.optionalMark(p,function(){return this.parent[p]()}).optionalMark(h,function(){return this.parent[p]()/2-this[p]()/2}),e}function r(e){return e.override("defaultColor",t).override("interactiveStrokeWidth",function(e,t){return t}).override("interactiveColor",function(e,t,n){return"stroke"===n?t:this.base(e,t,n)})}function i(e){return r(e).optionalMark(h,function(){return this.parent[p]()/2-this[p]()/2})}function s(e){return r(n(e))}this.base();var o=this.visibleData({ignoreNulls:!1}),u=this.axes.base,a=u.domainItems(),f=this.visualRoles.series.flatten(this.partData(),{visible:!0,isNull:this.chart.options.ignoreNulls?!1:null}).childNodes,l=this._buildScene(o,f,a),c=this.isOrientationVertical()?"bottom":"left",h=this.anchorOrtho(c),p=this.anchorLength(c),d=this.anchorOrthoLength(c),v=(new R.visual.Panel(this,this.pvPanel)).lock("data",l.childNodes).pvMark,m=["panel"];this.compatVersion()<=1&&m.push(""),this.pvBoxPanel=(new R.visual.Panel(this,v,{extensionId:m})).lock("data",function(e){return e.childNodes}).pvMark[p](function(e){return e.vars.category.boxWidth})[h](function(e){var t=e.vars.category;return t.boxLeft+t.boxWidth/2-this[p]()/2}),this.pvBar=n(new R.visual.Bar(this,this.pvBoxPanel,{extensionId:"boxBar",freePosition:!0,normalStroke:!0})).intercept("visible",function(e){return e.vars.category.showBox&&this.delegateExtension(!0)}).lockMark(c,function(e){return e.vars.category.boxBottom}).lockMark(d,function(e){return e.vars.category.boxHeight}).override("defaultColor",t).override("interactiveColor",function(e,t,n){return"stroke"===n?t:this.base(e,t,n)}).override("defaultStrokeWidth",e.fun.constant(1)).override("interactiveStrokeWidth",function(e,t){return t}).pvMark,this.pvRuleWhiskerUpper=i(new R.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleWhisker",freePosition:!0,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1,noTooltip:!1,showsInteraction:!0})).intercept("visible",function(e){return e.vars.category.showRuleWhiskerUpper&&this.delegateExtension(!0)}).pvMark.lock(c,function(e){return e.vars.category.ruleWhiskerUpperBottom}).lock(d,function(e){return e.vars.category.ruleWhiskerUpperHeight}),this.pvRuleWhiskerLower=i(new R.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleWhisker",freePosition:!0,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1,noTooltip:!1,showsInteraction:!0})).intercept("visible",function(e){return e.vars.category.showRuleWhiskerBelow&&this.delegateExtension(!0)}).pvMark.lock(c,function(e){return e.vars.category.ruleWhiskerLowerBottom}).lock(d,function(e){return e.vars.category.ruleWhiskerLowerHeight}),this.pvRuleMin=s(new R.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleMin",freePosition:!0,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1,noTooltip:!1,showsInteraction:!0})).intercept("visible",function(e){return null!=e.vars.minimum.value&&this.delegateExtension(!0)}).pvMark.lock(c,function(e){return e.vars.minimum.position}),this.pvRuleMax=s(new R.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleMax",freePosition:!0,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1,noTooltip:!1,showsInteraction:!0})).intercept("visible",function(e){return null!=e.vars.maximum.value&&this.delegateExtension(!0)}).pvMark.lock(c,function(e){return e.vars.maximum.position}),this.pvRuleMedian=s(new R.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleMedian",freePosition:!0,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1,noTooltip:!1,showsInteraction:!0})).intercept("visible",function(e){return null!=e.vars.median.value&&this.delegateExtension(!0)}).lockMark(c,function(e){return e.vars.median.position}).override("defaultStrokeWidth",e.fun.constant(2)).pvMark},renderInteractive:function(){this.pvBoxPanel.render()},_buildScene:function(t,n,r){function i(e,t){var n=new R.visual.Scene(c,{source:e}),i=e.key;n.vars.series=Z.fromComplex(e),m.onNewScene(n,!1),r.forEach(function(e){s(n,i,e,t)})}function s(n,r,i,s){var c=t.child(i.key),d=c&&c.child(r),y=new R.visual.Scene(n,{source:d}),b=y.vars,w=b.category=Z.fromComplex(c),E=h(c.value),S=E+(g?a+s*u:-o/2);e.set(w,"group",c,"x",E,"width",p,"boxWidth",o,"boxLeft",S),f.forEach(function(e){var t,n;if(d&&(t=e.dimName)){var r=d.dimensions(t),i=r.value(l);n=new Z(i,r.format(i)),n.position=v(i)}else n=new Z(null,""),n.position=null;b[e.roleName]=n}),m.onNewScene(y,!0);var x,T,N=null!=b.minimum.value,C=null!=b.lowerQuartil.value,k=null!=b.median.value,L=null!=b.upperQuartil.value,A=C||L;A&&(x=C?b.lowerQuartil.position:k?b.median.position:b.upperQuartil.position,T=L?b.upperQuartil.position:k?b.median.position:b.lowerQuartil.position,A=T!==x,A&&(w.boxBottom=x,w.boxHeight=T-x)),w.showBox=A,A=null!=b.maximum.value,A&&(x=L?b.upperQuartil.position:k?b.median.position:C?b.lowerQuartil.position:N?b.minimum.position:null,A=null!=x,A&&(w.ruleWhiskerUpperBottom=x,w.ruleWhiskerUpperHeight=b.maximum.position-x)),w.showRuleWhiskerUpper=A,A=N,A&&(T=C?b.lowerQuartil.position:k?b.median.position:L?b.upperQuartil.position:null,A=null!=T,A&&(x=b.minimum.position,w.ruleWhiskerLowerHeight=T-x,w.ruleWhiskerLowerBottom=x)),w.showRuleWhiskerBelow=A}var o,u,a,f=e.query(this.visualRoleList).where(function(e){return!e.isDiscrete()&&e.isMeasure}).select(function(e){return{roleName:e.name,dimName:e.lastDimensionName()}}).array(),l={visible:!0,zeroIfNone:!1},c=new R.visual.Scene(null,{panel:this,source:t}),h=this.axes.base.scale,p=h.range().band,d=this.boxSizeMax,v=this.axes.ortho.scale,m=new R.visual.RoleVarHelper(c,"color",this.visualRoles.color),g="overlapped"!==this.plot.option("LayoutMode");if(g){var y,b,w,E=n.length,S=this.boxSizeRatio;o=E?1===E?p:S*p/E:0,y=o>d,y&&(o=d),b=E*o,y?(w=b/S,a=-w/2):(w=p,a=-p/2);if(E>1){var x=(w-b)/(E-1);u=o+x}else u=0}else o=Math.min(p,d);return n.forEach(i),c}}),R.PlotPanel.registerClass(R.BoxplotPanel),e.type("pvc.BoxplotChart",R.CategoricalAbstract).add({_defaultAxisBandSizeRatio:1/3,_getTranslationClass:function(t){return e.type(this.base(t)).add(R.data.BoxplotChartTranslationOper)},_createPlotsInternal:function(){this._addPlot(new R.visual.BoxPlot(this)),this.options.plot2&&this._addPlot(new R.visual.PointPlot(this,{name:"plot2",spec:{visualRoles:{value:{from:"main.median"}}},defaults:{LinesVisible:!0,DotsVisible:!0,ColorAxis:2,OrthoAxis:1}}))},_initAxesEnd:function(){var e=this.axesByType.ortho;e&&e.forEach(function(e){e.option.defaults({Offset:.02})}),this.base()},defaults:{crosstabMode:!1}}),R.parseTreemapLayoutMode=R.makeEnumParser("layoutMode",["squarify","slice-and-dice","slice","dice"],"squarify"),R.parseTreemapColorMode=R.makeEnumParser("colorMode",["byParent","bySelf"],"byParent"),e("pvc.visual.TreemapPlot",R.visual.Plot.extend({init:function(t,n){this.base(t,n);if(!(t instanceof R.TreemapChart))throw e.error(e.format("Plot type '{0}' can only be used from within a treemap chart.",[this.type]))},methods:{type:"treemap",_initVisualRoles:function(){this.base(),this._addVisualRole("category",{isRequired:!0,defaultDimension:"category*",autoCreateDimension:!0,rootLabel:this.option("RootCategoryLabel")}),this._addVisualRole("size",{isMeasure:!0,isRequired:!1,isPercent:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"size"})},_getColorRoleSpec:function(){return{defaultSourceRole:"category",defaultDimension:"color*",rootLabel:this.option("RootCategoryLabel")}},createVisibleData:function(e,t){return this.visualRoles.category.select(e,t)},_initDataCells:function(){this.base(),this._addDataCell(new R.visual.DataCell(this,"size",this.option("SizeAxis")-1,this.visualRole("size"),this.option("DataPart")))}},options:{SizeRole:{resolve:"_resolveFixed",value:"size"},SizeAxis:{resolve:"_resolveFixed",value:1},ValuesAnchor:{cast:R.parseAnchor,value:"center"},ValuesVisible:{value:!0},ValuesMask:{resolve:"_resolveFull",value:"{category}"},ValuesOptimizeLegibility:{value:!0},LayoutMode:{resolve:"_resolveFull",cast:R.parseTreemapLayoutMode,value:"squarify"},ColorMode:{resolve:"_resolveFull",cast:R.parseTreemapColorMode,value:"byparent"},RootCategoryLabel:{resolve:"_resolveFull",cast:String,value:"All"}}})),R.visual.Plot.registerClass(R.visual.TreemapPlot),e.type("pvc.visual.TreemapDiscreteColorAxis",R.visual.ColorAxis).init(function(e,t,n,r){this.base(e,t,n,r),this.isByParent="byparent"===e.plots.treemap.option("ColorMode")}).add({domainItemValueProp:function(){return this.role&&this.role.grouping.isSingleDimension?"value":"absKey"},domainGroupOperator:function(){return"select"},_calcAvgColor:function(e){var n=e.length;if(n>1){var r=0,i=0,s=0,o=0;e.forEach(function(e){var t=e.rgb();r+=t.r,i+=t.g,s+=t.b,o+=t.a});var u=Math.floor;return t.rgb(u(r/n),u(i/n),u(s/n),u(o/n))}var a=e[0];return n?a.darker(.7):a},_getBaseScheme:function(){var t=this,n=function(e){return null!=e.value},r=function(e){return e.children().where(n)},i=function(e){return r(e).any()},s=function(e){return r(e).any(i)},o=e.query(this.domainData().nodes()).where(s).array(),u=t.option("Colors");return function(n){var i=n instanceof Array?n:e.array.copy(arguments),s=e.query(o).object({name:function(e){return t.domainItemValue(e)}});e.array.removeIf(i,function(t){return e.hasOwnProp.call(s,t)});var a=u(i),f={},l=function(n){var i,o=t.domainItemValue(n);if(e.hasOwnProp.call(s,o)){i=e.getOwn(f,o);if(!i){var u=r(n).select(l).array();if(!u.length)throw e.assert("Should have at least one child that is also a parent.");i=f[o]=t._calcAvgColor(u)}}else i=a(o);return i};o.forEach(l);var c=function(t){return e.getOwn(f,t)||a(t)};e.copy(c,a);var h,p;return c.domain=function(){if(arguments.length)throw e.error.operationInvalid("The scale cannot be modified.");return h||(h=e.array.append(e.ownKeys(f),i))},c.range=function(){if(arguments.length)throw e.error.operationInvalid("The scale cannot be modified.");return p||(p=e.array.append(e.own(f),a.range()))},c}},_selectDomainItems:function(t){var n=e.query(t.nodes()),r=function(e){return null!=e.value},i=function(e){return e.children().where(r)},s=function(e){return i(e).any()},o=function(e){return!s(e)};return n.where(this.isByParent?function(e){return e.parent?r(e)&&s(e):o(e)||i(e).any(o)}:function(e){return(!e.parent||r(e))&&o(e)})}}),e.type("pvc.data.TreemapChartTranslationOper").add({_configureTypeCore:function(){var t=[],n=[],r=[];this._collectFreeDiscreteAndContinuousIndexes(r,n);var i=r.length,s=n.length;i&&this._getUnboundRoleDefaultDimNames("category",i,t),s&&e.query(["size","color"]).take(s).each(function(e){this._getUnboundRoleDefaultDimNames(e,1,t)},this),t.length&&this.defReader({names:t})}}),e.type("pvc.TreemapPanel",R.PlotPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.axes.size=e._getAxis("size",(n.option("SizeAxis")||0)-1),this.layoutMode=n.option("LayoutMode")}).add({plotType:"treemap",_createCore:function(n){var r=this,i=n.clientSize,s=r._buildScene();if(s){if(!s.childNodes.length&&!this.chart.visualRoles.multiChart.isBound())throw new InvalidDataException("Unable to create a treemap chart, please check the data values.");var o=e.number.to(r._getConstantExtension("leaf","lineWidth"),1),u=o,a=u/2,f=r.visualRoles.size.isBound()?r.axes.size.scale.by1(function(e){return e.vars.size.value}):100,l=r.pvTreemapPanel=(new R.visual.Panel(r,r.pvPanel,{panelType:t.Layout.Treemap,extensionId:"panel"})).pvMark.lock("visible",!0).lock("nodes",s.nodes()).lock("left",a).lock("top",a).lock("width",i.width-u).lock("height",i.height-u).lock("size",f).lock("mode",r.layoutMode).lock("order",null).lock("round",!1);l.node.left(function(e){return e.x+a}).top(function(e){return e.y+a}).width(function(e){return e.dx-u}).height(function(e){return e.dy-u});var c=r.axes.color,h=r.visualRoles.color.isBound()?c.sceneScale({sceneVarName:"color"}):e.fun.constant(c.option("Unbound")),p=(new R.visual.Bar(r,l.leaf,{extensionId:"leaf"})).lockMark("visible").override("defaultColor",function(e){return h(e)}).override("defaultStrokeWidth",function(){return o}).pvMark.antialias(!1).lineCap("round").strokeDasharray(function(e){return e.vars.size.value<0?"dash":null});(new R.visual.Bar(r,l.node,{extensionId:"ascendant",noHover:!0,noSelect:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0})).intercept("visible",function(e){return!!e.parent&&!!e.firstChild&&this.delegateExtension(!0)}).override("anyInteraction",function(e){return e.anyInteraction()||e.isActiveDescendantOrSelf()}).override("defaultStrokeWidth",function(){return 1.5*u}).override("interactiveStrokeWidth",function(e,t){return this.showsActivity()&&e.isActiveDescendantOrSelf()?1.5*Math.max(1,t):t}).override("defaultColor",function(e){return h(e)}).override("normalColor",e.fun.constant(null)).override("interactiveColor",function(e,n,r){if("stroke"===r){if(this.showsActivity()){if(e.isActiveDescendantOrSelf())return t.color(n).brighter(.5);if(e.anyActive())return null}if(this.showsSelection()&&e.isSelectedDescendantOrSelf())return t.color(n).brighter(.5)}return null}).pvMark.antialias(!1);var d=R.visual.ValueLabel.maybeCreate(r,l.label,{noAnchor:!0});d&&d.pvMark.textMargin(3).sign.optional("textAngle",function(e){var n=this.defaultText(e),r=this.pvMark;return e.dx-2*r.textMargin()>t.Text.measureWidth(n,r.font())?0:e.dx>=e.dy?0:-Math.PI/2}).override("calcTextFitInfo",function(e,n){var r=this.pvMark,i=r.textMargin();if(!(-0.000001>i)){var s=r.textAngle(),o=Math.abs(Math.sin(s))<1e-6,u=!o&&Math.abs(Math.cos(s))<1e-6;if(o||u){var a=!1,f=t.Text.measure(n,r.font()),l=.75*f.height,c=e[u?"dx":"dy"];"middle"!==r.textBaseline()&&(c/=2),c-=2*i,a|=l>c;var h=e[u?"dy":"dx"];return"center"!==r.textAlign()&&(h/=2),h-=2*i,a|=0>=h||this.hideOverflowed&&f.width>h,{hide:a,widthMax:h}}}}).override("getAnchoredToMark",function(){return p})}},_getExtensionId:function(){var e=[{abs:this.chart.parent?"smallContent":"content"}];return e.concat(this.base())},renderInteractive:function(){this.pvTreemapPanel.render()},_buildScene:function(){function e(t){var n=t.group;t.vars.category=Z.fromComplex(n),i.onNewScene(t,!0);if(s&&!t.vars.size.value)return t.parentNode&&t.parentNode.removeChild(t),t;var r=n.children().where(function(e){return null!=e.value}).array();if(o){var a=u&&!r.length?n.parent:n;if(a){var f=o.view(a);t.vars.color=new Z(f.keyTrimmed(),f.label)}else t.vars.color=new Z(null,"")}else t.parent||(t.vars.color=new Z(null,""));return r.forEach(function(n){e(new R.visual.Scene(t,{source:n}))}),t}var t=this.visibleData({ignoreNulls:!1});if(!t.childCount())return null;var n=this.visualRoles,r=new R.visual.Scene(null,{panel:this,source:t}),i=new R.visual.RoleVarHelper(r,"size",n.size,{allowNestedVars:!0,hasPercentSubVar:!0}),s=n.size.isBound(),o=n.color&&n.color.grouping,u=o&&"byparent"===this.plot.option("ColorMode");return e(r)}}),R.PlotPanel.registerClass(R.TreemapPanel),e.type("pvc.TreemapChart",R.BaseChart).add({_axisClassByType:{size:R.visual.NormalizedAxis},_axisCreateIfUnbound:{color:!0},_getTranslationClass:function(t){return e.type(this.base(t)).add(R.data.TreemapChartTranslationOper)},_getIsNullDatum:e.fun.constant(),_createPlotsInternal:function(){this._addPlot(new R.visual.TreemapPlot(this))},_initPlotsEnd:function(){this.base(),null==this.options.legend&&(this.options.legend="byparent"===this.plots.treemap.option("ColorMode"))},_initAxes:function(t){return this.visualRoles.color.isDiscrete()?(e.hasOwnProp.call(this,"_axisClassByType")||(this._axisClassByType=Object.create(this._axisClassByType)),this._axisClassByType.color=R.visual.TreemapDiscreteColorAxis):delete this._axisClassByType,this.base(t)},defaults:{legend:null}}),R.parseSunburstSliceOrder=R.makeEnumParser("sliceOrder",["bySizeAscending","bySizeDescending","none"],"bySizeDescending"),R.parseSunburstColorMode=R.makeEnumParser("colorMode",["fan","slice"],"fan"),e("pvc.visual.SunburstPlot",R.visual.Plot.extend({init:function(t,n){this.base(t,n);if(!(t instanceof R.SunburstChart))throw e.error(e.format("Plot type '{0}' can only be used from within a sunburst chart.",[this.type]))},methods:{type:"sunburst",_initVisualRoles:function(){this.base(),this._addVisualRole("category",{isRequired:!0,defaultDimension:"category*",autoCreateDimension:!0,rootLabel:this.option("RootCategoryLabel")}),this._addVisualRole("size",{isMeasure:!0,isRequired:!1,isPercent:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"size"})},_getColorRoleSpec:function(){return{defaultSourceRole:"category",defaultDimension:"color*",requireIsDiscrete:!0,rootLabel:this.option("RootCategoryLabel")}},createVisibleData:function(e,t){return this.visualRoles.category.select(e,t)},_initDataCells:function(){this.base(),this._addDataCell(new R.visual.DataCell(this,"size",this.option("SizeAxis")-1,this.visualRoles.size,this.option("DataPart")))}},options:{SizeRole:{resolve:"_resolveFixed",value:"size"},SizeAxis:{resolve:"_resolveFixed",value:1},ValuesAnchor:{cast:R.parseAnchor,value:"center"},ValuesVisible:{value:!0},ValuesMask:{resolve:"_resolveFull",value:"{category}"},ValuesOptimizeLegibility:{value:!0},ColorMode:{resolve:"_resolveFull",cast:R.parseSunburstColorMode,value:"fan"},RootCategoryLabel:{resolve:"_resolveFull",cast:String,value:"All"},SliceOrder:{resolve:"_resolveFull",cast:R.parseSunburstSliceOrder,value:"bySizeDescending"},EmptySlicesVisible:{resolve:"_resolveFull",cast:Boolean,value:!1},EmptySlicesLabel:{resolve:"_resolveFull",cast:String,value:""}}})),R.visual.Plot.registerClass(R.visual.SunburstPlot),e("pvc.visual.SunburstDiscreteColorAxis",R.visual.ColorAxis.extend({methods:{domainItemValueProp:function(){return this.role&&this.role.grouping.isSingleDimension?"value":"absKey"},domainGroupOperator:function(){return"select"},_getBaseScheme:function(){var t="fan"===this.chart.plots.sunburst.option("ColorMode");if(!t)return this.base();var n=function(e){return null!=e.value},r=e.query(this.domainData().childNodes).where(n).select(this.domainItemValue.bind(this)).object(),i=this.option("Colors");return function(){function t(t){return e.hasOwn(r,t)?n(t):null}var n=i.apply(null,arguments);return e.copy(t,n),t}},_selectDomainItems:function(t){var n=function(e){return null!=e.value},r="fan"===this.chart.plots.sunburst.option("ColorMode");return r?e.query(t.childNodes).where(n):e.query(t.nodes()).where(function(e){return e.parent?n(e)&&!e.parent.parent:!1})}},options:{SliceBrightnessFactor:{resolve:"_resolveFull",cast:e.number.toNonNegative,value:1}}})),e.type("pvc.data.SunburstChartTranslationOper").add({_configureTypeCore:function(){var e=[],t=[],n=[];this._collectFreeDiscreteAndContinuousIndexes(n,t);var r=n.length,i=t.length;r&&this._getUnboundRoleDefaultDimNames("category",r,e),i&&this._getUnboundRoleDefaultDimNames("size",1,e),e.length&&this.defReader({names:e})}}),e.type("pvc.SunburstPanel",R.PlotPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.axes.size=e._getAxis("size",(n.option("SizeAxis")||0)-1),this.sliceOrder=n.option("SliceOrder"),this.emptySlicesVisible=n.option("EmptySlicesVisible"),this.emptySlicesLabel=this.emptySlicesVisible?n.option("EmptySlicesLabel"):""}).add({plotType:"sunburst",_createCore:function(){var n=this._getConstantExtension("label","font");e.string.is(n)&&(this.valuesFont=n);var r=this,i=r._buildScene();if(i){if(!i.childNodes.length&&!this.chart.visualRoles.multiChart.isBound())throw new InvalidDataException("Unable to create a sunburst chart, please check the data values.");var s=r.visualRoles.size.isBound()?r.axes.size.scale.by1(function(e){return e.vars.size.value}):e.fun.constant(100),o=r.pvSunburstPanel=(new R.visual.Panel(r,r.pvPanel,{panelType:t.Layout.Partition.Fill,extensionId:"panel"})).pvMark.lock("visible",!0).lock("nodes",i.nodes()).lock("size",s).lock("orient","radial"),u=new R.visual.SunburstSlice(this,o.node,{extensionId:"slice",tooltipArgs:{options:{useCorners:!0,gravity:function(){var e=this.midAngle(),t=Math.cos(e)>=0,n=Math.sin(e)>=0;return t?n?"nw":"sw":n?"ne":"se"}}}}),a=R.visual.ValueLabel.maybeCreate(r,o.label,{noAnchor:!0});a&&a.override("defaultText",function(e){return e.isRoot()?"":this.base(e)}).override("calcTextFitInfo",function(e,n){var r=this.pvMark,i=r.textMargin();if(!(-0.000001>i)&&"center"===r.textAlign()&&n){var s=R.normAngle(e.midAngle),o=R.normAngle(r.textAngle()),u=Math.abs(s-o)<1e-6,a=!1;if(!u){var f=R.normAngle(o+Math.PI);a=Math.abs(s-f)<1e-6}if(u||a){var l,c=e.innerRadius,h=c,p=e.outerRadius,d=e.angle,v=t.Text.measure(n,r.font()),m=!1;if(d<Math.PI){var g=.85*v.height,y=r.textBaseline(),b="middle"===y?g+i/2:2*(g+3*i/2);h=Math.max(h,b/(2*Math.tan(d/2)))}return l=p-i-h,m|=0>=l,l-=i,m|=this.hideOverflowed&&v.width>l,{hide:m,widthMax:l}}}}).override("getAnchoredToMark",function(){return u.pvMark})}},_getExtensionId:function(){var e=[{abs:this.chart.parent?"smallContent":"content"}];return e.concat(this.base())},renderInteractive:function(){this.pvSunburstPanel.render()},_buildScene:function(){function t(e){var n=e.group,r=e.vars.category=Z.fromComplex(n);s&&null==r.value&&(r.value=s),f.onNewScene(e,!0);if(a&&!e.vars.size.value)return e.parentNode&&e.parentNode.removeChild(e),e;var o=n.children();i||(o=o.where(function(e){return null!=e.value}));if(l){var u=l.view(n);e.vars.color=new Z(u.keyTrimmed(),u.label)}else e.vars.color=new Z(null,"");return o.each(function(n){t(new R.visual.SunburstScene(e,{source:n}))}),e}function n(e,t,r){var i=null,s=e.parent;s&&(i=p(e),!i&&!s.isRoot()&&(i=s.color,i&&t&&h&&(i=i.brighter(h*t/(r-1))))),e.color=i;var o=e.childNodes,u=o.length;o.forEach(function(e,t){n(e,t,u)})}var r=this.visibleData({ignoreNulls:!1}),i=this.emptySlicesVisible,s=this.emptySlicesLabel;if(!r.childCount())return null;var o=this.visualRoles,u=new R.visual.SunburstScene(null,{panel:this,source:r}),a=o.size.isBound(),f=new R.visual.RoleVarHelper(u,"size",o.size,{allowNestedVars:!0,hasPercentSubVar:!0}),l=o.color&&o.color.grouping,c=this.axes.color,h=c.option("SliceBrightnessFactor"),p=o.color.isBound()?c.sceneScale({sceneVarName:"color"}):e.fun.constant(c.option("Unbound"));t(u);if(this.sliceOrder&&a&&"none"!==this.sliceOrder){var d="bysizeascending"===this.sliceOrder?e.ascending:e.descending;u.sort(function(t,n){return d(t.vars.size.value,n.vars.size.value)||e.ascending(t.childIndex(),n.childIndex())})}return n(u,0),u}}),R.PlotPanel.registerClass(R.SunburstPanel),e.type("pvc.visual.SunburstScene",R.visual.Scene).add({_createSelectedInfo:function(){var e=this.chart().data.owner.selectedCount()>0,t=e&&this.datums().all(n.Datum.isSelected);return{any:e,is:t}}}),e.type("pvc.SunburstChart",R.BaseChart).add({_axisClassByType:{size:R.visual.NormalizedAxis,color:R.visual.SunburstDiscreteColorAxis},_axisCreateIfUnbound:{color:!0},_getTranslationClass:function(t){return e.type(this.base(t)).add(R.data.SunburstChartTranslationOper)},_getIsNullDatum:e.fun.constant(),_createPlotsInternal:function(){var e=new R.visual.SunburstPlot(this);this._addPlot(e),this.options.legend=!1}}),e("pvc.visual.SunburstSlice",R.visual.Sign.extend({init:function(n,r,i){var s=r.add(t.Wedge);i=e.setDefaults(i,"freeColor",!1),this.base(n,s,i),this._bindProperty("lineWidth","strokeWidth")},properties:["strokeWidth"],methods:{defaultStrokeWidth:e.fun.constant(.5),interactiveStrokeWidth:function(e,t){return this.showsActivity()&&e.isActiveDescendantOrSelf()?2*Math.max(1,t):t},defaultColor:function(e){return e.color},normalColor:function(e,t,n){return t&&"stroke"===n?t.darker():t},interactiveColor:function(e,t,n){if(this.showsActivity())if("stroke"===n){if(e.isActiveDescendantOrSelf())return t.brighter(2).alpha(.7)}else if(e.isActive)return t.brighter(.2).alpha(.8);return this.mayShowNotAmongSelected(e)?this.dimColor(t,n):this.normalColor(e,t,n)}}})),e.type("pvc.visual.BulletPlot",R.visual.Plot.extend({methods:{type:"bullet",_initVisualRoles:function(){this.base(),this._addVisualRole("title",{defaultDimension:"title*"}),this._addVisualRole("subTitle",{defaultDimension:"subTitle*"}),this._addVisualRole("value",{isMeasure:!0,requireIsDiscrete:!1,requireSingleDimension:!1,valueType:Number,defaultDimension:"value*"}),this._addVisualRole("marker",{isMeasure:!0,requireIsDiscrete:!1,requireSingleDimension:!1,valueType:Number,defaultDimension:"marker*"}),this._addVisualRole("range",{isMeasure:!0,requireIsDiscrete:!1,requireSingleDimension:!1,valueType:Number,defaultDimension:"range*"})}},options:{ValuesVisible:{value:!0}}})),R.visual.Plot.registerClass(R.visual.BulletPlot),e.type("pvc.BulletChart",R.BaseChart).add({bulletChartPanel:null,allowNoData:!0,_processOptionsCore:function(e){e.legend=!1,e.selectable=!1,this.base(e)},_createTranslationCore:function(e,n){var r=this.base(e,n),i=r.virtualItemSize();if(i)switch(i){case 1:r.defReader({names:"value"});break;case 2:r.defReader({names:["title","value"]});break;case 3:r.defReader({names:["title","value","marker"]});break;default:r.defReader({names:["title","subTitle","value","marker"]}),i>4&&r.defReader({names:"range",indexes:t.range(4,i)})}return r},_createPlotsInternal:function(){this._addPlot(new R.visual.BulletPlot(this))},defaults:{compatVersion:1,orientation:"horizontal",bulletSize:30,bulletSpacing:50,bulletMargin:100,bulletTitle:"Title",bulletSubtitle:"",bulletTitlePosition:"left",tooltipFormat:function(e,t,n){return this.chart.options.valueFormat(n)},crosstabMode:!1,seriesInRows:!1}}),e.type("pvc.BulletChartPanel",R.PlotPanel).add({plotType:"bullet",pvBullets:null,pvBullet:null,data:null,onSelectionChange:null,_createCore:function(e){var n,r,i,s,o,u,a,f,l,c=this.chart,h=c.options,p=this.buildData(),d=this,v="horizontal"==h.orientation?"left":"bottom";if("horizontal"==h.orientation){n=e.clientSize.width-this.chart.options.bulletMargin-20,r=0;switch(h.bulletTitlePosition){case"top":a=this.chart.options.bulletMargin,s=0,i="left",o=-12,l=parseInt(h.titleSize/2,10);break;case"bottom":a=this.chart.options.bulletMargin,s=0,i="left",o=h.bulletSize+32,l=0;break;case"right":a=5,s=n+5,i="left",o=parseInt(h.bulletSize/2,10),l=0;break;case"left":default:a=this.chart.options.bulletMargin,s=0,o=parseInt(h.bulletSize/2,10),i="right",l=0}u="bottom",f=function(){return this.index*(h.bulletSize+h.bulletSpacing)+l}}else{n=e.clientSize.height-this.chart.options.bulletMargin-20;switch(h.bulletTitlePosition){case"top":a=this.chart.options.bulletMargin,s=0,i="left",o=-20,r=0,f=void 0;break;case"bottom":a=this.chart.options.bulletMargin,s=0,i="left",o=n+20,r=0,f=20;break;case"right":a=5,s=this.chart.options.bulletSize+40,i="left",o=n,r=-Math.PI/2,f=void 0;break;case"left":default:a=this.chart.options.bulletMargin,s=-12,o=this.height-this.chart.options.bulletMargin-20,i="left",r=-Math.PI/2,f=void 0}u="right",a=function(){return h.bulletMargin+this.index*(h.bulletSize+h.bulletSpacing)}}this.pvBullets=this.pvPanel.add(t.Panel).data(p)[R.BasePanel.orthogonalLength[v]](n)[R.BasePanel.parallelLength[v]](this.chart.options.bulletSize).margin(20).left(a).top(f),this.pvBullet=this.pvBullets.add(t.Layout.Bullet).orient(v).ranges(function(e){return e.ranges}).measures(function(e){return e.measures}).markers(function(e){return e.markers});if(c.clickable()&&this.clickAction){var d=this;this.pvBullet.cursor("pointer").event("click",function(e){var n=e.title,r=e.subtitle,i=t.event;return d.clickAction(n,r,e.measures,i)})}this.pvBulletRange=this.pvBullet.range.add(t.Bar),this.pvBulletMeasure=this.pvBullet.measure.add(t.Bar).text(function(e,t){return t.formattedMeasures[this.index]}),this.pvBulletMarker=this.pvBullet.marker.add(t.Dot).shape("square").fillStyle("white").text(function(e,t){return t.formattedMarkers[this.index]});if(this.showsTooltip()){var m=this;this.pvBulletMeasure.localProperty("tooltip").tooltip(function(e,t){var n=t.title,r=t.subtitle;return c.options.tooltipFormat.call(m,n,r,e)}),this.pvBulletMarker.localProperty("tooltip").tooltip(function(e,t){var n=t.title,r=t.subtitle;return c.options.tooltipFormat.call(m,n,r,e)}),this.pvBulletMeasure.event("mouseover",t.Behavior.tipsy(this.chart._tooltipOptions)),this.pvBulletMarker.event("mouseover",t.Behavior.tipsy(this.chart._tooltipOptions))}this.pvBulletRule=this.pvBullet.tick.add(t.Rule),this.pvBulletRuleLabel=this.pvBulletRule.anchor(u).add(t.Label).text(function(e){return d.pvBullet.x.tickFormat(e,this.index)}),this.pvBulletTitle=this.pvBullet.anchor(v).add(t.Label).font("bold 12px sans-serif").textAngle(r).left(-10).textAlign(i).textBaseline("bottom").left(s).top(o).text(function(e){return e.formattedTitle}),this.pvBulletSubtitle=this.pvBullet.anchor(v).add(t.Label).textStyle("#666").textAngle(r).textAlign(i).textBaseline("top").left(s).top(o).text(function(e){return e.formattedSubtitle});var g="function"==typeof h.axisDoubleClickAction?function(e,t){h.axisDoubleClickAction(e,t)}:null;c.doubleClickable()&&g&&(this.pvBulletTitle.cursor("pointer").events("all").event("dblclick",function(e){g(e,arguments[arguments.length-1])}),this.pvBulletSubtitle.cursor("pointer").events("all").event("dblclick",function(e){g(e,arguments[arguments.length-1])}))},applyExtensions:function(){this.base(),this.extend(this.pvBullets,"bulletsPanel"),this.extend(this.pvBullet,"bulletPanel"),this.extend(this.pvBulletRange,"bulletRange"),this.extend(this.pvBulletMeasure,"bulletMeasure"),this.extend(this.pvBulletMarker,"bulletMarker"),this.extend(this.pvBulletRule,"bulletRule"),this.extend(this.pvBulletRuleLabel,"bulletRuleLabel"),this.extend(this.pvBulletTitle,"bulletTitle"),this.extend(this.pvBulletSubtitle,"bulletSubtitle")},_getExtensionId:function(){return[{abs:"content"}].concat(this.base())},buildData:function(){var t,n=this.chart,r=n.options,i=n.visualRoles.title,s=i.grouping,o=n.visualRoles.subTitle,u=o.grouping,a=n.visualRoles.value,f=a.grouping,l=n.visualRoles.marker,c=l.grouping,h=n.visualRoles.range,p=h.grouping,d={title:r.bulletTitle,formattedTitle:r.bulletTitle,subtitle:r.bulletSubtitle,formattedSubtitle:r.bulletSubtitle,ranges:e.array.to(r.bulletRanges)||[],measures:e.array.to(r.bulletMeasures)||[],markers:e.array.to(r.bulletMarkers)||[]};return e.set(d,"formattedRanges",d.ranges.map(String),"formattedMeasures",d.measures.map(String),"formattedMarkers",d.markers.map(String)),t=f||s||c||u||p?n.data.datums().select(function(e){var t,n=Object.create(d);return f&&(t=f.view(e),n.measures=t.values(),n.formattedMeasures=t.labels()),s&&(t=s.view(e),n.title=t.value,n.formattedTitle=t.label),u&&(t=u.view(e),n.subtitle=t.value,n.formattedSubtitle=t.label),c&&(t=c.view(e),n.markers=t.values(),n.formattedMarkers=t.labels()),p&&(t=p.view(e),n.ranges=t.values(),n.formattedRanges=t.labels()),n},this).array():[d],t}}),R.PlotPanel.registerClass(R.BulletChartPanel),e.type("pvc.ParallelCoordinates",R.BaseChart).init(function(e){e=e||{},e.dimensions=e.dimensions||{},e.dimensions.value||(e.dimensions.value={valueType:null}),this.base(e)}).add({parCoordPanel:null,_createContent:function(t,n){this.parCoordPanel=new R.ParCoordPanel(this,t,e.create(n,{topRuleOffset:this.options.topRuleOffset,botRuleOffset:this.options.botRuleOffset,leftRuleOffset:this.options.leftRuleOffset,rightRuleOffset:this.options.rightRuleOffset,sortCategorical:this.options.sortCategorical,mapAllDimensions:this.options.mapAllDimensions,numDigits:this.options.numDigits}))},defaults:e.create(R.BaseChart.prototype.defaults,{compatVersion:1,topRuleOffset:30,botRuleOffset:30,leftRuleOffset:60,rightRuleOffset:60,sortCategorical:!0,mapAllDimensions:!0,numDigits:0})}),e.type("pvc.ParCoordPanel",R.BasePanel).add({anchor:"fill",pvParCoord:null,dimensions:null,dimensionDescr:null,data:null,retrieveData:function(){var e=this.chart.data,t=this.chart.options.numDigits;this.dimensions=e.getVisibleCategories();var n=e.getValues(),r=e.getVisibleSeriesIndexes(),i=e.getVisibleCategoriesIndexes(),s=e.getCategories(),o=i.map(this.chart.options.mapAllDimensions?function(e){return isNaN(n[e][0])?{categorical:!0,len:0,map:[]}:{categorical:!1,len:0,map:[],displayValue:[]}}:function(e){return isNaN(n[e][0])?{categorical:!0,len:0,map:[]}:null}),u=function(e,n){var r=o[e],i=null;if(r.categorical)i=r.map[n],null==i&&(i=r.len,r.len++,r.map[n]=i);else{var s=n.toFixed(t);i=r.map[s],null==i&&(i=r.len,r.len++,r.map[s]=i,r.displayValue[s]=n)}return i};for(var a in o)o.hasOwnProperty(a)&&o[a]&&o[a].categorical&&(o[a].displayValue=o[a].map);var f,l,c;if(this.chart.options.sortCategorical||this.chart.options.mapAllDimensions)for(f=0;f<o.length;f++)if(o[f]){for(var h=0;h<n[f].length;h++)u(f,n[f][h]);var p=o[f].map,d=[];for(l in p)p.hasOwnProperty(l)&&d.push(l);d.sort();if(o[f].categorical)for(c=0;c<d.length;c++)p[d[c]]=c;else for(c=0;c<d.length;c++)p[d[c]].index=c}var v=function(e){var t={};for(var r in i)i.hasOwnProperty(r)&&(t[s[r]]=o[r]?u(r,n[r][e]):n[r][e]);return t};this.data=r.map(function(e){return v(e)});var m=this.dimensions.map(function(e){var t={},n=e.split("__");return t.id=e,t.name=n[0],t.unit=n.length>1?n[1]:"",t});for(f=0;f<m.length;f++){l=m[f];var g=i[f];l.orgRowIndex=g;var y,b,w,E,S,x=n[g].length;if(o[g]){y=b=w=E=o[g].displayValue[n[g][0]];for(c=1;x>c;c++)S=o[g].displayValue[n[g][c]],y>S&&(w=y,y=S),S>b&&(E=b,b=S)}else{y=b=w=E=n[g][0];for(c=1;x>c;c++)S=n[g][c],y>S&&(w=y,y=S),S>b&&(E=b,b=S)}var T=(b-E+(w-y))/2;l.min=y,l.max=b,l.step=T,l.categorical=!1;if(o[g]){l.map=o[g].map,l.mapLength=o[g].len,l.categorical=o[g].categorical;if(!l.categorical){l.orgValue=[];var N=o[g].map;for(var C in N)N.hasOwnProperty(C)&&(l.orgValue[N[C]]=0+C)}}}var k=function(e,t){for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r];return n};this.dimensionDescr=k(this.dimensions,m)},_createCore:function(){function e(e){var t=e.dim;return E[t].min=Math.max(b[t].domain()[0],b[t].invert(i-e.y-e.dy)),E[t].max=Math.min(b[t].domain()[1],b[t].invert(i-e.y)),S=t,_.render(),!1}function n(e){if(e.dy<3){var t=e.dim;E[t].min=Math.max(b[t].domain()[0],b[t].invert(0)),E[t].max=Math.min(b[t].domain()[1],b[t].invert(i)),e.y=u,e.dy=c,S=t,_.render()}return!1}var r=this;this.retrieveData();var i=this.height,s=this.chart.options.numDigits,o=this.chart.options.topRuleOffset,u=this.chart.options.botRuleOffset,a=this.chart.options.leftRuleOffset,f=this.width-this.chart.options.rightRuleOffset,l=this.height-o,c=l-u,h=o-12,p=this.dimensions,d=this.dimensionDescr,v=function(e,n){var r=d[e].min,i=d[e].max,s=d[e].step;return n&&(r-=s,i+=s),t.Scale.linear(r,i).range(u,l)},m=function(e){var t=v(e,!0).range(u,l),n=d[e];if(n.orgValue&&!n.categorical){var r=function(e){var r=t(n.orgValue[e]);return r};return r.domain=function(){return t.domain()},r.invert=function(e){return t.invert(e)},r}return t},g=function(e){var t=v(e,!1).range("steelblue","brown");return t},y=t.Scale.ordinal(p).splitFlush(a,f),b=t.dict(p,m),w=t.dict(p,g),E=t.dict(p,function(e){return{min:b[e].domain()[0],max:b[e].domain()[1]}}),S=p[0],x=this.chart.options.mapAllDimensions?function(e){return p.every(function(t){var n=d[t],r=n.orgValue&&!n.categorical?n.orgValue[e[t]]:e[t];return r>=E[t].min&&r<=E[t].max})}:function(e){return p.every(function(t){return e[t]>=E[t].min&&e[t]<=E[t].max})};this.pvParCoord=this.pvPanel.add(t.Panel).data(r.data).visible(x).add(t.Line).data(p).left(function(e){return y(e)}).bottom(function(e,t){var n=b[e](t[e]);return n}).strokeStyle("#ddd").lineWidth(1).antialias(!1);var T=this.pvPanel.add(t.Rule).data(p).left(y).top(o).bottom(u);T.anchor("top").add(t.Label).top(h).font("bold 10px sans-serif").text(function(e){return d[e].name});var N=[],C=6,k=3;for(var L in d)if(d.hasOwnProperty(L)){var A=d[L];if(A.categorical){var O=y(A.id)+C;for(var M in A.map)A.map.hasOwnProperty(M)&&(N[N.length]={x:O,y:b[A.id](A.map[M])+k,label:M})}}this.pvPanel.add(t.Panel).data(N).add(t.Label).left(function(e){return e.x}).bottom(function(e){return e.y}).text(function(e){return e.label}).textAlign("left");var _=this.pvPanel.add(t.Panel);_.add(t.Panel).data(r.data).visible(x).add(t.Line).data(p).left(function(e){return y(e)}).bottom(function(e,t){return b[e](t[e])}).strokeStyle(function(e,t){var n=d[S],r=n.orgValue&&!n.categorical?n.orgValue[t[S]]:t[S];return w[S](r)}).lineWidth(1);var D=_.add(t.Panel).data(p.map(function(e){return{y:u,dy:c,dim:e}})).left(function(e){return y(e.dim)-30}).width(60).fillStyle("rgba(0,0,0,.001)").cursor("crosshair").event("mousedown",t.Behavior.select()).event("select",e).event("selectend",n).add(t.Bar).left(25).top(function(e){return e.y}).width(10).height(function(e){return e.dy}).fillStyle(function(e){return e.dim==S?w[e.dim]((E[e.dim].max+E[e.dim].min)/2):"hsla(0,0,50%,.5)"}).strokeStyle("white").cursor("move").event("mousedown",t.Behavior.drag()).event("dragstart",e).event("drag",e);D.anchor("bottom").add(t.Label).textBaseline("top").text(function(e){return d[e.dim].categorical?"":E[e.dim].min.toFixed(s)+d[e.dim].unit}),D.anchor("top").add(t.Label).textBaseline("bottom").text(function(e){return d[e.dim].categorical?"":E[e.dim].max.toFixed(s)+d[e.dim].unit}),this.extend(this.pvParCoord,"parCoord"),this.extend(this.pvPanel,"chart")}}),e.type("pvc.DataTree",R.BaseChart).init(function(e){e=e||{},e.dimensionGroups=e.dimensionGroups||{},e.dimensionGroups.value||(e.dimensionGroups.value={valueType:null}),this.base(e)}).add({structEngine:null,structMetadata:null,structDataset:null,DataTreePanel:null,_getColorRoleSpec:function(){return{isRequired:!0,defaultSourceRole:"category",requireIsDiscrete:!0}},setStructData:function(e){this.structDataset=e.resultset,this.structDataset.length||this.log("Warning: Structure-dataset is empty"),this.structMetadata=e.metadata,this.structMetadata.length||this.log("Warning: Structure-Metadata is empty")},_createContent:function(t,r){var i=this.structEngine,s=i?i.type:new n.ComplexType;s.addDimension("value",{});var o={seriesInRows:!0,crosstabMode:!0},u=new n.CrosstabTranslationOper(s,this.structDataset,this.structMetadata,o);u.configureType(),i||(i=this.structEngine=new n.Data({type:s})),i.load(u.execute(i)),e.debug>=3&&this.log(this.structEngine.getInfo()),this.dataTreePanel=new R.DataTreePanel(this,t,e.create(r,{topRuleOffset:this.options.topRuleOffset,botRuleOffset:this.options.botRuleOffset,leftRuleOffset:this.options.leftRuleOffset,rightRuleOffset:this.options.rightRuleOffset,boxplotColor:this.options.boxplotColor,valueFontsize:this.options.valueFontsize,headerFontsize:this.options.headerFontsize,border:this.options.border,perpConnector:this.options.perpConnector,numDigits:this.options.numDigits,minVerticalSpace:this.options.minVerticalSpace,connectorSpace:this.options.connectorSpace,minAspectRatio:this.options.minAspectRatio}))},defaults:{compatVersion:1,topRuleOffset:30,botRuleOffset:30,leftRuleOffset:60,rightRuleOffset:60,boxplotColor:"grey",headerFontsize:16,valueFontsize:20,border:2,perpConnector:!1,numDigits:0,connectorSpace:.15,minVerticalSpace:.05,minAspectRatio:2}}),e.type("pvc.DataTreePanel",R.PlotPanel).add({pvDataTree:null,treeElements:null,structMap:null,structArr:null,hRules:null,vRules:null,rules:null,generatePerpConnectors:function(e){this.hRules=[],this.vRules=[],this.rules=[];for(var t in this.structMap){var n=this.structMap[t];if(null!=n.children){var r=1e4,i=-1e4,s=n.left+n.width;this.hRules.push({left:s,width:e,bottom:n.bottom+n.height/2}),s+=e;for(var o in n.children){var u=this.structMap[n.children[o]],a=u.bottom+u.height/2;a>i&&(i=a),r>a&&(r=a),this.hRules.push({left:s,width:u.left-s,bottom:a})}i>r&&this.vRules.push({left:s,bottom:r,height:i-r})}}},generateLineSegment:function(e,t,n,r){var i=[];i.push({x:e,y:t}),i.push({x:n,y:r}),this.rules.push(i)},generateConnectors:function(e){this.hRules=[],this.vRules=[];if(this.chart.options.perpConnector)this.generatePerpConnectors(e);else{this.rules=[];for(var t in this.structMap){var n=this.structMap[t];if(null!=n.children){var r,i,s,o=1e4,u=-1e4;for(s in n.children)i=this.structMap[n.children[s]],r=i.bottom+i.height/2,r>u&&(u=r),o>r&&(o=r);var a=(u+o)/2,f=n.left+n.width,l=f+e;this.generateLineSegment(f,n.bottom+n.height/2,l,a);for(s in n.children)i=this.structMap[n.children[s]],r=i.bottom+i.height/2,this.generateLineSegment(l,a,i.left,r)}}}},retrieveStructure:function(){var e=this.chart.structEngine,t=this.chart.options,n=e.getVisibleCategories();this.treeElements=e.getVisibleSeries();var i,s=e.getValues(),o=n.length>4;for(i in this.treeElements)this.treeElements[i]=r.trim(this.treeElements[i]);var u=[];u.getElement=function(e){return null==u[e]&&(u[e]={min:1e4,max:-1e4}),u[e]},u.addValue=function(e,t){var n=u.getElement(e);return t<n.min&&(n.min=t),t>n.max&&(n.max=t),n};var a,f,l,c;for(i in this.treeElements)l=this.treeElements[i],a=l[0],f=a.charCodeAt(0),c=parseInt(l.slice(1),10),u.addValue("__cols",f),u.addValue(a,c);var h=u.getElement("__cols"),p=this.innerWidth/(h.max-h.min+1),d=t.connectorSpace*p,v=p-d,m=v/t.minAspectRatio,g=h.min;delete u.__cols;for(i in u){h=u[i];if("function"!=typeof h){var y=h.max-h.min+1;h.gridHeight=this.innerHeight/y,h.cellHeight=h.gridHeight*(1-t.minVerticalSpace),h.cellHeight>m&&(h.cellHeight=m),h.relBottom=(h.gridHeight-h.cellHeight)/2,h.numRows=y}}var b=new RegExp("[\\s\"']+","g");this.structMap={};for(i in this.treeElements){var w={};l=this.treeElements[i],w.box_id=l,this.structMap[l]=w,a=l[0],f=a.charCodeAt(0),c=parseInt(l.slice(1),10),h=u.getElement(a),w.colIndex=f-g,w.rowIndex=h.numRows-(c-h.min)-1,w.left=this.leftOffs+w.colIndex*p,w.width=v,o?(w.bottom=s[4][i],w.height=s[5][i]):(w.bottom=this.botOffs+w.rowIndex*h.gridHeight+h.relBottom,w.height=h.cellHeight),w.label=s[0][i],w.selector=s[1][i],w.aggregation=s[2][i];var E=(s[3][i]||"").replace(b," ");w.children=" "===E||""===E?null:E.split(" ")}this.generateConnectors((p-v)/2),this.structArr=[];for(i in this.structMap)l=this.structMap[i],this.structArr.push(l)},findDataValue:function(e,t){for(var n=0;n<t[0].length;n++)if(t[0][n]==e)return t[1][n];this.log("Error: value with key : "+e+" not found.")},generateBoxPlots:function(){var e=this.chart.options;for(var n in this.structArr){var r=this.structArr[n];if(r.values.length){r.subplot={};var i=r.subplot,s=[],o=15,u=r.width/6;i.hRules=[],i.vRules=[],i.marks=[],i.labels=[],s.push(this.findDataValue("_p5",r.values)),s.push(this.findDataValue("_p25",r.values)),s.push(this.findDataValue("_p50",r.values)),s.push(this.findDataValue("_p75",r.values)),s.push(this.findDataValue("_p95",r.values));var a=!1;if("undefined"!=typeof s[2]){s[4]<s[0]&&(s=s.reverse(),this.log(" dataset "+r.box_id+" repaired (_p95 was smaller than _p5)")),s[4]>s[0]?i.hScale=t.Scale.linear(s[0],s[4]):(a=!0,i.hScale=t.Scale.linear(s[0]-1e-10,s[0]+1e-10)),i.hScale.range(r.left+u,r.left+r.width-u);var f,l=""+s[2];for(f=0;f<s.length;f++)s[f]=i.hScale(s[f]);i.bot=r.bottom+r.height/3,i.top=r.bottom+2*r.height/3,i.mid=(i.top+i.bot)/2,i.textBottom=r.bottom+o,i.textBottom=i.bot-e.valueFontsize-1;var c=3;if(a)i.vRules.push({left:s[0],bottom:i.bot,lWidth:c,height:i.top-i.bot});else{i.hRules.push({left:s[0],width:s[1]-s[0],lWidth:1,bottom:i.mid}),i.hRules.push({left:s[1],width:s[3]-s[1],lWidth:1,bottom:i.bot}),i.hRules.push({left:s[1],width:s[3]-s[1],lWidth:1,bottom:i.top}),i.hRules.push({left:s[3],width:s[4]-s[3],lWidth:1,bottom:i.mid});for(f=0;f<s.length;f++)i.vRules.push({left:s[f],bottom:i.bot,lWidth:2==f?c:1,height:i.top-i.bot})}i.labels.push({left:s[2],bottom:i.textBottom,text:this.labelFixedDigits(l),size:e.smValueFont,color:e.boxplotColor})}}}},labelFixedDigits:function(e){"string"==typeof e&&(e=parseFloat(e));if("number"==typeof e){var t=this.chart.options.numDigits;e=e.toFixed(t)}return""+e},addDataPoint:function(e){var t=this.chart.options;for(var n in this.structArr){var r=this.structArr[n];if(r.values.length){var i=this.findDataValue(e,r.values);if("undefined"!=typeof i){var s=r.subplot,o=s.hScale(i),u="green";s.marks.push({left:o,bottom:s.mid,color:u}),s.labels.push({left:o,bottom:s.textBottom,text:this.labelFixedDigits(i),size:t.valueFont,color:u})}}}},retrieveData:function(){var e,t=this.chart.data,n=this.chart.options,r=t.getVisibleSeries(),i=t.getValues(),s={},o=i.length;for(var u in this.structArr){var a=this.structArr[u];a.values=[];for(e=0;o>e;e++)a.values.push([]);s[a.selector]=a}var f={};for(e in r){var l=s[r[e]];if("undefined"!=typeof l)for(var c in i)l.values[c].push(i[c][e]);else f[r[e]]=!0}for(var h in f)this.log("Could'nt find box for selector: "+h);this.generateBoxPlots();var p=new RegExp("[\\s\"']+","g");if(n.selectParam){var d=n.selectParam.replace(p,"");"undefined"!=d&&d.length>0&&"undefined"!=typeof window[d]&&(d=window[d],this.addDataPoint(d))}},_createCore:function(){var e=this,n=this.chart.options;n.smValueFontsize=Math.round(.6*n.valueFontsize),n.smValueFont=""+n.smValueFontsize+"px sans-serif",n.valueFont=""+n.valueFontsize+"px sans-serif";var r=n.topRuleOffset,i=n.botRuleOffset,s=n.leftRuleOffset;this.innerWidth=this.width-s-n.rightRuleOffset,this.innerHeight=this.height-r-i,this.botOffs=i,this.leftOffs=s,this.retrieveStructure(),this.retrieveData();var o,u=n.headerFontsize+3,a=this.rules;for(o=0;o<a.length;o++)this.pvPanel.add(t.Line).data(a[o]).left(function(e){return e.x}).bottom(function(e){return e.y}).lineWidth(1).strokeStyle("black");this.pvDataTree=this.pvPanel.add(t.Bar).data(e.structArr).left(function(e){return e.left}).bottom(function(e){return e.bottom}).height(function(e){return e.height}).width(function(e){return e.width}).fillStyle("green").add(t.Bar).left(function(e){return e.left+n.border}).bottom(function(e){return e.bottom+n.border}).height(function(e){return e.height-n.border-u}).width(function(e){return e.width-2*n.border}).fillStyle("white").add(t.Label).text(function(e){return e.label}).textAlign("center").left(function(e){return e.left+e.width/2}).bottom(function(e){return e.bottom+e.height-n.headerFontsize-5+n.headerFontsize/5}).font(""+n.headerFontsize+"px sans-serif").textStyle("white").fillStyle("blue");for(o=0;o<this.structArr.length;o++){var f=this.structArr[o];this.pvPanel.add(t.Rule).data(f.subplot.hRules).left(function(e){return e.left}).width(function(e){return e.width}).bottom(function(e){return e.bottom}).lineWidth(function(e){return e.lWidth}).strokeStyle(e.chart.options.boxplotColor),this.pvPanel.add(t.Rule).data(f.subplot.vRules).left(function(e){return e.left}).height(function(e){return e.height}).bottom(function(e){return e.bottom}).lineWidth(function(e){return e.lWidth}).strokeStyle(e.chart.options.boxplotColor),this.pvPanel.add(t.Dot).data(f.subplot.marks).left(function(e){return e.left}).bottom(function(e){return e.bottom}).fillStyle(function(e){return e.color}),this.pvPanel.add(t.Label).data(f.subplot.labels).left(function(e){return e.left}).bottom(function(e){return e.bottom}).font(function(e){return e.size}).text(function(e){return e.text}).textAlign("center").textStyle(function(e){return e.color})}n.perpConnector&&(this.pvPanel.add(t.Rule).data(e.vRules).left(function(e){return e.left}).bottom(function(e){return e.bottom}).height(function(e){return e.height}).strokeStyle("black"),this.pvPanel.add(t.Rule).data(e.hRules).left(function(e){return e.left}).bottom(function(e){return e.bottom}).width(function(e){return e.width}).strokeStyle("black"))},applyExtensions:function(){this.extend(this.pvDataTree,"dataTree")}}),R}),pen.define("cdf/lib/CCC/pvc-d1.0",function(){}),pen.define("cdf/lib/CCC/def",[],function(){function e(n,r,i){if(n&&!(n instanceof e.QualifiedName)){var s=typeof n;if("object"===s){for(var o in n)t(o,n[o],r);return e}if("array"===s){for(var o in n)t(n[o],r);return e}}return t(n,r,i),r}function t(t,n,r){t=e.qualName(t),r=e.space(t.namespace,r),t.name&&(r[t.name]=n,n instanceof Object&&e.qualNameOf(n,t))}function n(t){e.log=e.logger("[DEF]"),nt&&nt.forEach(function(e){e(t)})}function r(){return e.debug}function i(e,t){e=s(e,t);var n=f("log",e);return n.log=n,n.level=r,it.forEach(function(t){n[t]=f(st[t]||t,e)}),n}function s(t,n){return t&&(e.fun.is(t)?t.call(n):t)}function o(t,n,o){var u=function(r){if(e.debug>1){var u=t[n||"log"]=i(o,t);u[r||"log"].apply(u,Q.call(arguments,1))}else"error"===r&&a.apply(null,e.array.append([s(o,t)],arguments,1))},f=u.bind("log");return f.log=f,f.level=r,it.forEach(function(e){f[e]=u.bind(e)}),f}function u(){function e(){}return e.log=e,e.level=r,it.forEach(function(t){e[t]=e}),e}function a(t,n,r){throw n&&"object"==typeof n&&n.message&&(n=n.message),n=(t?t+": ":"")+e.nullyTo(n,"")+(r?" "+r:""),new Error(n)}function f(t,n){var r,i=console,s=i[t]||i.log;if(s){var o=n?n+": %s":"%s";if(e.fun.is(s))r=s.bind(i,o);else{var u=Function.prototype.apply;r=function(){u.call(s,i,e.array.append([o],arguments))}}}return r}function l(){function e(e){function t(){n=e}return t.toString=c,t}function t(e){if(void 0!==n)throw new Error("Access denied.");var t=(e(),n);return n=void 0,t}var n;return t.safe=e,t.property=h,t}function c(){return"SAFE"}function h(t,n){function r(n,r){return e.setNonEnum(n,t,s.safe(r)),r}function i(e){return s(e[t])}t||(t=ot(n));var s=this;return i.init=r,i.propertyName=t,i}function p(e){var t;e&&(e instanceof Array?(t=e,e=t.join(".")):t=e.split(".")),t&&t.length>1?(this.name=t.pop(),this.namespace=t.join(".")):(this.name=e||null,this.namespace=null)}function d(t,n){var r=n||at;if(t){var i=t.split("."),s=i.length;if(s){var o,u=0;if(r===e.global){o=i[0];var a=e.getOwn(ft,o);a&&(r=a,u++)}for(;s>u;)o=i[u++],r=r[o]||(r[o]={})}}return r}function v(e){return function(t){return m(t,Q.call(arguments,1),e)}}function m(t,n,r){for(var i,s=0,o=n.length;o>s;)if(i=n[s++])i=e.object.as(i.prototype||i),i&&g(t,i,r);return t}function g(e,t,n){for(var r in t)y(e,r,t[r],n)}function y(t,n,r,i){if(void 0!==r){var s,o=e.object.asNative(t[n]);o?(s=e.object.as(r),s?(J.call(t,n)||(t[n]=o=Object.create(o)),g(o,s,i)):t[n]=r):(s=e.object.asNative(r),s&&(r=(i||Object.create)(s)),t[n]=r)}}function b(t){var n,r;for(n in t)(r=e.object.asNative(t[n]))&&b(t[n]=Object.create(r))}function w(t,n){if(n){var r=t.configure;e.fun.is(r)?r.call(t,n):w.generic(t,n)}return t}function E(t,n){function r(t){var r={};i.push(r);for(var s in t)if(s){var o=t[s];if(void 0===o)continue;var u,a,f,l,c=r,h=s.indexOf("."),p=null;if(h>=0){n?(p=[s.substr(0,h)],s=s.substr(h+1)):(p=s.split("."),s=p.pop()),u=p.length,a=-1;for(;++a<u;)if(f=p[a]){l=c[f];if(void 0===l)c[f]=l={};else if(null===l||!e.object.is(l)||l.constructor!==Object)i.push(r=l={}),a=-1;c=l}}var d=c[s];if(d!==o){if(void 0!==d){if(!S(o)||!S(d))continue;i.push(r=c={});if(p){a=-1;for(;++a<u;)(f=p[a])&&(c=c[f]={})}}c[s]=o}}}if(!t)return[];var i=[];return e.array.each(t,r),i}function S(t){return t&&e.object.is(t)&&!x(t)}function x(e){return e.constructor!==Object&&!(e instanceof Array)}function T(t,n){if(n){var r=n.prototype,i=t.prototype=Object.create(r);e.setNonEnum(i,"constructor",t),"__proto__"in i||e.setNonEnum(i,"__proto__",r)}return t}function N(t,n,r){function i(){var e=r.base;r.base=n;try{return t.apply(this,arguments)}finally{r.base=e}}function s(){var e=L(this),r=e.base;e.base=n;try{return t.apply(this,arguments)}finally{e.base=r}}return t?!n||n===t||!C(t)?t:(k(r),e.fun.wraps(r?i:s,t)):n}function C(e){return ht.test(e)}function k(t){if(t===$)throw e.error.invalidArgument("proto","Cannot change Object.prototype.");return t}function L(t){k(e.protoOf(t))}function A(t,n){var r=e.fun.as(t[n]);return r===$[n]?null:r}function O(t,n,r){t=et(t);var i=e.protoOf(t),s=e.rootProtoOf(t),o=e.get(r,"enumerable",!0);return e.array.each(n,function(n){(n=et(n))&&(Z?e.ownKeys(n).forEach(function(e){H(t,e,Z(n,e),i,s,o)}):e.eachOwn(n,function(e,n){D(t,n,e,i,s,o)}))}),e}function M(t,n,r,i){t=et(t);var s=e.get(i,"enumerable",!0);return D(t,n,r,e.protoOf(t),e.rootProtoOf(t),s)}function _(e){return"base"!==e&&"constructor"!==e}function D(t,n,r,i,s,o){return void 0!==r&&i[n]!==r&&_(n)&&P(t,n,r,s,o),e}function P(t,n,r,i,s){var o;r&&(o=e.fun.as(r))?(r=e.overrides(o,A(t,n),i),s?t[n]=r:e.setNonEnum(t,n,r)):y(t,n,r,e.identity)}function H(t,n,r,i,s,o){var u;if(_(n))if(r.get||r.set){var a=B(i,n);a&&((r.get||a.get)&&(r.get=e.overrides(r.get,a.get,s)),(r.set||a.set)&&(r.set=e.overrides(r.set,a.set,s))),o||(r.enumerable=!1),Y(t,n,r)}else void 0!==(u=r.value)&&P(t,n,u,s,o);return e}function B(t,n){var r;if(n in t)for(;t=e.protoOf(t);)if(r=Z(t,n))return r}function j(t,n){this.baseType=n||null;var r=this.constructor;if(r.Ctor)throw e.error.operationInvalid("MetaType already has an associated type constructor.");if(t&&t.Meta)throw e.error.argumentInvalid("TypeCtor","Specified type constructor already has an associated MetaType.");this.external=!!t,this.rootType=n?n.rootType:this,this._init=n?n._init:null,this._post=n?n._post:null;var i=n&&n._mixins;this._mixins=i?i.slice():null,this.steps=void 0,t=this._initConstructor(t||this._createConstructor()),this.Ctor=r.Ctor=t}function F(t){return e.fun.is(t)&&t.meta instanceof j}function I(t,n){e.methods(this,t,n);var r=this.Ctor;return r&&q.call(this,r,t),this}function q(t,n){var r=this.prototype;e.array.each(n,function(n){e.each(et(n),function(n,i){e.isPropPrivate(i)||(n=r[i],e.fun.is(n)?R(t,i,n):t[i]=n)})})}function R(t,n,r){function i(){var e=this.meta,t=r.apply(e,arguments);return t===e?this:t}t[n]=e.fun.wraps(i,r)}function U(t,n){function r(n,r){if(void 0!==r){var o=n[t];if(null===r)n.___proto&&J.call(n,t)&&(delete n[t],r=n[t],a&&r!==o&&a(r,o,this,t));else if(r!==o){if(l&&(s=l(r)))throw new e.error.argumentInvalid(t,e.string.is(s)?s:"");f&&(r=i.call(this,n,r,o)),null!=r&&(n[t]=r,a&&a(r,o,this,t))}}return this}function i(n,r,i){var s=f(r);if(null==s){if(!u)return;if(J.call(n,t)){e.configure(i,r);return}if(!o)return;s=o(r,i)}return s}e.fun.is(n)&&(n={factory:n});var s,o=e.get(n,"factory"),u=e.get(n,"configurable",!!o),a=e.get(n,"change"),f=e.get(n,"cast"),l=e.get(n,"fail");return n=null,r}function z(t,n,r){e.MetaType.apply(this,arguments);var n=this.baseType;n&&(this.fieldsPrivProp=n.constructor===z?e.get(r,"fieldsPrivProp")||vt:n.fieldsPrivProp)}function W(){for(;this._source.next();){var t=this._selectMany?this._selectMany.call(this._ctx,this._source.item,this._source.index):this._source.item;if(null!=t)return this._manySource=e.query(t),!0}}function X(e,t){return t?(e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))):e}var V=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),$=Object.prototype,J=$.hasOwnProperty,K=V?["toString","valueOf"]:null;Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var n in e)J.call(e,n)&&t.push(n);return K&&K.forEach(function(n){J.call(e,n)&&t.push(n)}),t}),Array.prototype.some||(Array.prototype.some=function(e){for(var t=Object(this),n=t.length>>>0,r=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)if(i in t&&e.call(r,t[i],i,t))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(e,t){for(var n=this.length,r=new Array(n),i=0;n>i;i++)i in this&&(r[i]=e.call(t,this[i],i,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var n=this.length,r=new Array,i=0;n>i;i++)if(i in this){var s=this[i];e.call(t,s,i,this)&&r.push(s)}return r}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Object.create||(Object.create=function(){function e(e){t.prototype=e||{};var r=new t;return t.prototype=n,r}var t=function(){},n=t.prototype;return e}()),Function.prototype.bind||(Function.prototype.bind=function(e){return function(t){var n=e.call(arguments,1),r=this;return function(){return r.apply(t,n.concat(e.call(arguments)))}}}(Array.prototype.slice)),this.JSON||(this.JSON={}),this.JSON.stringify||(this.JSON.stringify=function(e){return String(e)});var Q=Array.prototype.slice,G=[],Y=function(){var e=Object.defineProperty;if(e)try{e({},"test",{})}catch(t){return null}return e}(),Z=function(){var e=Y&&Object.getOwnPropertyDescriptor;return e&&null===e({value:null},"value").value?e:void 0}(),et=function(e){return e.prototype||e};e.global=this,e.copyOwn=function(e,t){var n,r;arguments.length>=2?(n=e||{},r=t):(n={},r=e);for(var i in r)J.call(r,i)&&(n[i]=r[i]);return n},e.copyOwn(e,{get:function(e,t,n){var r;return e&&null!=(r=e[t])?r:n},gets:function(e,t){return t.map(function(t){return e[t]})},getPath:function(t,n,r,i){if(!t)return r;if(null!=n){var s=e.array.is(n)?n:n.split("."),o=s.length;if(o)for(var u=0;o>u;){var a=s[u++],f=t[a];if(null==f){if(!i)return r;f=t[a]=null==r||isNaN(+r)?{}:[]}t=f}}return t},setPath:function(t,n,r){if(t&&null!=n){var i=e.array.is(n)?n:n.split(".");if(i.length){var s=i.pop();t=e.getPath(t,i,s,!0),null!=t&&(t[s]=r)}}return t},propGet:function(e,t){return e=""+e,function(n){return n?n[e]:t}},getOwn:function(e,t,n){var r;return e&&J.call(e,t)&&null!=(r=e[t])?r:n},hasOwn:function(e,t){return!!e&&J.call(e,t)},protoOf:Object.getPrototypeOf||function(e){return e.__proto__||e.constructor&&e.constructor.prototype},rootProtoOf:function(t){for(var n=null,r=e.protoOf(t);r&&r!==$&&r!==n;)r=e.protoOf(n=r);return n},hasOwnProp:J,set:function(e){for(var t=e||{},n=arguments,r=1,i=n.length-1;i>r;r+=2)t[n[r]]=n[r+1];return t},setDefaults:function(t,n){var r,i=t||{},s=arguments,o=s.length;if(2===o&&e.object.is(n))e.each(n,function(e,t){null==i[t]&&(i[t]=e)});else{o--;for(var u=1;o>u;u+=2)r=s[u],null==i[r]&&(i[r]=s[u+1])}return i},setUDefaults:function(t,n){var r,i=t||{},s=arguments,o=s.length;if(2===o&&e.object.is(n))e.each(n,function(e,t){void 0===i[t]&&(i[t]=e)});else{o--;for(var u=1;o>u;u+=2)r=s[u],void 0===i[r]&&(i[r]=s[u+1])}return i},setNonEnum:function(){if(!Y)return function(e,t,n){return e[t]=n,e};var e={enumerable:!1,configurable:!0,writable:!0,value:void 0};return function(t,n,r){return e.value=r,Y(t,n,e),e.value=null,t}}(),setConst:function(){if(!Y)return function(e,t,n){return e[t]=n,e};var e={enumerable:!1,configurable:!1,writable:!1,value:void 0};return function(t,n,r){return e.value=r,Y(t,n,e),e.value=null,t}}(),eachOwn:function(e,t,n){for(var r in e)J.call(e,r)&&t.call(n,e[r],r,e);e&&K&&K.forEach(function(r){J.call(e,r)&&t.call(n,e[r],r,e)})},each:function(e,t,n){for(var r in e)t.call(n,e[r],r,e);e&&K&&K.forEach(function(r){J.call(e,r)&&t.call(n,e[r],r,e)})},copy:function(t,n){var r,i;return arguments.length>=2?(r=t||{},i=n):(r={},i=t),e.each(i,function(e,t){r[t]=e}),r},copyx:function(t,n,r){var i=e.get(r,"where"),s=e.get(r,"set");return e.each(n,function(e,r){(!i||i(n,r,t))&&(s?s(t,r,e):t[r]=e)}),t},copyProps:function(e,t,n){var r,i;return arguments.length>=3?(r=e||{},i=t):(r={},i=e,n=t),n&&n.forEach(i?function(e){r[e]=i[e]}:function(e){r[e]=void 0}),r},keys:function(e){var t=[];for(var n in e)t.push(n);return e&&K&&K.forEach(function(e){t.push(e)}),t},values:function(t){var n=[];return e.each(t,function(e){n.push(e)}),n},uniqueIndex:function(t,n,r){var i={};return e.each(t,function(e,t){n&&(e=n.call(r,e)),null==e||J.call(i,e)||(i[e]=t)}),i},ownKeys:Object.keys,own:function(e,t,n){var r=Object.keys(e);return r.map(t?function(r){return t.call(n,e[r],r)}:function(t){return e[t]})},make:function(e,t){var n=Object.create(e.prototype);return e.apply(n,t||G)||n},isPropPrivate:function(e){return!!e&&"_"===e.charAt(0)}}),e.object={is:function(e){return!!e&&"object"==typeof e},isNative:function(e){return!!e&&e.constructor===Object},as:function(e){return e&&"object"==typeof e?e:null},asNative:function(e){return e&&e.constructor===Object?e:null},lazy:function(e,t,n,r){return e[t]||(e[t]=n?n.call(r,t):{})}},e.lazy=e.object.lazy,e.info=function(t,n){var r;if(t&&n){r=t.__info__;if(arguments.length<2)return r;r||e.setNonEnum(t,"__info__",r={}),e.copyOwn(r,n)}return t},e.info.get=function(t,n,r){return e.get(t&&t.__info__,n,r)},e.copyOwn(e,{bit:{set:function(e,t,n){return n||null==n?e|t:e&~t}}}),e.copyOwn(e,{compare:function(e,t){return e===t?0:e>t?1:-1},compareReverse:function(e,t){return e===t?0:e>t?-1:1},methodCaller:function(e,t){return t?function(){return t[e].apply(t,arguments)}:function(){return this[e].apply(this,arguments)}},identity:function(e){return e},add:function(e,t){return e+t},negate:function(e){return function(){return!e.apply(this,arguments)}},sqr:function(e){return e*e},noop:function(){},retTrue:function(){return!0},retFalse:function(){return!1},fun:{is:function(e){return"function"==typeof e},as:function(e){return"function"==typeof e?e:null},to:function(t){return"function"==typeof t?t:e.fun.constant(t)},constant:function(e){return function(){return e}},wraps:function(t,n){return t.valueOf=e.fun.constant(n),t},typeFactory:function(t){function n(){return e.make(t,arguments)}return n.of=t,n}}}),e.ascending=e.compare,e.descending=e.compareReverse,e.number={is:function(e){return"number"==typeof e},as:function(e,t){return"number"==typeof e?e:t},to:function(e,t){if(null==e)return t;var n=+e;return isNaN(n)?t:n},toPositive:function(t,n){return t=e.number.to(t),null==t||t>0?t:n},toNonNegative:function(t,n){return t=e.number.to(t),null!=t&&0>t?n:t}},e.array={empty:function(e){return!e||!e.length},is:function(e){return e instanceof Array},isLike:function(e){return e&&null!=e.length&&"string"!=typeof e},as:function(e){return e instanceof Array?e:null!=e?[e]:null},to:function(e){return e instanceof Array?e:null!=e?[e]:null},lazy:function(e,t,n,r){return e[t]||(e[t]=n?n.call(r,t):[])},copy:function(e){return Q.apply(e,Q.call(arguments,1))},each:function(t,n,r){null!=t&&(e.array.is(t)?t.forEach(n,r):n.call(r,t,0))},eachReverse:function(t,n,r){if(null!=t)if(e.array.is(t)){for(var i=t.length;i--;)if(n.call(r,t[i],i)===!1)return!1}else if(n.call(r,t,0)===!1)return!1;return!0},like:e.copyOwn(function(e){return tt.is(e)?e:[e]},{is:function(e){return!!e&&null!=e.length&&"string"!=typeof e},as:function(e){return tt.is(e)?e:null}}),create:function(e,t){var n=e>=0?new Array(e):[];if(void 0!==t)for(var r=0;e>r;r++)n[r]=t;return n},append:function(e,t,n){null==n&&(n=0);for(var r=0,i=t.length,s=e.length;i>r;r++)e[s+r]=t[n+r];return e},appendMany:function(t){var n,r=arguments,i=r.length;if(i>1)for(var s=1;i>s;s++)if(n=e.array.to(r[s]))for(var o=0,u=n.length;u>o;)t.push(n[o++]);return t},prepend:function(e,t,n){null==n&&(n=0);for(var r=0,i=t.length;i>r;r++)e.unshift(t[n+r]);return e},removeAt:function(e,t){return e.splice(t,1)[0]},insertAt:function(e,t,n){return e.splice(t,0,n),e},removeIf:function(e,t,n){for(var r=0,i=e.length;i>r;)t.call(n,e[r],r)?(i--,e.splice(r,1)):r++;return e},binarySearch:function(t,n,r,i){r||(r=e.compare);for(var s=0,o=t.length-1;o>=s;){var u=s+o>>1,a=r(n,i?i(t[u]):t[u]);if(0>a)o=u-1;else{if(!(a>0))return u;s=u+1}}return~s},insert:function(t,n,r){var i=e.array.binarySearch(t,n,r);return 0>i&&t.splice(~i,0,n),i},remove:function(t,n,r){var i=e.array.binarySearch(t,n,r);return i>=0?t.splice(i,1)[0]:void 0}};var tt=e.array.like;tt.to=tt,e.string={is:function(e){return"string"==typeof e},to:function(e,t){return null!=e?String(e):t||""},join:function(e){var t,n,r=arguments,i=r.length;switch(i){case 3:return t=r[1],n=r[2],null!=t&&""!==t?null!=n&&""!==n?""+t+e+(""+n):""+t:null!=n&&""!==n?""+n:"";case 2:return t=r[1],null!=t?""+t:"";case 1:case 0:return""}for(var s=[],o=1;i>o;o++)t=r[o],null!=t&&""!==t&&s.push(""+t);return s.join(e)},padRight:function(e,t,n){e||(e=""),null==n&&(n=" ");var r=~~((t-e.length)/n.length);return r>0?e+(new Array(r+1)).join(n):e}},e.copyOwn(e,{firstUpperCase:function(e){if(e){var t=e.charAt(0),n=t.toUpperCase();t!==n&&(e=n+e.substr(1))}return e},firstLowerCase:function(e){if(e){var t=e.charAt(0),n=t.toLowerCase();t!==n&&(e=n+e.substr(1))}return e},titleFromName:function(t){return e.firstUpperCase(t).replace(/([a-z\d])([A-Z])/,"$1 $2")},format:function(t,n,r){if(null==t||""===t)return"";var i=n&&e.fun.is(n);return t.replace(/(^|[^{])\{([^{}]+)\}/g,function(e,t,s){var o=n?i?n.call(r,s):n[s]:null;return t+(null==o?"":String(o))})}}),e.copyOwn(e,{nullyTo:function(e,t){return null!=e?e:t}}),e.copyOwn(e,{between:function(e,t,n){return Math.max(t,Math.min(e,n))},nully:function(e){return null==e},notNully:function(e){return null!=e},notUndef:function(e){return void 0!==e},empty:function(e){return null==e||""===e},notEmpty:function(e){return null!=e&&""!==e},truthy:function(e){return!!e},falsy:function(e){return!e}}),e.copyOwn(e,{error:function(e){return e instanceof Error?e:new Error(e)},fail:function(t){throw e.error(t)},assert:function(t,n){throw e.error.assertionFailed(t,n)}}),e.eachOwn({operationInvalid:function(t,n){return e.error(e.string.join(" ","Invalid operation.",e.format(t,n)))},notImplemented:function(){return e.error("Not implemented.")},argumentRequired:function(t){return e.error(e.format("Required argument '{0}'.",[t]))},argumentInvalid:function(t,n,r){return e.error(e.string.join(" ",e.format("Invalid argument '{0}'.",[t]),e.format(n,r)))},assertionFailed:function(t,n){return e.error(e.string.join(" ","Assertion failed.",e.format(t,n)))}},function(t,n){e.error[n]=t,e.fail[n]=function(){throw t.apply(null,arguments)}}),e.debug=0,!function(){if("undefined"!=typeof window&&window.location){var t=function(e){return e&&/\bdebug=true\b/.test(e)?e:null},n=t(window.location.href);if(!n)try{n=t(window.top.location.href)}catch(r){}if(n){var i=/\bdebugLevel=(\d+)/.exec(n);e.debug=i?+i[1]:3}}}(),e.logSeparator="------------------------------------------",e.setDebug=function(t){t=+t,t=isNaN(t)?0:t,t>1&&"undefined"==typeof console&&(t=1);if(!e.log||e.debug!=t)e.debug=t,n(t);return e.debug};var nt=null;e.addOnDebugChanged=function(e){nt||(nt=[]).push(e)};var rt,it=["info","debug","error","warn","group","groupEnd"],st={group:"groupCollapsed"};e.logger=function(t,n,r){return e.debug>1?i(t,n):n?o(n,r,t):rt||(rt=u())},e.setDebug(e.debug),e.priv={key:l};var ot=function(t){return"_"+e.nullyTo(t,"safe")+(new Date).getTime()+Math.round(1e3*Math.random())},ut=e.priv.key();e.copyOwn(e,{scope:function(e,t){return e.call(t)},firstDefined:function(e,t,n){var r,i=0,s=e.length;t||(t=[]);for(;s>i;)if(void 0!==(r=e[i++].apply(n,t)))return r},indexedId:function(e,t){return t>0?e+""+(t+1):e},splitIndexedId:function(e){var t=/^(.*?)(\d*)$/.exec(e),n=null;return t[2]&&(n=Number(t[2]),1>=n?n=1:n--),[t[1],n]},parseDistinctIndexArray:function(t,n,r){t=e.array.as(t);if(null==t)return null;null==n&&(n=0),null==r&&(r=1/0);var i=e.query(t).select(function(e){return+e}).where(function(e){return!isNaN(e)&&e>=n&&r>=e}).distinct().array();return i.length?i:null},argumentsTypeBind:function(e,t){var n,r=e.length,i=new Array(r);if(r&&t&&(n=t.length)){var s=0,o=0;do{var u=t[s];if(null==u||typeof u===e[o])i[o]=u,s++;o++}while(r>o&&n>s)}return i},argumentsTypeBound:function(t,n){return function(){var r=e.argumentsTypeBind(t,arguments);return n.apply(this,r)}}}),e.qualName=function(e){return e instanceof p?e:new p(e)},e.QualifiedName=p,p.prototype.toString=function(){return e.string.join(".",this.namespace,this.name)},e.qualNameOf=function(t,n){return arguments.length>1?(t.__qname__=e.qualName(n),t):t.__qname__};var at=e,ft={},lt=[];e.globalSpace=function(e,t){return ft[e]=t},e.space=function(t,n,r){e.fun.is(n)&&(r=n,n=null),e.string.is(n)&&(n=d(n));var i=d(t,n);if(r){lt.push(at);try{r(i)}finally{at=lt.pop()}}return i},e.describe=function(t,n){var r=e.get(n,"maxLevel")||5,i=[];return e.describeRecursive(i,t,r,n),i.join("")},e.describeRecursive=function(t,n,r,i){if(r>0){r--;switch(typeof n){case"undefined":return t.push("undefined");case"object":if(!n)return t.push("null"),!0;if(e.fun.is(n.describe))return n.describe(t,r,i);if(n instanceof Array)t.push("["),n.forEach(function(n,s){s&&t.push(", "),e.describeRecursive(t,n,r,i)||t.pop()}),t.push("]");else{var s=e.get(i,"ownOnly",!0);if(n===e.global)return t.push("<window>"),!0;if(e.fun.is(n.cloneNode))return t.push("<dom #"+(n.id||n.name||"?")+">"),!0;r>1&&n.constructor!==Object&&(r=1,s=!0),t.push("{");var o=!0;for(var u in n)if(!s||e.hasOwnProp.call(n,u))o||t.push(", "),t.push(u+": "),e.describeRecursive(t,n[u],r,i)?o&&(o=!1):(t.pop(),o||t.pop());if(o){var a=""+n;"[object Object]"!==a&&t.push("{"+a+"}")}t.push("}")}return!0;case"number":return t.push(""+Math.round(1e5*n)/1e5),!0;case"boolean":return t.push(""+n),!0;case"string":return t.push(JSON.stringify(n)),!0;case"function":return e.get(i,"funs",!1)?(t.push(JSON.stringify(n.toString().substr(0,13)+"...")),!0):!1}return t.push("'new ???'"),!0}},e.mixin=v(Object.create),e.copyOwn(e.mixin,{custom:v,inherit:e.mixin,copy:v(e.copy),share:v(e.identity)}),e.create=function(){var t=Q.call(arguments),n=!0,r=t.shift();"boolean"==typeof r&&(n=r,r=t.shift());var i;return r?(i=Object.create(r),n&&b(i)):i={},t.length>0&&(t.unshift(i),e.mixin.apply(e,t)),i},e.attached=function(t,n,r){var i=t.__attached__;return arguments.length>2?(void 0!==r&&(i||e.setNonEnum(t,"__attached__",i={}),i[n]=r),t):i&&i[n]},e.attached.is=function(e){return!(!e||e.indexOf("$")<0)};var ct={tryConfigure:1,configure:1,$type:1};e.configure=e.config=w,e.configurable=function(t,n){return e.info(n,{configurable:!!t})},e.copyOwn(w,{generic:function(t,n){return n&&e.array.each(n,function(n){var r;n.constructor===Object?w.setters(t,n):t!==n&&(r=t.tryConfigure)&&e.fun.is(r)&&r.call(t,n)}),t},isPropConfigurable:function(e){return!!e&&"_"!==e.charAt(0)&&!J.call(ct,e)},setters:function(t,n){return n&&w.expand1(n).forEach(function(n){e.each(n,function(e,n){w.setter(t,n,e)})}),t},setter:function(t,n,r){var i,s,o,u;return void 0!==r&&w.isPropConfigurable(n)&&e.fun.is(i=t[n])&&(s=i.valueOf())&&e.info.get(s,"configurable",(o=s.length)>=1)&&(e.attached.is(n)?e.attached(t,n,r):o?i.call(t,r):(u=i.call(t),(e.object.is(u)||e.fun.is(u))&&w(u,r))),t},expand1:function(e){return E(e,!0)},expand:E}),e.fun.inherit=T,e.overrides=N,e.fun.callsBase=C;var ht=/\.\s*base\b/;e.methods=O,e.method=M,e.abstractMethod=e.fail.notImplemented,e("MetaType",j);var pt={Ctor:1,BaseType:1,prototype:1};e.copyOwn(j,{methods:I,add:e.configurable(!1,function(){return I.apply(this,arguments)}),inst:e.configurable(!1,function(){return this.Ctor}),subType:e.configurable(!1,function(t,n,r){var i=this,s=i.Ctor,o=s&&s.meta||e.fail.operationInvalid("MetaType is not yet instantiated.");return e.fun.inherit(t,i),e.copyx(t,i,{where:function(e,t){return J.call(e,t)&&"_"!==t.charAt(0)&&!J.call(pt,t)}}),t.BaseType=i,new t(null,o,r),n&&e.configure(t,n),t}),extend:e.configurable(!1,function(t,n){function r(){return i.apply(this,arguments)}var i=this;return e.fun.wraps(r,i),i.subType(r,t,n)})}),j.add({closed:function(){return!!this.steps},close:function(){return this.steps||this._closeCore(this.steps=[]),this},_assertOpened:function(){if(this.closed())throw e.error.operationInvalid("MetaType is closed.")},_closeCore:function(e){this._addPostSteps(e),this._addInitSteps(e)},_createConstructor:function(){function e(){for(var e=t;e--;)r[e].apply(this,arguments)===!0&&(e=t)}var t=1,n=this,r=[function(){return r=n.close().steps,t=r.length,!0}];return e},_initConstructor:function(t){var n=this.constructor;return q.call(n,t,n),t.meta=this,this.baseType&&e.fun.inherit(t,this.baseType.close().Ctor),t.MetaType=n,t},_addPostSteps:function(t){e.array.eachReverse(this._mixins,function(e){e._post&&t.push(e._post)}),this._post&&t.push(this._post)},_addInitSteps:function(t){e.array.eachReverse(this._mixins,function(e){e._init&&t.push(e._init)}),this._init&&t.push(this._init)},init:function(t){if(!t)throw e.error.argumentRequired("init");return this._assertOpened(),this._init=e.overrides(t,this._init,this.rootType.Ctor.prototype),this},postInit:function(t){if(!t)throw e.error.argumentRequired("postInit");return this._assertOpened(),this._post=e.overrides(t,this._post,this.rootType.Ctor.prototype),this},type:e.configurable(!0,function(){return this.constructor}),add:e.configurable(!1,function(t,n){return F(t)&&this._mixMetaType(t.meta),e.methods(this.Ctor,t,n),this}),_mixMetaType:function(t){e.array.lazy(this,"_mixins").push(t)},methods:function(t){return e.array.each(t,this.add,this),this},method:e.configurable(!1,function(t,n,r){return e.method(this.Ctor,t,n,r),this}),configure:function(t){return e.configure.generic(this,t),this},extend:e.configurable(!1,function(e,t){var n=this.constructor.extend(null,t).Ctor;return n.configure(e)})});var dt=(new j).close().Ctor.add({override:function(t,n){return D(this,t,n,e.protoOf(this),dt.prototype,!0),this},toString:function(){return"[object "+String(e.qualNameOf(e.classOf(this)))+"]"}},{enumerable:!1});e("Object",dt),e.type=e.argumentsTypeBound(["string","function","object"],function(t,n,r){var i=n?n.MetaType:j,s=i.extend().Ctor;return e(t,s,r)}),e.makeEnum=function(t,n){var r=1,i=0,s={},o=e.get(n,"all");return t.forEach(function(e){s[e]=r,o&&(i|=r),r<<=1}),o&&(s[o]=i),s},e.copyOwn(e,{classify:function(t,n){return e.setNonEnum(t,"_class",n),t},classOf:function(e){return e&&(e._class||e.constructor)||void 0},is:function(e,t){return!!e&&(e._class&&e._class===t||e instanceof(t.of||t))},as:function(t,n,r){return e.is(t,n)?t:r},createIs:function(t){function n(n){return e.is(n,t)}return n},createAs:function(t){function n(n,r){return e.as(n,t,r)}return n},isSubClassOf:function(t,n){return!(!t||!n||t!==n&&!e.is(et(t),n))}});var vt=ut.property();e.copyOwn(e,{instance:function(t,n,r,i,s){var o=e.fields(t,r,s);return i&&e.instanceAccessors(t,o,i),n&&e.configure(t,n),o},fields:function(t,n,r){var i=e.classOf(t);n&&e.is(n,i)||(n=i.defaults),void 0===r&&(r=vt);var s=n&&r&&r(n),o=s?Object.create(s):{};return o.___proto=n,r&&r.init(t,o),o},classAccessors:function(t,n,r){var i=et(t);for(var s in n)i[s]=e.classAccessor(s,n[s],r);return e},classAccessor:function(e,t,n){function r(t){var r=n(this);return arguments.length?i.call(this,r,t):r[e]}var i=U(e,t);return n||(n=vt),r},instanceAccessors:function(t,n,r){for(var i in r)t[i]=e.instanceAccessor(t,i,r[i],n);return e},instanceAccessor:function(e,t,n,r){function i(n){return arguments.length?s.call(e,r,n):r[t]}var s=U(t,n);return i}}),e.MetaType.subType(z,{methods:{fields:function(t){var n={};for(var r in t)n[r]=e.classAccessor(r,t[r],this.fieldsPrivProp);return this.methods(n)},_addInitSteps:function(t){function n(t){t&&e.configure(this,t)}function r(t,n){e.fields(this,n,i.fieldsPrivProp)}t.push(n),this.base(t);var i=this;t.push(r)}}}),e("FieldsBase",z.Ctor);var mt=1,gt={},yt="__def_id__";return e.nextId=function(t){if(t){var n=e.getOwn(gt,t)||1;return gt[t]=n+1,n}return mt++},e.id=function(t){var n=e.getOwn(t,yt);return n||e.setConst(t,yt,n=e.nextId()),n},e.hashKey=function(t){var n=(typeof t).charAt(0);switch(n){case"n":case"b":case"s":return n+":"+t}return n+":"+(t?t:e.id(t))},e("Set",e.Object.extend({init:function(t,n){this.source=t||{},this.count=t?null!=n?n:e.ownKeys(t).length:0},methods:{has:function(e){return J.call(this.source,e)},add:function(e){var t=this.source;return J.call(t,e)||(this.count++,t[e]=!0),this},rem:function(e){return J.call(this.source,e)&&(delete this.source[e],this.count--),this},clear:function(){return this.count&&(this.source={},this.count=0),this},members:function(){return e.ownKeys(this.source)}}})),e("Map",e.Object.extend({init:function(t,n){this.source=t||{},this.count=t?null!=n?n:e.ownKeys(t).length:0},methods:{has:function(e){return J.call(this.source,e)},get:function(e){return J.call(this.source,e)?this.source[e]:void 0},set:function(e,t){var n=this.source;return J.call(n,e)||this.count++,n[e]=t,this},rem:function(e){return J.call(this.source,e)&&(delete this.source[e],this.count--),this},clear:function(){return this.count&&(this.source={},this.count=0),this},copy:function(t){e.eachOwn(t.source,function(e,t){this.set(t,e)},this)},values:function(){return e.own(this.source)},keys:function(){return e.ownKeys(this.source)},clone:function(){return new e.Map(e.copy(this.source),this.count)},symmetricDifference:function(t){if(!this.count)return t.clone();if(!t.count)return this.clone();var n={},r=0,i=this.source,s=t.source;return e.eachOwn(i,function(e,t){J.call(s,t)||(n[t]=e,r++)}),e.eachOwn(s,function(e,t){J.call(i,t)||(n[t]=e,r++)}),new e.Map(n,r)},intersect:function(t,n){return n||(n=new e.Map),e.eachOwn(this.source,function(e,r){t.has(r)&&n.set(r,e)}),n}}})),e("OrderedMap",e.Object.extend({init:function(t){t instanceof e.OrderedMap?(this._list=t._list.slice(),this._map=e.copy(t._map)):(this._list=[],this._map={})},methods:{has:function(e){return J.call(this._map,e)},count:function(){return this._list.length},get:function(e){var t=this._map;return J.call(t,e)?t[e].value:void 0},at:function(e){var t=this._list[e];return t?t.value:void 0},add:function(t,n,r){var i=this._map,s=J.call(i,t)&&i[t];return s?s.value!==n&&(s.value=n):(s=i[t]={key:t,value:n},null==r?this._list.push(s):e.array.insertAt(this._list,r,s)),this},rem:function(e){var t=this._map,n=J.call(t,e)&&t[e];if(n){var r=this._list.indexOf(n);this._list.splice(r,1),delete this._map[e]}return this},clear:function(){return this._list.length&&(this._map={},this._list.length=0),this},keys:function(){return e.ownKeys(this._map)},forEach:function(e,t){return this._list.forEach(function(n){e.call(t,n.value,n.key)})}}})),e.html={escape:function(t){return e.string.to(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},tag:function(t,n){n=n?e.ownKeys(n).map(function(t){var r=n[t];return e.empty(r)?"":" "+t+'="'+String(r)+'"'}).join(""):"";var r=arguments.length>2?Q.call(arguments,2).map(function(t){return null!=t&&(e.fun.is(t)&&(t=t()),t=e.array.is(t)?t.map(e.string.to).join(""):e.string.to(t)),t||""}).join(""):"";return"<"+t+n+">"+r+"</"+t+">"},classes:function(t){t=t?t+"-":"";var n=[];return Q.call(arguments,1).forEach(function(r){e.empty(r)||n.push(t+e.css.escapeClass(r))}),n.join(" ")}},e.css={escapeClass:function(e){return(e||"").replace(/\s/g,"_")}},e.type("Query").add({index:-1,item:void 0,next:function(){var e=this,t=e.index;return-2===t?!1:(t++,e._next(t)?(e.index=t,!0):(e._finish(),!1))},_next:e.abstractMethod,_finish:function(){var t=this;t.index>-2&&(t.next=e.retFalse,t.index=-2,delete t.item)},each:function(e,t){for(var n=this;n.next();)if(e.call(t,n.item,n.index)===!1)return!0;return!1},array:function(e){for(var t=e||[],n=this;n.next();)t.push(n.item);return t},sort:function(t,n){t||(t=e.compare);if(n){var r=t;t=function(e,t){return r(n(e),n(t))}}var i=this.array().sort(t);return new e.ArrayLikeQuery(i)},object:function(t){for(var n=e.get(t,"target")||{},r=e.get(t,"name"),i=e.get(t,"value"),s=e.get(t,"context");this.next();){var o=""+(r?r.call(s,this.item,this.index):this.item);n[o]=i?i.call(s,this.item,this.index):this.item}return n},reduce:function(e){var t,n=0;if(arguments.length<2){if(!this.next())throw new TypeError("Length is 0 and no second argument");t=this.item}else t=arguments[1];for(;this.next();)t=e(t,this.item,this.index),++n;return t},count:function(){for(var e=0;this.next();)e++;return e},first:function(e,t,n){for(;this.next();)if(!e||e.call(t,this.item,this.index)){var r=this.item;return this._finish(),r}return n},last:function(e,t,n){for(var r=n;this.next();)(!e||e.call(t,this.item,this.index))&&(r=this.item);return r},any:function(e,t){for(;this.next();)if(!e||e.call(t,this.item,this.index))return this._finish(),!0;return!1},all:function(e,t){for(;this.next();)if(!e.call(t,this.item,this.index))return this._finish(),!1;return!0},min:function(){for(var e=null;this.next();)(null===e||this.item<e)&&(e=this.item);return e},max:function(){for(var e=null;this.next();)(null===e||this.item>e)&&(e=this.item);return e},range:function(){for(var e=null,t=null;this.next();){var n=this.item;null===e?e=t=n:(e>n&&(e=n),n>t&&(t=n))}return null!=e?{min:e,max:t}:null},multipleIndex:function(t,n){var r={};return this.each(function(i){var s=t?t.call(n,i):i;if(null!=s){var o=e.getOwn(r,s)||(r[s]=[]);o.push(i)}}),r},uniqueIndex:function(e,t){var n={};return this.each(function(r){var i=e?e.call(t,r):r;null==i||J.call(n,i)||(n[i]=r)}),n},select:function(t,n){return new e.SelectQuery(this,t,n)},prop:function(t){return new e.SelectQuery(this,function(e){return e?e[t]:void 0})},selectMany:function(t,n){return new e.SelectManyQuery(this,t,n)},union:function(){var t=e.array.append([this],arguments);return new e.SelectManyQuery(new e.ArrayLikeQuery(t))},where:function(t,n){return new e.WhereQuery(this,t,n)},distinct:function(t,n){return new e.DistinctQuery(this,t,n)},skip:function(t){return new e.SkipQuery(this,t)},take:function(t){return 0>=t?new e.NullQuery:isFinite(t)?new e.TakeQuery(this,t):this},whayl:function(t,n){return new e.WhileQuery(this,t,n)},reverse:function(){return new e.ReverseQuery(this)}}),e.type("NullQuery",e.Query).add({next:e.retFalse}),e.type("AdhocQuery",e.Query).init(function(e){this._next=e}),e.type("ArrayLikeQuery",e.Query).init(function(t){function n(){for(;++i<s;)if(J.call(t,i))return r.index=i,r.item=t[i],!0;return r._finish(),!1}var r=this;e.array.isLike(t)||(t=[t]),r._list=t,r._count=t.length;var i=-1,s=t.length;r.next=n}).add({count:function(){var e=this._count;return this.index>=0&&(e-=this.index+1),this._finish(),e}}),e.type("RangeQuery",e.Query).init(function(e,t,n){this._index=e,this._count=t,this._step=null==n?1:n}).add({_next:function(e){if(e<this._count)return this.item=this._index,this._index+=this._step,!0},count:function(){var e=this._count;return this.index>=0&&(e-=this.index+1),this._finish(),e}}),e.type("WhereQuery",e.Query).init(function(e,t,n){function r(){for(;e.next();){var r=e.item;if(t.call(n,r,e.index))return i.item=r,i.index=++s,!0}return i._finish(),!1}var i=this,s=-1;i.next=r}),e.type("WhileQuery",e.Query).init(function(e,t,n){function r(){if(e.next()){var r=e.item;if(t.call(n,r,e.index))return i.item=r,i.index=++s,!0}return i._finish(),!1}var i=this,s=-1;i.next=r}),e.type("SelectQuery",e.Query).init(function(e,t,n){function r(){return e.next()?(i.item=t.call(n,e.item,e.index),i.index=++s,!0):(i._finish(),!1)}var i=this,s=-1;i.next=r}),e.type("SelectManyQuery",e.Query).init(function(e,t,n){this._selectMany=t,this._ctx=n,this._source=e,this._manySource=null}).add({_next:function(){for(;;){if(this._manySource){if(this._manySource.next())return this.item=this._manySource.item,!0;this._manySource=null}if(!W.call(this))break}}}),e.type("DistinctQuery",e.Query).init(function(e,t,n){function r(){for(;e.next();){var r=e.item,u=t?t.call(n,r,e.index):r;if(null!=u&&!J.call(o,u))return i.item=r,i.index=++s,o[u]=!0}return i._finish(),!1}var i=this,s=-1,o={};i.next=r}),e.type("SkipQuery",e.Query).init(function(e,t){this._source=e,this._skip=t}).add({_next:function(){for(;this._source.next();){if(!(this._skip>0))return this.item=this._source.item,!0;this._skip--}}}),e.type("TakeQuery",e.Query).init(function(e,t){this._source=e,this._take=t}).add({_next:function(){if(this._take>0&&this._source.next())return this._take--,this.item=this._source.item,!0}}),e.type("ReverseQuery",e.Query).init(function(e){this._source=e}).add({_next:function(t){t||(this._source instanceof e.Query&&(this._source=this._source instanceof e.ArrayLikeQuery?this._source._list:this._source.array()),this._count=this._source.length);var n=this._count;if(n>t){for(var r=n-t-1,i=this._source;!J.call(i,r);){if(--r<0)return!1;this._count--}return this.item=i[r],!0}}}),e.query=function(t){return void 0===t?new e.NullQuery:t instanceof e.Query?t:e.fun.is(t)?new e.AdhocQuery(t):new e.ArrayLikeQuery(t)},e.range=function(t,n,r){return new e.RangeQuery(t,n,r)},e.textTable=function(t){function n(){return s.map(function(e){switch(e){case a:return r(e,"╤","═","╔","╗");case f:return i||(i=r(e,"┼","─","╟","╢"));case l:return r(e,"╧","═","╚","╝")}return r(e,"│"," ","║","║")}).join("\n")}function r(t,n,r,i,s){return i+t.map(function(t,n){return e.string.padRight(t||"",u[n],r)}).join(n)+s}var i,s=[],o=" ",u=new Array(t),a=e.array.create(t,""),f=a.slice(),l=a.slice();return n.row=function(){for(var e,r,i=arguments,a=-1,f=new Array(t);++a<t;)e=i[a],r=f[a]=o+(void 0===e?"":String(e))+o,u[a]=Math.max(u[a]||0,r.length);return s.push(f),n},n.rowSep=function(e){return s.push(s.length?e?l:f:a),n},n},e.round10=function(e,t){return t?(e=+e,isNaN(e)||"number"!=typeof t||t%1!==0?0/0:(e=Math.round(X(e,t)),X(e,-t))):Math.round(e)},e.mult10=function(e,t){return t?X(+e,t):e},e.delta=function(e,t){if(e===t)return 0;var n=e-t;return 0>n?-n:n},at=e.global,e}),pen.define("cdf/lib/CCC/def",function(){}),pen.require(["cdf/lib/CCC/protovis","cdf/lib/CCC/cdo","cdf/lib/CCC/pvc-d1.0","cdf/lib/CCC/def","cdf/components/core"],function(e,t,n,r){pvc=n,pv=e,def=r,cdo=t,ChartComponent=UnmanagedComponent.extend({exportChart:function(e,t){var n=this,r=function(e){e=e||{};var t={},r=n.parameters;if(r&&r.length){var i=$.extend({},Dashboards.propertiesArrayToObject(r),e);for(var s in i)if(i.hasOwnProperty(s)){var o=Dashboards.getParameterValue(i[s]);$.isArray(o)&&o.length==1&&(""+o[0]).indexOf(";")>=0&&(o=doCsvQuoting(o[0],";")),typeof o=="function"&&(o=o()),t["param"+s]=o}}var u=n.dashboard.debug;u>1&&(t.paramdebug=!0,t.paramdebugLevel=u);var a=n.name.replace(/render_/,"");return t.script=wd.helpers.cccHelper.getCccScriptPath(a),t.attachmentName=a,t},i=r(t);i.outputType=e||"png";var s=wd.helpers.cggHelper.getCggDrawUrl()+"?"+$.param(i),o=$("#cccExportIFrame");o.length?o[0].src=s:(o=$('<iframe id="cccExportIFrame" style="display:none">'),o[0].src=s,o.appendTo($("body")))},renderChart:function(){var e=this.chartDefinition;e.dataAccessId||e.query||e.endpoint?this.triggerQuery(this.chartDefinition,_.bind(this.render,this)):this.valuesArray!=undefined?this.synchronous(_.bind(function(){this.render(this.valuesArray)},this)):this.synchronous(_.bind(this.render,this))}}),ProtovisComponent=ChartComponent.extend({update:function(){this.parameters==undefined&&(this.parameters=[]),this.renderChart()},render:function(e){$("#"+this.htmlObject).html('<div id="'+this.htmlObject+'protovis"></div>');var t=(new pv.Panel).canvas(this.htmlObject+"protovis").width(this.width).height(this.height);this.vis=t,this.customfunction(t,e),t.root.render()},processdata:function(e){this.render(e)}}),BaseCccComponent=ChartComponent.extend({query:null,chart:null,_preProcessChartDefinition:function(){var e=this.chartDefinition;if(e){var t=e.compatVersion;t==null&&(t=typeof pvc.defaultCompatVersion=="function"?pvc.defaultCompatVersion():1);if(t<=1){"showLegend"in e&&(e.legend=e.showLegend,delete e.showLegend);for(var n in e){var r=/^barLine(.*)$/.exec(n);r&&(p2="secondAxis"+(r[1]||""),e[p2]=e[n],delete e[n])}}}}}),CccComponent=BaseCccComponent.extend({update:function(){this.parameters==null&&(this.parameters=[]);var e=$("#"+this.htmlObject).empty(),t=this;typeof this.chartDefinition.width=="undefined"&&(this.chartDefinition.width=e.width()),typeof this.chartDefinition.height=="undefined"&&(this.chartDefinition.height=e.height()),typeof Modernizr!="undefined"&&Modernizr.svg?this.renderChart():pv.listenForPageLoad(function(){t.renderChart()})},render:function(e){$("#"+this.htmlObject).append('<div id="'+this.htmlObject+'protovis"></div>'),this._preProcessChartDefinition();var t=$.extend({},this.chartDefinition);t.canvas=this.htmlObject+"protovis";if(typeof t.extensionPoints!="undefined"){var n={};t.extensionPoints.forEach(function(e){n[e[0]]=e[1]}),t.extensionPoints=n}this.chart=new this.cccType(t),arguments.length>0&&this.chart.setData(e,{crosstabMode:this.crosstabMode,seriesInRows:this.seriesInRows}),this.chart.render()}}),CccComponent2=BaseCccComponent.extend({query:null,sQuery:null,chart:null,update:function(){var e=null,t=null;this.parameters==undefined&&(this.parameters=[]),$("#"+this.htmlObject).empty();var n=this;this.query=Dashboards.getQuery(this.chartDefinition);var r=$.extend({},this.chartDefinition);r.dataAccessId=r.structDatasource,this.sQuery=Dashboards.getQuery(r);var i=!1,s=function(){e!=null&&t!=null&&!i&&(n.render(e,t),i=!0)};pv.listenForPageLoad(function(){n.query.fetchData(n.parameters,function(t){var r=undefined;typeof n.postFetch=="function"&&(r=n.postFetch(t),$("#"+this.htmlObject).append('<div id="'+this.htmlObject+'protovis"></div>')),r!=undefined&&(t=r),e=t,s()})}),pv.listenForPageLoad(function(){n.sQuery.fetchData(n.parameters,function(e){var r=undefined;typeof n.postFetch=="function"&&(r=n.postFetch(e),$("#"+this.htmlObject).append('<div id="'+this.htmlObject+'protovis"></div>')),r!=undefined&&(e=r),t=e,s()})})},render:function(e,t){$("#"+this.htmlObject).append('<div id="'+this.htmlObject+'protovis"></div>'),this._preProcessChartDefinition();var n=$.extend({},this.chartDefinition);n.canvas=this.htmlObject+"protovis";if(typeof n.extensionPoints!="undefined"){var r={};n.extensionPoints.forEach(function(e){r[e[0]]=e[1]}),n.extensionPoints=r}this.chart=new this.cccType(n),this.chart.setData(e,{crosstabMode:this.crosstabMode,seriesInRows:this.seriesInRows}),this.chart.setStructData(t),this.chart.render()}}),CccAreaChartComponent=CccComponent.extend({cccType:pvc.AreaChart}),CccStackedDotChart=CccComponent.extend({cccType:pvc.StackedDotChart}),CccDotChartComponent=CccComponent.extend({cccType:pvc.DotChart}),CccLineChartComponent=CccComponent.extend({cccType:pvc.LineChart}),CccStackedLineChartComponent=CccComponent.extend({cccType:pvc.StackedLineChart}),CccStackedAreaChartComponent=CccComponent.extend({cccType:pvc.StackedAreaChart}),CccBarChartComponent=CccComponent.extend({cccType:pvc.BarChart}),CccPieChartComponent=CccComponent.extend({cccType:pvc.PieChart}),CccHeatGridChartComponent=CccComponent.extend({cccType:pvc.HeatGridChart}),CccBulletChartComponent=CccComponent.extend({cccType:pvc.BulletChart}),CccWaterfallChartComponent=CccComponent.extend({cccType:pvc.WaterfallChart}),CccMetricDotChartComponent=CccComponent.extend({cccType:pvc.MetricDotChart}),CccMetricLineChartComponent=CccComponent.extend({cccType:pvc.MetricLineChart}),CccParCoordComponent=CccComponent.extend({cccType:pvc.ParallelCoordinates}),CccDataTreeComponent=CccComponent2.extend({cccType:pvc.DataTree}),CccBoxplotChartComponent=CccComponent.extend({cccType:pvc.BoxplotChart}),CccTreemapChartComponent=CccComponent.extend({cccType:pvc.TreemapChart}),CccNormalizedBarChartComponent=CccComponent.extend({cccType:pvc.NormalizedBarChart}),CccSunburstChartComponent=CccComponent.extend({cccType:pvc.SunburstChart})}),pen.define("cdf/components/ccc",function(){});var wd=typeof wd!="undefined"?wd:{};wd.helpers=wd.helpers||{},wd.helpers.inputHelper={getCssWrapperClass:function(e){return"pentaho-toggle-button pentaho-toggle-button-up "+(this.verticalOrientation?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")},getSelectedCss:function(e){return"pentaho-toggle-button pentaho-toggle-button-down "+(e?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")},getUnselectedCss:function(e){return"pentaho-toggle-button pentaho-toggle-button-up "+(e?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")},getExtraCss:function(e,t,n){var r="";return e==0&&t==1?" pentaho-toggle-button-single":(e==0?r+=" "+(n?" pentaho-toggle-button-vertical-first":" pentaho-toggle-button-horizontal-first"):e==t-1&&(r+=" "+(n?" pentaho-toggle-button-vertical-last":" pentaho-toggle-button-horizontal-last")),r)},getToggleButtonClass:function(){return"pentaho-toggle-button"},getToggleButtonHoveringClass:function(){return"pentaho-toggle-button-up-hovering"}},pen.define("cdf/inputHelper",function(){});var InputBaseComponent=UnmanagedComponent.extend({update:function(){var e=this.queryDefinition;if(this.valuesArray&&this.valuesArray.length>0){var t=_.bind(function(){this.draw(this.valuesArray)},this);this.synchronous(t)}else if(e){var t=_.bind(function(e){var t;this.valueAsId?t=e.resultset.map(function(e){return[e[0],e[0]]}):t=e.resultset,this.draw(t)},this);this.triggerQuery(e,t)}else{var t=_.bind(function(){var e=this.getValuesArray();this.draw(e)},this);this.synchronous(t)}},_getParameterValue:function(){return Dashboards.normalizeValue(Dashboards.ev(Dashboards.getParameterValue(this.parameter)))}}),SelectBaseComponent=InputBaseComponent.extend({visible:!1,draw:function(e){var t=this.placeholder(),n=this.name,r="<select",i=this._allowMultipleValues();i&&(r+=" multiple");var s=this._getPlaceholderText();s&&(r+=" data-placeholder='"+s+"'");var o=this._getListSize(e);o!=null&&(r+=" size='"+o+"'");var u=this.externalPlugin;switch(u){case"chosen":r+=" class='chzn-select'";break;case"hynds":r+=" class='hynds-select'";break;case"select2":r+=" class='select2-container'"}r+=">";var a=this._getParameterValue(),f=Dashboards.parseMultipleValues(a),l={},c;Dashboards.eachValuesArray(e,{valueAsId:this.valueAsId},function(e,t,n,i){r+="<option value = '"+Dashboards.escapeHtml(e)+"' >"+Dashboards.escapeHtml(t)+"</option>",i||(c=e),l[e]=!0},this),r+="</select>",t.html(r);var h=!0;if(f!=null){var p=f.length;while(p--)l[f[p]]!==!0&&(h=!1,f.splice(p,1));f.length||(f=null)}var d=f==null,v=!h;d&&this.defaultIfEmpty&&c!=null&&(f=[c],v=!0),$("select",t).val(f==null?[]:f),i&&(this.autoTopValue!=null?(this.topValue(this.autoTopValue),delete this.autoTopValue):this.autoTopIndex!=null&&(this.topIndex(this.autoTopIndex),delete this.autoTopIndex)),this._doAutoFocus(),v&&(Dashboards.setParameter(this.parameter,f),Dashboards.processChange(n));switch(u){case"chosen":var m=$.browser;$.browser="",t.find("select.chzn-select").chosen(this._readExtraOptions()),$.browser=m;break;case"hynds":t.find("select.hynds-select").multiselect({multiple:i});break;case"select2":var g=this._readExtraOptions()||{};g.dropdownAutoWidth||(g.dropdownAutoWidth=!0),g.width||(g.width="off"),t.find("select.select2-container").select2(g)}this._listenElement(t)},_allowMultipleValues:function(){return!1},_getPlaceholderText:function(){var e=this.placeholderText;return _.isString(e)&&!_.isEmpty(e)&&e||!1},_getListSize:function(e){return this.size},_readExtraOptions:function(){if(this.externalPlugin&&this.extraOptions)return Dashboards.propertiesArrayToObject(this.extraOptions)},_listenElement:function(e){var t=this,n=t.getValue(),r,i=function(){r&&r();var e=t.dashboard;if(e){var i=t.getValue();e.equalValues(n,i)||(n=i,e.processChange(t.name))}},s=$("select",e);s.keypress(function(e){e.which===13&&i()});var o=this._getChangeMode();if(o!=="timeout-focus")s.on(t._changeTrigger(),i);else{var u=t.changeTimeoutScrollFraction;u=Math.max(0,u!=null?u:1);var a=t.changeTimeoutChangeFraction;a=Math.max(0,a!=null?a:5/8);var f=Math.max(100,t.changeTimeout||2e3),l=u*f,c=a*f,h;r=function(){h!=null&&(clearTimeout(h),h=null)};var p=function(e){r(),t.dashboard&&(h=setTimeout(i,e||f))};s.change(function(){p(c)}).scroll(function(){p(l)}).focusout(i)}},_getChangeMode:function(){var e=this.changeMode;if(e){e=e.toLowerCase();switch(e){case"immediate":case"focus":return e;case"timeout-focus":if(/android|ipad|iphone/i.test(navigator.userAgent))return"focus";return e;default:Dashboards.log("Invalid 'changeMode' value: '"+e+"'.","warn")}}return"immediate"},_changeTrigger:function(){return this._getChangeMode()==="immediate"?"change":/android/i.test(navigator.userAgent)?"change":"focusout"}}),SelectComponent=SelectBaseComponent.extend({defaultIfEmpty:!0,getValue:function(){return this.placeholder("select").val()}}),SelectMultiComponent=SelectBaseComponent.extend({getValue:function(){var e=this.placeholder("select"),t=e.val();return t==null?[]:t},_allowMultipleValues:function(){return this.isMultiple==null||!!this.isMultiple},_getListSize:function(e){var t=this.base(e);return t==null&&(this._allowMultipleValues()||(t=e.length)),t},topIndex:function(e){var t=this.placeholder("select"),n=t[0],r=n.length;if(!r)return arguments.length?this:0;var i=Math.max(1,n.scrollHeight),s=Math.max(1,i/r);if(arguments.length){var o=+e;return o=isNaN(o)?0:Math.max(0,Math.min(o,r-1)),t.scrollTop(Math.ceil(o*s)),this}return Math.round(t.scrollTop()/s)},indexOf:function(e){if(e!=null){var t=this.placeholder("select option"),n=t.length;if(n){e=String(e);for(var r=0;r<n;r++)if(t[r].value===e)return r}}return-1},valueAt:function(e){if(e>=0)return this.placeholder("select :nth-child("+(e+1)+")").val()},topValue:function(e){if(arguments.length){var t=this.indexOf(e);return t>=0&&this.topIndex(t),this}return this.valueAt(this.topIndex())}}),TextInputComponent=BaseComponent.extend({update:function(){var e,t=this,n="<input type='text' id='"+t.name+"' name='"+t.name+"' value='"+Dashboards.getParameterValue(t.parameter)+(t.size?"' size='"+t.size:"")+(t.maxLength?"' maxlength='"+t.maxLength:"")+"'>";t.placeholder().html(n),$("#"+t.name).change(function(){if(Dashboards.getParameterValue(t.parameter)===$("#"+t.name).val())return;Dashboards.processChange(t.name)}).keyup(function(e){if(e.keyCode==13){if(Dashboards.getParameterValue(t.parameter)===$("#"+t.name).val())return;Dashboards.processChange(t.name)}}),t._doAutoFocus()},getValue:function(){return $("#"+this.name).val()}}),TextareaInputComponent=BaseComponent.extend({update:function(){var e=this,t="<textarea id='"+e.name+"' name='"+e.name+(e.numRows?"' rows='"+e.numRows:"")+(e.numColumns?"' cols='"+e.numColumns:"")+"'>"+Dashboards.getParameterValue(e.parameter)+"</textarea>";e.placeholder().html(t),$("#"+e.name).change(function(){if(Dashboards.getParameterValue(e.parameter)===$("#"+e.name).val())return;Dashboards.processChange(e.name)})},getValue:function(){return $("#"+this.name).val()}});$.datepicker&&$(function(){$.datepicker.setDefaults($.datepicker.regional[""])});var DateInputComponent=BaseComponent.extend({update:function(){var e=this.dateFormat==undefined||this.dateFormat==null?"yy-mm-dd":this.dateFormat,t=this,n,r;this.startDate=="TODAY"?n=new Date:this.startDate&&(n=$.datepicker.parseDate(e,this.startDate)),this.endDate=="TODAY"?r=new Date:this.endDate&&(r=$.datepicker.parseDate(e,this.endDate)),this.on("onOpen:dateInput",this.onOpenEvent),this.on("onClose:dateInput",this.onCloseEvent),this.placeholder().html($("<input/>").attr("id",this.name).attr("value",Dashboards.getParameterValue(this.parameter)).css("width","80px")),$(function(){t.placeholder("input").datepicker({beforeShow:function(){t.triggerOnOpen()},onClose:function(){t.triggerOnClose()},dateFormat:e,changeMonth:!0,changeYear:!0,minDate:n,maxDate:r,onSelect:function(e,n){Dashboards.processChange(t.name)}});if(typeof Dashboards.i18nSupport!="undefined"&&Dashboards.i18nSupport!=null){var i=t.placeholder("input");i.datepicker("option",$.datepicker.regional[Dashboards.i18nCurrentLanguageCode]),i.parent().append($("<hidden>").attr("id",t.name+"_hidden")),i.datepicker("option","altField","#"+t.name+"_hidden"),i.datepicker("option","altFormat",e)}t._doAutoFocus()})},triggerOnOpen:function(){this.placeholder("input").toggleClass("dInputComponentExpanded",!0),this.trigger("onOpen:dateInput")},triggerOnClose:function(){this.placeholder("input").toggleClass("dInputComponentExpanded",!1),this.trigger("onClose:dateInput")},getValue:function(){return typeof Dashboards.i18nSupport!="undefined"&&Dashboards.i18nSupport!=null?$("#"+this.name+"_hidden").val():$("#"+this.name).val()}}),DateRangeInputComponent=BaseComponent.extend({update:function(){function l(){a&&f&&(r.fireInputChange(r.startValue,r.endValue),a=f=!1)}var e,t=this.inputSeparator=this.inputSeparator||">";this.singleInput==undefined||this.singleInput==1?(e=$("<input/>").attr("id",this.name).attr("value",this.getStartParamValue()+" "+t+" "+this.getEndParamValue()).css("width","170px"),this.placeholder().html(e)):(e=$("<input/>").attr("id",this.name).attr("value",this.getStartParamValue()).css("width","80px"),this.placeholder().html(e),e.after($("<input/>").attr("id",this.name+"2").attr("value",this.getEndParamValue()).css("width","80px")),e.after(t)),this.on("onOpen:dateRangeInput",this.onOpenEvent),this.on("onClose:dateRangeInput",this.onCloseEvent);var n=e.offset(),r=this,i=this.earliestDate!=undefined?this.earliestDate:Date.parse("-1years"),s=this.latestDate!=undefined?this.latestDate:Date.parse("+1years"),o=this.leftOffset!=undefined?this.leftOffset:0,u=this.topOffset!=undefined?this.topOffset:15,a,f,c=r.dateFormat==undefined||r.dateFormat==null?"yy-mm-dd":r.dateFormat;$(function(){r.placeholder("input").daterangepicker({posX:n.left+o,posY:n.top+u,earliestDate:i,latestDate:s,dateFormat:c,rangeSplitter:t,onOpen:function(){r.triggerOnOpen(),a=f=!1,r.startValue=null,r.endValue=null,r.addCancelButton()},onDateSelect:function(e,t){a=!0,r.storeChanges(e,t),l()},onClose:function(){r.triggerOnClose(),f=!0,l()}}),r._doAutoFocus(),r.canClickOutsidePopup&&$(document).off("click")})},triggerOnOpen:function(){this.placeholder("input").toggleClass("driComponentExpanded",!0),this.trigger("onOpen:dateRangeInput")},triggerOnClose:function(){this.placeholder("input").toggleClass("driComponentExpanded",!1),this.trigger("onClose:dateRangeInput")},getStartParamValue:function(){return Dashboards.getParameterValue(this.parameter[0])},getEndParamValue:function(){return Dashboards.getParameterValue(this.parameter[1])},addCancelButton:function(){var e=this.getStartParamValue(),t=this.getEndParamValue(),n=$(".ui-daterangepickercontain .ranges"),r=this,i=jQuery('<button class="btnCancel ui-state-default ui-corner-all">Cancel</button>').click(function(){var n=r.placeholder("input"),i=$(".ui-daterangepickercontain .ui-daterangepicker"),s=$(".ui-daterangepickercontain .range-start"),o=$(".ui-daterangepickercontain .range-end");r.singleInput==undefined||r.singleInput==1?n.val(e+" "+r.inputSeparator+" "+t):(n.eq(0).val(e),n.eq(1).val(t)),s.data("saveDate",new Date(e)).restoreDateFromData(),o.data("saveDate",new Date(t)).restoreDateFromData(),r.triggerOnClose(),i.data("state","closed"),i.fadeOut(300)}).hover(function(){jQuery(this).addClass("ui-state-hover")},function(){jQuery(this).removeClass("ui-state-hover")}).appendTo(n),s=$(".ui-daterangepickercontain ul");s.find("li").click(function(){i.hide(),setTimeout(function(){i.fadeIn()},400)})},fireInputChange:function(e,t){this.preChange&&this.preChange(e,t),this.parameter&&(this.parameter.length==2&&Dashboards.setParameter(this.parameter[1],t),this.parameter.length>0&&Dashboards.fireChange(this.parameter[0],e)),this.postChange&&this.postChange(e,t)},storeChanges:function(e,t){this.startValue=e,this.endValue=t}},{fireDateRangeInputChange:function(name,rangeA,rangeB){var object=Dashboards.getComponentByName(name);typeof object.preChange!="undefined"&&object.preChange(rangeA,rangeB);var parameters=eval(name+".parameter");Dashboards.setParameter(parameters[1],rangeB),Dashboards.fireChange(parameters[0],rangeA),typeof object.postChange!="undefined"&&object.postChange(rangeA,rangeB)}}),MonthPickerComponent=BaseComponent.extend({update:function(){var e=this.getMonthPicker(this.name,this.size,this.initialDate,this.minDate,this.maxDate,this.months);this.placeholder().html(e);var t=this;$("#"+this.name).change(function(){Dashboards.processChange(t.name)}),this._doAutoFocus()},getValue:function(){var e=$("#"+this.name).val(),t=e.substring(0,4),n=parseInt(e.substring(5,7)-1),r=new Date(t,n,1),i=this.getMonthPicker(this.name,this.size,r,this.minDate,this.maxDate,this.months);this.placeholder().html(i);var s=this;return $("#"+this.name).change(function(){Dashboards.processChange(s.name)}),e},parseDate:function(e){var t=null,n=0,r=1,i=2,s=e.split("-"),o,u,a;return s.length==3?(o=parseInt(s[n]),u=parseInt(s[r]),a=parseInt(s[i]),t=new Date(Date.UTC(o,u-1,a))):s.length==2&&(o=parseInt(s[n]),u=parseInt(s[r]),t=new Date(Date.UTC(o,u-1))),t},getMonthsAppart:function(e,t){var n,r;e<t?(n=e,r=t):(n=t,r=e);var i=r.getFullYear()-n.getFullYear(),s=i*12,o=r.getMonth()-n.getMonth()+s;return o},normalizeDateToCompare:function(e){var t=e;return t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},getMonthPicker:function(e,t,n,r,i,s){var o="<select";o+=" id='"+e+"'";if(n==undefined||n==null)n=new Date;if(r==undefined||r==null)r=new Date,r.setYear(1980);if(i==undefined||i==null)i=new Date,i.setYear(2060);typeof n=="string"&&(n=this.parseDate(n)),typeof r=="string"&&(r=this.parseDate(r)),typeof i=="string"&&(i=this.parseDate(i));var u=!1;if(s==undefined||s==0)s=this.getMonthsAppart(r,i),u=!0;t!=undefined&&(o+=" size='"+t+"'"),o+=">";var a=new Date(+n);u==1?a.setMonth(a.getMonth()-this.getMonthsAppart(r,a)-1):a.setMonth(a.getMonth()-s/2-1),a=this.normalizeDateToCompare(a);var f=this.normalizeDateToCompare(r),l=this.normalizeDateToCompare(i);for(var c=0;c<=s;c++)a.setMonth(a.getMonth()+1),a>=f&&a<=l&&(o+="<option value = '"+a.getFullYear()+"-"+this.zeroPad(a.getMonth()+1,2)+"' ",a.getFullYear()==n.getFullYear()&&a.getMonth()==n.getMonth()&&(o+="selected='selected'"),o+=">"+Dashboards.monthNames[a.getMonth()]+" "+a.getFullYear()+"</option>");return o+="</select>",o},zeroPad:function(e,t){var n="00000000000000"+e;return n.substring(n.length-t,n.length)}}),ToggleButtonBaseComponent=InputBaseComponent.extend({draw:function(e){var t="",n=Dashboards.getParameterValue(this.parameter);n=typeof n=="function"?n():n;var r=!1,i=[];n instanceof Array||typeof n=="object"&&n.join?i=n:typeof n=="string"&&(i=n.split("|"));var s=this.valueAsId==0?0:1,o=!1;e:for(var u=0;u<i.length;u++)for(var a=0;a<e.length;a++)if(i[u]==e[a][s]){o=!0;break e}!o&&this.defaultIfEmpty&&(i=[e[0][s]],this.currentVal=i,Dashboards.setParameter(this.parameter,i),Dashboards.processChange(this.name)),t+="<ul class='"+(this.verticalOrientation?"toggleGroup vertical":"toggleGroup horizontal")+"'>";for(var u=0,f=e.length;u<f;u++){t+="<li class='"+(this.verticalOrientation?"toggleGroup vertical":"toggleGroup horizontal")+"'><label><input onclick='ToggleButtonBaseComponent.prototype.callAjaxAfterRender(\""+this.name+"\")'",r=!1;for(var l=0,c=i.length;l<c;l++){r=i[l]==e[u][s];if(r)break}if(this.type=="radio"||this.type=="radioComponent"){if(u==0&&!o||o&&e[u][s]==n)t+=" CHECKED";t+=" type='radio'"}else{if(u==0&&!o&&this.defaultIfEmpty||o&&r)t+=" CHECKED";t+=" type='checkbox'"}t+="class='"+this.name+"' name='"+this.name+"' value='"+e[u][s]+"' /> "+e[u][1]+"</label></li>"+(this.separator==undefined||this.separator==null||this.separator=="null"?"":this.separator)}t+="</ul>",this.placeholder().html(t),this.currentVal=null,this._doAutoFocus()},callAjaxAfterRender:function(e){setTimeout(function(){Dashboards.processChange(e)},1)}}),RadioComponent=ToggleButtonBaseComponent.extend({getValue:function(){return this.currentVal!="undefined"&&this.currentVal!=null?this.currentVal:this.placeholder("."+this.name+":checked").val()}}),CheckComponent=ToggleButtonBaseComponent.extend({getValue:function(){if(this.currentVal!="undefined"&&this.currentVal!=null)return this.currentVal;var e=new Array;return this.placeholder("."+this.name+":checked").each(function(t,n){e.push($(this).val())}),e}}),MultiButtonComponent=ToggleButtonBaseComponent.extend({indexes:[],draw:function(e){this.cachedArray=e;var t=wd.helpers.inputHelper.getCssWrapperClass(this.verticalOrientation),n="",r,i=this.valueAsId?1:0,s=1;this.isMultiple==undefined&&(this.isMultiple=!1);var o=$("<div>");o.appendTo(this.placeholder().empty());for(var u=0,a=e.length;u<a;u++){var f=e[u][i],l=e[u][s],c=t+wd.helpers.inputHelper.getExtraCss(u,a,this.verticalOrientation),h;f=f==null?null:f.replace('"',"&quot;"),l=l==null?null:l.replace('"',"&quot;"),u==0&&(r=f),n="<div class='"+c+"'><button type='button' name='"+this.name+"'>"+l+"</button  >"+"</div>",h=$(n);var p=this;(function(e){h.click(function(){MultiButtonComponent.prototype.clickButton(p.htmlObject,p.name,e,p.isMultiple,p.verticalOrientation)})})(u),o.append(h),this.separator!=undefined&&this.separator!=null&&this.separator!="null"&&u!=e.length-1&&o.append(this.separator)}var d=Dashboards.ev(Dashboards.getParameterValue(this.parameter)),v=!1,m;d==null?m=[]:d instanceof Array||typeof d=="object"&&d.join?m=d:m=d.toString().split("|");var g=!1;this.clearSelections(this.htmlObject,this.name,this.verticalOrientation);for(var u=0;u<e.length;u++){v=!1;for(var y=0,b=m.length;y<b;y++){v=m[y]==e[u][i];if(v)break}if($.isArray(d)&&v||v||e[u][i]==d||e[u][s]==d){MultiButtonComponent.prototype.clickButton(this.htmlObject,this.name,u,this.isMultiple,this.verticalOrientation,!0),g=!0;if(!this.isMultiple)break}}(!g&&!this.isMultiple||!g&&this.isMultiple&&this.defaultIfEmpty)&&e.length>0&&((d==null||d==""||typeof d=="object"&&d.length==0)&&this.parameter&&Dashboards.fireChange(this.parameter,this.isMultiple?[r]:r),MultiButtonComponent.prototype.clickButton(this.htmlObject,this.name,0,this.isMultiple,this.verticalOrientation,!0)),$("."+wd.helpers.inputHelper.getToggleButtonClass()).hover(function(){$(this).addClass(wd.helpers.inputHelper.getToggleButtonHoveringClass())},function(){$(this).removeClass(wd.helpers.inputHelper.getToggleButtonHoveringClass())}),$("."+wd.helpers.inputHelper.getToggleButtonClass()+" button").hover(function(){$(this).parent().addClass(wd.helpers.inputHelper.getToggleButtonHoveringClass())},function(){}),this._doAutoFocus()},getValue:function(){if(this.isMultiple){var e=MultiButtonComponent.prototype.getSelectedIndex(this.name),t=new Array;if(e.length==undefined)t.push(this.getValueByIdx(e));else for(var n=0;n<e.length;n++)t.push(this.getValueByIdx(e[n]));return t}return this.getValueByIdx(MultiButtonComponent.prototype.getSelectedIndex(this.name))},getValueByIdx:function(e){return this.cachedArray[e][this.valueAsId?1:0]},clickButton:function(e,t,n,r,i,s){var o=wd.helpers.inputHelper.getUnselectedCss(i),u=wd.helpers.inputHelper.getSelectedCss(i),a=$("#"+e+" button");if(r){this.indexes[t]==undefined?this.indexes[t]=[]:$.isArray(this.indexes[t])||(this.indexes[t]=[this.indexes[t]]);var f=!1;for(var l=0;l<this.indexes[t].length;++l)if(this.indexes[t][l]==n){f=!0,this.indexes[t].splice(l,1);break}f?a[n].parentNode.className=o+wd.helpers.inputHelper.getExtraCss(n,a.length,i):(a[n].parentNode.className=u+wd.helpers.inputHelper.getExtraCss(n,a.length,i),this.indexes[t].push(n))}else this.clearSelections(e,t,i),this.indexes[t]=n,a[n].parentNode.className=u+wd.helpers.inputHelper.getExtraCss(n,a.length,i);s||this.callAjaxAfterRender(t)},clearSelections:function(e,t,n){var r=$("#"+e+" button"),i=wd.helpers.inputHelper.getUnselectedCss(n);for(var s=0;s<r.length;s++)r[s].parentNode.className=i+wd.helpers.inputHelper.getExtraCss(s,r.length,n);this.indexes[t]=[]},getSelectedIndex:function(e){return this.indexes[e]}}),AutocompleteBoxComponent=BaseComponent.extend({searchedWord:"",result:[],queryServer:function(e){this.parameters||(this.parameters=[]),this.searchParam?this.parameters=[[this.searchParam,this.getInnerParameterName()]]:this.parameters.length>0&&(this.parameters[0][1]=this.getInnerParameterName()),this.maxResults&&(this.queryDefinition.pageSize=this.maxResults),Dashboards.setParameter(this.getInnerParameterName(),this.getTextBoxValue()),QueryComponent.makeQuery(this)},getTextBoxValue:function(){return this.textbox.val()},getInnerParameterName:function(){return this.parameter+"_textboxValue"},update:function(){this.placeholder().empty();var e=null;this.parameter&&(e=Dashboards.getParameterValue(this.parameter));var t=this;Dashboards.getParameterValue(this.getInnerParameterName())||Dashboards.setParameter(this.getInnerParameterName(),"");var n=t.processChange==undefined?function(e){Dashboards.processChange(e)}:function(e){t.processChange()},r=t.processElementChange==1?function(e){Dashboards.fireChange(t.parameter,e)}:undefined;this.minTextLenght==undefined&&(this.minTextLenght=0);var i={list:function(){var e=t.textbox.val();e.length>=t.minTextLenght&&!(e==""||e==t.searchedWord||t.queryInfo!=null&&t.result.length==t.queryInfo.totalRows&&t.searchedWord!=""&&(t.matchType=="fromStart"?e.indexOf(t.searchedWord)==0:e.indexOf(t.searchedWord)>-1))&&(t.queryServer(e),t.searchedWord=e);var n=[];for(p in t.result)if(t.result.hasOwnProperty(p)){var r={};r.text=t.result[p][0],n.push(r)}return n},matchType:t.matchType==undefined?"fromStart":t.matchType,processElementChange:r,processChange:function(e,t){e.value=t,n(e.name)},multiSelection:t.selectMulti==undefined?!1:t.selectMulti,checkValue:t.checkValue==undefined?!0:t.checkValue,minTextLenght:t.minTextLenght==undefined?0:t.minTextLenght,scrollHeight:t.scrollHeight,applyButton:t.showApplyButton==undefined?!0:t.showApplyButton,tooltipMessage:t.tooltipMessage==undefined?"Click it to Apply":t.tooltipMessage,addTextElements:t.addTextElements==undefined?!0:t.addTextElements,externalApplyButtonId:t.externalApplyButtonId,parent:t};this.autoBoxOpt=this.placeholder().autobox(i),this.autoBoxOpt.setInitialValue(this.htmlObject,e,this.name),this.textbox=this.placeholder("input"),this._doAutoFocus()},getValue:function(){return this.value},processAutoBoxChange:function(){this.autoBoxOpt.processAutoBoxChange()}}),ButtonComponent=ActionComponent.extend({_docstring:function(){return"Button Component that triggers a server action when clicked"},render:function(){var e=this,t=$("<button type='button'/>").text(this.label).unbind("click").bind("click",function(){var t=!0;_.isFunction(e.expression)&&(t=e.expression.apply(e,arguments));if(e.hasAction()&&t!==!1)return e.triggerAction.apply(e)});(_.isUndefined(this.buttonStyle)||this.buttonStyle==="themeroller")&&t.button(),t.appendTo(this.placeholder().empty()),this._doAutoFocus()},disable:function(){this.placeholder("button").attr("disabled","disabled")},enable:function(){this.placeholder("button").removeAttr("disabled")},setLabel:function(e){this.label=e.toString(),this.placeholder("button").text(this.label)}});pen.define("cdf/components/input",function(){});var JFreeChartComponent=BaseComponent.extend({update:function(){var e=this.chartDefinition.queryType=="cda"?"jfreechart-cda.xaction":"jfreechart.xaction";this.callPentahoAction(e)},getParameters:function(){var e=this.chartDefinition;if(e==undefined){Dashboards.log("Fatal - No chartDefinition passed","error");return}typeof e.titleKey!="undefined"&&typeof Dashboards.i18nSupport!="undefined"&&Dashboards.i18nSupport!=null&&(e.title=Dashboards.i18nSupport.prop(e.titleKey));var t=null;if(e.queryType=="cda"&&$.isArray(this.parameters)){var n;for(var r=0;r<this.parameters.length;r++){n=this.parameters[r];if($.isArray(n)&&n.length>=2){var i=n[0],s=n[1];s&&(s=doCsvQuoting(s,"=")),r==0?t="":t+=";",t+=doCsvQuoting(i+"="+s,";")}}}var o=e.chartOptions!=undefined?$.extend({},Dashboards.ev(e.chartOptions),e):e,u=[];for(p in o){var a=p,s=typeof o[p]=="function"?o[p]():o[p];u.push([a,s])}return t!=null&&u.push(["cdaParameterString",t]),u},callPentahoAction:function(e){Dashboards.incrementRunningCalls();var t=this;Dashboards.callPentahoAction(t,"system","pentaho-cdf/actions",e,this.getParameters(),function(n){n!=null&&(t.chartDefinition.caption!=undefined?t.buildCaptionWrapper($(n.find("ExecuteActivityResponse:first-child").text()),e):$("#"+t.htmlObject).html(n.find("ExecuteActivityResponse:first-child").text())),Dashboards.decrementRunningCalls()})},buildCaptionWrapper:function(e,t){var n=function(e,t){var n=t.queryType=="cda"?"jtable-cda.xaction":"jtable.xaction",r=$.extend({solution:"system",path:"pentaho-cdf/actions",action:n,exportType:e},t);Dashboards.post(wd.cdf.endpoints.getExport(),r)},r=this,i=r.chartDefinition,s=$.extend(wd.helpers.jfreechartHelper.getCaption(i,r,n,t),i.caption),u=r.htmlObject+"caption",a=$('<div id="'+u+'" ></div>');e.attr("id",r.htmlObject+"image"),e.attr("rel",r.htmlObject+"caption"),e.attr("class","captify");for(o in s){var f=s[o].show==undefined||(typeof s[o].show=="function"?s[o].show():s[o].show)?!0:!1;this.chartDefinition.queryType!="mdx"&&s[o].title=="Details"&&(f=!1);if(f){var l=s[o].icon!=undefined?typeof s[o].icon=="function"?s[o].icon():s[o].icon:undefined,c=l!=undefined?$('<div id ="'+u+o+'" class=" img '+l+'"></div>'):$('<span id ="'+u+o+'">'+s[o].title+"</span>");s[o].oclass!=undefined&&c.addClass(s[o].oclass),c.attr("title",s[o].title),a.append(c)}}$("#"+r.htmlObject).empty();var h=$('<div class="caption-details">Details</div>');$("#"+r.htmlObject).append(h),$("#"+r.htmlObject).append(e),$("#"+r.htmlObject).append(a),$("img.captify").captify($.extend({bDetails:h,spanWidth:"95%",hideDelay:3e3,hasButton:!1,opacity:"0.5"},i.caption)),h.one("capityFinished",function(t,n){var i=e.offset(),a=h.offset();e.length>1&&(h.bind("mouseenter",function(){$("#"+r.htmlObject+"image").trigger("detailsClick",[this])}),h.css("left",h.position().left+$(e[1]).width()-h.width()-5),h.css("top",h.position().top+$(e[1]).height()-h.height()),e[0].id=e[0].id+"Map");for(o in s)s[o].callback!=undefined&&$("#"+u+o).bind("click",s[o].callback)})}}),DialComponent=JFreeChartComponent.extend({update:function(){var e=this.chartDefinition;if(e==undefined){Dashboards.log("Fatal - No chartDefinition passed","error");return}e.chartType="DialChart";var t=e.intervals,n=e.colors;if(n!=undefined&&t.length!=n.length){Dashboards.log("Fatal - Number of intervals differs from number of colors","error");return}this.callPentahoAction(e.queryType=="cda"?"jfreechartdial-cda.xaction":"jfreechartdial.xaction")}}),OpenFlashChartComponent=JFreeChartComponent.extend({callPentahoAction:function(){Dashboards.incrementRunningCalls();var myself=this;Dashboards.callPentahoAction(myself,"system","pentaho-cdf/actions","openflashchart.xaction",this.getParameters(),function(e){if(e!=null){var t=wd.helpers.jfreechartHelper.getOpenFlashChart(e.find("ExecuteActivityResponse:first-child").text());getDataFuntion=t.match(/getData.*\(\)/gi),$("#"+myself.htmlObject).html(t)}Dashboards.decrementRunningCalls()}),OpenFlashChartComponent.prototype.onClick=function(value){if(getDataFuntion!=null&&myself.chartDefinition.urlTemplate!=undefined&&myself.chartDefinition.parameterName!=undefined){myself.data=myself.data!=undefined?myself.data:eval("("+eval(getDataFuntion[0])+")");if(myself.data.x_axis!=undefined){var urlTemplate=myself.chartDefinition.urlTemplate.replace("{"+myself.chartDefinition.parameterName+"}",myself.data.x_axis.labels.labels[value]);eval(urlTemplate)}}}}}),TrafficComponent=UnmanagedComponent.extend({trafficLight:function(e,t){var n=this.trafficDefinition,r;t?r=$(e).find("VALUE").text():r=e[0][0];var i="img trafficGreen",s="img trafficYellow",o="img trafficRed",u=$("<div>").attr("class",r<=n.intervals[0]?o:r>=n.intervals[1]?i:s),a=$("#"+this.htmlObject);a.html(u);if(n.showValue!=undefined&&n.showValue==1){var f="Value: "+r+" <br />"+"<div align='middle' class='"+o+"'/> &le; "+n.intervals[0]+" &lt; "+"<div align='middle' class='"+s+"'/> &lt; "+n.intervals[1]+" &le; "+"<div align='middle' class='"+i+"'/>"+(f!=undefined?"<br/>"+f:"");a.tooltip.Constructor?a.tooltip({delay:0,html:!0,title:f,placement:"auto top"}):(a.tooltip({delay:0,track:!0,fade:250,content:f}),a.attr("title",f))}},doQuery:function(){var e=this.trafficDefinition;if(e.path&&e.dataAccessId){var t=_.bind(function(e){var t;this.valueAsId?t=e.resultset.map(function(e){return[e[0],e[0]]}):t=e.resultset,this.trafficLight(t),Dashboards.decrementRunningCalls()},this);this.triggerQuery(e,t)}else{var n=[];for(p in e){var r=p,i=typeof e[p]=="function"?e[p]():e[p];n.push([r,i])}var s=this,t=_.bind(function(){Dashboards.callPentahoAction(s,"system","pentaho-cdf/actions","traffic.xaction",n,function(e){s.trafficLight(e,!0)})},this);this.synchronous(t)}},update:function(){var e=this.trafficDefinition;if(e==undefined){Dashboards.log("Fatal - No trafficDefinition passed","error");return}var t=e.intervals;t==undefined&&(e.intervals=[-1,1]),this.doQuery()}}),TimePlotComponent=BaseComponent.extend({reset:function(){this.timeplot=undefined,this.chartDefinition.dateRangeInput=this.InitialDateRangeInput,this.listeners=this.InitialListeners},update:function(){var e=this,t=e.chartDefinition;e.InitialListeners=e.InitialListeners==undefined?e.listeners:e.InitialListeners,e.InitialDateRangeInput=e.InitialDateRangeInput==undefined?t.dateRangeInput:e.InitialDateRangeInput;if(t.updateOnDateRangeInputChange!=1&&e.timeplot!=undefined&&t.dateRangeInput!=undefined){if(e.updateTimeplot!=0&&e.timeplot._plots.length>0){var n=e.timeplot._plots[e.timeplot._plots.length-1];n._id=="eventPlot"&&n._addSelectEvent(Dashboards.getParameterValue(e.startDateParameter)+" 00:00:00",Dashboards.getParameterValue(e.endDateParameter)+" 23:59:59",n._eventSource,"iso8601",e.geometry._earliestDate,e.geometry._latestDate)}return}t.dateRangeInput!=undefined&&e.timeplot==undefined&&(t.dateRangeInput=Dashboards.getComponent(t.dateRangeInput),e.startDateParameter=t.dateRangeInput.parameter[0],e.endDateParameter=t.dateRangeInput.parameter[1],e.listeners=e.listeners==undefined?[]:e.listeners,e.listeners=e.listeners.concat(e.startDateParameter).concat(e.endDateParameter)),typeof Timeplot!="undefined"&&Dashboards.timePlotColors==undefined&&(Dashboards.timePlotColors=[new Timeplot.Color("#820000"),new Timeplot.Color("#13E512"),new Timeplot.Color("#1010E1"),new Timeplot.Color("#E532D1"),new Timeplot.Color("#1D2DE1"),new Timeplot.Color("#83FC24"),new Timeplot.Color("#A1D2FF"),new Timeplot.Color("#73F321")]);var r=new Timeplot.DefaultTimeGeometry({gridColor:"#000000",axisLabelsPlacement:"top",gridType:"short",yAxisColor:"rgba(255,255,255,0)",gridColor:"rgba(100,100,100,1)"}),i=new Timeplot.DefaultValueGeometry({gridColor:"#000000",min:0,axisLabelsPlacement:"left",gridType:"short",valueFormat:function(e){return toFormatedString(e)}}),s=new Timeplot.DefaultEventSource,o=new Timeplot.DefaultEventSource,u,a=this;if(t==undefined){Dashboards.log("Fatal - No chart definition passed","error");return}t.showValues==undefined&&(t.showValues=!0);var f=typeof t["columns"]=="function"?t.columns():t.columns;if(f==undefined||f.length==0){Dashboards.log("Fatal - No 'columns' property passed in chartDefinition","error");return}var l=$("<div></div>");t.title!=undefined&&l.append('<span style="text-transform: lowercase;">'+t.title+"&nbsp; &nbsp; &nbsp;</span>");var c=[];for(var h=0,p=0;h<f.length;h++,p++){p=p>7?0:p,l.append('<span id="'+a.name+"Plot"+h+'Header" style="color:'+Dashboards.timePlotColors[p].toHexString()+'">'+f[h]+" &nbsp;&nbsp;</span>");var d={id:a.name+"Plot"+h,name:f[h],dataSource:new Timeplot.ColumnSource(s,h+1),valueGeometry:i,timeGeometry:r,lineColor:Dashboards.timePlotColors[p],showValues:t.showValues,hideZeroToolTipValues:t.hideZeroToolTipValues!=undefined?t.hideZeroToolTipValues:!1,showValuesMode:t.showValuesMode!=undefined?t.showValuesMode:"header",toolTipFormat:function(e,t){return t._name+" = "+toFormatedString(e)},headerFormat:function(e,t){return t._name+" = "+toFormatedString(e)+"&nbsp;&nbsp;"}};t.dots==1&&(d.dotColor=Dashboards.timePlotColors[p]),t.fill==1&&(d.fillColor=Dashboards.timePlotColors[p].transparency(.5)),c.push(new Timeplot.createPlotInfo(d))}var o=undefined,v=undefined;if(t.dateRangeInput!=undefined||t.events&&t.events.show==1)e.rangeColor="00FF00",o=new Timeplot.DefaultEventSource,v=Timeplot.createPlotInfo({id:t.dateRangeInput!=undefined?"eventPlot":"events",eventSource:o,timeGeometry:r,lineColor:"#FF0000",rangeColor:e.rangeColor,getSelectedRegion:function(t,n){e.updateDateRangeInput(t,n)}}),c.push(v);$("#"+e.htmlObject).html(l),$("#"+e.htmlObject).append("<div class='timeplot'></div>"),t.height>0&&$("#"+e.htmlObject+" > div.timeplot").css("height",t.height),t.width>0&&$("#"+e.htmlObject+" > div.timeplot").css("width",t.width),timeplot=Timeplot.create($("#"+e.htmlObject+" > div.timeplot")[0],c),a.timeplot=timeplot,a.geometry=r;var m=undefined,g=wd.cdf.endpoints.getCdfXaction("pentaho-cdf/actions","timelinefeeder.xaction",null,t);if(t.events&&t.events.show==1){var y=wd.cdf.endpoints.getCdfXaction("pentaho-cdf/actions","timelineeventfeeder.xaction",null,t.events);timeplot.loadText(g,",",s,null,null,function(n){timeplot.loadJSON(y,o,function(i){i.events=e.filterEvents(i.events,n);if(t.dateRangeInput){var s=timeplot._plots[timeplot._plots.length-1];s._id=="eventPlot"&&s._addSelectEvent(Dashboards.getParameterValue(a.startDateParameter)+" 00:00:00",Dashboards.getParameterValue(a.endDateParameter)+" 23:59:59",o,"iso8601",r._earliestDate,r._latestDate)}})})}else timeplot.loadText(g,",",s,null,null,function(){if(t.dateRangeInput){var e=timeplot._plots[timeplot._plots.length-1];e._id=="eventPlot"&&e._addSelectEvent(Dashboards.getParameterValue(a.startDateParameter)+" 00:00:00",Dashboards.getParameterValue(a.endDateParameter)+" 23:59:59",o,"iso8601",r._earliestDate,r._latestDate)}})},filterEvents:function(e,t){var n=[],r=MetaLayer.toDateString(new Date(t.earliestDate)),s=MetaLayer.toDateString(new Date(t.latestDate));for(i=0;i<e.length;i++)e[i].start>=r&&(e[i].end==undefined&&e[i].start<=s||e[i].end<=s)&&n.push(e[i]);return n},updateDateRangeInput:function(e,t){var n=function(e){var t="0"+(e.getMonth()+1),n="0"+e.getDate();return e.getFullYear()+"-"+t.substring(t.length-2,t.length)+"-"+n.substring(n.length-2,n.length)};if(this.chartDefinition.dateRangeInput!=undefined){if(e>t){var r=e;e=t,t=r}Dashboards.setParameter(this.startDateParameter,n(e)),Dashboards.setParameter(this.endDateParameter,n(t)),this.updateTimeplot=!1,Dashboards.update(this.chartDefinition.dateRangeInput),Dashboards.fireChange(this.startDateParameter,n(e)),this.updateTimeplot=!0}}});pen.define("cdf/components/jfreechart",function(){});var DashboardsMap={markers:null,data:new Array,dataIdx:0,messageElementId:null,selectedPointDetails:null,mapExpression:null,useMercator:"true",showToolTip:"false",search:function(e,t){var n=this.data[t],r=n[1],i=r[0],s=r[1],o=r[2];if(i!=""&&s!="")return DashboardsMap.getLocation({totalResultsCount:1,geonames:[{lat:i,lng:s}]});var u="http://nominatim.openstreetmap.org/search",a={format:"json",limit:"1",q:o},f=function(e){var t;e&&e.length>0?t={totalResultsCount:e.length,geonames:[{lng:e[0].lon,lat:e[0].lat}]}:t={totalResultsCount:0,geonames:[]},DashboardsMap.getLocation(t)};$.getJSON(u,a,f)},resetSearch:function(){map.removeLayer(markers),markers.destroy(),markers=new OpenLayers.Layer.Markers("Markers"),map.addLayer(markers),this.cleanMessages(),dataIdx=0,this.data=new Array},getLocation:function(e){var t=this.data[dataIdx++];if(e==null||e.totalResultsCount==0){var n=t[0];this.addMessage(n)}else{var r=e.geonames[0],i=t[4],s=t[5];t[6]=r.lng,t[7]=r.lat;var i=this.showMarker(i,t);t[4]=i}if(dataIdx>=this.data.length&&dataIdx>1){var o=markers.getDataExtent();map.zoomToExtent(o)}dataIdx>=this.data.length&&dataIdx==1&&map.setCenter(markers.markers[0].lonlat,4,!1,!1)},showMarker:function(e,t){var n,r,i=t[6],s=t[7];if(t[5]instanceof Array){var o=t[5];n=o[0],r=new OpenLayers.Size(o[1],o[2])}else n=t[5],r=new OpenLayers.Size(21,25);var u=new OpenLayers.Pixel(-(r.w/2),-r.h),a=new OpenLayers.Icon(n,r,u);return this.useMercator=="true"?(marker=new OpenLayers.Marker(lonLatToMercator(new OpenLayers.LonLat(i,s)),a),feature=new OpenLayers.Feature(markers,lonLatToMercator(new OpenLayers.LonLat(i,s)),t)):(marker=new OpenLayers.Marker(new OpenLayers.LonLat(i,s),a),feature=new OpenLayers.Feature(markers,new OpenLayers.LonLat(i,s),t)),feature.marker=marker,marker.events.register("mousedown",feature,DashboardsMap.marker_click),this.showToolTip=="true"&&(marker.events.register("mouseover",feature,DashboardsMap.marker_over),marker.events.register("mouseout",feature,DashboardsMap.marker_out),ttips=new OpenLayers.Control.ToolTips({bgColor:"black",textColor:"white",bold:!0,opacity:.5}),map.addControl(ttips)),markers.addMarker(marker),marker},marker_click:function(e){click_lonlat=this.lonlat;var t=this.data;DashboardsMap.showToolTip=="true"&&ttips.hide(),Dashboards.fireChange("selectedPoint",t[0])},marker_over:function(e){record=this.data,ttips.show({html:record[0]+": "+record[2]})},marker_out:function(e){ttips.hide()},updateInfoWindow:function(e){if(e!=null){var t=$(e).text();show_bubble(click_lonlat,t)}},updateMap:function(){var n=this.data.length;for(idx=0;idx<n;idx++){var value=this.data[idx][2],markers=this.mapMarkers,icon=eval(this.mapExpression),marker=this.data[idx][4];this.data[idx][5]=icon,this.data[idx][4]=this.showMarker(marker,this.data[idx])}},addMessage:function(e){this.messageElementId!=undefined&&(document.getElementById(this.messageElementId).innerHTML=document.getElementById(this.messageElementId).innerHTML+e+"\n <br />")},cleanMessages:function(e){this.messageElementId!=undefined&&(document.getElementById(this.messageElementId).innerHTML="")}},MapComponent=BaseComponent.extend({initMap:!0,update:function(){var div="map";this.mapDiv!=null&&(div=this.mapDiv);var b_layer_control=!0,b_custom_map=!1,b_use_mercator=!0,str_custom_map="";this.showLayerSelector==0&&(b_layer_control=this.showLayerSelector),this.showCustomMap&&(b_custom_map="true",str_custom_map=this.customMapCode),this.useMercator==0&&(b_use_mercator="false",DashboardsMap.useMercator="false"),this.showToolTip==1?DashboardsMap.showToolTip="true":DashboardsMap.showToolTip="false",this.initMap&&(init_map(div,this.initPosLon,this.initPosLat,this.initZoom,b_use_mercator,b_layer_control,b_custom_map,str_custom_map),DashboardsMap.messageElementId=this.messageElementId,this.initMap=!1),DashboardsMap.resetSearch();var p=new Array(this.parameters.length);for(var i=0,len=p.length;i<len;i++){var key=this.parameters[i][0],value=Dashboards.getParameterValue(this.parameters[i][1]);p[i]=[key,value]}html=Dashboards.pentahoAction(this.solution,this.path,this.action,p,null);var myArray=this.parseArray(html,!0),len=myArray.length;if(len>1){var cols=myArray[0],colslength=cols.length;for(var i=1;i<len;i++){var details;if(colslength>4){details=new Array(colslength-4);for(var j=4;j<colslength;j++)details[j-4]=[cols[j],myArray[i][j]]}var value=myArray[i][4],markers=this.markers;DashboardsMap.mapExpression=this.expression(),DashboardsMap.mapMarkers=markers;var icon=eval(this.expression());DashboardsMap.data.push(new Array(myArray[i][0],new Array(myArray[i][1],myArray[i][2],myArray[i][3]),value,details,null,icon,null,null)),DashboardsMap.search(this,DashboardsMap.data.length-1)}}}}),MapBubbleComponent=BaseComponent.extend({update:function(){DashboardsMap.selectedPointDetails=null;for(var e=0;e<DashboardsMap.data.length;e++)if(Dashboards.getParameterValue("selectedPoint")==DashboardsMap.data[e][0]){DashboardsMap.selectedPointDetails=DashboardsMap.data[e][3];break}var t=Dashboards.clone(DashboardsMap.selectedPointDetails);if(this.parameters!=undefined)var n=new Array(this.parameters.length);for(var e=0,r=n.length;e<r;e++){var i=this.parameters[e][0],s=Dashboards.getParameterValue(this.parameters[e][1]);t.push([i,s])}DashboardsMap.updateInfoWindow(Dashboards.pentahoAction(this.solution,this.path,this.action,t,null))}});pen.define("cdf/components/maps",function(){});var NavigatorBaseComponent=BaseComponent.extend({},{path:Dashboards.getQueryParameter("path"),solution:Dashboards.getQueryParameter("solution"),template:Dashboards.getQueryParameter("template"),navigatorResponse:-1,getSolutionJSON:function(e){var t=NavigatorBaseComponent.navigatorResponse,n=t.solution.folders,r,s=0;for(i=0;i<n.length;i++){var o=n[i];if(NavigatorBaseComponent.solution==""||o.solution==NavigatorBaseComponent.solution){var u=[],a=o.folders;a!=undefined&&a.length==undefined?u.push(a):a!=undefined&&a.length>0&&(u=u.concat(a));var f=o.files;return f!=undefined&&f.length==undefined?u.push(f):f!=undefined&&f.length>0&&(u=u.concat(f)),u}}if(s==0){Dashboards.error("Fatal: Solution "+e+" not found in navigation object");return}},browseContent:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.type=="FOLDER"&&r.path==t)return e=r.folders,e==undefined?[]:(e.length==undefined&&(e=[e]),e)}Dashboards.error("Fatal: path "+(NavigatorBaseComponent.path||Dashboards.getPathParameter())+" not found in navigation object");return},getParentSolution:function(){return(NavigatorBaseComponent.path||Dashboards.getPathParameter()).length>0?NavigatorBaseComponent.solution:""},getParentPath:function(){var e=NavigatorBaseComponent.path||Dashboards.getPathParameter(),t=e.lastIndexOf("/");if(t==-1)return"";var n=e.substring(0,e.lastIndexOf("/"));return n},isAncestor:function(e,t){return e!=NavigatorBaseComponent.solution?!1:!0}}),NavigatorComponent=NavigatorBaseComponent.extend({update:function(){var e=this;NavigatorBaseComponent.navigatorResponse==-1?$.getJSON(wd.cdf.endpoints.getJSONSolution()+"?mode=navigator&path="+NavigatorBaseComponent.path,function(t){e.processNavigatorResponse(t)}):this.processNavigatorResponse(NavigatorBaseComponent.navigatorResponse)},processNavigatorResponse:function(e){NavigatorBaseComponent.navigatorResponse=e;var t=this.includeSolutions?e.solution.folders[0].folders:NavigatorBaseComponent.getSolutionJSON(NavigatorBaseComponent.solution);t.sort(function(e,t){return e.name>t.name});var n=this.generateMenuFromArray(t,0);$("#"+this.htmlObject).html(n),$(function(){$("ul.jd_menu").jdMenu({activateDelay:50,showDelay:50,disableLinks:!1})}),$("ul.jd_menu a").tooltip({showURL:!1,track:!0,delay:1e3,opacity:.5})},generateMenuFromArray:function(e,t){var n="";if(e==undefined)return n;for(var r=0;r<e.length;r++){var i=e[r];n+=this.generateMenuFromFile(i,t+1)}if(n.length>0){var s;if(t==0){var o=this.mode=="vertical"?"jd_menu jd_menu_slate jd_menu_vertical":"jd_menu jd_menu_slate";s='class="'+o+'"'}n="<ul "+s+">"+n+"</ul>"}return n},generateMenuFromFile:function(e,t){var n="";if(e.visible==1){var r=NavigatorBaseComponent.isAncestor(e.solution,e.path)?'class="ancestor"':"",i="";e.path.length>0&&(i="path="+e.path);var s=NavigatorBaseComponent.template!=undefined&&NavigatorBaseComponent.template.length!=undefined&&NavigatorBaseComponent.template.length>0?"&amp;template="+NavigatorBaseComponent.template:"";e.link!=undefined?n+="<li><a "+r+' title="'+e.title+'"  href="'+webAppPath+e.link+'">'+e.title+"</a>":n+="<li><a "+r+' title="'+e.title+'" onClick="return false;" href="'+wd.cdf.endpoints.getRenderHTML()+"?solution="+e.solution+"&amp;"+i+s+'">'+e.title+"</a>";var o=e.folders||[];o.sort(function(e,t){return e.name>t.name});var u=e.files||[];u.sort(function(e,t){return e.name>t.name});var a=this.generateMenuFromArray(o.concat(u));a.length>0&&(a=" &raquo;"+a),n+=a+"</li>"}return n}}),ContentListComponent=NavigatorBaseComponent.extend({update:function(){var e=this,t=this.mode!=4?NavigatorBaseComponent.path||Dashboards.getPathParameter():NavigatorBaseComponent.getParentPath();e.draw(t)},draw:function(e){var t=this;$.getJSON(wd.cdf.endpoints.getJSONSolution()+"?mode=contentList"+(e!=""?"&path="+e:""),function(n){t.processContentListResponse(n,e)})},processContentListResponse:function(e,t){$("#"+this.htmlObject).empty();var n=e.content||[];n.sort(function(e,t){var n=(e.type=="FOLDER"?"000":"")+e.name,r=(t.type=="FOLDER"?"000":"")+t.name;return n>r});var r=$("<ul></ul>").attr("id","contentList-"+this.name).appendTo("#"+this.htmlObject);if(this.mode!=1&&this.mode!=4&&(NavigatorBaseComponent.path||Dashboards.getPathParameter())){var i={name:"Up",title:"Up",type:"FOLDER",description:"Go to parent directory",visible:!0,solution:NavigatorBaseComponent.getParentSolution(),path:t.substring(0,t.lastIndexOf("/"))};n.reverse().push(i),n.reverse()}var s=this;$.each(n,function(e,t){if(s.mode==1&&this.type=="FOLDER")return!0;if(s.mode==2&&this.type!="FOLDER")return!0;if(this.visible==1){var n="",i="",o="",u=NavigatorBaseComponent.template!=undefined&&NavigatorBaseComponent.template.length!=undefined&&NavigatorBaseComponent.template.length>0?"&template="+NavigatorBaseComponent.template:"",a;this.type=="FOLDER"?(n="folder",a=$("<a></a>").attr("target",i).attr("title",this.description).attr("parentPath",t.path).text(this.title).click(function(){s.draw($(this).attr("parentPath"))})):(this.url!=undefined?(n="action greybox",o=webAppPath+this.url):(n="action greybox",o=webAppPath+this.link),a=$("<a></a>").attr("target",i).attr("title",this.description).text(this.title).attr("href",o)),$("<li></li>").attr("class",n).appendTo(r).append(a)}}),$("#contentList-"+this.name+" a").tooltip({showURL:!1}),$("li.greybox a").click(function(){var e=this.title||this.innerHTML||this.href,t=this.href.replace(/'/g,"&#39;");return $.fancybox({type:"iframe",href:t,width:$(window).width(),height:$(window).height()}),!1})}}),PageTitleComponent=NavigatorBaseComponent.extend({update:function(){var e=this;NavigatorBaseComponent.navigatorResponse==-1?$.getJSON(wd.cdf.endpoints.getJSONSolution()+"?mode=contentlist&path="+(NavigatorBaseComponent.path||Dashboards.getPathParameter()),function(t){e.processPageTitleResponse(t)}):this.processPageTitleResponse(NavigatorBaseComponent.navigatorResponse)},processPageTitleResponse:function(e){NavigatorBaseComponent.navigatorResponse=e;var t=this.findPageTitleObject(e.content,e.id);t.title!=undefined&&t.description!=undefined&&$("#"+this.htmlObject).text(t.title+(t.description!=""?" - "+t.description:""))},findPageTitleObject:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id==t)return r;if((t+"/").indexOf(r.id+"/")>=0)return this.findPageTitleObject(r.folders,t);continue}}});pen.define("cdf/components/navigation",function(){});var AnalyzerComponent=BaseComponent.extend({update:function(){this.clear();var e=this.getOptions(),t={solution:e.solution,path:e.path,action:e.action};delete e.solution,delete e.path,delete e.action;var n=this.isEditMode()?"editor":"viewer";$.extend(e,{ts:(new Date).getTime()});var r=wd.cdf.endpoints.getAnalyzer(t,n,e),i=this.generateIframe(r);$("#"+this.htmlObject).html(i)},getOptions:function(){var e={solution:this.solution,path:this.path,action:this.action,command:this.command==undefined?"open":this.command,showFieldList:this.showFieldList==undefined?!1:this.showFieldList,showRepositoryButtons:this.showRepositoryButtons==undefined?!1:this.showRepositoryButtons,frameless:this.frameless==undefined?!1:this.frameless};return $.map(this.parameters,function(t){e[t[0]]=t.length==3?t[2]:Dashboards.getParameterValue(t[1])}),e},isEditMode:function(){return this.viewOnly!=undefined?!this.viewOnly||this.editMode:this.editMode},generateIframe:function(e){var t=this.height?this.height:"480px",n=this.width?this.width:"100%",r="<iframe id ='iframe_"+this.htmlObject+"' "+"style='height:100%;width:100%;border:0px' "+"frameborder='0' src='"+e+"'/>";return r}}),ExecuteAnalyzerComponent=AnalyzerComponent.extend({update:function(){var e=this,t=$("#"+this.htmlObject);$.inArray(t[0].tagName.toUpperCase(),["SPAN","DIV"])>-1&&(t=$("<button/>").appendTo(t.empty()),t[0].tagName=="DIV"&&t.wrap("<span/>"),this.label!=undefined&&t.text(this.label),t.button()),t.unbind("click"),t.bind("click",function(){var t=typeof e.preChange=="undefined"?!0:e.preChange();t&&e.executeAnalyzerComponent(),typeof e.postChange=="undefined"?!0:e.postChange()})},executeAnalyzerComponent:function(){var e=this.isEditMode()?"editor":"viewer",t=this.getOptions(),n={};t.solution&&$.extend(n,{solution:t.solution}),t.path&&$.extend(n,{path:t.path}),t.action&&$.extend(n,{action:t.action}),delete t.solution,delete t.path,delete t.action,$.extend(t,{ts:(new Date).getTime()}),$.fancybox({type:"iframe",href:wd.cdf.endpoints.getAnalyzer(n,e,t),width:$(window).width(),height:$(window).height()-50})}});pen.define("cdf/components/Pentaho.Analyzer",function(){});var JpivotComponent=BaseComponent.extend({update:function(){this.iframeScrolling==undefined&&(this.iframeScrolling="no");var e='<iframe id="jpivot_'+this.htmlObject+'" scrolling="'+this.iframeScrolling+'" onload="var dynamicHeight = this.contentWindow.document.body.offsetHeight+50; this.style.height = dynamicHeight + \'px\';" frameborder="0" height="'+this.iframeHeight+'" width="'+this.iframeWidth+'" src="',t={},n=new Array(this.parameters.length);for(var r=0,i=n.length;r<i;r++){var s=this.parameters[r][0],o=Dashboards.getParameterValue(this.parameters[r][1]);t[s]=o}e+=wd.cdf.endpoints.getCdfXaction(this.path,this.action,this.solution,t),e+='"></iframe>',$("#"+this.htmlObject).html(e)}}),PivotLinkComponent=BaseComponent.extend({update:function(){var e=this.tooltip==undefined?"View details in a Pivot table":this.tooltip,t=$('<a class="pivotLink"> </a>').html(this.content).attr("href","javascript:PivotLinkComponent.openPivotLink("+this.name+")").attr("title",e);$("#"+this.htmlObject).empty(),$("#"+this.htmlObject).html(t),$("a.pivotLink").tooltip({showURL:!1,track:!0,delay:1e3,opacity:.5,content:e})}},{openPivotLink:function(e){var t=wd.cdf.endpoints.getPivot("system","pentaho-cdf/actions","jpivot.xaction")+"&",n=e.pivotDefinition,r=[];for(p in n){var i=p,s=typeof n[p]=="function"?n[p]():n[p];r.push(i+"="+encodeURIComponent(s))}t+=r.join("&"),t=t.replace(/'/g,"&#39;"),$.fancybox({type:"iframe",href:t,width:$(window).width(),height:$(window).height()})}});pen.define("cdf/components/Pentaho.JPivot",function(){});var PrptComponent=BaseComponent.extend({getIframeName:function(){return this.htmlObject+"_"+"prptFrame"},getIframe:function(){return'<iframe name="'+this.getIframeName()+'" style="width:100%;height:100%;border:0px" frameborder="0"/>'},setIframeUrl:function(e,t){e[0].contentWindow.location=t},startLoading:function(){this.loading||(this.loading=!0,Dashboards.incrementRunningCalls())},stopLoading:function(){this.loading&&(this.loading=!1,Dashboards.decrementRunningCalls())},update:function(){this.clear();var e=this.getOptions(),t=this.getParams(),n=this.getReportOptions();$.each(n,function(e,n){t[e]!=undefined&&delete e});var r={solution:e.solution,path:e.path,action:e.action};delete e.solution,delete e.path,delete e.action,delete n.solution,delete n.path,delete n.action;var i=this.downloadMode,s=e.showParameters?"viewer":"report";if(i==null){var o=e["output-target"];i=(o.indexOf("html")==-1||o.indexOf("mime-message")!=-1)&&o.indexOf("text")==-1}if(e["dashboard-mode"]){e.showParameters&&Dashboards.log("showParameters not supported with IFrame = False");var u=this.usePost?"POST":"GET",a=wd.cdf.endpoints.getReport(r,"report",{ts:(new Date).getTime()});$.each(n,function(e,n){t[e]==undefined&&(t[e]=n)});var f=this;$.ajax({url:a,type:u,data:t,dataType:"html",success:function(e){$("#"+f.htmlObject).html(e)}})}else{var l=$(this.getIframe()),c=$("#"+this.htmlObject);c.empty(),l=l.appendTo(c),this.autoResize&&(this._sHeight==null?(this._sHeight=c.height(),this._sWidth=c.width()):(c.height(this._sHeight),c.width(this._sWidth)));if(this.usePost){$.each(e,function(e,n){t[e]==undefined&&(t[e]=n)});var a=wd.cdf.endpoints.getReport(r,s,{ts:(new Date).getTime()});this._postToUrl(c,l,a,t,this.getIframeName())}else{$.extend(e,{ts:(new Date).getTime()});var a=wd.cdf.endpoints.getReport(r,s,e);e.showParameters&&this.autoResize&&(Dashboards.log("PrptComponent: autoResize disabled because showParameters=true"),this.autoResize=!1),this.startLoading();var f=this;l.load(function(){if(e.showParameters){var t=$(this.contentWindow.document.body),n=t.find("#reportContent");n.load(function(){f.autoResize&&f._resizeToReportFrame(n[0],c,e)})}f.stopLoading()}),this.setIframeUrl(l,a)}i&&this.stopLoading()}},getOptions:function(){var e={paginate:this.paginate||!1,showParameters:this.showParameters||!1,autoSubmit:this.autoSubmit||this.executeAtStart||!1,"dashboard-mode":this.iframe==undefined?!1:!this.iframe,solution:this.solution,path:this.path,action:this.action,renderMode:"REPORT",htmlProportionalWidth:!1};return this.paginate?(e["output-target"]="table/html;page-mode=page",e["accept-page"]=0):(e["output-target"]="table/html;page-mode=stream",e["accept-page"]=-1),_.each(this.parameters,function(t,n){var r=t[0],i=t[1],s;try{s=Dashboards.getParameterValue(i)}catch(o){!_.isObject(i)||_.isFunction(i)?printValue=i:printValue=JSON.stringify(i),Dashboards.log("GetOptions detected static parameter "+r+"="+printValue+". "+"The parameter will be used as value instead its value obtained from getParameterValue"),s=i}s==null&&t.length==3?s=t[2]:s===undefined&&(s=i),_.isFunction(s)&&(s=s()),e[r]=s}),e},getParams:function(){var e={};return this.paginate?(e["output-target"]="table/html;page-mode=page",e["accept-page"]=0):(e["output-target"]="table/html;page-mode=stream",e["accept-page"]=-1),_.each(this.parameters,function(t,n){var r=t[0],i=t[1],s;try{s=Dashboards.getParameterValue(i)}catch(o){!_.isObject(i)||_.isFunction(i)?printValue=i:printValue=JSON.stringify(i),Dashboards.log("GetParams detected static parameter "+r+"="+printValue+". "+"The parameter will be used as value instead its value obtained from getParameterValue"),s=i}s==null&&t.length==3?s=t[2]:s===undefined&&(s=i),_.isFunction(s)&&(s=s()),e[r]=s}),e},getReportOptions:function(){var e={paginate:this.paginate||!1,showParameters:this.showParameters||!1,autoSubmit:this.autoSubmit||this.executeAtStart||!1,"dashboard-mode":this.iframe==undefined?!1:!this.iframe,solution:this.solution,path:this.path,name:this.action,renderMode:"REPORT",htmlProportionalWidth:!1,"accepted-page":-1};return this.paginate?(e["output-target"]="table/html;page-mode=page",e["accept-page"]=0):(e["output-target"]="table/html;page-mode=stream",e["accept-page"]=-1),e},_postToUrl:function(e,t,n,r,i){this.startLoading();var s=this._getParamsAsForm(document,n,r,this.getIframeName());e[0].appendChild(s);var o=this;t.load(function(){o.autoResize&&o._resizeToReportFrame(t[0],e,r),o.stopLoading()}),s.submit()},_resizeToReportFrame:function(e,t,n){var r=n["output-target"],i=function(e){return e.indexOf("html")!=-1&&e.indexOf("mime")==-1},s=function(e){return e.indexOf("text")!=-1},o=function(e){return e.indexOf("xml")!=-1};try{var u=e.contentWindow.document;if(e.contentWindow.document){var a=null;i(r)||s(r)?a=u.body:o(r)&&(a=u.firstChild);if(a!=null){var f=0,l=0;if(i(r)){var c=$(a);f=c.outerHeight(!0)-c.outerHeight(!1),l=c.outerWidth(!0)-c.outerWidth(!1)}t.height(a.scrollHeight+f),t.width(a.scrollWidth+l)}}}catch(h){Dashboards.log(h)}},_getParamsAsForm:function(e,t,n,r){var i=e.createElement("form");i.setAttribute("method","post"),i.setAttribute("action",t),i.setAttribute("target",r);for(var s in n)if(n.hasOwnProperty(s)){var o=n[s];if($.isArray(o))for(var u=0;u<o.length;u++){var a=e.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",s),a.setAttribute("value",o[u]),i.appendChild(a)}else{var a=e.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",s),a.setAttribute("value",o),i.appendChild(a)}}return i}}),SchedulePrptComponent=PrptComponent.extend({visible:!1,update:function(){var e=this,t=$("#"+this.htmlObject);$.inArray(t[0].tagName.toUpperCase(),["SPAN","DIV"])>-1&&(t=$("<button/>").appendTo(t.empty()),t[0].tagName=="DIV"&&t.wrap("<span/>"),this.label!=undefined&&t.text(this.label),t.button(),t.addClass("scheduler_button")),t.unbind("click"),t.bind("click",function(){var t=typeof e.preChange=="undefined"?!0:e.preChange();t&&e.schedulePrptComponent(),typeof e.postChange=="undefined"?!0:e.postChange()})},schedulePrptComponent:function(){var e={},t,n=!1;guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},triggerError=function(e,t){n=!0,$(t).css("backgroundColor","rgb(255,159,159)");var r=$(t).val();$(t).val(e),setTimeout(function(){$(t).css("backgroundColor","white"),$(t).val(r)},2e3)},getFileName=function(){var e=r.path;return e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."))},getDefaultLocation=function(){return"/home/"+Dashboards.context.user},getHour=function(){var e=$("#hours").val();return $("#amPm").val()=="pm"?(e=parseInt(e,10)+12,e==24&&(e=12)):e=="12"&&(e=0),e},getUTC=function(e,t){var n=e.split("/");return t?(new Date(n[2],n[0]-1,n[1],23,59,59,0)).getTime():(new Date(n[2],n[0]-1,n[1],0,0,0,0)).getTime()},getISO=function(e){var t=e.split("/");return(new Date(t[2],t[0]-1,t[1],0,0,0,0)).toISOString()},makeSelect=function(e,t,n,r){var i='<select id ="'+r+'">';for(var s=e;s<=t;s+=n)s<10?i+='<option value="'+s+'">0'+s+"</option>":i+='<option value="'+s+'">'+s+"</option>";return i+="</select>",i},validateStartDate=function(e,t){var n=new Date;(isNaN(e)||e<n.getTime())&&triggerError("Incorrect Date, pick date from calendar",t)},validateEndDate=function(e,t){if($("#endByRadio").is(":checked")){var n=new Date,r=$("#rangeStartIn").val(),i=getUTC(r);isNaN(i)||(i>e?triggerError("End Date > Start Date",t):(isNaN(e)||e<n.getTime())&&triggerError("Incorrect Date",t))}},validateName=function(e){e==""&&triggerError("You must choose a name","#nameIn");var t=/[^0-9a-zA-Z ]/;e.match(t)&&triggerError("Invalid characters, alpha-numeric text only.","#nameIn")},startTimeGetter=function(e){var t=getHour(),n=$("#minutes").val(),r=n*6e4+t*36e5,i;return e!=undefined?(i=getUTC($(e).val())+r,validateStartDate(i,e)):(i=getUTC($("#rangeStartIn").val())+r,validateStartDate(i,"#rangeStartIn")),(new Date(i)).toISOString()},endTimeGetter=function(){var e=getUTC($("#endByIn").val(),!0);return validateEndDate(e,"#endByIn"),(new Date(e)).toISOString()},getSelectedDaysOfWeek=function(){var e=new Array,t=0;return $("#sunday").is(":checked")&&(e[t++]=0),$("#monday").is(":checked")&&(e[t++]=1),$("#tuesday").is(":checked")&&(e[t++]=2),$("#wednesday").is(":checked")&&(e[t++]=3),$("#thursday").is(":checked")&&(e[t++]=4),$("#friday").is(":checked")&&(e[t++]=5),$("#saturday").is(":checked")&&(e[t++]=6),e},getDayOfMonth=function(){return dayOfMonth=$("#recurrPatternIn").val(),dayOfMonth<1?triggerError(">0","#recurrPatternIn"):dayOfMonth>31&&triggerError("<=31","#recurrPatternIn"),dayOfMonth},setParameters=function(){e={inputFile:r.path,jobName:$("#nameIn").val(),outputFile:$("#locationIn").val()},n=!1;var t=$("#recurrId").val(),i=$("#nameIn").val();validateName(i);switch(t){case"once":var s=startTimeGetter("#startDateIn"),o={repeatCount:0,repeatInterval:0,startTime:s,uiPassParam:"RUN_ONCE"};e.simpleJobTrigger=o;break;case"seconds":var s=startTimeGetter(),u=$("#recurrPatternInSec").val();u<1&&triggerError(">0","#recurrPatternInSec");if($("#endByRadio").is(":checked"))var a=endTimeGetter();var o={endTime:a,repeatCount:-1,repeatInterval:u,startTime:s,uiPassParam:"SECONDS"};e.simpleJobTrigger=o;break;case"minutes":var s=startTimeGetter(),f=$("#recurrPatternInMin").val();f<1&&triggerError(">0","#recurrPatternInMin");if($("#endByRadio").is(":checked"))var a=endTimeGetter();var o={endTime:a,repeatCount:-1,repeatInterval:f*60,startTime:s,uiPassParam:"MINUTES"};e.simpleJobTrigger=o;break;case"hours":var s=startTimeGetter(),l=$("#recurrPatternInHour").val();l<1&&triggerError(">0","#recurrPatternInHour");if($("#endByRadio").is(":checked"))var a=endTimeGetter();var o={endTime:a,repeatCount:-1,repeatInterval:l*3600,startTime:s,uiPassParam:"HOURS"};e.simpleJobTrigger=o;break;case"daily":if($("#endByRadio").is(":checked"))var a=endTimeGetter();var s=startTimeGetter();if($("#weekDayRadio").is(":checked")){var c={daysOfWeek:[1,2,3,4,5],endTime:a,startTime:s,uiPassParam:"DAILY"};e.complexJobTrigger=c}else if($("#dayRadio").is(":checked")){var h=$("#recurrPatternInDay").val();h<1&&triggerError(">0","#recurrPatternInDay");var o={entTime:a,repeatCount:-1,repeatInterval:h*86400,startTime:s,uiPassParam:"DAILY"};e.simpleJobTrigger=o}break;case"weekly":var s=startTimeGetter();if($("#endByRadio").is(":checked"))var a=endTimeGetter();var c={daysOfWeek:getSelectedDaysOfWeek(),endTime:a,startTime:s,uiPassParam:"WEEKLY"};e.complexJobTrigger=c;break;case"monthly":var s=startTimeGetter();if($("#endByRadio").is(":checked"))var a=endTimeGetter();var c={endTime:a,startTime:s,uiPassParam:"MONTHLY"};$("#monthRadio").is(":checked")?c.daysOfMonth=getDayOfMonth():(c.daysOfWeek=$("#monthOpt2Select").val(),c.weeksOfMonth=$("#monthOpt1Select").val()),e.complexJobTrigger=c;break;case"yearly":var s=startTimeGetter();if($("#endByRadio").is(":checked"))var a=endTimeGetter();var c={endTime:a,startTime:s,uiPassParam:"YEARLY"};$("#yearRadio").is(":checked")?(c.daysOfMonth=getDayOfMonth(),c.monthsOfYear=$("#yearEveryMonth").val()):(c.daysOfWeek=$("#yearOpt2Select").val(),c.monthsOfYear=$("#yearMonthSelect").val(),c.weeksOfMonth=$("#yearOpt1Select").val()),e.complexJobTrigger=c;break;case"cron":var p=$("#cronString").val();validateCron(p);var s=getISO($("#rangeStartIn").val());$("#endByRadio").is(":checked")&&(a=endTimeGetter());var d={cronString:p,endTime:a,startTime:s,uiPassParam:"CRON"};e.cronJobTrigger=d}},validateCron=function(e){var t=e.split(" ");t.length<7?triggerError("Cron Expression too short","#cronString"):t.length>7?triggerError("Cron Expression too long","#cronString"):t[3]!="?"&&t[3]!="*"&&t[5]!="?"&&t[5]!="*"&&triggerError("M+W unsuported.(M+? or W+?)","#cronString")},hideAll=function(){$("#rangeOfRecurrDiv").hide(),$("#cronDiv").hide(),$("#recurrPatternDiv").hide(),$("#startTimeDiv").hide(),$("#rangeOfRecurrOnceDiv").hide(),$("#patternSec").hide(),$("#patternMin").hide(),$("#patternHour").hide(),$("#patternDay").hide(),$("#patternWeek").hide(),$("#patternMonth").hide(),$("#patternYear").hide()},changeOpts=function(){var e=$("#recurrId").val();hideAll();switch(e){case"once":$("#startTimeDiv").show(),$("#rangeOfRecurrOnceDiv").show();break;case"seconds":$("#startTimeDiv").show(),$("#recurrPatternDiv").show(),$("#patternSec").show(),$("#rangeOfRecurrDiv").show();break;case"minutes":$("#startTimeDiv").show(),$("#recurrPatternDiv").show(),$("#patternMin").show(),$("#rangeOfRecurrDiv").show();break;case"hours":$("#startTimeDiv").show(),$("#recurrPatternDiv").show(),$("#patternHour").show(),$("#rangeOfRecurrDiv").show();break;case"daily":$("#startTimeDiv").show(),$("#recurrPatternDiv").show(),$("#patternDay").show(),$("#rangeOfRecurrDiv").show();break;case"weekly":$("#startTimeDiv").show(),$("#recurrPatternDiv").show(),$("#patternWeek").show(),$("#rangeOfRecurrDiv").show();break;case"monthly":$("#startTimeDiv").show(),$("#recurrPatternDiv").show(),$("#patternMonth").show(),$("#rangeOfRecurrDiv").show();break;case"yearly":$("#startTimeDiv").show(),$("#recurrPatternDiv").show(),$("#patternYear").show(),$("#rangeOfRecurrDiv").show();break;case"cron":$("#cronDiv").show(),$("#rangeOfRecurrDiv").show()}},createJobParameter=function(e,t,n,i){return!i&&r.getReportOptions()[e]!=undefined?{name:e,stringValue:new Array(""+r.getReportOptions()[e]),type:n}:{name:e,stringValue:new Array(""+t),type:n}};var r=this,i='<option value="0">January</option><option value="1">February</option><option value="2">March</option><option value="3">April</option><option value="4">May</option><option value="5">June</option><option value="6">July</option><option value="7">August</option><option value="8">September</option><option value="9">October</option><option value="10">November</option><option value="11">December</option>',s='<option value="0">sunday</option><option value="1">monday</option><option value="2">tuesday</option><option value="3">wednesday</option><option value="4">thursday</option><option value="5">friday</option><option value="6">saturday</option>',o='<option value="0">first</option><option value="1">second</option><option value="2">third</option><option value="3">fourth</option><option value="4">last</option>',u='<label id="err" style="display:none">Incorrect Input</label>',a='<div id="nameDiv"><form style="display:inline-block" id="nameForm"><span class="dialog-label">Name:</span><input id="nameIn" type="text" value="'+getFileName()+'"></form></div>',f='<div id="locationDiv"><form style="display:inline-block" id="nameForm"><span class="dialog-label">Location:</span><input id="locationIn" type="text" value="'+getDefaultLocation()+'"></form></div>',l='<div id="groupDiv"><form style="display:inline-block" id="groupForm"><span class="dialog-label">Group:</span><input id="groupIn" type="text" value=""></form></div>',c='<div><form style="display:inline-block" id="descForm"><span class="dialog-label">Description:</span><input id="descIn" type="text" value=""></form></div>',h='<div id = "recurrenceDiv"><br><span class="dialog-title" style="width: 100px; display: inline-block;">Recurrence:</span><select id="recurrId" onChange="changeOpts()" style="margin-left: 0px;"><option value = "once" selected>Run Once</option><option value = "seconds">Seconds</option><option value = "minutes">Minutes</option><option value = "hours">Hours</option><option value = "daily">Daily</option><option value = "weekly">Weekly</option><option value = "monthly">Monthly</option><option value = "yearly">Yearly</option><option value = "cron">Cron</option></select></br></div>',p='<div id="cronDiv"  style="display:none"><form><span class="dialog-label">Cron String:</span><input id="cronString" type="text" value=""></form></div>',d=makeSelect(1,12,1,"hours"),v=makeSelect(0,59,1,"minutes"),m='<select id = "amPm"><option value="am">AM</option><option value="pm">PM</option></select>',g='<div id="startTimeDiv"><br><span class="dialog-title" style="width: 100px; display: inline-block;">Start Time:</span>'+d+v+m+"</div>",y='<div id="recurrPatternDiv" style = "display:none"><div id="patternSec" ><label style="display:inline-block; margin-left: 100px; font-weight: 500;">Every</label>&nbsp;&nbsp;<form style="display:inline-block"><input id= "recurrPatternInSec" type="text" size="3" style="width:30px;"></form><label style="display:inline-block; font-weight: 500;"> second(s)</label></div><div id="patternMin" ><label style="display:inline-block; margin-left: 100px; font-weight: 500;">Every</label>&nbsp;&nbsp;<form style="display:inline-block"><input id= "recurrPatternInMin" type="text" size="3" style="width:30px;"></form><label style="display:inline-block; font-weight: 500;"> minute(s)</label></div><div id="patternHour" ><label style="display:inline-block; margin-left: 100px; font-weight: 500;">Every</label>&nbsp;&nbsp;<form style="display:inline-block"><input id= "recurrPatternInHour" type="text" size="3" style="width:30px;"></form><label style="display:inline-block; font-weight: 500;"> hour(s)</label></div><div id="patternDay" ><input type="radio" name ="day" value="day" id="dayRadio" style="margin-left: 100px; font-weight: 500;" checked> <label style="display:inline-block">Every</label>&nbsp;&nbsp;<form style="display:inline-block"><input id= "recurrPatternInDay" type="text" size="3" style="width:30px;"></form><label style="display:inline-block; font-weight: 500;"> day(s)</label></br><input type="radio" name ="day" value="weekDay" id="weekDayRadio" style="margin-left: 100px;"> Every weekday</div><div id="patternWeek" ><form><div id="errorCheckboxes" style="display:none"><label id="errWeek">Choose at least one week</label></div><input type="checkbox" name="weekday" value="monday" id="monday" style="margin-left: 100px;"> Monday<input type="checkbox" name="weekday" value="tuesday" id="tuesday"> Tuesday<input type="checkbox" name="weekday" value="wednesday" id="wednesday"> Wednesday<input type="checkbox" name="weekday" value="thursday" id="thursday"> Thursday</br><input type="checkbox" name="weekday" value="friday" id="friday" style="margin-left: 100px;"> Friday<input type="checkbox" name="weekday" value="saturday" id="saturday"> Saturday<input type="checkbox" name="weekday" value="sunday" id="sunday"> Sunday</form></div><div id="patternMonth" ><input id="monthRadio" type="radio" name ="month" value="day" style="margin-left: 100px;" checked> <label style="display:inline-block; font-weight: 500;">Day</label>&nbsp;&nbsp;<form style="display:inline-block"><input id= "recurrPatternIn" type="text" size="3" style="width:205px;"></form><label style="display:inline-block; font-weight: 500;"> of every month</label></br><input type="radio" name ="month" value="the" style="margin-left: 100px;"> <label style="display:inline-block; font-weight: 500;">The</label>&nbsp;&nbsp;<select id="monthOpt1Select">'+o+"</select>"+'<select id="monthOpt2Select">'+s+'</select><label style=" font-weight: 500;"> of every month</label>'+"</div>"+'<div id="patternYear" >'+'<input id ="yearRadio" type="radio" name ="year" value="month" style="margin-left: 100px;" checked> <label style="display:inline-block; font-weight: 500;">Every</label>&nbsp;'+'<select id="yearEveryMonth">'+i+'</select><input id="yearDayMonth"type="text" size="3">'+"</br>"+'<input type="radio" name ="year" value="the" style="margin-left: 100px;"> <label style="display:inline-block; font-weight: 500;">The</label>&nbsp;'+'<select id="yearOpt1Select">'+o+"</select>"+'<select id="yearOpt2Select">'+s+'</select><label style=" font-weight: 500;">of&nbsp;&nbsp;</label>'+'<select id="yearMonthSelect">'+i+"</select>"+"</div>"+"</div>",b='<div id="rangeOfRecurrDiv" style="display:none"><br><span class="dialog-title"><strong>Range of Recurrence:</strong> </span><form><span class="dialog-label">Start:</span><input type="text" id="rangeStartIn"></form><form><span class="dialog-label">End:</span><input type="radio" name ="end" value="noEnd" checked> No end date</br><input type="radio" name ="end" value ="endBy" id="endByRadio" style="margin-left:100px;"> End by:&nbsp;&nbsp;<input id= "endByIn" type="text" style="width:187px;"></form></div>',w='<div id="rangeOfRecurrOnceDiv"><form><span class="dialog-label">Start Date:</span><input id= "startDateIn" type="text" value=""></form></div>',E='<div id="mailQuestionDiv"><label>Would you like to email a copy when the schedule runs?</label><br><input type="radio" name="mailRadio" value="no" id="mailRadioNo" checked onClick=\'$("#mailInfoDiv").hide(350)\'>&nbsp;No&nbsp;&nbsp;</input><input type="radio" name="mailRadio" value="yes" id="mailRadioYes" onClick=\'$("#mailInfoDiv").show(350)\'>&nbsp;Yes&nbsp;&nbsp;</input></div>',S='<div id="mailInfoDiv" style="display:none"><label>To: (Use a semi-colon or comma to separate multiple email adresses.)</label><form><input id="toInput" style="width:100%" type="text"></input></form><label>Subject:</label><form><input id="subjectInput" style="width:100%" type="text" value="'+getFileName()+" schedule has successfully run."+'"></input></form>'+"<label>Attachment Name:</label>"+'<form><input id="attachmentNameInput" style="width:100%" type="text" value="'+$("#nameIn").val()+'"></input></form>'+"<label>Message (optional)</label>"+'<textarea id="messageInput" type="text" rows="4" style="width:100%"></textarea>'+"</div>";scheduleRequest=function(t){var n=r.outputTarget?r.outputTarget:"table/html;page-mode=page",i=new Array,s=0;i[s++]=createJobParameter("output-target",n,"string",!0),i[s++]=createJobParameter("accepted-page","0","string"),i[s++]=createJobParameter("showParameters","true","string"),i[s++]=createJobParameter("renderMode","XML","string"),i[s++]=createJobParameter("htmlProportionalWidth","false","string"),t&&(i[s++]=createJobParameter("_SCH_EMAIL_TO",$("#toInput").val(),"string"),i[s++]=createJobParameter("_SCH_EMAIL_CC","","string"),i[s++]=createJobParameter("_SCH_EMAIL_BCC","","string"),i[s++]=createJobParameter("_SCH_EMAIL_SUBJECT",$("#subjectInput").val(),"string"),i[s++]=createJobParameter("_SCH_EMAIL_MESSAGE",$("#messageInput").val(),"string"),i[s++]=createJobParameter("_SCH_EMAIL_ATTACHMENT_NAME",$("#attachmentNameInput").val(),"string"));for(var o=0;o<r.parameters.length;o++)i[s++]=createJobParameter(r.parameters[o][0],r.parameters[o][1],"string",!0);e.jobParameters=i;var u=!1,a=$.ajaxSettings.async;return $.ajaxSetup({async:!1}),$.ajax({url:wd.cdf.endpoints.getScheduledJob(),type:"POST",data:JSON.stringify(e),contentType:"application/json",success:function(e){alert("Successfully scheduled."),u=!0},error:function(e){alert(e.responseText),sucess=!1}}),$.ajaxSetup({async:a}),u};var x=a+f+h+p+g+y+b+w,T=E+S,N=!1;$.ajax({type:"GET",url:wd.cdf.endpoints.getEmailConfig()+"/isValid",success:function(e){N=e}});var C={basicState:{html:x,title:"Schedule Report",buttons:{Cancel:-1,Ok:1},submit:function(r,i,s,o){t=guid();if(i==-1)$.prompt.close();else if(i==1)return setParameters(),n?(e={},!1):N?($("#attachmentNameInput").val($("#nameIn").val()),$.prompt.goToState("mailState"),!1):scheduleRequest()}},mailState:{html:T,title:"Schedule Report",buttons:{Back:-1,Ok:1},submit:function(e,t,n,r){if(t==-1)return $.prompt.goToState("basicState"),!1;if(t==1){if($("#mailRadioNo").is(":checked"))return scheduleRequest();if($("#mailRadioYes").is(":checked")){var i=/^\S+@\S+$/;return $("#toInput").val().match(i)?scheduleRequest(!0):(triggerError("Invalid email","#toInput"),!1)}return!1}}}};$.prompt(C,{classes:"scheduler"}),$(".scheduler #jqi").css("width","510px"),$(document).ready(function(e){$("#startDateIn").datepicker({minDate:0}),$("#rangeStartIn").datepicker({minDate:0}),$("#endByIn").datepicker({minDate:0}),$("#startDateIn").datepicker("setDate",new Date),$("#rangeStartIn").datepicker("setDate",new Date)})}}),ExecutePrptComponent=PrptComponent.extend({visible:!1,update:function(){var e=this,t=$("#"+this.htmlObject);$.inArray(t[0].tagName.toUpperCase(),["SPAN","DIV"])>-1&&(t=$("<button/>").appendTo(t.empty()),t[0].tagName=="DIV"&&t.wrap("<span/>"),this.label!=undefined&&t.text(this.label),t.button()),t.unbind("click"),t.bind("click",function(){var t=typeof e.preChange=="undefined"?!0:e.preChange();t&&e.executePrptComponent(),typeof e.postChange=="undefined"?!0:e.postChange()})},executePrptComponent:function(){var e=this.getOptions(),t={};e.solution&&$.extend(t,{solution:e.solution}),e.path&&$.extend(t,{path:e.path}),e.action&&$.extend(t,{action:e.action}),delete e.solution,delete e.path,delete e.action,$.extend(e,{ts:(new Date).getTime()}),$.fancybox({type:"iframe",href:wd.cdf.endpoints.getReport(t,"viewer",e),width:$(window).width(),height:$(window).height()-50})}});pen.define("cdf/components/Pentaho.Reporting",function(){});var XactionComponent=BaseComponent.extend({update:function(){var e=this;try{if(typeof this.iframe=="undefined"||!this.iframe){var t=new Array(this.parameters?this.parameters.length:0);for(var n=0,r=t.length;n<r;n++){var i=this.parameters[n][0],s=this.parameters[n][1]==""?this.parameters[n][2]:Dashboards.getParameterValue(this.parameters[n][1]);this.value=="NIL"&&(this.value=this.parameters[n][2]),t[n]=[i,s]}if(typeof this.serviceMethod=="undefined"||this.serviceMethod=="ServiceAction"){var o=Dashboards.callPentahoAction(e,this.solution,this.path,this.action,t,null);o!=null&&$("#"+e.htmlObject).html(o.find("ExecuteActivityResponse:first-child").text())}else{var u=Dashboards.pentahoServiceAction(this.serviceMethod,"html",this.solution,this.path,this.action,t,null);$("#"+e.htmlObject).html(u)}}else{var a='<iframe id="iframe_'+this.htmlObject+'"'+' frameborder="0"'+' height="100%"'+' width="100%" />',f=$(a),l=wd.cdf.endpoints.getCdfXaction(this.path,this.action,this.solution)+"&wrapper=false",t=new Array(this.parameters.length);for(var n=0,r=t.length;n<r;n++){var c="&"+encodeURIComponent(this.parameters[n][0])+"=",h="";this.parameters[n][1]==""?h=encodeURIComponent(this.parameters[n][2]):(h=encodeURIComponent(Dashboards.getParameterValue(this.parameters[n][1])),h=="NIL"&&(h=encodeURIComponent(this.parameters[n][2]))),l+=c+h}this.loading||(this.loading=!0,Dashboards.incrementRunningCalls()),f.load(function(){this.contentWindow.document.body.innerHTML&&(e.loading=!1,Dashboards.decrementRunningCalls())}),$("#"+this.htmlObject).empty().append(f),f[0].contentWindow.location=l}}catch(p){}}}),ExecuteXactionComponent=BaseComponent.extend({visible:!1,update:function(){var e=this,t=$("#"+this.htmlObject);$.inArray(t[0].tagName.toUpperCase(),["SPAN","DIV"])>-1&&(t=$("<button/>").appendTo(t.empty()),t[0].tagName=="DIV"&&t.wrap("<span/>"),this.label!=undefined&&t.text(this.label),t.button()),t.unbind("click"),t.bind("click",function(){var t=typeof e.preChange=="undefined"?!0:e.preChange();t&&e.executeXAction(),typeof e.postChange=="undefined"?!0:e.postChange()})},executeXAction:function(){var e=wd.cdf.endpoints.getCdfXaction(this.path,this.action,this.solution)+"&",t=new Array(this.parameters.length),n=[];for(var r=0,i=t.length;r<i;r++){var s=this.parameters[r][0],o=Dashboards.getParameterValue(this.parameters[r][1]);$.isArray(o)?$(o).each(function(e){n.push(s+"="+encodeURIComponent(this))}):n.push(s+"="+encodeURIComponent(o))}e+=n.join("&"),e=e.replace(/'/g,"&#39;"),$.fancybox({type:"iframe",href:e,width:$(window).width(),height:$(window).height()-50})}});pen.define("cdf/components/Pentaho.XAction",function(){}),pen.define("cdf/components/pentaho",function(){});var SimpleAutoCompleteComponent=BaseComponent.extend({ph:undefined,completionCallback:undefined,update:function(){var e=this;if(this.ph==undefined){this.ph=$("#"+this.htmlObject).empty(),this.input=$("<input type='text'>").appendTo(this.ph),this.query=Dashboards.getQuery(this.queryDefinition);var e=this;this.input.autocomplete({source:function(t,n){return e.triggerQuery(t.term,n)}}),this.input.change(function(){Dashboards.processChange(e.name)}).keyup(function(t){t.keyCode==13&&Dashboards.processChange(e.name)})}},getList:function(e){if(typeof this.postFetch=="function"){var t=this.postFetch(e);e=t||e}return e.resultset.map(function(e){return e[0]})},handleQuery:function(e){var t=this;return function(n){var r=t.getList(n);e(r)}},triggerQuery:function(e,t){var n=$.extend([],this.parameters),r=this.searchParam||"searchBox";r=="searchBox"?this.query.setSearchPattern(e):n.push([this.searchParam,e]),e.length>=this.minTextLength?this.query.fetchData(n,this.handleQuery(t)):t([])},getValue:function(){return this.input.val()}});pen.define("cdf/components/simpleautocomplete",function(){}),$.fn.dataTableExt!=undefined&&($.fn.dataTableExt.oApi.fnLengthChange=function(e,t){e._iDisplayLength=t,e.oApi._fnCalculateEnd(e),e._iDisplayEnd==e.aiDisplay.length&&(e._iDisplayStart=e._iDisplayEnd-e._iDisplayLength,e._iDisplayStart<0&&(e._iDisplayStart=0)),e._iDisplayLength==-1&&(e._iDisplayStart=0),e.oApi._fnDraw(e),$("select",e.oFeatures.l).val(t)},$.extend($.fn.dataTableExt.oSort,{"html-asc":function(e,t){var n=e.replace(/<.*?>/g,"").toLowerCase(),r=t.replace(/<.*?>/g,"").toLowerCase();return n<r?-1:n>r?1:0},"html-desc":function(e,t){var n=e.replace(/<.*?>/g,"").toLowerCase(),r=t.replace(/<.*?>/g,"").toLowerCase();return n<r?1:n>r?-1:0},"date-asc":function(e,t){var n=Date.parse(e),r=Date.parse(t);if(isNaN(n)||n==="")n=Date.parse("01/01/1970 00:00:00");if(isNaN(r)||r==="")r=Date.parse("01/01/1970 00:00:00");return n-r},"date-desc":function(e,t){var n=Date.parse(e),r=Date.parse(t);if(isNaN(n)||n==="")n=Date.parse("01/01/1970 00:00:00");if(isNaN(r)||r==="")r=Date.parse("01/01/1970 00:00:00");return r-n},"numeric-asc":function(e,t){return e=e=="-"||e==""?0:$.isNumeric(e)?e*1:0,t=t=="-"||t==""?0:$.isNumeric(t)?t*1:0,e<t?-1:e>t?1:0},"numeric-desc":function(e,t){return e=e=="-"||e==""?0:$.isNumeric(e)?e*1:0,t=t=="-"||t==""?0:$.isNumeric(t)?t*1:0,e<t?1:e>t?-1:0}})),jQuery.fn.DataTable!=undefined&&jQuery.fn.DataTable.ext!=undefined&&(jQuery.extend(jQuery.fn.DataTable.ext.classes,{sNoFooter:"",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next"}),jQuery.extend(jQuery.fn.DataTable.ext.oJUIClasses,{sNoFooter:"",sSortable:"",sSortAsc:"",sSortDesc:"",sSortColumn:"",sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w"}),jQuery.extend(jQuery.fn.DataTable.ext.pager,{two_button:{fnInit:function(e,t,n){var r=e.oLanguage.oPaginate,i=e.oClasses,s=function(t){e.oApi._fnPageChange(e,t.data.action)&&n(e)},o=e.bJUI?'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUIPrev+'"></span></a>'+'<a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUINext+'"></span></a>':'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button"></a>'+'<a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button"></a>';$(t).append(o);var u=$("a",t),a=u[0],f=u[1];e.oApi._fnBindAction(a,{action:"previous"},s),e.oApi._fnBindAction(f,{action:"next"},s),e.aanFeatures.p||(t.id=e.sTableId+"_paginate",a.id=e.sTableId+"_previous",f.id=e.sTableId+"_next",a.setAttribute("aria-controls",e.sTableId),f.setAttribute("aria-controls",e.sTableId))},fnUpdate:function(e,t){if(!e.aanFeatures.p)return;var n=e.oClasses,r=e.aanFeatures.p,i;for(var s=0,o=r.length;s<o;s++)i=r[s].firstChild,i&&(i.className=e._iDisplayStart===0?n.sPagePrevDisabled:n.sPagePrevEnabled,i=i.nextSibling,i.className=e.fnDisplayEnd()==e.fnRecordsDisplay()?n.sPageNextDisabled:n.sPageNextEnabled)}}}));var TableComponent=UnmanagedComponent.extend({ph:undefined,update:function(){if(!this.preExec())return;if(!this.htmlObject)return this.error("TableComponent requires an htmlObject");try{this.block(),this.setup();if(this.chartDefinition.paginateServerside)this.paginatingUpdate();else{var e=_.bind(function(e){this.rawData=e,this.processTableComponentResponse(e)},this),t=this.getSuccessHandler(e);this.queryState.setAjaxOptions({async:!0}),this.queryState.fetchData(this.parameters==undefined?[]:this.parameters,t)}}catch(n){Dashboards.log(n,"exception"),this.unblock()}},paginatingUpdate:function(){var e=this.chartDefinition;this.extraOptions=this.extraOptions||[],this.extraOptions.push(["bServerSide",!0]),this.extraOptions.push(["bProcessing",!0]),this.queryState.setPageSize(parseInt(e.displayLength||10));var t=_.bind(function(e){changedValues=undefined,typeof this.postFetch=="function"&&(changedValues=this.postFetch(e)),changedValues!=undefined&&(e=changedValues),this.processTableComponentResponse(e)},this);this.queryState.setCallback(t),this.queryState.setParameters(this.parameters),this.queryState.setAjaxOptions({async:!0}),this.queryState.fetchData(this.parameters,t)},setup:function(){var e=this.chartDefinition;if(e==undefined){Dashboards.log("Fatal - No chart definition passed","error");return}e.tableId=this.htmlObject+"Table",this.ph=$("#"+this.htmlObject).empty();var t=$.extend({},e);t.drawCallback=undefined,this.queryState=Dashboards.getQuery(t),this.query=this.queryState;var n=this.chartDefinition.sortBy||[],r=[];for(var i=0;i<n.length;i++){var s=n[i][0],o=n[i][1];r.push(s+(o=="asc"?"A":"D"))}this.queryState.setSortBy(r)},pagingCallback:function(e,t,n,r){function i(e){for(var n=0,r=t.length;n<r;n++)if(t[n].name==e)return t[n].value;return null}var s=i("order"),o=[];if(s.length>0)for(var u=0;u<s.length;u++){var a=s[u].column,f=s[u].dir;o.push(a+(f=="asc"?"A":"D"))}var l=this.queryState,c=this;l.setSortBy(o.join(",")),l.setPageSize(parseInt(i("length"))),l.setPageStartingAt(i("start")),l.setSearchPattern(i("search")?i("search").value:""),l.fetchData(function(e){if(c.postFetch){var t=c.postFetch(e,r);typeof t!="undefined"&&(e=t)}var s={iTotalRecords:e.queryInfo.totalRows,iTotalDisplayRecords:e.queryInfo.totalRows};s.aaData=e.resultset,s.sEcho=i("sEcho"),c.rawData=e,n(s)})},fnDrawCallback:function(dataTableSettings){var dataTable=dataTableSettings.oInstance,cd=this.chartDefinition,myself=this,handleAddIns=_.bind(this.handleAddIns,this);this.ph.find("tbody tr").each(function(e,t){if(dataTable.fnGetPosition(t)==null)return!0;$(t).children("td").each(function(e,t){var n=handleAddIns(dataTable,t);if(!n&&cd.colFormats){var r=dataTable.fnGetPosition(t);if(r&&typeof r[0]=="number"){var i=r[0],s=r[2],o=cd.colFormats[s],u=myself.rawData.resultset[i][s];o&&typeof u!="undefined"&&u!==null&&$(t).text(sprintf(o,u))}}})});if(cd.urlTemplate!=undefined){var td=$("#"+myself.htmlObject+" td:nth-child(1)");td.addClass("cdfClickable"),td.bind("click",function(e){var regex=new RegExp("{"+cd.parameterName+"}","g"),f=cd.urlTemplate.replace(regex,$(this).text());eval(f)})}typeof cd.drawCallback=="function"&&cd.drawCallback.apply(myself,arguments)},fnInitComplete:function(){this.postExec(),this.unblock()},handleAddIns:function(e,t){var n=this.chartDefinition,r=e.fnGetPosition(t);if(r&&typeof r[0]!="number")return!1;rowIdx=r[0],colIdx=r[2],colType=n.colTypes[colIdx],addIn=this.getAddIn("colType",colType),state={},target=$(t),results=this.rawData;if(!addIn)return!1;try{if(!target.parents("tbody").length)return;return target.get(0).tagName!="TD"&&(target=target.closest("td")),state.rawData=results,state.tableData=e.fnGetData(),state.colIdx=colIdx,state.rowIdx=rowIdx,state.series=results.resultset[state.rowIdx][0],state.category=results.metadata[state.colIdx].colName,state.value=results.resultset[state.rowIdx][state.colIdx],n.colFormats&&(state.colFormat=n.colFormats[state.colIdx]),state.target=target,addIn.call(t,state,this.getAddInOptions("colType",addIn.getName())),!0}catch(i){return Dashboards.log(i,"exception"),!1}},processTableComponentResponse:function(e){var t=this,n=this.chartDefinition,r={};this.ph.trigger("cdfTableComponentProcessResponse");if(typeof n.colHeaders=="undefined"||n.colHeaders.length==0)n.colHeaders=e.metadata.map(function(e){return e.colName});if(typeof n.colTypes=="undefined"||n.colTypes.length==0)n.colTypes=e.metadata.map(function(e){return e.colType.toLowerCase()});var i=TableComponent.getDataTableOptions(n);$.each(this.extraOptions?this.extraOptions:{},function(e,t){r[t[0]]=t[1]});var s=$.extend(n.dataTableOptions,i,r);s.fnDrawCallback=_.bind(this.fnDrawCallback,this),s.fnInitComplete=_.bind(this.fnInitComplete,this);if(s.bServerSide){var t=this;s.fnServerData=function(e,n,r){t.pagingCallback(e,n,r,this)}}e&&(s.aaData=e.resultset);var o=s.tableStyle=="bootstrap"?"table table-striped table-bordered form-inline table-responsive":"tableComponent compact";this.ph.html("<table id='"+this.htmlObject+"Table' class='"+o+"' width='100%'></table>"),this.dataTable=$("#"+this.htmlObject+"Table").dataTable(s),this.dataTable.anOpen=[],this.dataTable.expandParentObj=undefined,this.dataTable.expandClone=undefined,t.ph.find("table").bind("click",function(e){if(typeof n.clickAction=="function"||t.expandOnClick){var r={},i=$(e.target),s=t.rawData;if(!i.parents("tbody").length)return;i.get(0).tagName!="TD"&&(i=i.closest("td"));var o=t.dataTable.fnGetPosition(i.get(0));r.rawData=t.rawData,r.tableData=t.dataTable.fnGetData(),r.colIdx=o[2],r.rowIdx=o[0],r.series=s.resultset[r.rowIdx][0],r.category=s.metadata[r.colIdx].colName,r.value=s.resultset[r.rowIdx][r.colIdx],r.colFormat=n.colFormats[r.colIdx],r.target=i,t.expandOnClick&&t.handleExpandOnClick(r),n.clickAction&&n.clickAction.call(t,r)}}),t.ph.trigger("cdfTableComponentFinishRendering")},handleExpandOnClick:function(e){var t=this,n=t.expandContainerObject,r="expandingClass";typeof r=="undefined"&&(r="activeRow");var i=e.target.closest("tr"),s=e.target.closest("a");if(s.hasClass("info"))return;var o=i.get(0),u=t.dataTable.anOpen,a=$.inArray(o,u);if(i.hasClass(r))t.detachFromRow(o,a,r),$(t.expandParameters).each(function(t,n){Dashboards.setParameter(n[1],"")});else{for(var f=0;f<u.length;f++)t.detachFromRow(u[f],f,r);i.addClass(r),t.attachToRow(o,r);var l=t.queryState.lastResults(),c=null;$(t.expandParameters).each(function(n,r){!c&&Dashboards.getParameterValue(r[1])!==l.resultset[e.rowIdx][parseInt(r[0],10)]?c=r:Dashboards.setParameter(r[1],l.resultset[e.rowIdx][parseInt(r[0],10)])}),c!==null&&Dashboards.fireChange(c[1],l.resultset[e.rowIdx][parseInt(c[0],10)])}$("td.expandingClass").click(function(e){e.stopPropagation();return})},attachToRow:function(e,t){this.dataTable.anOpen.push(e),this.dataTable.fnOpen(e,"",t);var n=this,r="#"+this.expandContainerObject,i=$(r),s=$(e).next().children().empty();this.dataTable.expandParentObj=i.parent(),this.dataTable.expandClone=i.clone(!0),i.appendTo(s).show(),$(".dataTables_wrapper div.dataTables_paginate :not(span, .ui-state-disabled, .disabled)").click(function(){var e=n.dataTable.anOpen;for(var r=0;r<e.length;r++)n.detachFromRow(e[r],r,t,!0)})},detachFromRow:function(e,t,n,r){r=r||!1;var i="td."+n+" > *",s=r?this.dataTable.expandClone:$(e).next().find(i).hide();detachTo=this.dataTable.expandParentObj||$("body div.container"),s.appendTo(detachTo),$(e).removeClass(n),this.dataTable.fnClose(e),this.dataTable.anOpen.splice(t,1),$(".dataTables_wrapper div.dataTables_paginate").off("click")}},{getDataTableOptions:function(options){var dtData={};options.tableStyle=="themeroller"&&(dtData.bJQueryUI=!0),dtData.bInfo=options.info,dtData.iDisplayLength=options.displayLength,dtData.bLengthChange=options.lengthChange,dtData.bPaginate=options.paginate,dtData.bSort=options.sort,dtData.bFilter=options.filter,dtData.sPaginationType=options.paginationType,dtData.sDom=options.sDom,dtData.aaSorting=options.sortBy,dtData.tableStyle=options.tableStyle,typeof options.oLanguage=="string"?dtData.oLanguage=eval("("+options.oLanguage+")"):dtData.oLanguage=options.oLanguage,typeof options.language=="string"?dtData.language=eval("("+options.language+")"):dtData.language=options.language;if(options.colHeaders!=undefined){dtData.aoColumns=new Array(options.colHeaders.length);for(var i=0;i<options.colHeaders.length;i++)dtData.aoColumns[i]={},dtData.aoColumns[i].sClass="column"+i;$.each(options.colHeaders,function(e,t){dtData.aoColumns[e].sTitle=t,t==""&&(dtData.aoColumns[e].bVisible=!1)}),options.colTypes!=undefined&&$.each(options.colTypes,function(e,t){var n=dtData.aoColumns[e];t=="hidden"&&(n.bVisible=!1),n.sClass+=" "+t,n.sType=t}),options.colFormats!=undefined;var bAutoWidth=!0;options.colWidths!=undefined&&$.each(options.colWidths,function(e,t){t!=null&&(dtData.aoColumns[e].sWidth=t,bAutoWidth=!1)}),dtData.bAutoWidth=bAutoWidth,options.colSortable!=undefined&&$.each(options.colSortable,function(e,t){t!=null&&(!t||t=="false")&&(dtData.aoColumns[e].bSortable=!1)}),options.colSearchable!=undefined&&$.each(options.colSearchable,function(e,t){t!=null&&(!t||t=="false")&&(dtData.aoColumns[e].bSearchable=!1)})}return dtData}});pen.define("cdf/components/table",function(){}),pen.define("cdf/CoreComponents",function(){});if(typeof SimileAjax=="undefined"){var SimileAjax={loaded:!1,loadingScriptsCount:0,error:null,params:{bundle:"true"}};SimileAjax.Platform=new Object;var getHead=function(e){return e.getElementsByTagName("head")[0]};SimileAjax.findScript=function(e,t){var n=e.documentElement.getElementsByTagName("head");for(var r=0;r<n.length;r++){var i=n[r].firstChild;while(i!=null){if(i.nodeType==1&&i.tagName.toLowerCase()=="script"){var s=i.src,o=s.indexOf(t);if(o>=0)return s}i=i.nextSibling}}return null},SimileAjax.includeJavascriptFile=function(e,t,n,r){n=n||"";if(e.body==null)try{var i="'"+n.replace(/'/g,"&apos")+"'";e.write("<script src='"+t+"' onerror="+i+(r?" charset='"+r+"'":"")+" type='text/javascript'>"+n+"</script>");return}catch(s){}var o=e.createElement("script");if(n){try{o.innerHTML=n}catch(s){}o.setAttribute("onerror",n)}return r&&o.setAttribute("charset",r),o.type="text/javascript",o.language="JavaScript",o.src=t,getHead(e).appendChild(o)},SimileAjax.includeJavascriptFiles=function(e,t,n){for(var r=0;r<n.length;r++)SimileAjax.includeJavascriptFile(e,t+n[r]);SimileAjax.loadingScriptsCount+=n.length,SimileAjax.includeJavascriptFile(e,SimileAjax.urlPrefix+"scripts/signal.js?"+n.length)},SimileAjax.includeCssFile=function(e,t){if(e.body==null)try{e.write("<link rel='stylesheet' href='"+t+"' type='text/css'/>");return}catch(n){}var r=e.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",t),getHead(e).appendChild(r)},SimileAjax.includeCssFiles=function(e,t,n){for(var r=0;r<n.length;r++)SimileAjax.includeCssFile(e,t+n[r])},SimileAjax.prefixURLs=function(e,t,n){for(var r=0;r<n.length;r++)e.push(t+n[r])},SimileAjax.parseURLParameters=function(e,t,n){t=t||{},n=n||{},typeof e=="undefined"&&(e=location.href);var r=e.indexOf("?");if(r<0)return t;e=(e+"#").slice(r+1,e.indexOf("#"));var i=e.split("&"),s,o={},u=window.decodeURIComponent||unescape;for(var a=0;s=i[a];a++){var f=s.indexOf("="),l=u(s.slice(0,f)),c=o[l];typeof c=="undefined"?c=[]:c instanceof Array||(c=[c]),o[l]=c.concat(u(s.slice(f+1)))}for(var a in o){if(!o.hasOwnProperty(a))continue;var h=n[a]||String,p=o[a];p instanceof Array||(p=[p]),h===Boolean&&p[0]=="false"?t[a]=!1:t[a]=h.apply(this,p)}return t},function(){var e=["jquery-1.2.3.js","platform.js","debug.js","xmlhttp.js","json.js","dom.js","graphics.js","date-time.js","string.js","html.js","data-structure.js","units.js","ajax.js","history.js","window-manager.js"],t=[];if(typeof SimileAjax_urlPrefix=="string")SimileAjax.urlPrefix=SimileAjax_urlPrefix;else{var n=SimileAjax.findScript(document,"simile-ajax-api.js");if(n==null){SimileAjax.error=new Error("Failed to derive URL prefix for Simile Ajax API code files");return}SimileAjax.urlPrefix=n.substr(0,n.indexOf("simile-ajax-api.js"))}SimileAjax.parseURLParameters(n,SimileAjax.params,{bundle:Boolean}),SimileAjax.params.bundle?SimileAjax.includeJavascriptFiles(document,SimileAjax.urlPrefix,["simile-ajax-bundle.js"]):SimileAjax.includeJavascriptFiles(document,SimileAjax.urlPrefix+"scripts/",e),SimileAjax.includeCssFiles(document,SimileAjax.urlPrefix+"styles/",t),SimileAjax.loaded=!0}()}pen.define("cdf/simile/ajax/simile-ajax-api",function(){}),SimileAjax.JSON=new Object,function(){var m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s={array:function(e){var t=["["],n,r,i,o=e.length,u;for(i=0;i<o;i+=1)u=e[i],r=s[typeof u],r&&(u=r(u),typeof u=="string"&&(n&&(t[t.length]=","),t[t.length]=u,n=!0));return t[t.length]="]",t.join("")},"boolean":function(e){return String(e)},"null":function(e){return"null"},number:function(e){return isFinite(e)?String(e):"null"},object:function(e){if(e){if(e instanceof Array)return s.array(e);var t=["{"],n,r,i,o;for(i in e)o=e[i],r=s[typeof o],r&&(o=r(o),typeof o=="string"&&(n&&(t[t.length]=","),t.push(s.string(i),":",o),n=!0));return t[t.length]="}",t.join("")}return"null"},string:function(e){return/["\\\x00-\x1f]/.test(e)&&(e=e.replace(/([\x00-\x1f\\"])/g,function(e,t){var n=m[t];return n?n:(n=t.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})),'"'+e+'"'}};SimileAjax.JSON.toJSONString=function(e){return e instanceof Object?s.object(e):e instanceof Array?s.array(e):e.toString()},SimileAjax.JSON.parseJSON=function(){try{return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(this.replace(/"(\\.|[^"\\])*"/g,""))&&eval("("+this+")")}catch(e){return!1}}}(),pen.define("cdf/simile/ajax/scripts/json",function(){}),pen.define("common-repo/pentaho-ajax",[],function(){});var COMPLETE=4,STATUS_OK=200,STATUS_UNAUTHORIZED=401,STATUS_NOT_FOUND=404,base="",pathArray=window.location.pathname.split("/"),webAppPath="/"+pathArray[1];jQuery(function(e){e.datepicker.regional.af={closeText:"Selekteer",prevText:"Vorige",nextText:"Volgende",currentText:"Vandag",monthNames:["Januarie","Februarie","Maart","April","Mei","Junie","Julie","Augustus","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],dayNames:["Sondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrydag","Saterdag"],dayNamesShort:["Son","Maa","Din","Woe","Don","Vry","Sat"],dayNamesMin:["So","Ma","Di","Wo","Do","Vr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.af)}),jQuery(function(e){e.datepicker.regional.ar={closeText:"إغلاق",prevText:"&#x3c;السابق",nextText:"التالي&#x3e;",currentText:"اليوم",monthNames:["كانون الثاني","شباط","آذار","نيسان","آذار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["السبت","الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة"],dayNamesShort:["سبت","أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة"],dayNamesMin:["سبت","أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة"],weekHeader:"أسبوع",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ar)}),jQuery(function(e){e.datepicker.regional.az={closeText:"Bağla",prevText:"&#x3c;Geri",nextText:"İrəli&#x3e;",currentText:"Bugün",monthNames:["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],monthNamesShort:["Yan","Fev","Mar","Apr","May","İyun","İyul","Avq","Sen","Okt","Noy","Dek"],dayNames:["Bazar","Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə"],dayNamesShort:["B","Be","Ça","Ç","Ca","C","Ş"],dayNamesMin:["B","B","Ç","С","Ç","C","Ş"],weekHeader:"Hf",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.az)}),jQuery(function(e){e.datepicker.regional.bg={closeText:"затвори",prevText:"&#x3c;назад",nextText:"напред&#x3e;",nextBigText:"&#x3e;&#x3e;",currentText:"днес",monthNames:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],monthNamesShort:["Яну","Фев","Мар","Апр","Май","Юни","Юли","Авг","Сеп","Окт","Нов","Дек"],dayNames:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота"],dayNamesShort:["Нед","Пон","Вто","Сря","Чет","Пет","Съб"],dayNamesMin:["Не","По","Вт","Ср","Че","Пе","Съ"],weekHeader:"Wk",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.bg)}),jQuery(function(e){e.datepicker.regional.bs={closeText:"Zatvori",prevText:"&#x3c;",nextText:"&#x3e;",currentText:"Danas",monthNames:["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","Če","Pe","Su"],weekHeader:"Wk",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.bs)}),jQuery(function(e){e.datepicker.regional.ca={closeText:"Tancar",prevText:"&#x3c;Ant",nextText:"Seg&#x3e;",currentText:"Avui",monthNames:["Gener","Febrer","Mar&ccedil;","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],monthNamesShort:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],dayNames:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],dayNamesShort:["Dug","Dln","Dmt","Dmc","Djs","Dvn","Dsb"],dayNamesMin:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ca)}),jQuery(function(e){e.datepicker.regional.cs={closeText:"Zavřít",prevText:"&#x3c;Dříve",nextText:"Později&#x3e;",currentText:"Nyní",monthNames:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],monthNamesShort:["led","úno","bře","dub","kvě","čer","čvc","srp","zář","říj","lis","pro"],dayNames:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],dayNamesShort:["ne","po","út","st","čt","pá","so"],dayNamesMin:["ne","po","út","st","čt","pá","so"],weekHeader:"Týd",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.cs)}),jQuery(function(e){e.datepicker.regional.da={closeText:"Luk",prevText:"&#x3c;Forrige",nextText:"Næste&#x3e;",currentText:"Idag",monthNames:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],dayNamesShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayNamesMin:["Sø","Ma","Ti","On","To","Fr","Lø"],weekHeader:"Uge",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.da)}),jQuery(function(e){e.datepicker.regional.de={closeText:"schließen",prevText:"&#x3c;zurück",nextText:"Vor&#x3e;",currentText:"heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"Wo",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.de)}),jQuery(function(e){e.datepicker.regional.el={closeText:"Κλείσιμο",prevText:"Προηγούμενος",nextText:"Επόμενος",currentText:"Τρέχων Μήνας",monthNames:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],monthNamesShort:["Ιαν","Φεβ","Μαρ","Απρ","Μαι","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ"],dayNames:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],dayNamesShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],dayNamesMin:["Κυ","Δε","Τρ","Τε","Πε","Πα","Σα"],weekHeader:"Εβδ",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.el)}),jQuery(function(e){e.datepicker.regional["en-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["en-GB"])}),jQuery(function(e){e.datepicker.regional.eo={closeText:"Fermi",prevText:"&lt;Anta",nextText:"Sekv&gt;",currentText:"Nuna",monthNames:["Januaro","Februaro","Marto","Aprilo","Majo","Junio","Julio","Aŭgusto","Septembro","Oktobro","Novembro","Decembro"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aŭg","Sep","Okt","Nov","Dec"],dayNames:["Dimanĉo","Lundo","Mardo","Merkredo","Ĵaŭdo","Vendredo","Sabato"],dayNamesShort:["Dim","Lun","Mar","Mer","Ĵaŭ","Ven","Sab"],dayNamesMin:["Di","Lu","Ma","Me","Ĵa","Ve","Sa"],weekHeader:"Sb",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.eo)}),jQuery(function(e){e.datepicker.regional.es={closeText:"Cerrar",prevText:"&#x3c;Ant",nextText:"Sig&#x3e;",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Mi&eacute;rcoles","Jueves","Viernes","S&aacute;bado"],dayNamesShort:["Dom","Lun","Mar","Mi&eacute;","Juv","Vie","S&aacute;b"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","S&aacute;"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.es)}),jQuery(function(e){e.datepicker.regional.et={closeText:"Sulge",prevText:"Eelnev",nextText:"Järgnev",currentText:"Täna",monthNames:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],monthNamesShort:["Jaan","Veebr","Märts","Apr","Mai","Juuni","Juuli","Aug","Sept","Okt","Nov","Dets"],dayNames:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev"],dayNamesShort:["Pühap","Esmasp","Teisip","Kolmap","Neljap","Reede","Laup"],dayNamesMin:["P","E","T","K","N","R","L"],weekHeader:"Sm",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.et)}),jQuery(function(e){e.datepicker.regional.eu={closeText:"Egina",prevText:"&#x3c;Aur",nextText:"Hur&#x3e;",currentText:"Gaur",monthNames:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],monthNamesShort:["Urt","Ots","Mar","Api","Mai","Eka","Uzt","Abu","Ira","Urr","Aza","Abe"],dayNames:["Igandea","Astelehena","Asteartea","Asteazkena","Osteguna","Ostirala","Larunbata"],dayNamesShort:["Iga","Ast","Ast","Ast","Ost","Ost","Lar"],dayNamesMin:["Ig","As","As","As","Os","Os","La"],weekHeader:"Wk",dateFormat:"yy/mm/dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.eu)}),jQuery(function(e){e.datepicker.regional.fa={closeText:"بستن",prevText:"&#x3c;قبلي",nextText:"بعدي&#x3e;",currentText:"امروز",monthNames:["فروردين","ارديبهشت","خرداد","تير","مرداد","شهريور","مهر","آبان","آذر","دي","بهمن","اسفند"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["يکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],dayNamesShort:["ي","د","س","چ","پ","ج","ش"],dayNamesMin:["ي","د","س","چ","پ","ج","ش"],weekHeader:"هف",dateFormat:"yy/mm/dd",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.fa)}),jQuery(function(e){e.datepicker.regional.fi={closeText:"Sulje",prevText:"&laquo;Edellinen",nextText:"Seuraava&raquo;",currentText:"T&auml;n&auml;&auml;n",monthNames:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],monthNamesShort:["Tammi","Helmi","Maalis","Huhti","Touko","Kes&auml;","Hein&auml;","Elo","Syys","Loka","Marras","Joulu"],dayNamesShort:["Su","Ma","Ti","Ke","To","Pe","Su"],dayNames:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],dayNamesMin:["Su","Ma","Ti","Ke","To","Pe","La"],weekHeader:"Vk",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.fi)}),jQuery(function(e){e.datepicker.regional.fo={closeText:"Lat aftur",prevText:"&#x3c;Fyrra",nextText:"Næsta&#x3e;",currentText:"Í dag",monthNames:["Januar","Februar","Mars","Apríl","Mei","Juni","Juli","August","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],dayNames:["Sunnudagur","Mánadagur","Týsdagur","Mikudagur","Hósdagur","Fríggjadagur","Leyardagur"],dayNamesShort:["Sun","Mán","Týs","Mik","Hós","Frí","Ley"],dayNamesMin:["Su","Má","Tý","Mi","Hó","Fr","Le"],weekHeader:"Vk",dateFormat:"dd-mm-yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.fo)}),jQuery(function(e){e.datepicker.regional["fr-CH"]={closeText:"Fermer",prevText:"&#x3c;Préc",nextText:"Suiv&#x3e;",currentText:"Courant",monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthNamesShort:["Jan","Fév","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Déc"],dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],dayNamesMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["fr-CH"])}),jQuery(function(e){e.datepicker.regional.fr={closeText:"Fermer",prevText:"&#x3c;Préc",nextText:"Suiv&#x3e;",currentText:"Courant",monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthNamesShort:["Jan","Fév","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Déc"],dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],dayNamesMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.fr)}),jQuery(function(e){e.datepicker.regional.he={closeText:"סגור",prevText:"&#x3c;הקודם",nextText:"הבא&#x3e;",currentText:"היום",monthNames:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],dayNamesShort:["א'","ב'","ג'","ד'","ה'","ו'","שבת"],dayNamesMin:["א'","ב'","ג'","ד'","ה'","ו'","שבת"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.he)}),jQuery(function(e){e.datepicker.regional.hr={closeText:"Zatvori",prevText:"&#x3c;",nextText:"&#x3e;",currentText:"Danas",monthNames:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthNamesShort:["Sij","Velj","Ožu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],dayNames:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","Če","Pe","Su"],weekHeader:"Tje",dateFormat:"dd.mm.yy.",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.hr)}),jQuery(function(e){e.datepicker.regional.hu={closeText:"bezárás",prevText:"&laquo;&nbsp;vissza",nextText:"előre&nbsp;&raquo;",currentText:"ma",monthNames:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],monthNamesShort:["Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Szep","Okt","Nov","Dec"],dayNames:["Vasárnap","Hétfö","Kedd","Szerda","Csütörtök","Péntek","Szombat"],dayNamesShort:["Vas","Hét","Ked","Sze","Csü","Pén","Szo"],dayNamesMin:["V","H","K","Sze","Cs","P","Szo"],weekHeader:"Hé",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.hu)}),jQuery(function(e){e.datepicker.regional.hy={closeText:"Փակել",prevText:"&#x3c;Նախ.",nextText:"Հաջ.&#x3e;",currentText:"Այսօր",monthNames:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],monthNamesShort:["Հունվ","Փետր","Մարտ","Ապր","Մայիս","Հունիս","Հուլ","Օգս","Սեպ","Հոկ","Նոյ","Դեկ"],dayNames:["կիրակի","եկուշաբթի","երեքշաբթի","չորեքշաբթի","հինգշաբթի","ուրբաթ","շաբաթ"],dayNamesShort:["կիր","երկ","երք","չրք","հնգ","ուրբ","շբթ"],dayNamesMin:["կիր","երկ","երք","չրք","հնգ","ուրբ","շբթ"],weekHeader:"ՇԲՏ",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.hy)}),jQuery(function(e){e.datepicker.regional.id={closeText:"Tutup",prevText:"&#x3c;mundur",nextText:"maju&#x3e;",currentText:"hari ini",monthNames:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agus","Sep","Okt","Nop","Des"],dayNames:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],dayNamesShort:["Min","Sen","Sel","Rab","kam","Jum","Sab"],dayNamesMin:["Mg","Sn","Sl","Rb","Km","jm","Sb"],weekHeader:"Mg",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.id)}),jQuery(function(e){e.datepicker.regional.is={closeText:"Loka",prevText:"&#x3c; Fyrri",nextText:"N&aelig;sti &#x3e;",currentText:"&Iacute; dag",monthNames:["Jan&uacute;ar","Febr&uacute;ar","Mars","Apr&iacute;l","Ma&iacute","J&uacute;n&iacute;","J&uacute;l&iacute;","&Aacute;g&uacute;st","September","Okt&oacute;ber","N&oacute;vember","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Ma&iacute;","J&uacute;n","J&uacute;l","&Aacute;g&uacute;","Sep","Okt","N&oacute;v","Des"],dayNames:["Sunnudagur","M&aacute;nudagur","&THORN;ri&eth;judagur","Mi&eth;vikudagur","Fimmtudagur","F&ouml;studagur","Laugardagur"],dayNamesShort:["Sun","M&aacute;n","&THORN;ri","Mi&eth;","Fim","F&ouml;s","Lau"],dayNamesMin:["Su","M&aacute;","&THORN;r","Mi","Fi","F&ouml;","La"],weekHeader:"Vika",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.is)}),jQuery(function(e){e.datepicker.regional.it={closeText:"Chiudi",prevText:"&#x3c;Prec",nextText:"Succ&#x3e;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned&#236","Marted&#236","Mercoled&#236","Gioved&#236","Venerd&#236","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.it)}),jQuery(function(e){e.datepicker.regional.ja={closeText:"閉じる",prevText:"&#x3c;前",nextText:"次&#x3e;",currentText:"今日",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","火","水","木","金","土"],dayNamesMin:["日","月","火","水","木","金","土"],weekHeader:"週",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},e.datepicker.setDefaults(e.datepicker.regional.ja)}),jQuery(function(e){e.datepicker.regional.ko={closeText:"닫기",prevText:"이전달",nextText:"다음달",currentText:"오늘",monthNames:["1월(JAN)","2월(FEB)","3월(MAR)","4월(APR)","5월(MAY)","6월(JUN)","7월(JUL)","8월(AUG)","9월(SEP)","10월(OCT)","11월(NOV)","12월(DEC)"],monthNamesShort:["1월(JAN)","2월(FEB)","3월(MAR)","4월(APR)","5월(MAY)","6월(JUN)","7월(JUL)","8월(AUG)","9월(SEP)","10월(OCT)","11월(NOV)","12월(DEC)"],dayNames:["일","월","화","수","목","금","토"],dayNamesShort:["일","월","화","수","목","금","토"],dayNamesMin:["일","월","화","수","목","금","토"],weekHeader:"Wk",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"년"},e.datepicker.setDefaults(e.datepicker.regional.ko)}),jQuery(function(e){e.datepicker.regional.lt={closeText:"Uždaryti",prevText:"&#x3c;Atgal",nextText:"Pirmyn&#x3e;",currentText:"Šiandien",monthNames:["Sausis","Vasaris","Kovas","Balandis","Gegužė","Birželis","Liepa","Rugpjūtis","Rugsėjis","Spalis","Lapkritis","Gruodis"],monthNamesShort:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rugp","Rugs","Spa","Lap","Gru"],dayNames:["sekmadienis","pirmadienis","antradienis","trečiadienis","ketvirtadienis","penktadienis","šeštadienis"],dayNamesShort:["sek","pir","ant","tre","ket","pen","šeš"],dayNamesMin:["Se","Pr","An","Tr","Ke","Pe","Še"],weekHeader:"Wk",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.lt)}),jQuery(function(e){e.datepicker.regional.lv={closeText:"Aizvērt",prevText:"Iepr",nextText:"Nāka",currentText:"Šodien",monthNames:["Janvāris","Februāris","Marts","Aprīlis","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],monthNamesShort:["Jan","Feb","Mar","Apr","Mai","Jūn","Jūl","Aug","Sep","Okt","Nov","Dec"],dayNames:["svētdiena","pirmdiena","otrdiena","trešdiena","ceturtdiena","piektdiena","sestdiena"],dayNamesShort:["svt","prm","otr","tre","ctr","pkt","sst"],dayNamesMin:["Sv","Pr","Ot","Tr","Ct","Pk","Ss"],weekHeader:"Nav",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.lv)}),jQuery(function(e){e.datepicker.regional.ms={closeText:"Tutup",prevText:"&#x3c;Sebelum",nextText:"Selepas&#x3e;",currentText:"hari ini",monthNames:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],monthNamesShort:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ogo","Sep","Okt","Nov","Dis"],dayNames:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],dayNamesShort:["Aha","Isn","Sel","Rab","kha","Jum","Sab"],dayNamesMin:["Ah","Is","Se","Ra","Kh","Ju","Sa"],weekHeader:"Mg",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ms)}),jQuery(function(e){e.datepicker.regional.nl={closeText:"Sluiten",prevText:"←",nextText:"→",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","maa","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.nl)}),jQuery(function(e){e.datepicker.regional.no={closeText:"Lukk",prevText:"&laquo;Forrige",nextText:"Neste&raquo;",currentText:"I dag",monthNames:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],dayNamesShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayNames:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],dayNamesMin:["Sø","Ma","Ti","On","To","Fr","Lø"],weekHeader:"Uke",dateFormat:"yy-mm-dd",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.no)}),jQuery(function(e){e.datepicker.regional.pl={closeText:"Zamknij",prevText:"&#x3c;Poprzedni",nextText:"Następny&#x3e;",currentText:"Dziś",monthNames:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],monthNamesShort:["Sty","Lu","Mar","Kw","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"],dayNames:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],dayNamesShort:["Nie","Pn","Wt","Śr","Czw","Pt","So"],dayNamesMin:["N","Pn","Wt","Śr","Cz","Pt","So"],weekHeader:"Tydz",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.pl)}),jQuery(function(e){e.datepicker.regional["pt-BR"]={closeText:"Fechar",prevText:"&#x3c;Anterior",nextText:"Pr&oacute;ximo&#x3e;",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S&aacute;bado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","S&aacute;b"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","S&aacute;b"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["pt-BR"])}),jQuery(function(e){e.datepicker.regional.ro={closeText:"Închide",prevText:"&laquo; Luna precedentă",nextText:"Luna următoare &raquo;",currentText:"Azi",monthNames:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthNamesShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Duminică","Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă"],dayNamesShort:["Dum","Lun","Mar","Mie","Joi","Vin","Sâm"],dayNamesMin:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],weekHeader:"Săpt",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ro)}),jQuery(function(e){e.datepicker.regional.ru={closeText:"Закрыть",prevText:"&#x3c;Пред",nextText:"След&#x3e;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ru)}),jQuery(function(e){e.datepicker.regional.sk={closeText:"Zavrieť",prevText:"&#x3c;Predchádzajúci",nextText:"Nasledujúci&#x3e;",currentText:"Dnes",monthNames:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],dayNames:["Nedel'a","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"],dayNamesShort:["Ned","Pon","Uto","Str","Štv","Pia","Sob"],dayNamesMin:["Ne","Po","Ut","St","Št","Pia","So"],weekHeader:"Ty",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.sk)}),jQuery(function(e){e.datepicker.regional.sl={closeText:"Zapri",prevText:"&lt;Prej&#x161;nji",nextText:"Naslednji&gt;",currentText:"Trenutni",monthNames:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljek","Torek","Sreda","&#x10C;etrtek","Petek","Sobota"],dayNamesShort:["Ned","Pon","Tor","Sre","&#x10C;et","Pet","Sob"],dayNamesMin:["Ne","Po","To","Sr","&#x10C;e","Pe","So"],weekHeader:"Teden",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.sl)}),jQuery(function(e){e.datepicker.regional.sq={closeText:"mbylle",prevText:"&#x3c;mbrapa",nextText:"Përpara&#x3e;",currentText:"sot",monthNames:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nëntor","Dhjetor"],monthNamesShort:["Jan","Shk","Mar","Pri","Maj","Qer","Kor","Gus","Sht","Tet","Nën","Dhj"],dayNames:["E Diel","E Hënë","E Martë","E Mërkurë","E Enjte","E Premte","E Shtune"],dayNamesShort:["Di","Hë","Ma","Më","En","Pr","Sh"],dayNamesMin:["Di","Hë","Ma","Më","En","Pr","Sh"],weekHeader:"Ja",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.sq)}),jQuery(function(e){e.datepicker.regional["sr-SR"]={closeText:"Zatvori",prevText:"&#x3c;",nextText:"&#x3e;",currentText:"Danas",monthNames:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],dayNames:["Nedelja","Ponedeljak","Utorak","Sreda","Četvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sre","Čet","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","Če","Pe","Su"],weekHeader:"Sed",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional["sr-SR"])}),jQuery(function(e){e.datepicker.regional.sr={closeText:"Затвори",prevText:"&#x3c;",nextText:"&#x3e;",currentText:"Данас",monthNames:["Јануар","Фебруар","Март","Април","Мај","Јун","Јул","Август","Септембар","Октобар","Новембар","Децембар"],monthNamesShort:["Јан","Феб","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Нов","Дец"],dayNames:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"],dayNamesShort:["Нед","Пон","Уто","Сре","Чет","Пет","Суб"],dayNamesMin:["Не","По","Ут","Ср","Че","Пе","Су"],weekHeader:"Сед",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.sr)}),jQuery(function(e){e.datepicker.regional.sv={closeText:"Stäng",prevText:"&laquo;Förra",nextText:"Nästa&raquo;",currentText:"Idag",monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNamesShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],dayNames:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],dayNamesMin:["Sö","Må","Ti","On","To","Fr","Lö"],weekHeader:"Ve",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.sv)}),jQuery(function(e){e.datepicker.regional.ta={closeText:"மூடு",prevText:"முன்னையது",nextText:"அடுத்தது",currentText:"இன்று",monthNames:["தை","மாசி","பங்குனி","சித்திரை","வைகாசி","ஆனி","ஆடி","ஆவணி","புரட்டாசி","ஐப்பசி","கார்த்திகை","மார்கழி"],monthNamesShort:["தை","மாசி","பங்","சித்","வைகா","ஆனி","ஆடி","ஆவ","புர","ஐப்","கார்","மார்"],dayNames:["ஞாயிற்றுக்கிழமை","திங்கட்கிழமை","செவ்வாய்க்கிழமை","புதன்கிழமை","வியாழக்கிழமை","வெள்ளிக்கிழமை","சனிக்கிழமை"],dayNamesShort:["ஞாயிறு","திங்கள்","செவ்வாய்","புதன்","வியாழன்","வெள்ளி","சனி"],dayNamesMin:["ஞா","தி","செ","பு","வி","வெ","ச"],weekHeader:"Не",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ta)}),jQuery(function(e){e.datepicker.regional.th={closeText:"ปิด",prevText:"&laquo;&nbsp;ย้อน",nextText:"ถัดไป&nbsp;&raquo;",currentText:"วันนี้",monthNames:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฏาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthNamesShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],dayNames:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],dayNamesShort:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],dayNamesMin:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.th)}),jQuery(function(e){e.datepicker.regional.tr={closeText:"kapat",prevText:"&#x3c;geri",nextText:"ileri&#x3e",currentText:"bugün",monthNames:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],monthNamesShort:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],dayNames:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],dayNamesShort:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],dayNamesMin:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],weekHeader:"Hf",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.tr)}),jQuery(function(e){e.datepicker.regional.uk={closeText:"Закрити",prevText:"&#x3c;",nextText:"&#x3e;",currentText:"Сьогодні",monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthNamesShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],dayNames:["неділя","понеділок","вівторок","середа","четвер","п’ятниця","субота"],dayNamesShort:["нед","пнд","вів","срд","чтв","птн","сбт"],dayNamesMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.uk)}),jQuery(function(e){e.datepicker.regional.vi={closeText:"Đóng",prevText:"&#x3c;Trước",nextText:"Tiếp&#x3e;",currentText:"Hôm nay",monthNames:["Tháng Một","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"],monthNamesShort:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayNames:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],dayNamesShort:["CN","T2","T3","T4","T5","T6","T7"],dayNamesMin:["CN","T2","T3","T4","T5","T6","T7"],weekHeader:"Tu",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.vi)}),jQuery(function(e){e.datepicker.regional["zh-CN"]={closeText:"关闭",prevText:"&#x3c;上月",nextText:"下月&#x3e;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},e.datepicker.setDefaults(e.datepicker.regional["zh-CN"])}),jQuery(function(e){e.datepicker.regional["zh-HK"]={closeText:"關閉",prevText:"&#x3c;上月",nextText:"下月&#x3e;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"dd-mm-yy",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},e.datepicker.setDefaults(e.datepicker.regional["zh-HK"])}),jQuery(function(e){e.datepicker.regional["zh-TW"]={closeText:"關閉",prevText:"&#x3c;上月",nextText:"下月&#x3e;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy/mm/dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},e.datepicker.setDefaults(e.datepicker.regional["zh-TW"])}),pen.define("cdf/jquery-ui-datepicker-i18n",function(){}),function(e){function f(t,n){return parseInt(e.css(t,n),10)||0}function l(e){return e=parseInt(e,10).toString(16),e.length<2?"0"+e:e}function c(t){while(t){var n=e.css(t,"backgroundColor"),r;if(n&&n!="transparent"&&n!="rgba(0, 0, 0, 0)")return n.indexOf("rgb")>=0?(r=n.match(/\d+/g),"#"+l(r[0])+l(r[1])+l(r[2])):n;if(t.nodeName.toLowerCase()=="html")break;t=t.parentNode}return"#ffffff"}function h(e,t,n){switch(e){case"round":return Math.round(n*(1-Math.cos(Math.asin(t/n))));case"cool":return Math.round(n*(1+Math.cos(Math.asin(t/n))));case"sharp":return n-t;case"bite":return Math.round(n*Math.cos(Math.asin((n-t-1)/n)));case"slide":return Math.round(n*Math.atan2(t,n/t));case"jut":return Math.round(n*Math.atan2(n,n-t-1));case"curl":return Math.round(n*Math.atan(t));case"tear":return Math.round(n*Math.cos(t));case"wicked":return Math.round(n*Math.tan(t));case"long":return Math.round(n*Math.sqrt(t));case"sculpt":return Math.round(n*Math.log(n-t-1,n));case"dogfold":case"dog":return t&1?t+1:n;case"dog2":return t&2?t+1:n;case"dog3":return t&3?t+1:n;case"fray":return t%2*n;case"notch":return n;case"bevelfold":case"bevel":return t+1;case"steep":return t/2+1;case"invsteep":return(n-t)/2+1}}var t=/MSIE/.test(navigator.userAgent),n=document.createElement("div").style,r=n.MozBorderRadius!==undefined,i=n.WebkitBorderRadius!==undefined,s=n.borderRadius!==undefined||n.BorderRadius!==undefined,o=document.documentMode||0,u=t&&(!o||o<8),a=t&&function(){var e=document.createElement("div");try{e.style.setExpression("width","0+0"),e.style.removeExpression("width")}catch(t){return!1}return!0}();e.support=e.support||{},e.support.borderRadius=r||i||s,e.fn.corner=function(n){if(this.length===0){if(!e.isReady&&this.selector){var o=this.selector,l=this.context;e(function(){e(o,l).corner(n)})}return this}return this.each(function(o){var l=e(this),p=[l.attr(e.fn.corner.defaults.metaAttr)||"",n||""].join(" ").toLowerCase(),d=/keep/.test(p),v=(p.match(/cc:(#[0-9a-f]+)/)||[])[1],m=(p.match(/sc:(#[0-9a-f]+)/)||[])[1],g=parseInt((p.match(/(\d+)px/)||[])[1],10)||10,y=/round|bevelfold|bevel|notch|bite|cool|sharp|slide|jut|curl|tear|fray|wicked|sculpt|long|dog3|dog2|dogfold|dog|invsteep|steep/,b=(p.match(y)||["round"])[0],w=/dogfold|bevelfold/.test(p),E={T:0,B:1},S={TL:/top|tl|left/.test(p),TR:/top|tr|right/.test(p),BL:/bottom|bl|left/.test(p),BR:/bottom|br|right/.test(p)},x,T,N,C,k,L,A,O,M,_,D,P,H,B;!S.TL&&!S.TR&&!S.BL&&!S.BR&&(S={TL:1,TR:1,BL:1,BR:1});if(e.fn.corner.defaults.useNative&&b=="round"&&(s||r||i)&&!v&&!m){S.TL&&l.css(s?"border-top-left-radius":r?"-moz-border-radius-topleft":"-webkit-border-top-left-radius",g+"px"),S.TR&&l.css(s?"border-top-right-radius":r?"-moz-border-radius-topright":"-webkit-border-top-right-radius",g+"px"),S.BL&&l.css(s?"border-bottom-left-radius":r?"-moz-border-radius-bottomleft":"-webkit-border-bottom-left-radius",g+"px"),S.BR&&l.css(s?"border-bottom-right-radius":r?"-moz-border-radius-bottomright":"-webkit-border-bottom-right-radius",g+"px");return}x=document.createElement("div"),e(x).css({overflow:"hidden",height:"1px",minHeight:"1px",fontSize:"1px",backgroundColor:m||"transparent",borderStyle:"solid"}),T={T:parseInt(e.css(this,"paddingTop"),10)||0,R:parseInt(e.css(this,"paddingRight"),10)||0,B:parseInt(e.css(this,"paddingBottom"),10)||0,L:parseInt(e.css(this,"paddingLeft"),10)||0},typeof this.style.zoom!==undefined&&(this.style.zoom=1),d||(this.style.border="none"),x.style.borderColor=v||c(this.parentNode),N=e(this).outerHeight();for(C in E){k=E[C];if(k&&(S.BL||S.BR)||!k&&(S.TL||S.TR)){x.style.borderStyle="none "+(S[C+"R"]?"solid":"none")+" none "+(S[C+"L"]?"solid":"none"),L=document.createElement("div"),e(L).addClass("jquery-corner"),A=L.style,k?this.appendChild(L):this.insertBefore(L,this.firstChild),k&&N!="auto"?(e.css(this,"position")=="static"&&(this.style.position="relative"),A.position="absolute",A.bottom=A.left=A.padding=A.margin="0",a?A.setExpression("width","this.parentNode.offsetWidth"):A.width="100%"):!k&&t?(e.css(this,"position")=="static"&&(this.style.position="relative"),A.position="absolute",A.top=A.left=A.right=A.padding=A.margin="0",a?(O=f(this,"borderLeftWidth")+f(this,"borderRightWidth"),A.setExpression("width","this.parentNode.offsetWidth - "+O+'+ "px"')):A.width="100%"):(A.position="relative",A.margin=k?T.B-g+"px -"+T.R+"px -"+T.B+"px -"+T.L+"px":"-"+T.T+"px -"+T.R+"px "+(T.T-g)+"px -"+T.L+"px");for(M=0;M<g;M++)_=Math.max(0,h(b,M,g)),D=x.cloneNode(!1),D.style.borderWidth="0 "+(S[C+"R"]?_:0)+"px 0 "+(S[C+"L"]?_:0)+"px",k?L.appendChild(D):L.insertBefore(D,L.firstChild);if(w&&e.support.boxModel){if(k&&u)continue;for(P in S){if(!S[P])continue;if(!(!k||P!="TL"&&P!="TR"))continue;if(!k&&(P=="BL"||P=="BR"))continue;H={position:"absolute",border:"none",margin:0,padding:0,overflow:"hidden",backgroundColor:x.style.borderColor},B=e("<div/>").css(H).css({width:g+"px",height:"1px"});switch(P){case"TL":B.css({bottom:0,left:0});break;case"TR":B.css({bottom:0,right:0});break;case"BL":B.css({top:0,left:0});break;case"BR":B.css({top:0,right:0})}L.appendChild(B[0]);var j=e("<div/>").css(H).css({top:0,bottom:0,width:"1px",height:g+"px"});switch(P){case"TL":j.css({left:g});break;case"TR":j.css({right:g});break;case"BL":j.css({left:g});break;case"BR":j.css({right:g})}L.appendChild(j[0])}}}}})},e.fn.uncorner=function(){return(s||r||i)&&this.css(s?"border-radius":r?"-moz-border-radius":"-webkit-border-radius",0),e("div.jquery-corner",this).remove(),this},e.fn.corner.defaults={useNative:!0,metaAttr:"data-corner"}}(jQuery),pen.define("cdf/jquery.corner",function(){}),function($){function loadAndParseFile(filename,language,mode){$.ajax({url:filename,async:!1,contentType:"application/x-www-form-urlencoded",dataType:"text",success:function(data,status){var parsed="",parameters=data.split(/\n/),regPlaceHolder=/(\{\d+\})/g,regRepPlaceHolder=/\{(\d+)\}/g,unicodeRE=/(\\u.{4})/ig;for(var i=0;i<parameters.length;i++){parameters[i]=parameters[i].replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(parameters[i].length>0&&parameters[i].match("^#")!="#"){var pair=parameters[i].split("=");if(pair.length>0){var name=unescape(pair[0]).replace(/^\s\s*/,"").replace(/\s\s*$/,""),value=pair.length==1?"":pair[1];for(var s=2;s<pair.length;s++)value+="="+pair[s];value=value.replace(/"/g,'\\"'),value=value.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(mode=="map"||mode=="both"){var unicodeMatches=value.match(unicodeRE);if(unicodeMatches)for(var u=0;u<unicodeMatches.length;u++)value=value.replace(unicodeMatches[u],unescapeUnicode(unicodeMatches[u]));$.i18n.map[name]=value}if(mode=="vars"||mode=="both"){checkKeyNamespace(name);if(regPlaceHolder.test(value)){var parts=value.split(regPlaceHolder),first=!0,fnArgs="",usedArgs=[];for(var p=0;p<parts.length;p++)regPlaceHolder.test(parts[p])&&usedArgs.indexOf(parts[p])==-1&&(first||(fnArgs+=","),fnArgs+=parts[p].replace(regRepPlaceHolder,"v$1"),usedArgs.push(parts[p]),first=!1);parsed+=name+"=function("+fnArgs+"){";var fnExpr='"'+value.replace(regRepPlaceHolder,'"+v$1+"')+'"';parsed+="return "+fnExpr+";"+"};"}else parsed+=name+'="'+value+'";'}}}}eval(parsed)}})}function checkKeyNamespace(key){var regDot=/\./;if(regDot.test(key)){var fullname="",names=key.split(/\./);for(var i=0;i<names.length;i++)i>0&&(fullname+="."),fullname+=names[i],eval("typeof "+fullname+' == "undefined"')&&eval(fullname+"={};")}}function getFiles(e){return e&&e.constructor==Array?e:[e]}function normaliseLanguageCode(e){return e=e.toLowerCase(),e.length>3&&(e=e.substring(0,3)+e.substring(3).toUpperCase()),e}function unescapeUnicode(e){var t=[],n=parseInt(e.substr(2),16);n>=0&&n<Math.pow(2,16)&&t.push(n);var r="";for(var i=0;i<t.length;++i)r+=String.fromCharCode(t[i]);return r}$.i18n={},$.i18n.map={},$.i18n.properties=function(e){var t={name:"Messages",language:"",path:"",mode:"vars",callback:function(){}};e=$.extend(t,e);if(e.language===null||e.language=="")e.language=$.i18n.browserLang();e.language===null&&(e.language="");var n=getFiles(e.name);for(i=0;i<n.length;i++)loadAndParseFile(e.path+n[i]+".properties",e.language,e.mode),e.language.length>=2&&loadAndParseFile(e.path+n[i]+"_"+e.language.substring(0,2)+".properties",e.language,e.mode),e.language.length>=5&&loadAndParseFile(e.path+n[i]+"_"+e.language.substring(0,5)+".properties",e.language,e.mode);e.callback&&e.callback()},$.i18n.prop=function(e,t){var n=$.i18n.map[e];if(n==null)return"["+e+"]";if(!t)return n;for(var r=0;r<t.length;r++){var i=new RegExp("\\{("+r+")\\}","g");n=n.replace(i,t[r])}return n},$.i18n.browserLang=function(){return normaliseLanguageCode(navigator.language||navigator.userLanguage)}}(jQuery),pen.define("cdf/jquery.i18n.properties",function(){}),this.JSON||(this.JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)r=rep[n],typeof r=="string"&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),pen.define("cdf/json",function(){}),pen.define("cdf/cdf-module",function(){}),Function.prototype.bind||(Function.prototype.bind=function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift();return function(){return e.apply(n,t.concat(Array.prototype.slice.call(arguments)))}}),pen.define("common-ui/prompting/pentaho-prompting-bind",function(){}),pen.define("common-ui/prompting/pentaho-prompting-builders",["cdf/cdf-module","common-ui/prompting/pentaho-prompting-bind"],function(){pentaho=typeof pentaho=="undefined"?{}:pentaho,pentaho.common=pentaho.common||{},pentaho.common.prompting=pentaho.common.prompting||{},pentaho.common.prompting.builders=pentaho.common.prompting.builders||{},pentaho.common.prompting.builders.PromptPanelBuilder=Base.extend({build:function(e){var t="prompt"+e.guid,n={name:t,type:"ScrollingPromptPanelLayoutComponent",htmlObject:e.destinationId,promptPanel:e,components:e.buildPanelComponents(),postExecution:function(){e._ready()}};return n}}),pentaho.common.prompting.builders.WidgetBuilder={mapping:{"prompt-panel":"pentaho.common.prompting.builders.PromptPanelBuilder","group-panel":"pentaho.common.prompting.builders.ParameterGroupPanelBuilder","parameter-panel":"pentaho.common.prompting.builders.ParameterPanelBuilder","submit-panel":"pentaho.common.prompting.builders.SubmitPanelBuilder",submit:"pentaho.common.prompting.builders.SubmitComponentBuilder",label:"pentaho.common.prompting.builders.LabelBuilder","error-label":"pentaho.common.prompting.builders.ErrorLabelBuilder",dropdown:"pentaho.common.prompting.builders.DropDownBuilder",radio:"pentaho.common.prompting.builders.RadioBuilder",checkbox:"pentaho.common.prompting.builders.CheckBuilder",togglebutton:"pentaho.common.prompting.builders.MultiButtonBuilder",list:"pentaho.common.prompting.builders.ListBuilder",datepicker:"pentaho.common.prompting.builders.DateInputBuilder",filebrowser:"pentaho.common.prompting.builders.ExternalInputBuilder","external-input":"pentaho.common.prompting.builders.ExternalInputBuilder","multi-line":"pentaho.common.prompting.builders.TextAreaBuilder",gc:"pentaho.common.prompting.builders.GarbageCollectorBuilder","default":"pentaho.common.prompting.builders.PlainPromptBuilder"},cache:{},findBuilderFor:function(e,t){return t=t||(e.param&&e.param.attributes?e.param.attributes["parameter-render-type"]:null),this.createBuilder(this.mapping[t]||this.mapping["default"])},createBuilder:function(name){var builder=this.cache[name];if(!builder)try{builder=eval("new "+name+"()"),this.cache[name]=builder}catch(e){throw typeof console!="undefined"&&console.log&&console.log('Unable to create widget builder of type "'+name+'"'),e}return builder},build:function(e,t){var n=this.findBuilderFor(e,t).build(e);return n.parameter&&n.param&&(n.postChange=function(){e.promptPanel.parameterChanged(this.param,this.parameter,this.getValue())}.bind(n)),n}},pentaho.common.prompting.builders.SubmitPanelBuilder=Base.extend({build:function(e){var t=e.promptPanel.generateWidgetGUID();return{type:"FlowPromptLayoutComponent",promptType:"submit",name:t,htmlObject:t,executeAtStart:!0,components:[pentaho.common.prompting.builders.WidgetBuilder.build(e,"submit")]}}}),pentaho.common.prompting.builders.SubmitComponentBuilder=Base.extend({build:function(e){var t=e.promptPanel.generateWidgetGUID();return{promptType:"submit",type:"SubmitPromptComponent",name:t,htmlObject:t,label:e.promptPanel.getString("submitButtonLabel","Submit"),autoSubmitLabel:e.promptPanel.getString("autoSubmitLabel","Auto-Submit"),promptPanel:e.promptPanel,paramDefn:e.promptPanel.paramDefn,executeAtStart:!0}}}),pentaho.common.prompting.builders.ParameterWidgetBuilderBase=Base.extend({build:function(e){var t=e.promptPanel.generateWidgetGUID();return{promptType:"prompt",executeAtStart:!0,param:e.param,name:t,htmlObject:t,type:undefined,parameter:e.promptPanel.getParameterName(e.param),postExecution:function(){this.base();var e=this.param.attributes.tooltip;e&&$("#"+this.htmlObject).attr("title",e)}}}}),pentaho.common.prompting.builders.LabelBuilder=pentaho.common.prompting.builders.ParameterWidgetBuilderBase.extend({build:function(e){var t=this.base(e),n=t.name+"-label",r=Dashboards.escapeHtml(e.param.attributes.label||e.param.name);return $.extend(t,{promptType:"label",name:n,htmlObject:n,type:"TextComponent",expression:function(){return r}}),delete t.parameter,t}}),pentaho.common.prompting.builders.ErrorLabelBuilder=pentaho.common.prompting.builders.LabelBuilder.extend({build:function(e){var t=this.base(e),n=e.errorMessage;return t.isErrorIndicator=!0,t.expression=function(){return n},t}}),pentaho.common.prompting.builders.TextInputBuilder=pentaho.common.prompting.builders.ParameterWidgetBuilderBase.extend({build:function(e){var t=this.base(e);return $.extend(t,{type:"TextInputComponent"})}}),pentaho.common.prompting.builders.ValueBasedParameterWidgetBuilder=pentaho.common.prompting.builders.ParameterWidgetBuilderBase.extend({getCDFValuesArray:function(e){var t=[];return $.each(e.values,function(e,n){t.push([n.value,n.label])}),t},build:function(e){var t=this.base(e);return $.extend(t,{valueAsId:!1,valuesArray:this.getCDFValuesArray(e.param)})}}),pentaho.common.prompting.builders.DropDownBuilder=pentaho.common.prompting.builders.ValueBasedParameterWidgetBuilder.extend({build:function(e){var t=this.base(e);return e.promptPanel.paramDefn.ignoreBiServer5538&&!e.param.hasSelection()&&(t.valuesArray=[["",""]].concat(t.valuesArray)),$.extend(t,{type:"SelectComponent",preExecution:function(){this.defaultIfEmpty=!e.promptPanel.paramDefn.ignoreBiServer5538&&!e.param.hasSelection()}})}}),pentaho.common.prompting.builders.ListBuilder=pentaho.common.prompting.builders.ValueBasedParameterWidgetBuilder.extend({build:function(e){var t=this.base(e);return $.extend(t,{type:e.param.multiSelect?"SelectMultiComponent":"SelectComponent",size:e.param.attributes["parameter-visible-items"]||5,changeMode:e.param.multiSelect?"timeout-focus":"immediate",preExecution:function(){this.defaultIfEmpty=!1}})}}),pentaho.common.prompting.builders.MultiButtonBuilder=pentaho.common.prompting.builders.ValueBasedParameterWidgetBuilder.extend({build:function(e){var t=this.base(e);return $.extend(t,{type:"MultiButtonComponent",isMultiple:e.param.multiSelect,verticalOrientation:"vertical"===e.param.attributes["parameter-layout"],expression:function(){return Dashboards.getParameterValue(this.parameter)},postExecution:function(){$("#"+this.htmlObject).addClass("pentaho-toggle-button-container")}})}}),pentaho.common.prompting.builders.ToggleButtonBaseBuilder=pentaho.common.prompting.builders.ValueBasedParameterWidgetBuilder.extend({build:function(e){var t=this.base(e);return $.extend(t,{defaultIfEmpty:!1,verticalOrientation:"vertical"==e.param.attributes["parameter-layout"]})}}),pentaho.common.prompting.builders.CheckBuilder=pentaho.common.prompting.builders.ToggleButtonBaseBuilder.extend({build:function(e){var t=this.base(e);return t.type="CheckComponent",t}}),pentaho.common.prompting.builders.RadioBuilder=pentaho.common.prompting.builders.ToggleButtonBaseBuilder.extend({build:function(e){var t=this.base(e);return t.type="radio",t}}),pentaho.common.prompting.builders.ExternalInputBuilder=pentaho.common.prompting.builders.ValueBasedParameterWidgetBuilder.extend({build:function(e){var t=e.promptPanel.createFormatter(e.promptPanel.paramDefn,e.param);return $.extend(this.base(e),{type:"ExternalInputComponent",transportFormatter:e.promptPanel.createDataTransportFormatter(e.promptPanel.paramDefn,e.param,t),formatter:t,promptPanel:e.promptPanel,paramDefn:e.promptPanel.paramDefn})}}),pentaho.common.prompting.builders.DateInputBuilder=pentaho.common.prompting.builders.ValueBasedParameterWidgetBuilder.extend({build:function(e){var t=e.promptPanel.createFormatter(e.promptPanel.paramDefn,e.param);return $.extend(this.base(e),{type:"DojoDateTextBoxComponent",transportFormatter:e.promptPanel.createDataTransportFormatter(e.promptPanel.paramDefn,e.param,t),formatter:t})}}),pentaho.common.prompting.builders.ParameterGroupPanelBuilder=Base.extend({lookupPromptType:function(e){switch(e.layout){case"horizontal":return"HorizontalTableBasedPromptLayoutComponent";case"flow":return"FlowPromptLayoutComponent";default:return"VerticalTableBasedPromptLayoutComponent"}},build:function(e){var t=e.promptPanel.generateWidgetGUID(),n=undefined;return{type:this.lookupPromptType(e.promptPanel.paramDefn),name:e.paramGroup.name,htmlObject:t,promptPanel:e.promptPanel,label:n,components:e.components,cssClass:"parameter-wrapper"}}}),pentaho.common.prompting.builders.ParameterPanelBuilder=pentaho.common.prompting.builders.ParameterWidgetBuilderBase.extend({build:function(e){var t=this.base(e),n="panel-"+t.name;return{name:n,htmlObject:n,type:"ParameterPanelComponent",executeAtStart:!0,components:e.components,param:e.param}}}),pentaho.common.prompting.builders.PlainPromptBuilder=pentaho.common.prompting.builders.ValueBasedParameterWidgetBuilder.extend({build:function(e){var t=e.promptPanel.createFormatter(e.promptPanel.paramDefn,e.param),n=e.promptPanel.createDataTransportFormatter(e.promptPanel.paramDefn,e.param,t),r=function(e){return $.map(e,function(e){var r=t?t.format(n.parse(e[0])):e[0],i=(t?t.format(n.parse(e[1])):e[1])||r;return{value:r,label:i}})},i=this.base(e);return $.extend(i,{type:"StaticAutocompleteBoxComponent",valuesArray:r(i.valuesArray),transportFormatter:n,formatter:t})}}),pentaho.common.prompting.builders.TextAreaBuilder=pentaho.common.prompting.builders.ValueBasedParameterWidgetBuilder.extend({build:function(e){var t=e.promptPanel.createFormatter(e.promptPanel.paramDefn,e.param);return $.extend(this.base(e),{type:"TextAreaComponent",transportFormatter:e.promptPanel.createDataTransportFormatter(e.promptPanel.paramDefn,e.param,t),formatter:t})}}),pentaho.common.prompting.builders.GarbageCollectorBuilder=Base.extend({build:function(e){return{type:"BaseComponent",name:"gc"+e.promptPanel.generateWidgetGUID(),executeAtStart:!0,preExecution:function(){return $.each(e.components.reverse(),function(e,t){try{t.clear()}catch(n){Dashboards.log("Error clearing "+t.name+":","error"),Dashboards.log(n,"exception")}}),setTimeout(function(){pentaho.common.prompting.removeDashboardComponents([this])}.bind(this)),!1}}}})}),pen.define("dojo/has",["require","module"],function(e,t){var n=e.has||function(){};if(!n("dojo-has-api")){var r=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location==location&&window.document==document,i=this,s=r&&document,o=s&&s.createElement("DiV"),u=t.config&&t.config()||{};n=function(e){return typeof u[e]=="function"?u[e]=u[e](i,s,o):u[e]},n.cache=u,n.add=function(e,t,r,i){return(typeof u[e]=="undefined"||i)&&(u[e]=t),r&&n(e)},n.add("host-browser",r),n.add("dom",r),n.add("dojo-dom-ready-api",1),n.add("dojo-sniff",1)}if(n("host-browser")){n.add("dom-addeventlistener",!!document.addEventListener),n.add("touch","ontouchstart"in document||window.navigator.msMaxTouchPoints>0),n.add("device-width",screen.availWidth||innerWidth);var a=document.createElement("form");n.add("dom-attributes-explicit",a.attributes.length==0),n.add("dom-attributes-specified-flag",a.attributes.length>0&&a.attributes.length<40)}return n.clearElement=function(e){return e.innerHTML="",e},n.normalize=function(e,t){var r=e.match(/[\?:]|[^:\?]*/g),i=0,s=function(e){var t=r[i++];return t==":"?0:r[i++]=="?"?!e&&n(t)?s():(s(!0),s(e)):t||0};return e=s(),e&&t(e)},n.load=function(e,t,n){e?t([e],n):n()},n}),pen.define("dojo/_base/config",["../has","require"],function(e,t){var n={};if(e("dojo-config-api")){var r=t.rawConfig,i;for(i in r)n[i]=r[i]}else{var s=function(t,n,r){for(i in t)i!="has"&&e.add(n+i,t[i],0,r)};n=e("dojo-loader")?t.rawConfig:this.dojoConfig||this.djConfig||{},s(n,"config",1),s(n.has,"",1)}return!n.locale&&typeof navigator!="undefined"&&(n.locale=(navigator.language||navigator.userLanguage).toLowerCase()),n}),pen.define("dojo/_base/kernel",["../has","./config","require","module"],function(e,t,n,r){var i,s,o={},u={},a={config:t,global:window,dijit:o,dojox:u},f={dojo:["dojo",a],dijit:["dijit",o],dojox:["dojox",u]},l=n.map&&n.map[r.id.match(/[^\/]+/)[0]],c;for(s in l)f[s]?f[s][0]=l[s]:f[s]=[l[s],{}];for(s in f)c=f[s],c[1]._scopeName=c[0],t.noGlobals||(this[c[0]]=c[1]);a.scopeMap=f,a.baseUrl=a.config.baseUrl=n.baseUrl,a.isAsync=!e("dojo-loader")||n.async,a.locale=t.locale;var h="$Rev: f774568 $".match(/[0-9a-f]{7,}/);a.version={major:1,minor:9,patch:2,flag:"",revision:h?h[0]:NaN,toString:function(){var e=a.version;return e.major+"."+e.minor+"."+e.patch+e.flag+" ("+e.revision+")"}},e.add("extend-dojo",1),Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(a),e("host-rhino")?a.exit=function(e){quit(e)}:a.exit=function(){},e.add("dojo-guarantee-console",1);if(e("dojo-guarantee-console")){typeof console!="undefined"||(console={});var p=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"],d;i=0;while(d=p[i++])console[d]||function(){var e=d+"";console[e]="log"in console?function(){var t=Array.apply({},arguments);t.unshift(e+":"),console.log(t.join(" "))}:function(){},console[e]._fake=!0}()}e.add("dojo-debug-messages",!!t.isDebug),a.deprecated=a.experimental=function(){},e("dojo-debug-messages")&&(a.deprecated=function(e,t,n){var r="DEPRECATED: "+e;t&&(r+=" "+t),n&&(r+=" -- will be removed in version: "+n),console.warn(r)},a.experimental=function(e,t){var n="EXPERIMENTAL: "+e+" -- APIs subject to change without notice.";t&&(n+=" "+t),console.warn(n)}),e.add("dojo-modulePaths",1);if(e("dojo-modulePaths")&&t.modulePaths){a.deprecated("dojo.modulePaths","use paths configuration");var v={};for(s in t.modulePaths)v[s.replace(/\./g,"/")]=t.modulePaths[s];n({paths:v})}return e.add("dojo-moduleUrl",1),e("dojo-moduleUrl")&&(a.moduleUrl=function(e,t){a.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var r=null;return e&&(r=n.toUrl(e.replace(/\./g,"/")+(t?"/"+t:"")+"/*.*").replace(/\/\*\.\*/,"")+(t?"":"/")),r}),a._hasResource={},a}),pen.define("dojo/sniff",["./has"],function(e){if(e("host-browser")){var t=navigator,n=t.userAgent,r=t.appVersion,i=parseFloat(r);e.add("air",n.indexOf("AdobeAIR")>=0),e.add("msapp",parseFloat(n.split("MSAppHost/")[1])||undefined),e.add("khtml",r.indexOf("Konqueror")>=0?i:undefined),e.add("webkit",parseFloat(n.split("WebKit/")[1])||undefined),e.add("chrome",parseFloat(n.split("Chrome/")[1])||undefined),e.add("safari",r.indexOf("Safari")>=0&&!e("chrome")?parseFloat(r.split("Version/")[1]):undefined),e.add("mac",r.indexOf("Macintosh")>=0),e.add("quirks",document.compatMode=="BackCompat");if(n.match(/(iPhone|iPod|iPad)/)){var s=RegExp.$1.replace(/P/,"p"),o=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",u=parseFloat(o.replace(/_/,".").replace(/_/g,""));e.add(s,u),e.add("ios",u)}e.add("android",parseFloat(n.split("Android ")[1])||undefined),e.add("bb",(n.indexOf("BlackBerry")>=0||n.indexOf("BB10")>=0)&&parseFloat(n.split("Version/")[1])||undefined),e.add("trident",parseFloat(r.split("Trident/")[1])||undefined),e.add("svg",typeof SVGAngle!="undefined");if(!e("webkit")){n.indexOf("Opera")>=0&&e.add("opera",i>=9.8?parseFloat(n.split("Version/")[1])||i:i),n.indexOf("Gecko")>=0&&!e("khtml")&&!e("webkit")&&!e("trident")&&e.add("mozilla",i),e("mozilla")&&e.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||undefined);if(document.all&&!e("opera")){var a=parseFloat(r.split("MSIE ")[1])||undefined,f=document.documentMode;f&&f!=5&&Math.floor(a)!=f&&(a=f),e.add("ie",a)}e.add("wii",typeof opera!="undefined"&&opera.wiiremote)}}return e}),pen.define("dojo/_base/lang",["./kernel","../has","../sniff"],function(e,t){t.add("bug-for-in-skips-shadowed",function(){for(var e in{toString:1})return 0;return 1});var n=t("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],r=n.length,i=function(t,n,r){var i,s=0,o=e.global;if(!r){if(!t.length)return o;i=t[s++];try{r=e.scopeMap[i]&&e.scopeMap[i][1]}catch(u){}r=r||(i in o?o[i]:n?o[i]={}:undefined)}while(r&&(i=t[s++]))r=i in r?r[i]:n?r[i]={}:undefined;return r},s=Object.prototype.toString,o=function(e,t,n){return(n||[]).concat(Array.prototype.slice.call(e,t||0))},u=/\{([^\}]+)\}/g,a={_extraNames:n,_mixin:function(e,i,s){var o,u,a,f={};for(o in i){u=i[o];if(!(o in e)||e[o]!==u&&(!(o in f)||f[o]!==u))e[o]=s?s(u):u}if(t("bug-for-in-skips-shadowed")&&i)for(a=0;a<r;++a){o=n[a],u=i[o];if(!(o in e)||e[o]!==u&&(!(o in f)||f[o]!==u))e[o]=s?s(u):u}return e},mixin:function(e,t){e||(e={});for(var n=1,r=arguments.length;n<r;n++)a._mixin(e,arguments[n]);return e},setObject:function(e,t,n){var r=e.split("."),s=r.pop(),o=i(r,!0,n);return o&&s?o[s]=t:undefined},getObject:function(e,t,n){return i(e.split("."),t,n)},exists:function(e,t){return a.getObject(e,!1,t)!==undefined},isString:function(e){return typeof e=="string"||e instanceof String},isArray:function(e){return e&&(e instanceof Array||typeof e=="array")},isFunction:function(e){return s.call(e)==="[object Function]"},isObject:function(e){return e!==undefined&&(e===null||typeof e=="object"||a.isArray(e)||a.isFunction(e))},isArrayLike:function(e){return e&&e!==undefined&&!a.isString(e)&&!a.isFunction(e)&&(!e.tagName||e.tagName.toLowerCase()!="form")&&(a.isArray(e)||isFinite(e.length))},isAlien:function(e){return e&&!a.isFunction(e)&&/\{\s*\[native code\]\s*\}/.test(String(e))},extend:function(e,t){for(var n=1,r=arguments.length;n<r;n++)a._mixin(e.prototype,arguments[n]);return e},_hitchArgs:function(t,n){var r=a._toArray(arguments,2),i=a.isString(n);return function(){var s=a._toArray(arguments),o=i?(t||e.global)[n]:n;return o&&o.apply(t||this,r.concat(s))}},hitch:function(t,n){if(arguments.length>2)return a._hitchArgs.apply(e,arguments);n||(n=t,t=null);if(a.isString(n)){t=t||e.global;if(!t[n])throw['lang.hitch: scope["',n,'"] is null (scope="',t,'")'].join("");return function(){return t[n].apply(t,arguments||[])}}return t?function(){return n.apply(t,arguments||[])}:n},delegate:function(){function e(){}return function(t,n){e.prototype=t;var r=new e;return e.prototype=null,n&&a._mixin(r,n),r}}(),_toArray:t("ie")?function(){function e(e,t,n){var r=n||[];for(var i=t||0;i<e.length;i++)r.push(e[i]);return r}return function(t){return(t.item?e:o).apply(this,arguments)}}():o,partial:function(t){var n=[null];return a.hitch.apply(e,n.concat(a._toArray(arguments)))},clone:function(e){if(!e||typeof e!="object"||a.isFunction(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,n,r;if(a.isArray(e)){t=[];for(n=0,r=e.length;n<r;++n)n in e&&t.push(a.clone(e[n]))}else t=e.constructor?new e.constructor:{};return a._mixin(t,e,a.clone)},trim:String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(e,t,n){return e.replace(n||u,a.isFunction(t)?t:function(e,n){return a.getObject(n,!1,t)})}};return t("extend-dojo")&&a.mixin(e,a),a}),pen.define("dojo/_base/declare",["./kernel","../has","./lang"],function(e,t,n){function f(e,t){throw new Error("declare"+(t?" "+t:"")+": "+e)}function l(e,t){var n=[],r=[{cls:0,refs:[]}],i={},o=1,a=e.length,l=0,c,h,p,d,v,m,g,y;for(;l<a;++l){p=e[l],p?s.call(p)!="[object Function]"&&f("mixin #"+l+" is not a callable constructor.",t):f("mixin #"+l+" is unknown. Did you use dojo.require to pull it in?",t),h=p._meta?p._meta.bases:[p],d=0;for(c=h.length-1;c>=0;--c)v=h[c].prototype,v.hasOwnProperty("declaredClass")||(v.declaredClass="uniqName_"+u++),g=v.declaredClass,i.hasOwnProperty(g)||(i[g]={count:0,refs:[],cls:h[c]},++o),m=i[g],d&&d!==m&&(m.refs.push(d),++d.count),d=m;++d.count,r[0].refs.push(d)}while(r.length){d=r.pop(),n.push(d.cls),--o;while(y=d.refs,y.length==1){d=y[0];if(!d||--d.count){d=0;break}n.push(d.cls),--o}if(d)for(l=0,a=y.length;l<a;++l)d=y[l],--d.count||r.push(d)}return o&&f("can't build consistent linearization",t),p=e[0],n[0]=p?p._meta&&p===n[n.length-p._meta.bases.length]?p._meta.bases.length:1:0,n}function c(e,t,n){var r,s,o,u,l,c,h,p,d,v=this._inherited=this._inherited||{};typeof e=="string"&&(r=e,e=t,t=n),n=0,u=e.callee,r=r||u.nom,r||f("can't deduce a name to call inherited()",this.declaredClass),l=this.constructor._meta,o=l.bases,d=v.p;if(r!=a){if(v.c!==u){d=0,c=o[0],l=c._meta;if(l.hidden[r]!==u){s=l.chains,s&&typeof s[r]=="string"&&f("calling chained method with inherited: "+r,this.declaredClass);do{l=c._meta,h=c.prototype;if(l&&(h[r]===u&&h.hasOwnProperty(r)||l.hidden[r]===u))break}while(c=o[++d]);d=c?d:-1}}c=o[++d];if(c){h=c.prototype;if(c._meta&&h.hasOwnProperty(r))n=h[r];else{p=i[r];do{h=c.prototype,n=h[r];if(n&&(c._meta?h.hasOwnProperty(r):n!==p))break}while(c=o[++d])}}n=c&&n||i[r]}else{if(v.c!==u){d=0,l=o[0]._meta;if(l&&l.ctor!==u){s=l.chains,(!s||s.constructor!=="manual")&&f("calling chained constructor with inherited",this.declaredClass);while(c=o[++d]){l=c._meta;if(l&&l.ctor===u)break}d=c?d:-1}}while(c=o[++d]){l=c._meta,n=l?l.ctor:c;if(n)break}n=c&&n}v.c=n,v.p=d;if(n)return t===!0?n:n.apply(this,t||e)}function h(e,t){return typeof e=="string"?this.__inherited(e,t,!0):this.__inherited(e,!0)}function p(e,t,n){var r=this.getInherited(e,t);if(r)return r.apply(this,n||t||e)}function v(e){var t=this.constructor._meta.bases;for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return this instanceof e}function m(e,r){for(var i in r)i!=a&&r.hasOwnProperty(i)&&(e[i]=r[i]);if(t("bug-for-in-skips-shadowed"))for(var s=n._extraNames,o=s.length;o;)i=s[--o],i!=a&&r.hasOwnProperty(i)&&(e[i]=r[i])}function g(e,r){var o,u;for(o in r)u=r[o],(u!==i[o]||!(o in i))&&o!=a&&(s.call(u)=="[object Function]"&&(u.nom=o),e[o]=u);if(t("bug-for-in-skips-shadowed"))for(var f=n._extraNames,l=f.length;l;)o=f[--l],u=r[o],(u!==i[o]||!(o in i))&&o!=a&&(s.call(u)=="[object Function]"&&(u.nom=o),e[o]=u);return e}function y(e){return C.safeMixin(this.prototype,e),this}function b(e,t){return C([this].concat(e),t||{})}function w(e,t){return function(){var n=arguments,r=n,i=n[0],s,o,u,a=e.length,f;if(!(this instanceof n.callee))return N(n);if(t&&(i&&i.preamble||this.preamble)){f=new Array(e.length),f[0]=n;for(o=0;;){i=n[0],i&&(s=i.preamble,s&&(n=s.apply(this,n)||n)),s=e[o].prototype,s=s.hasOwnProperty("preamble")&&s.preamble,s&&(n=s.apply(this,n)||n);if(++o==a)break;f[o]=n}}for(o=a-1;o>=0;--o)s=e[o],u=s._meta,s=u?u.ctor:s,s&&s.apply(this,f?f[o]:n);s=this.postscript,s&&s.apply(this,r)}}function E(e,t){return function(){var n=arguments,r=n,i=n[0],s;if(!(this instanceof n.callee))return N(n);t&&(i&&(s=i.preamble,s&&(r=s.apply(this,r)||r)),s=this.preamble,s&&s.apply(this,r)),e&&e.apply(this,n),s=this.postscript,s&&s.apply(this,n)}}function S(e){return function(){var t=arguments,n=0,r,i;if(!(this instanceof t.callee))return N(t);for(;r=e[n];++n){i=r._meta,r=i?i.ctor:r;if(r){r.apply(this,t);break}}r=this.postscript,r&&r.apply(this,t)}}function x(e,t,n){return function(){var r,i,s,o=0,u=1;n&&(o=t.length-1,u=-1);for(;r=t[o];o+=u)i=r._meta,s=(i?i.hidden:r.prototype)[e],s&&s.apply(this,arguments)}}function T(e){o.prototype=e.prototype;var t=new o;return o.prototype=null,t}function N(e){var t=e.callee,n=T(t);return t.apply(n,e),n}function C(e,t,o){typeof e!="string"&&(o=t,t=e,e=""),o=o||{};var u,p,g,N,k,L,A,O=1,M=t;s.call(t)=="[object Array]"?(L=l(t,e),g=L[0],O=L.length-g,t=L[O]):(L=[0],t?s.call(t)=="[object Function]"?(g=t._meta,L=L.concat(g?g.bases:t)):f("base class is not a callable constructor.",e):t!==null&&f("unknown base class. Did you use dojo.require to pull it in?",e));if(t)for(p=O-1;;--p){u=T(t);if(!p)break;g=L[p],(g._meta?m:r)(u,g.prototype),N=new Function,N.superclass=t,N.prototype=u,t=u.constructor=N}else u={};C.safeMixin(u,o),g=o.constructor,g!==i.constructor&&(g.nom=a,u.constructor=g);for(p=O-1;p;--p)g=L[p]._meta,g&&g.chains&&(A=r(A||{},g.chains));u["-chains-"]&&(A=r(A||{},u["-chains-"])),g=!A||!A.hasOwnProperty(a),L[0]=N=A&&A.constructor==="manual"?S(L):L.length==1?E(o.constructor,g):w(L,g),N._meta={bases:L,hidden:o,chains:A,parents:M,ctor:o.constructor},N.superclass=t&&t.prototype,N.extend=y,N.createSubclass=b,N.prototype=u,u.constructor=N,u.getInherited=h,u.isInstanceOf=v,u.inherited=d,u.__inherited=c,e&&(u.declaredClass=e,n.setObject(e,N));if(A)for(k in A)u[k]&&typeof A[k]=="string"&&k!=a&&(g=u[k]=x(k,L,A[k]==="after"),g.nom=k);return N}var r=n.mixin,i=Object.prototype,s=i.toString,o=new Function,u=0,a="constructor",d=e.config.isDebug?p:c;return e.safeMixin=C.safeMixin=g,e.declare=C,C}),pen.define("dojo/_base/array",["./kernel","../has","./lang"],function(e,t,n){function s(e){return r[e]=new Function("item","index","array",e)}function o(e){var t=!e;return function(n,i,o){var u=0,a=n&&n.length||0,f;a&&typeof n=="string"&&(n=n.split("")),typeof i=="string"&&(i=r[i]||s(i));if(o)for(;u<a;++u){f=!i.call(o,n[u],u,n);if(e^f)return!f}else for(;u<a;++u){f=!i(n[u],u,n);if(e^f)return!f}return t}}function u(e){var t=1,n=0,r=0;return e||(t=n=r=-1),function(s,o,u,f){if(f&&t>0)return a.lastIndexOf(s,o,u);var l=s&&s.length||0,c=e?l+r:n,h;u===i?h=e?n:l+r:u<0?(h=l+u,h<0&&(h=n)):h=u>=l?l+r:u,l&&typeof s=="string"&&(s=s.split(""));for(;h!=c;h+=t)if(s[h]==o)return h;return-1}}var r={},i,a={every:o(!1),some:o(!0),indexOf:u(!0),lastIndexOf:u(!1),forEach:function(e,t,n){var i=0,o=e&&e.length||0;o&&typeof e=="string"&&(e=e.split("")),typeof t=="string"&&(t=r[t]||s(t));if(n)for(;i<o;++i)t.call(n,e[i],i,e);else for(;i<o;++i)t(e[i],i,e)},map:function(e,t,n,i){var o=0,u=e&&e.length||0,a=new(i||Array)(u);u&&typeof e=="string"&&(e=e.split("")),typeof t=="string"&&(t=r[t]||s(t));if(n)for(;o<u;++o)a[o]=t.call(n,e[o],o,e);else for(;o<u;++o)a[o]=t(e[o],o,e);return a},filter:function(e,t,n){var i=0,o=e&&e.length||0,u=[],a;o&&typeof e=="string"&&(e=e.split("")),typeof t=="string"&&(t=r[t]||s(t));if(n)for(;i<o;++i)a=e[i],t.call(n,a,i,e)&&u.push(a);else for(;i<o;++i)a=e[i],t(a,i,e)&&u.push(a);return u},clearCache:function(){r={}}};return t("extend-dojo")&&n.mixin(e,a),a}),pen.define("dojo/aspect",[],function(){function n(e,n,r,i){var s=e[n],o=n=="around",u;if(o){var a=r(function(){return s.advice(this,arguments)});u={remove:function(){a&&(a=e=r=null)},advice:function(e,t){return a?a.apply(e,t):s.advice(e,t)}}}else u={remove:function(){if(u.advice){var t=u.previous,i=u.next;!i&&!t?delete e[n]:(t?t.next=i:e[n]=i,i&&(i.previous=t)),e=r=u.advice=null}},id:t++,advice:r,receiveArguments:i};if(s&&!o)if(n=="after"){while(s.next&&(s=s.next));s.next=u,u.previous=s}else n=="before"&&(e[n]=u,u.next=s,s.previous=u);else e[n]=u;return u}function r(r){return function(i,s,o,u){var a=i[s],f;if(!a||a.target!=i)i[s]=f=function(){var n=t,r=arguments,i=f.before;while(i)r=i.advice.apply(this,r)||r,i=i.next;if(f.around)var s=f.around.advice(this,r);var o=f.after;while(o&&o.id<n){if(o.receiveArguments){var u=o.advice.apply(this,r);s=u===e?s:u}else s=o.advice.call(this,s,r);o=o.next}return s},a&&(f.around={advice:function(e,t){return a.apply(e,t)}}),f.target=i;var l=n(f||a,r,o,u);return o=null,l}}var e,t=0,i=r("after"),s=r("before"),o=r("around");return{before:s,around:o,after:i}}),pen.define("dojo/on",["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(e,t,n){function o(e,t,r,o,u){var a=t.match(/(.*):(.*)/);if(a)return t=a[2],a=a[1],i.selector(a,t).call(u,e,r);n("touch")&&(s.test(t)&&(r=x(r)),!n("event-orientationchange")&&t=="orientationchange"&&(t="resize",e=window,r=x(r))),p&&(r=p(r));if(e.addEventListener){var f=t in c,l=f?c[t]:t;return e.addEventListener(l,r,f),{remove:function(){e.removeEventListener(l,r,f)}}}t="on"+t;if(g&&e.attachEvent)return g(e,t,r);throw new Error("Target must be an event emitter")}function u(){this.cancelable=!1,this.defaultPrevented=!0}function a(){this.bubbles=!1}if(n("dom")){var r=window.ScriptEngineMajorVersion;n.add("jscript",r&&r()+ScriptEngineMinorVersion()/10),n.add("event-orientationchange",n("touch")&&!n("android")),n.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation),n.add("event-focusin",function(e,t,n){return"onfocusin"in n}),n("touch")&&n.add("touch-can-modify-event-delegate",function(){var e=function(){};e.prototype=document.createEvent("MouseEvents");try{return(new e).target=null,!0}catch(t){return!1}})}var i=function(e,t,n,r){return typeof e.on=="function"&&typeof t!="function"&&!e.nodeType?e.on(t,n):i.parse(e,t,n,o,r,this)};i.pausable=function(e,t,n,r){var s,o=i(e,t,function(){if(!s)return n.apply(this,arguments)},r);return o.pause=function(){s=!0},o.resume=function(){s=!1},o},i.once=function(e,t,n,r){var s=i(e,t,function(){return s.remove(),n.apply(this,arguments)});return s},i.parse=function(e,t,n,r,s,o){if(t.call)return t.call(o,e,n);if(t instanceof Array)u=t;else if(t.indexOf(",")>-1)var u=t.split(/\s*,\s*/);if(u){var a=[],f=0,l;while(l=u[f++])a.push(i.parse(e,l,n,r,s,o));return a.remove=function(){for(var e=0;e<a.length;e++)a[e].remove()},a}return r(e,t,n,s,o)};var s=/^touch/;i.matches=function(e,n,r,i,s){s=s&&s.matches?s:t.query,i=i!==!1,e.nodeType!=1&&(e=e.parentNode);while(!s.matches(e,n,r))if(e==r||i===!1||!(e=e.parentNode)||e.nodeType!=1)return!1;return e},i.selector=function(e,t,n){return function(r,s){function a(t){return i.matches(t,e,r,n,o)}var o=typeof e=="function"?{matches:e}:this,u=t.bubble;return u?i(r,u(a),s):i(r,t,function(e){var t=a(e.target);return t&&s.call(t,e)})}};var f=[].slice,l=i.emit=function(e,t,n){var r=f.call(arguments,2),i="on"+t;if("parentNode"in e){var s=r[0]={};for(var o in n)s[o]=n[o];s.preventDefault=u,s.stopPropagation=a,s.target=e,s.type=t,n=s}do e[i]&&e[i].apply(e,r);while(n&&n.bubbles&&(e=e.parentNode));return n&&n.cancelable&&n},c=n("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!n("event-stopimmediatepropagation"))var h=function(){this.immediatelyStopped=!0,this.modified=!0},p=function(e){return function(t){if(!t.immediatelyStopped)return t.stopImmediatePropagation=h,e.apply(this,arguments)}};if(n("dom-addeventlistener"))i.emit=function(e,t,n){if(e.dispatchEvent&&document.createEvent){var r=e.ownerDocument||document,s=r.createEvent("HTMLEvents");s.initEvent(t,!!n.bubbles,!!n.cancelable);for(var o in n)o in s||(s[o]=n[o]);return e.dispatchEvent(s)&&s}return l.apply(i,arguments)};else{i._fixEvent=function(e,t){if(!e){var n=t&&(t.ownerDocument||t.document||t).parentWindow||window;e=n.event}if(!e)return e;try{d&&e.type==d.type&&e.srcElement==d.target&&(e=d)}catch(r){}if(!e.target){e.target=e.srcElement,e.currentTarget=t||e.srcElement,e.type=="mouseover"&&(e.relatedTarget=e.fromElement),e.type=="mouseout"&&(e.relatedTarget=e.toElement),e.stopPropagation||(e.stopPropagation=b,e.preventDefault=w);switch(e.type){case"keypress":var i="charCode"in e?e.charCode:e.keyCode;i==10?(i=0,e.keyCode=13):i==13||i==27?i=0:i==3&&(i=99),e.charCode=i,y(e)}}return e};var d,v=function(e){this.handle=e};v.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var m=function(e){return function(t){t=i._fixEvent(t,this);var n=e.call(this,t);return t.modified&&(d||setTimeout(function(){d=null}),d=t),n}},g=function(t,r,i){i=m(i);if(((t.ownerDocument?t.ownerDocument.parentWindow:t.parentWindow||t.window||window)!=top||n("jscript")<5.8)&&!n("config-_allow_leaks")){typeof _dojoIEListeners_=="undefined"&&(_dojoIEListeners_=[]);var s=t[r];if(!s||!s.listeners){var o=s;s=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}"),s.listeners=[],t[r]=s,s.global=this,o&&s.listeners.push(_dojoIEListeners_.push(o)-1)}var u;return s.listeners.push(u=s.global._dojoIEListeners_.push(i)-1),new v(u)}return e.after(t,r,i,!0)},y=function(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode},b=function(){this.cancelBubble=!0},w=i._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(e){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(n("touch"))var E=function(){},S=window.orientation,x=function(e){return function(t){var r=t.corrected;if(!r){var i=t.type;try{delete t.type}catch(s){}if(t.type){if(n("touch-can-modify-event-delegate"))E.prototype=t,r=new E;else{r={};for(var o in t)r[o]=t[o]}r.preventDefault=function(){t.preventDefault()},r.stopPropagation=function(){t.stopPropagation()}}else r=t,r.type=i;t.corrected=r;if(i=="resize")return S==window.orientation?null:(S=window.orientation,r.type="orientationchange",e.call(this,r));"rotation"in r||(r.rotation=0,r.scale=1);var u=r.changedTouches[0];for(var a in u)delete r[a],r[a]=u[a]}return e.call(this,r)}};return i}),pen.define("dojo/Evented",["./aspect","./on"],function(e,t){function r(){}var n=e.after;return r.prototype={on:function(e,r){return t.parse(this,e,r,function(e,t){return n(e,"on"+t,r,!0)})},emit:function(e,n){var r=[this];return r.push.apply(r,arguments),t.emit.apply(t,r)}},r}),pen.define("dojo/topic",["./Evented"],function(e){var t=new e;return{publish:function(e,n){return t.emit.apply(t,arguments)},subscribe:function(e,n){return t.on.apply(t,arguments)}}}),pen.define("dojo/_base/window",["./kernel","./lang","../sniff"],function(e,t,n){var r={global:e.global,doc:this.document||null,body:function(t){return t=t||e.doc,t.body||t.getElementsByTagName("body")[0]},setContext:function(t,n){e.global=r.global=t,e.doc=r.doc=n},withGlobal:function(t,n,i,s){var o=e.global;try{return e.global=r.global=t,r.withDoc.call(null,t.document,n,i,s)}finally{e.global=r.global=o}},withDoc:function(t,i,s,o){var u=r.doc,a=n("quirks"),f=n("ie"),l,c,h;try{return e.doc=r.doc=t,e.isQuirks=n.add("quirks",e.doc.compatMode=="BackCompat",!0,!0),n("ie")&&(h=t.parentWindow)&&h.navigator&&(l=parseFloat(h.navigator.appVersion.split("MSIE ")[1])||undefined,c=t.documentMode,c&&c!=5&&Math.floor(l)!=c&&(l=c),e.isIE=n.add("ie",l,!0,!0)),s&&typeof i=="string"&&(i=s[i]),i.apply(s,o||[])}finally{e.doc=r.doc=u,e.isQuirks=n.add("quirks",a,!0,!0),e.isIE=n.add("ie",f,!0,!0)}}};return n("extend-dojo")&&t.mixin(e,r),r}),pen.define("dojo/dom",["./sniff","./_base/window"],function(e,t){if(e("ie")<=7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}var r={};e("ie")?r.byId=function(e,n){if(typeof e!="string")return e;var r=n||t.doc,i=e&&r.getElementById(e);if(!(!i||i.attributes.id.value!=e&&i.id!=e))return i;var s=r.all[e];if(!s||s.nodeName)s=[s];var o=0;while(i=s[o++])if(i.attributes&&i.attributes.id&&i.attributes.id.value==e||i.id==e)return i}:r.byId=function(e,n){return(typeof e=="string"?(n||t.doc).getElementById(e):e)||null},r.isDescendant=function(e,t){try{e=r.byId(e),t=r.byId(t);while(e){if(e==t)return!0;e=e.parentNode}}catch(n){}return!1},e.add("css-user-select",function(e,t,n){if(!n)return!1;var r=n.style,i=["Khtml","O","ms","Moz","Webkit"],s=i.length,o="userSelect",u;do if(typeof r[o]!="undefined")return o;while(s--&&(o=i[s]+"UserSelect"));return!1});var i=e("css-user-select");return r.setSelectable=i?function(e,t){r.byId(e).style[i]=t?"":"none"}:function(e,t){e=r.byId(e);var n=e.getElementsByTagName("*"),i=n.length;if(t){e.removeAttribute("unselectable");while(i--)n[i].removeAttribute("unselectable")}else{e.setAttribute("unselectable","on");while(i--)n[i].setAttribute("unselectable","on")}},r}),pen.define("dojo/dom-style",["./sniff","./dom"],function(e,t){function c(t,n,r){n=n.toLowerCase();if(e("ie")){if(r=="auto"){if(n=="height")return t.offsetHeight;if(n=="width")return t.offsetWidth}if(n=="fontweight")switch(r){case 700:return"bold";case 400:default:return"normal"}}return n in f||(f[n]=l.test(n)),f[n]?i(t,r):r}var n,r={};e("webkit")?n=function(e){var t;if(e.nodeType==1){var n=e.ownerDocument.defaultView;t=n.getComputedStyle(e,null),!t&&e.style&&(e.style.display="",t=n.getComputedStyle(e,null))}return t||{}}:e("ie")&&(e("ie")<9||e("quirks"))?n=function(e){return e.nodeType==1&&e.currentStyle?e.currentStyle:{}}:n=function(e){return e.nodeType==1?e.ownerDocument.defaultView.getComputedStyle(e,null):{}},r.getComputedStyle=n;var i;e("ie")?i=function(e,t){if(!t)return 0;if(t=="medium")return 4;if(t.slice&&t.slice(-2)=="px")return parseFloat(t);var n=e.style,r=e.runtimeStyle,i=e.currentStyle,s=n.left,o=r.left;r.left=i.left;try{n.left=t,t=n.pixelLeft}catch(u){t=0}return n.left=s,r.left=o,t}:i=function(e,t){return parseFloat(t)||0},r.toPixelValue=i;var s="DXImageTransform.Microsoft.Alpha",o=function(e,t){try{return e.filters.item(s)}catch(n){return t?{}:null}},u=e("ie")<9||e("ie")<10&&e("quirks")?function(e){try{return o(e).Opacity/100}catch(t){return 1}}:function(e){return n(e).opacity},a=e("ie")<9||e("ie")<10&&e("quirks")?function(e,t){t===""&&(t=1);var n=t*100,r=t===1;r?(e.style.zoom="",o(e)&&(e.style.filter=e.style.filter.replace(new RegExp("\\s*progid:"+s+"\\([^\\)]+?\\)","i"),""))):(e.style.zoom=1,o(e)?o(e,1).Opacity=n:e.style.filter+=" progid:"+s+"(Opacity="+n+")",o(e,1).Enabled=!0);if(e.tagName.toLowerCase()=="tr")for(var i=e.firstChild;i;i=i.nextSibling)i.tagName.toLowerCase()=="td"&&a(i,t);return t}:function(e,t){return e.style.opacity=t},f={left:!0,top:!0},l=/margin|padding|width|height|max|min|offset/,h={cssFloat:1,styleFloat:1,"float":1};return r.get=function(n,i){var s=t.byId(n),o=arguments.length,a=i=="opacity";if(o==2&&a)return u(s);i=h[i]?"cssFloat"in s.style?"cssFloat":"styleFloat":i;var f=r.getComputedStyle(s);return o==1?f:c(s,i,f[i]||s.style[i])},r.set=function(n,i,s){var o=t.byId(n),u=arguments.length,f=i=="opacity";i=h[i]?"cssFloat"in o.style?"cssFloat":"styleFloat":i;if(u==3)return f?a(o,s):o.style[i]=s;for(var l in i)r.set(n,l,i[l]);return r.getComputedStyle(o)},r}),pen.define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(e,t,n,r){function o(e,t,n,r,i,s){s=s||"px";var o=e.style;isNaN(t)||(o.left=t+s),isNaN(n)||(o.top=n+s),r>=0&&(o.width=r+s),i>=0&&(o.height=i+s)}function u(e){return e.tagName.toLowerCase()=="button"||e.tagName.toLowerCase()=="input"&&(e.getAttribute("type")||"").toLowerCase()=="button"}function a(e){return i.boxModel=="border-box"||e.tagName.toLowerCase()=="table"||u(e)}var i={};i.boxModel="content-box",e("ie")&&(i.boxModel=document.compatMode=="BackCompat"?"border-box":"content-box"),i.getPadExtents=function(t,i){t=n.byId(t);var s=i||r.getComputedStyle(t),o=r.toPixelValue,u=o(t,s.paddingLeft),a=o(t,s.paddingTop),f=o(t,s.paddingRight),l=o(t,s.paddingBottom);return{l:u,t:a,r:f,b:l,w:u+f,h:a+l}};var s="none";i.getBorderExtents=function(t,i){t=n.byId(t);var o=r.toPixelValue,u=i||r.getComputedStyle(t),a=u.borderLeftStyle!=s?o(t,u.borderLeftWidth):0,f=u.borderTopStyle!=s?o(t,u.borderTopWidth):0,l=u.borderRightStyle!=s?o(t,u.borderRightWidth):0,c=u.borderBottomStyle!=s?o(t,u.borderBottomWidth):0;return{l:a,t:f,r:l,b:c,w:a+l,h:f+c}},i.getPadBorderExtents=function(t,s){t=n.byId(t);var o=s||r.getComputedStyle(t),u=i.getPadExtents(t,o),a=i.getBorderExtents(t,o);return{l:u.l+a.l,t:u.t+a.t,r:u.r+a.r,b:u.b+a.b,w:u.w+a.w,h:u.h+a.h}},i.getMarginExtents=function(t,i){t=n.byId(t);var s=i||r.getComputedStyle(t),o=r.toPixelValue,u=o(t,s.marginLeft),a=o(t,s.marginTop),f=o(t,s.marginRight),l=o(t,s.marginBottom);return{l:u,t:a,r:f,b:l,w:u+f,h:a+l}},i.getMarginBox=function(o,u){o=n.byId(o);var a=u||r.getComputedStyle(o),f=i.getMarginExtents(o,a),l=o.offsetLeft-f.l,c=o.offsetTop-f.t,h=o.parentNode,p=r.toPixelValue,d;if(e("mozilla")){var v=parseFloat(a.left),m=parseFloat(a.top);!isNaN(v)&&!isNaN(m)?(l=v,c=m):h&&h.style&&(d=r.getComputedStyle(h),d.overflow!="visible"&&(l+=d.borderLeftStyle!=s?p(o,d.borderLeftWidth):0,c+=d.borderTopStyle!=s?p(o,d.borderTopWidth):0))}else(e("opera")||e("ie")==8&&!e("quirks"))&&h&&(d=r.getComputedStyle(h),l-=d.borderLeftStyle!=s?p(o,d.borderLeftWidth):0,c-=d.borderTopStyle!=s?p(o,d.borderTopWidth):0);return{l:l,t:c,w:o.offsetWidth+f.w,h:o.offsetHeight+f.h}},i.getContentBox=function(s,o){s=n.byId(s);var u=o||r.getComputedStyle(s),a=s.clientWidth,f,l=i.getPadExtents(s,u),c=i.getBorderExtents(s,u);return a?(f=s.clientHeight,c.w=c.h=0):(a=s.offsetWidth,f=s.offsetHeight),e("opera")&&(l.l+=c.l,l.t+=c.t),{l:l.l,t:l.t,w:a-l.w-c.w,h:f-l.h-c.h}},i.setContentSize=function(t,r,s){t=n.byId(t);var u=r.w,f=r.h;if(a(t)){var l=i.getPadBorderExtents(t,s);u>=0&&(u+=l.w),f>=0&&(f+=l.h)}o(t,NaN,NaN,u,f)};var f={l:0,t:0,w:0,h:0};return i.setMarginBox=function(s,l,c){s=n.byId(s);var h=c||r.getComputedStyle(s),p=l.w,d=l.h,v=a(s)?f:i.getPadBorderExtents(s,h),m=i.getMarginExtents(s,h);if(e("webkit")&&u(s)){var g=s.style;p>=0&&!g.width&&(g.width="4px"),d>=0&&!g.height&&(g.height="4px")}p>=0&&(p=Math.max(p-v.w-m.w,0)),d>=0&&(d=Math.max(d-v.h-m.h,0)),o(s,l.l,l.t,p,d)},i.isBodyLtr=function(n){return n=n||t.doc,(t.body(n).dir||n.documentElement.dir||"ltr").toLowerCase()=="ltr"},i.docScroll=function(r){r=r||t.doc;var s=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in s?{x:s.pageXOffset,y:s.pageYOffset}:(s=e("quirks")?t.body(r):r.documentElement)&&{x:i.fixIeBiDiScrollLeft(s.scrollLeft||0,r),y:s.scrollTop||0}},e("ie")&&(i.getIeDocumentElementOffset=function(r){r=r||t.doc;var i=r.documentElement;if(e("ie")<8){var s=i.getBoundingClientRect(),o=s.left,u=s.top;return e("ie")<7&&(o+=i.clientLeft,u+=i.clientTop),{x:o<0?0:o,y:u<0?0:u}}return{x:0,y:0}}),i.fixIeBiDiScrollLeft=function(r,s){s=s||t.doc;var o=e("ie");if(o&&!i.isBodyLtr(s)){var u=e("quirks"),a=u?t.body(s):s.documentElement,f=t.global;return o==6&&!u&&f.frameElement&&a.scrollHeight>a.clientHeight&&(r+=a.clientLeft),o<8||u?r+a.clientWidth-a.scrollWidth:-r}return r},i.position=function(r,s){r=n.byId(r);var o=t.body(r.ownerDocument),u=r.getBoundingClientRect();u={x:u.left,y:u.top,w:u.right-u.left,h:u.bottom-u.top};if(e("ie")<9){var a=i.getIeDocumentElementOffset(r.ownerDocument);u.x-=a.x+(e("quirks")?o.clientLeft+o.offsetLeft:0),u.y-=a.y+(e("quirks")?o.clientTop+o.offsetTop:0)}if(s){var f=i.docScroll(r.ownerDocument);u.x+=f.x,u.y+=f.y}return u},i.getMarginSize=function(t,s){t=n.byId(t);var o=i.getMarginExtents(t,s||r.getComputedStyle(t)),u=t.getBoundingClientRect();return{w:u.right-u.left+o.w,h:u.bottom-u.top+o.h}},i.normalizeEvent=function(t){"layerX"in t||(t.layerX=t.offsetX,t.layerY=t.offsetY);if(!e("dom-addeventlistener")){var n=t.target,r=n&&n.ownerDocument||document,s=e("quirks")?r.body:r.documentElement,o=i.getIeDocumentElementOffset(r);t.pageX=t.clientX+i.fixIeBiDiScrollLeft(s.scrollLeft||0,r)-o.x,t.pageY=t.clientY+(s.scrollTop||0)-o.y}},i}),pen.define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(e,t,n,r){if(t._fixEvent){var i=t._fixEvent;t._fixEvent=function(e,t){return e=i(e,t),e&&r.normalizeEvent(e),e}}var s={fix:function(e,n){return t._fixEvent?t._fixEvent(e,n):e},stop:function(e){n("dom-addeventlistener")||e&&e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e=e||window.event,e.cancelBubble=!0,t._preventDefault.call(e))}};return n("extend-dojo")&&(e.fixEvent=s.fix,e.stopEvent=s.stop),s}),pen.define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(e,t,n,r,i){function o(e,n){var i=function(i,s){return t(i,e,function(e){if(n)return n(e,s);if(!r.isDescendant(e.relatedTarget,i))return s.call(this,e)})};return i.bubble=function(t){return o(e,function(e,n){var r=t(e.target),i=e.relatedTarget;if(r&&r!=(i&&i.nodeType==1&&t(i)))return n.call(r,e)})},i}n.add("dom-quirks",i.doc&&i.doc.compatMode=="BackCompat"),n.add("events-mouseenter",i.doc&&"onmouseenter"in i.doc.createElement("div")),n.add("events-mousewheel",i.doc&&"onmousewheel"in i.doc);var s;n("dom-quirks")&&n("ie")||!n("dom-addeventlistener")?s={LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,t){return e.button&t},isLeft:function(e){return e.button&1},isMiddle:function(e){return e.button&4},isRight:function(e){return e.button&2}}:s={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,t){return e.button==t},isLeft:function(e){return e.button==0},isMiddle:function(e){return e.button==1},isRight:function(e){return e.button==2}},e.mouseButtons=s;var u;return n("events-mousewheel")?u="mousewheel":u=function(e,n){return t(e,"DOMMouseScroll",function(e){e.wheelDelta=-e.detail,n.call(this,e)})},{_eventHandler:o,enter:o("mouseover"),leave:o("mouseout"),wheel:u,isLeft:s.isLeft,isMiddle:s.isMiddle,isRight:s.isRight}}),pen.define("dojo/_base/sniff",["./kernel","./lang","../sniff"],function(e,t,n){return n("host-browser")?(e._name="browser",t.mixin(e,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:n("khtml"),isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:n("android"),isWii:n("wii"),isQuirks:n("quirks"),isAir:n("air")}),n):n}),pen.define("dojo/keys",["./_base/kernel","./sniff"],function(e,t){return e.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")&&!t("air")?t("safari")?91:224:17}}),pen.define("dojo/_base/connect",["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(e,t,n,r,i,s,o,u){function a(n,i,o,a,f){a=u.hitch(o,a);if(!n||!n.addEventListener&&!n.attachEvent)return r.after(n||e.global,i,a,!0);typeof i=="string"&&i.substring(0,2)=="on"&&(i=i.substring(2)),n||(n=e.global);if(!f)switch(i){case"keypress":i=p;break;case"mouseenter":i=s.enter;break;case"mouseleave":i=s.leave}return t(n,i,a,f)}function h(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode}o.add("events-keypress-typed",function(){var e={charCode:0};try{e=document.createEvent("KeyboardEvent"),(e.initKeyboardEvent||e.initKeyEvent).call(e,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(t){}return e.charCode==0&&!o("opera")});var f={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},l=o("mac")?"metaKey":"ctrlKey",c=function(e,t){var n=u.mixin({},e,t);return h(n),n.preventDefault=function(){e.preventDefault()},n.stopPropagation=function(){e.stopPropagation()},n},p;if(o("events-keypress-typed")){var d=function(e,t){try{return e.keyCode=t}catch(e){return 0}};p=function(e,n){var r=t(e,"keydown",function(e){var t=e.keyCode,r=t!=13&&t!=32&&(t!=27||!o("ie"))&&(t<48||t>90)&&(t<96||t>111)&&(t<186||t>192)&&(t<219||t>222)&&t!=229;if(r||e.ctrlKey){var i=r?0:t;if(e.ctrlKey){if(t==3||t==13)return n.call(e.currentTarget,e);i>95&&i<106?i-=48:!e.shiftKey&&i>=65&&i<=90?i+=32:i=f[i]||i}var s=c(e,{type:"keypress",faux:!0,charCode:i});n.call(e.currentTarget,s),o("ie")&&d(e,s.keyCode)}}),i=t(e,"keypress",function(e){var t=e.charCode;return t=t>=32?t:0,e=c(e,{charCode:t,faux:!0}),n.call(this,e)});return{remove:function(){r.remove(),i.remove()}}}}else o("opera")?p=function(e,n){return t(e,"keypress",function(e){var t=e.which;return t==3&&(t=99),t=t<32&&!e.shiftKey?0:t,e.ctrlKey&&!e.shiftKey&&t>=65&&t<=90&&(t+=32),n.call(this,c(e,{charCode:t}))})}:p=function(e,n){return t(e,"keypress",function(e){return h(e),n.call(this,e)})};var v={_keypress:p,connect:function(e,t,n,r,i){var s=arguments,o=[],u=0;o.push(typeof s[0]=="string"?null:s[u++],s[u++]);var f=s[u+1];o.push(typeof f=="string"||typeof f=="function"?s[u++]:null,s[u++]);for(var l=s.length;u<l;u++)o.push(s[u]);return a.apply(this,o)},disconnect:function(e){e&&e.remove()},subscribe:function(e,t,r){return n.subscribe(e,u.hitch(t,r))},publish:function(e,t){return n.publish.apply(n,[e].concat(t))},connectPublisher:function(e,t,n){var r=function(){v.publish(e,arguments)};return n?v.connect(t,n,r):v.connect(t,r)},isCopyKey:function(e){return e[l]}};return v.unsubscribe=v.disconnect,o("extend-dojo")&&u.mixin(e,v),v}),pen.define("dojo/dom-construct",["exports","./_base/kernel","./sniff","./_base/window","./dom","./dom-attr"],function(e,t,n,r,i,s){function d(e,t){var n=t.parentNode;n&&n.insertBefore(e,t)}function v(e,t){var n=t.parentNode;n&&(n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling))}function g(e){if(e.canHaveChildren)try{e.innerHTML="";return}catch(t){}for(var n;n=e.lastChild;)y(n,e)}function y(e,t){e.firstChild&&g(e),t&&(n("ie")&&t.canHaveChildren&&"removeNode"in e?e.removeNode(!1):t.removeChild(e))}var o={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},u=/<\s*([\w\:]+)/,a={},f=0,l="__"+t._scopeName+"ToDomId";for(var c in o)if(o.hasOwnProperty(c)){var h=o[c];h.pre=c=="option"?'<select multiple="multiple">':"<"+h.join("><")+">",h.post="</"+h.reverse().join("></")+">"}var p;n("ie")<=8&&(p=function(e){e.__dojo_html5_tested="yes";var t=m("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},e.body);t.childNodes.length!==1&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(t){e.createElement(t)}),b(t)}),e.toDom=function(t,i){i=i||r.doc;var s=i[l];s||(i[l]=s=++f+"",a[s]=i.createElement("div")),n("ie")<=8&&!i.__dojo_html5_tested&&i.body&&p(i),t+="";var c=t.match(u),h=c?c[1].toLowerCase():"",d=a[s],v,m,g,y;if(c&&o[h]){v=o[h],d.innerHTML=v.pre+t+v.post;for(m=v.length;m;--m)d=d.firstChild}else d.innerHTML=t;if(d.childNodes.length==1)return d.removeChild(d.firstChild);y=i.createDocumentFragment();while(g=d.firstChild)y.appendChild(g);return y},e.place=function(n,r,s){r=i.byId(r),typeof n=="string"&&(n=/^\s*</.test(n)?e.toDom(n,r.ownerDocument):i.byId(n));if(typeof s=="number"){var o=r.childNodes;!o.length||o.length<=s?r.appendChild(n):d(n,o[s<0?0:s])}else switch(s){case"before":d(n,r);break;case"after":v(n,r);break;case"replace":r.parentNode.replaceChild(n,r);break;case"only":e.empty(r),r.appendChild(n);break;case"first":if(r.firstChild){d(n,r.firstChild);break};default:r.appendChild(n)}return n};var m=e.create=function(n,o,u,a){var f=r.doc;return u&&(u=i.byId(u),f=u.ownerDocument),typeof n=="string"&&(n=f.createElement(n)),o&&s.set(n,o),u&&e.place(n,u,a),n};e.empty=function(t){g(i.byId(t))};var b=e.destroy=function(t){t=i.byId(t);if(!t)return;y(t,t.parentNode)}}),pen.define("dojo/dom-prop",["exports","./_base/kernel","./sniff","./_base/lang","./dom","./dom-style","./dom-construct","./_base/connect"],function(e,t,n,r,i,s,o,u){var a={},f=0,l=t._scopeName+"attrid";e.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},e.get=function(n,r){n=i.byId(n);var s=r.toLowerCase(),o=e.names[s]||r;return n[o]},e.set=function(c,h,p){c=i.byId(c);var d=arguments.length;if(d==2&&typeof h!="string"){for(var v in h)e.set(c,v,h[v]);return c}var m=h.toLowerCase(),g=e.names[m]||h;if(g=="style"&&typeof p!="string")return s.set(c,p),c;if(g=="innerHTML")return n("ie")&&c.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(o.empty(c),c.appendChild(o.toDom(p,c.ownerDocument))):c[g]=p,c;if(r.isFunction(p)){var y=c[l];y||(y=f++,c[l]=y),a[y]||(a[y]={});var b=a[y][g];if(b)u.disconnect(b);else try{delete c[g]}catch(w){}return p?a[y][g]=u.connect(c,g,p):c[g]=null,c}return c[g]=p,c}}),pen.define("dojo/dom-attr",["exports","./sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(e,t,n,r,i,s){function a(e,t){var n=e.getAttributeNode&&e.getAttributeNode(t);return n&&n.specified}var o={innerHTML:1,className:1,htmlFor:t("ie"),value:1},u={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};e.has=function(t,n){var i=n.toLowerCase();return o[s.names[i]||n]||a(r.byId(t),u[i]||n)},e.get=function(t,i){t=r.byId(t);var f=i.toLowerCase(),l=s.names[f]||i,c=o[l],h=t[l];if(c&&typeof h!="undefined")return h;if(l=="href"||typeof h!="boolean"&&!n.isFunction(h)){var p=u[f]||i;return a(t,p)?t.getAttribute(p):null}return h},e.set=function(a,f,l){a=r.byId(a);if(arguments.length==2){for(var c in f)e.set(a,c,f[c]);return a}var h=f.toLowerCase(),p=s.names[h]||f,d=o[p];return p=="style"&&typeof l!="string"?(i.set(a,l),a):d||typeof l=="boolean"||n.isFunction(l)?s.set(a,f,l):(a.setAttribute(u[h]||f,l),a)},e.remove=function(t,n){r.byId(t).removeAttribute(u[n.toLowerCase()]||n)},e.getNodeProp=function(t,n){t=r.byId(t);var i=n.toLowerCase(),o=s.names[i]||n;if(o in t&&o!="href")return t[o];var f=u[i]||n;return a(t,f)?t.getAttribute(f):null}}),pen.define("dojo/dom-class",["./_base/lang","./_base/array","./dom"],function(e,t,n){function u(e){if(typeof e=="string"||e instanceof String){if(e&&!s.test(e))return o[0]=e,o;var n=e.split(s);return n.length&&!n[0]&&n.shift(),n.length&&!n[n.length-1]&&n.pop(),n}return e?t.filter(e,function(e){return e}):[]}var r="className",i,s=/\s+/,o=[""],a={};return i={contains:function(t,i){return(" "+n.byId(t)[r]+" ").indexOf(" "+i+" ")>=0},add:function(t,i){t=n.byId(t),i=u(i);var s=t[r],o;s=s?" "+s+" ":" ",o=s.length;for(var a=0,f=i.length,l;a<f;++a)l=i[a],l&&s.indexOf(" "+l+" ")<0&&(s+=l+" ");o<s.length&&(t[r]=s.substr(1,s.length-2))},remove:function(i,s){i=n.byId(i);var o;if(s!==undefined){s=u(s),o=" "+i[r]+" ";for(var a=0,f=s.length;a<f;++a)o=o.replace(" "+s[a]+" "," ");o=e.trim(o)}else o="";i[r]!=o&&(i[r]=o)},replace:function(t,s,o){t=n.byId(t),a[r]=t[r],i.remove(a,o),i.add(a,s),t[r]!==a[r]&&(t[r]=a[r])},toggle:function(t,r,s){t=n.byId(t);if(s===undefined){r=u(r);for(var o=0,a=r.length,f;o<a;++o)f=r[o],i[i.contains(t,f)?"remove":"add"](t,f)}else i[s?"add":"remove"](t,r);return s}},i}),pen.define("dojo/ready",["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(e,t,n,r,i){var s=0,o=[],u=0,a=function(){s=1,e._postLoad=e.config.afterOnLoad=!0,f()},f=function(){if(u)return;u=1;while(s&&(!r||r._Q.length==0)&&(n.idle?n.idle():!0)&&o.length){var e=o.shift();try{e()}catch(t){t.info=t.message;if(!n.signal)throw t;n.signal("error",t)}}u=0};n.on&&n.on("idle",f),r&&(r._onQEmpty=f);var l=e.ready=e.addOnLoad=function(t,n,r){var s=i._toArray(arguments);typeof t!="number"?(r=n,n=t,t=1e3):s.shift(),r=r?i.hitch.apply(e,s):function(){n()},r.priority=t;for(var u=0;u<o.length&&t>=o[u].priority;u++);o.splice(u,0,r),f()};t.add("dojo-config-addOnLoad",1);if(t("dojo-config-addOnLoad")){var c=e.config.addOnLoad;c&&l[i.isArray(c)?"apply":"call"](e,c)}return t("dojo-sync-loader")&&e.config.parseOnLoad&&!e.isAsync&&l(99,function(){e.parser||(e.deprecated("Add explicit require(['dojo/parser']);","","2.0"),pen.require(["dojo/parser"]))}),r?r(a):a(),l}),pen.define("dojo/errors/create",["../_base/lang"],function(e){return function(t,n,r,i){r=r||Error;var s=function(e){if(r===Error){Error.captureStackTrace&&Error.captureStackTrace(this,s);var t=Error.call(this,e),i;for(i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);this.message=e,this.stack=t.stack}else r.apply(this,arguments);n&&n.apply(this,arguments)};return s.prototype=e.delegate(r.prototype,i),s.prototype.name=t,s.prototype.constructor=s,s}}),pen.define("dojo/errors/CancelError",["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel"})}),pen.define("dojo/promise/Promise",["../_base/lang"],function(e){function t(){throw new TypeError("abstract")}return e.extend(function(){},{then:function(e,n,r){t()},cancel:function(e,n){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(e){return this.then(e,e)},otherwise:function(e){return this.then(null,e)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})}),pen.define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise","./has!config-deferredInstrumentation?./promise/instrumentation"],function(e,t,n,r,i){var s=0,o=1,u=2,a="This deferred has already been fulfilled.",f=Object.freeze||function(){},l=function(t,n,r,i,s){e("config-deferredInstrumentation")&&n===u&&d.instrumentRejected&&t.length===0&&d.instrumentRejected(r,!1,i,s);for(var o=0;o<t.length;o++)c(t[o],n,r,i)},c=function(t,n,r,i){var a=t[n],f=t.deferred;if(a)try{var l=a(r);if(n===s)typeof l!="undefined"&&p(f,n,l);else{if(l&&typeof l.then=="function"){t.cancel=l.cancel,l.then(h(f,o),h(f,u),h(f,s));return}p(f,o,l)}}catch(c){p(f,u,c)}else p(f,n,r);e("config-deferredInstrumentation")&&n===u&&d.instrumentRejected&&d.instrumentRejected(r,!!a,i,f.promise)},h=function(e,t){return function(n){p(e,t,n)}},p=function(e,t,n){if(!e.isCanceled())switch(t){case s:e.progress(n);break;case o:e.resolve(n);break;case u:e.reject(n)}},d=function(t){var i=this.promise=new r,h=this,p,v,m,g=!1,y=[];e("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(h,d),Error.captureStackTrace(i,d)),this.isResolved=i.isResolved=function(){return p===o},this.isRejected=i.isRejected=function(){return p===u},this.isFulfilled=i.isFulfilled=function(){return!!p},this.isCanceled=i.isCanceled=function(){return g},this.progress=function(e,t){if(!p)return l(y,s,e,null,h),i;if(t===!0)throw new Error(a);return i},this.resolve=function(e,t){if(!p)return l(y,p=o,v=e,null,h),y=null,i;if(t===!0)throw new Error(a);return i};var b=this.reject=function(t,n){if(!p)return e("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(m={},b),l(y,p=u,v=t,m,h),y=null,i;if(n===!0)throw new Error(a);return i};this.then=i.then=function(e,t,n){var r=[n,e,t];return r.cancel=i.cancel,r.deferred=new d(function(e){return r.cancel&&r.cancel(e)}),p&&!y?c(r,p,v,m):y.push(r),r.deferred.promise},this.cancel=i.cancel=function(e,r){if(!p){if(t){var i=t(e);e=typeof i=="undefined"?e:i}g=!0;if(!p)return typeof e=="undefined"&&(e=new n),b(e),e;if(p===u&&v===e)return e}else if(r===!0)throw new Error(a)},f(i)};return d.prototype.toString=function(){return"[object Deferred]"},i&&i(d),d}),pen.define("dojo/when",["./Deferred","./promise/Promise"],function(e,t){return function(r,i,s,o){var u=r&&typeof r.then=="function",a=u&&r instanceof t;if(!u)return arguments.length>1?i?i(r):r:(new e).resolve(r);if(!a){var f=new e(r.cancel);r.then(f.resolve,f.reject,f.progress),r=f.promise}return i||s||o?r.then(i,s,o):r}}),pen.define("dojo/Stateful",["./_base/declare","./_base/lang","./_base/array","./when"],function(e,t,n,r){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;return t[e]?t[e]:t[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,t){return typeof this[t.g]=="function"?this[t.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,t){if(typeof e=="object"){for(var n in e)e.hasOwnProperty(n)&&n!="_watchCallbacks"&&this.set(n,e[n]);return this}var i=this._getAttrNames(e),s=this._get(e,i),o=this[i.s],u;typeof o=="function"?u=o.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=t;if(this._watchCallbacks){var a=this;r(u,function(){a._watchCallbacks(e,s,t)})}return this},_changeAttrValue:function(e,t){var n=this.get(e);return this[e]=t,this._watchCallbacks&&this._watchCallbacks(e,n,t),this},watch:function(e,t){var r=this._watchCallbacks;if(!r){var i=this;r=this._watchCallbacks=function(e,t,n,s){var o=function(r){if(r){r=r.slice();for(var s=0,o=r.length;s<o;s++)r[s].call(i,e,t,n)}};o(r["_"+e]),s||o(r["*"])}}!t&&typeof e=="function"?(t=e,e="*"):e="_"+e;var s=r[e];typeof s!="object"&&(s=r[e]=[]),s.push(t);var o={};return o.unwatch=o.remove=function(){var e=n.indexOf(s,t);e>-1&&s.splice(e,1)},o}})}),pen.define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(e,t,n){return n("dijit.Destroyable",null,{destroy:function(e){this._destroyed=!0},own:function(){return e.forEach(arguments,function(e){var n="destroyRecursive"in e?"destroyRecursive":"destroy"in e?"destroy":"remove",r=t.before(this,"destroy",function(t){e[n](t)}),i=t.after(e,n,function(){r.remove(),i.remove()},!0)},this),arguments}})}),pen.define("dijit/main",["dojo/_base/kernel"],function(e){return e.dijit}),pen.define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/window","./main"],function(e,t,n,r){var i={},s={},o={length:0,add:function(e){if(s[e.id])throw new Error("Tried to register widget with id=="+e.id+" but that id is already registered");s[e.id]=e,this.length++},remove:function(e){s[e]&&(delete s[e],this.length--)},byId:function(e){return typeof e=="string"?s[e]:e},byNode:function(e){return s[e.getAttribute("widgetId")]},toArray:function(){var e=[];for(var t in s)e.push(s[t]);return e},getUniqueId:function(e){var t;do t=e+"_"+(e in i?++i[e]:i[e]=0);while(s[t]);return r._scopeName=="dijit"?t:r._scopeName+"_"+t},findWidgets:function(e,t){function r(e){for(var i=e.firstChild;i;i=i.nextSibling)if(i.nodeType==1){var o=i.getAttribute("widgetId");if(o){var u=s[o];u&&n.push(u)}else i!==t&&r(i)}}var n=[];return r(e),n},_destroyAll:function(){r._curFocus=null,r._prevFocus=null,r._activeStack=[],e.forEach(o.findWidgets(n.body()),function(e){e._destroyed||(e.destroyRecursive?e.destroyRecursive():e.destroy&&e.destroy())})},getEnclosingWidget:function(e){while(e){var t=e.nodeType==1&&e.getAttribute("widgetId");if(t)return s[t];e=e.parentNode}return null},_hash:s};return r.registry=o,o}),pen.define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){function T(e){var t={};for(var n in e)t[n.toLowerCase()]=!0;return t}function N(e){return function(t){u[t?"set":"remove"](this.domNode,e,t),this._set(e,t)}}function C(e,t){return e===t||e!==e&&t!==t}h.add("dijit-legacy-requires",!p.isAsync),h.add("dojo-bidi",!1),h("dijit-legacy-requires")&&m(0,function(){var t=["dijit/_base/manager"];e(t)});var x={},k=s("dijit._WidgetBase",[g,w],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:N("lang"),dir:"",_setDirAttr:N("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(e){this._set("ownerDocument",e)},attributeMap:{},_blankGif:r.blankGif||e.toUrl("dojo/resources/blank.gif"),_introspect:function(){var e=this.constructor;if(!e._setterAttrs){var t=e.prototype,n=e._setterAttrs=[],r=e._onMap={};for(var i in t.attributeMap)n.push(i);for(i in t)/^on/.test(i)&&(r[i.substring(2).toLowerCase()]=i),/^_set[A-Z](.*)Attr$/.test(i)&&(i=i.charAt(4).toLowerCase()+i.substr(5,i.length-9),(!t.attributeMap||!(i in t.attributeMap))&&n.push(i))}},postscript:function(e,t){this.create(e,t)},create:function(e,t){this._introspect(),this.srcNodeRef=o.byId(t),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&typeof this.srcNodeRef.id=="string"&&(this.id=this.srcNodeRef.id),e&&(this.params=e,d.mixin(this,e)),this.postMixInProperties(),this.id||(this.id=S.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=b.body(this.ownerDocument),S.add(this),this.buildRendering();var n;if(this.domNode){this._applyAttributes();var r=this.srcNodeRef;r&&r.parentNode&&this.domNode!==r&&(r.parentNode.replaceChild(this.domNode,r),n=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),n&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var e={};for(var n in this.params||{})e[n]=this._get(n);t.forEach(this.constructor._setterAttrs,function(t){if(!(t in e)){var n=this._get(t);n&&this.set(t,n)}},this);for(n in e)this.set(n,e[n])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var e=this.baseClass.split(" ");this.isLeftToRight()||(e=e.concat(t.map(e,function(e){return e+"Rtl"}))),a.add(this.domNode,e)}},postCreate:function(){},startup:function(){if(this._started)return;this._started=!0,t.forEach(this.getChildren(),function(e){!e._started&&!e._destroyed&&d.isFunction(e.startup)&&(e.startup(),e._started=!0)})},destroyRecursive:function(e){this._beingDestroyed=!0,this.destroyDescendants(e),this.destroy(e)},destroy:function(e){function n(t){t.destroyRecursive?t.destroyRecursive(e):t.destroy&&t.destroy(e)}this._beingDestroyed=!0,this.uninitialize(),t.forEach(this._connects,d.hitch(this,"disconnect")),t.forEach(this._supportingWidgets,n),this.domNode&&t.forEach(S.findWidgets(this.domNode,this.containerNode),n),this.destroyRendering(e),S.remove(this.id),this._destroyed=!0},destroyRendering:function(e){this.bgIframe&&(this.bgIframe.destroy(e),delete this.bgIframe),this.domNode&&(e?u.remove(this.domNode,"widgetId"):f.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(e||f.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(e){t.forEach(this.getChildren(),function(t){t.destroyRecursive&&t.destroyRecursive(e)})},uninitialize:function(){return!1},_setStyleAttr:function(e){var t=this.domNode;d.isObject(e)?c.set(t,e):t.style.cssText?t.style.cssText+="; "+e:t.style.cssText=e,this._set("style",e)},_attrToDom:function(e,n,r){r=arguments.length>=3?r:this.attributeMap[e],t.forEach(d.isArray(r)?r:[r],function(t){var r=this[t.node||t||"domNode"],i=t.type||"attribute";switch(i){case"attribute":d.isFunction(n)&&(n=d.hitch(this,n));var s=t.attribute?t.attribute:/^on[A-Z][a-zA-Z]*$/.test(e)?e.toLowerCase():e;r.tagName?u.set(r,s,n):r.set(s,n);break;case"innerText":r.innerHTML="",r.appendChild(this.ownerDocument.createTextNode(n));break;case"innerHTML":r.innerHTML=n;break;case"class":a.replace(r,n,this[e])}},this)},get:function(e){var t=this._getAttrNames(e);return this[t.g]?this[t.g]():this._get(e)},set:function(e,t){if(typeof e=="object"){for(var n in e)this.set(n,e[n]);return this}var r=this._getAttrNames(e),i=this[r.s];if(d.isFunction(i))var s=i.apply(this,Array.prototype.slice.call(arguments,1));else{var o=this.focusNode&&!d.isFunction(this.focusNode)?"focusNode":"domNode",u=this[o]&&this[o].tagName,a=u&&(x[u]||(x[u]=T(this[o]))),f=e in this.attributeMap?this.attributeMap[e]:r.s in this?this[r.s]:a&&r.l in a&&typeof t!="function"||/^aria-|^data-|^role$/.test(e)?o:null;f!=null&&this._attrToDom(e,t,f),this._set(e,t)}return s||this},_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;if(t[e])return t[e];var n=e.replace(/^[a-z]|-[a-zA-Z]/g,function(e){return e.charAt(e.length-1).toUpperCase()});return t[e]={n:e+"Node",s:"_set"+n+"Attr",g:"_get"+n+"Attr",l:n.toLowerCase()}},_set:function(e,t){var n=this[e];this[e]=t,this._created&&!C(n,t)&&(this._watchCallbacks&&this._watchCallbacks(e,n,t),this.emit("attrmodified-"+e,{detail:{prevValue:n,newValue:t}}))},_get:function(e){return this[e]},emit:function(e,t,n){t=t||{},t.bubbles===undefined&&(t.bubbles=!0),t.cancelable===undefined&&(t.cancelable=!0),t.detail||(t.detail={}),t.detail.widget=this;var r,i=this["on"+e];return i&&(r=i.apply(this,n?n:[t])),this._started&&!this._beingDestroyed&&v.emit(this.domNode,e.toLowerCase(),t),r},on:function(e,t){var r=this._onMap(e);return r?n.after(this,r,t,!0):this.own(v(this.domNode,e,t))[0]},_onMap:function(e){var t=this.constructor,n=t._onMap;if(!n){n=t._onMap={};for(var r in t.prototype)/^on/.test(r)&&(n[r.replace(/^on/,"").toLowerCase()]=r)}return n[typeof e=="string"&&e.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?S.findWidgets(this.containerNode):[]},getParent:function(){return S.getEnclosingWidget(this.domNode.parentNode)},connect:function(e,t,n){return this.own(i.connect(e,t,this,n))[0]},disconnect:function(e){e.remove()},subscribe:function(e,t){return this.own(y.subscribe(e,d.hitch(this,t)))[0]},unsubscribe:function(e){e.remove()},isLeftToRight:function(){return this.dir?this.dir=="ltr":l.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&c.get(this.domNode,"display")!="none"},placeAt:function(e,t){var n=!e.tagName&&S.byId(e);if(n&&n.addChild&&(!t||typeof t=="number"))n.addChild(this,t);else{var r=n?n.containerNode&&!/after|before|replace/.test(t||"")?n.containerNode:n.domNode:o.byId(e,this.ownerDocument);f.place(this.domNode,r,t),!this._started&&(this.getParent()||{})._started&&this.startup()}return this},defer:function(e,t){var n=setTimeout(d.hitch(this,function(){if(!n)return;n=null,this._destroyed||d.hitch(this,e)()}),t||0);return{remove:function(){return n&&(clearTimeout(n),n=null),null}}}});return h("dojo-bidi")&&k.extend(E),k}),pen.define("dojo/_base/url",["./kernel"],function(e){var t=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),n=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),r=function(){var e=null,i=arguments,s=[i[0]];for(var o=1;o<i.length;o++){if(!i[o])continue;var u=new r(i[o]+""),a=new r(s[0]+"");if(u.path==""&&!u.scheme&&!u.authority&&!u.query)u.fragment!=e&&(a.fragment=u.fragment),u=a;else if(!u.scheme){u.scheme=a.scheme;if(!u.authority){u.authority=a.authority;if(u.path.charAt(0)!="/"){var f=a.path.substring(0,a.path.lastIndexOf("/")+1)+u.path,l=f.split("/");for(var c=0;c<l.length;c++)l[c]=="."?c==l.length-1?l[c]="":(l.splice(c,1),c--):c>0&&(c!=1||l[0]!="")&&l[c]==".."&&l[c-1]!=".."&&(c==l.length-1?(l.splice(c,1),l[c-1]=""):(l.splice(c-1,2),c-=2));u.path=l.join("/")}}}s=[],u.scheme&&s.push(u.scheme,":"),u.authority&&s.push("//",u.authority),s.push(u.path),u.query&&s.push("?",u.query),u.fragment&&s.push("#",u.fragment)}this.uri=s.join("");var h=this.uri.match(t);this.scheme=h[2]||(h[1]?"":e),this.authority=h[4]||(h[3]?"":e),this.path=h[5],this.query=h[7]||(h[6]?"":e),this.fragment=h[9]||(h[8]?"":e),this.authority!=e&&(h=this.authority.match(n),this.user=h[3]||e,this.password=h[4]||e,this.host=h[6]||h[7],this.port=h[9]||e)};return r.prototype.toString=function(){return this.uri},e._Url=r}),pen.define("dojo/promise/all",["../_base/array","../Deferred","../when"],function(e,t,n){var r=e.some;return function(i){var s,o;i instanceof Array?o=i:i&&typeof i=="object"&&(s=i);var u,a=[];if(s){o=[];for(var f in s)Object.hasOwnProperty.call(s,f)&&(a.push(f),o.push(s[f]));u={}}else o&&(u=[]);if(!o||!o.length)return(new t).resolve(u);var l=new t;l.promise.always(function(){u=a=null});var c=o.length;return r(o,function(e,t){return s||a.push(t),n(e,function(e){l.isFulfilled()||(u[a[t]]=e,--c===0&&l.resolve(u))},l.reject),l.isFulfilled()}),l.promise}}),pen.define("dojo/date/stamp",["../_base/lang","../_base/array"],function(e,t){var n={};return e.setObject("dojo.date.stamp",n),n.fromISOString=function(e,r){n._isoRegExp||(n._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var i=n._isoRegExp.exec(e),s=null;if(i){i.shift(),i[1]&&i[1]--,i[6]&&(i[6]*=1e3),r&&(r=new Date(r),t.forEach(t.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(e){return r["get"+e]()}),function(e,t){i[t]=i[t]||e})),s=new Date(i[0]||1970,i[1]||0,i[2]||1,i[3]||0,i[4]||0,i[5]||0,i[6]||0),i[0]<100&&s.setFullYear(i[0]||1970);var o=0,u=i[7]&&i[7].charAt(0);u!="Z"&&(o=(i[8]||0)*60+(Number(i[9])||0),u!="-"&&(o*=-1)),u&&(o-=s.getTimezoneOffset()),o&&s.setTime(s.getTime()+o*6e4)}return s},n.toISOString=function(e,t){var n=function(e){return e<10?"0"+e:e};t=t||{};var r=[],i=t.zulu?"getUTC":"get",s="";if(t.selector!="time"){var o=e[i+"FullYear"]();s=["0000".substr((o+"").length)+o,n(e[i+"Month"]()+1),n(e[i+"Date"]())].join("-")}r.push(s);if(t.selector!="date"){var u=[n(e[i+"Hours"]()),n(e[i+"Minutes"]()),n(e[i+"Seconds"]())].join(":"),a=e[i+"Milliseconds"]();t.milliseconds&&(u+="."+(a<100?"0":"")+n(a));if(t.zulu)u+="Z";else if(t.selector!="time"){var f=e.getTimezoneOffset(),l=Math.abs(f);u+=(f>0?"-":"+")+n(Math.floor(l/60))+":"+n(l%60)}r.push(u)}return r.join("T")},n}),pen.define("dojo/parser",["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./dom","./_base/window","./_base/url","./aspect","./promise/all","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(require,dojo,dlang,darray,config,dom,dwindow,_Url,aspect,all,dates,Deferred,has,query,don,ready){function myEval(text){return eval("("+text+")")}function getNameMap(e){var t=e._nameCaseMap,n=e.prototype;if(!t||t._extendCnt<extendCnt){t=e._nameCaseMap={};for(var r in n){if(r.charAt(0)==="_")continue;t[r.toLowerCase()]=r}t._extendCnt=extendCnt}return t}function getCtor(e,t){var n=e.join();if(!_ctorMap[n]){var r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i];r[r.length]=_ctorMap[o]=_ctorMap[o]||dlang.getObject(o)||~o.indexOf("/")&&(t?t(o):require(o))}var u=r.shift();_ctorMap[n]=r.length?u.createSubclass?u.createSubclass(r):u.extend.apply(u,r):u}return _ctorMap[n]}new Date("X");var extendCnt=0;aspect.after(dlang,"extend",function(){extendCnt++},!0);var _ctorMap={},parser={_clearCache:function(){extendCnt++,_ctorMap={}},_functionFromScript:function(e,t){var n="",r="",i=e.getAttribute(t+"args")||e.getAttribute("args"),s=e.getAttribute("with"),o=(i||"").split(/\s*,\s*/);return s&&s.length&&darray.forEach(s.split(/\s*,\s*/),function(e){n+="with("+e+"){",r+="}"}),new Function(o,n+e.innerHTML+r)},instantiate:function(e,t,n){t=t||{},n=n||{};var r=(n.scope||dojo._scopeName)+"Type",i="data-"+(n.scope||dojo._scopeName)+"-",s=i+"type",o=i+"mixins",u=[];return darray.forEach(e,function(e){var n=r in t?t[r]:e.getAttribute(s)||e.getAttribute(r);if(n){var i=e.getAttribute(o),a=i?[n].concat(i.split(/\s*,\s*/)):[n];u.push({node:e,types:a})}}),this._instantiate(u,t,n)},_instantiate:function(e,t,n,r){function s(e){return!t._started&&!n.noStart&&darray.forEach(e,function(e){typeof e.startup=="function"&&!e._started&&e.startup()}),e}var i=darray.map(e,function(e){var r=e.ctor||getCtor(e.types,n.contextRequire);if(!r)throw new Error("Unable to resolve constructor for: '"+e.types.join()+"'");return this.construct(r,e.node,t,n,e.scripts,e.inherited)},this);return r?all(i).then(s):s(i)},construct:function(e,t,n,r,i,s){function q(e){g&&dlang.setObject(g,e);for(d=0;d<k.length;d++)aspect[k[d].advice||"after"](e,k[d].method,dlang.hitch(e,k[d].func),!0);for(d=0;d<L.length;d++)L[d].call(e);for(d=0;d<A.length;d++)e.watch(A[d].prop,A[d].func);for(d=0;d<O.length;d++)don(e,O[d].event,O[d].func);return e}var o=e&&e.prototype;r=r||{};var u={};r.defaults&&dlang.mixin(u,r.defaults),s&&dlang.mixin(u,s);var a;if(has("dom-attributes-explicit"))a=t.attributes;else if(has("dom-attributes-specified-flag"))a=darray.filter(t.attributes,function(e){return e.specified});else{var f=/^input$|^img$/i.test(t.nodeName)?t:t.cloneNode(!1),l=f.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");a=darray.map(l.split(/\s+/),function(e){var n=e.toLowerCase();return{name:e,value:t.nodeName=="LI"&&e=="value"||n=="enctype"?t.getAttribute(n):t.getAttributeNode(n).value}})}var c=r.scope||dojo._scopeName,h="data-"+c+"-",p={};c!=="dojo"&&(p[h+"props"]="data-dojo-props",p[h+"type"]="data-dojo-type",p[h+"mixins"]="data-dojo-mixins",p[c+"type"]="dojoType",p[h+"id"]="data-dojo-id");var d=0,v,m=[],g,y;while(v=a[d++]){var b=v.name,w=b.toLowerCase(),E=v.value;switch(p[w]||w){case"data-dojo-type":case"dojotype":case"data-dojo-mixins":break;case"data-dojo-props":y=E;break;case"data-dojo-id":case"jsid":g=E;break;case"data-dojo-attach-point":case"dojoattachpoint":u.dojoAttachPoint=E;break;case"data-dojo-attach-event":case"dojoattachevent":u.dojoAttachEvent=E;break;case"class":u["class"]=t.className;break;case"style":u.style=t.style&&t.style.cssText;break;default:if(!(b in o)){var S=getNameMap(e);b=S[w]||b}if(b in o)switch(typeof o[b]){case"string":u[b]=E;break;case"number":u[b]=E.length?Number(E):NaN;break;case"boolean":u[b]=E.toLowerCase()!="false";break;case"function":E===""||E.search(/[^\w\.]+/i)!=-1?u[b]=new Function(E):u[b]=dlang.getObject(E,!1)||new Function(E),m.push(b);break;default:var x=o[b];u[b]=x&&"length"in x?E?E.split(/\s*,\s*/):[]:x instanceof Date?E==""?new Date(""):E=="now"?new Date:dates.fromISOString(E):x instanceof _Url?dojo.baseUrl+E:myEval(E)}else u[b]=E}}for(var T=0;T<m.length;T++){var N=m[T].toLowerCase();t.removeAttribute(N),t[N]=null}if(y)try{y=myEval.call(r.propsThis,"{"+y+"}"),dlang.mixin(u,y)}catch(C){throw new Error(C.toString()+" in data-dojo-props='"+y+"'")}dlang.mixin(u,n),i||(i=e&&(e._noScript||o._noScript)?[]:query("> script[type^='dojo/']",t));var k=[],L=[],A=[],O=[];if(i)for(d=0;d<i.length;d++){var M=i[d];t.removeChild(M);var _=M.getAttribute(h+"event")||M.getAttribute("event"),D=M.getAttribute(h+"prop"),P=M.getAttribute(h+"method"),H=M.getAttribute(h+"advice"),B=M.getAttribute("type"),j=this._functionFromScript(M,h);_?B=="dojo/connect"?k.push({method:_,func:j}):B=="dojo/on"?O.push({event:_,func:j}):u[_]=j:B=="dojo/aspect"?k.push({method:P,advice:H,func:j}):B=="dojo/watch"?A.push({prop:D,func:j}):L.push(j)}var F=e.markupFactory||o.markupFactory,I=F?F(u,t,e):new e(u,t);return I.then?I.then(q):q(I)},scan:function(e,t){function g(e){if(!e.inherited){e.inherited={};var t=e.node,n=g(e.parent),r={dir:t.getAttribute("dir")||n.dir,lang:t.getAttribute("lang")||n.lang,textDir:t.getAttribute(a)||n.textDir};for(var i in r)r[i]&&(e.inherited[i]=r[i])}return e.inherited}var n=[],r=[],i={},s=(t.scope||dojo._scopeName)+"Type",o="data-"+(t.scope||dojo._scopeName)+"-",u=o+"type",a=o+"textdir",f=o+"mixins",l=e.firstChild,c=t.inherited;if(!c){function h(e,t){return e.getAttribute&&e.getAttribute(t)||e.parentNode&&h(e.parentNode,t)}c={dir:h(e,"dir"),lang:h(e,"lang"),textDir:h(e,a)};for(var p in c)c[p]||delete c[p]}var d={inherited:c},v,m;for(;;){if(!l){if(!d||!d.node)break;l=d.node.nextSibling,m=!1,d=d.parent,v=d.scripts;continue}if(l.nodeType!=1){l=l.nextSibling;continue}if(v&&l.nodeName.toLowerCase()=="script"){y=l.getAttribute("type"),y&&/^dojo\/\w/i.test(y)&&v.push(l),l=l.nextSibling;continue}if(m){l=l.nextSibling;continue}var y=l.getAttribute(u)||l.getAttribute(s),b=l.firstChild;if(!y&&(!b||b.nodeType==3&&!b.nextSibling)){l=l.nextSibling;continue}var w,E=null;if(y){var S=l.getAttribute(f),x=S?[y].concat(S.split(/\s*,\s*/)):[y];try{E=getCtor(x,t.contextRequire)}catch(T){}E||darray.forEach(x,function(e){~e.indexOf("/")&&!i[e]&&(i[e]=!0,r[r.length]=e)});var N=E&&!E.prototype._noScript?[]:null;w={types:x,ctor:E,parent:d,node:l,scripts:N},w.inherited=g(w),n.push(w)}else w={node:l,scripts:v,parent:d};v=N,m=l.stopParser||E&&E.prototype.stopParser&&!t.template,d=w,l=b}var C=new Deferred;if(r.length){has("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+r.join(", "));var k=t.contextRequire||require;k(r,function(){C.resolve(darray.filter(n,function(e){if(!e.ctor)try{e.ctor=getCtor(e.types,t.contextRequire)}catch(n){}var r=e.parent;while(r&&!r.types)r=r.parent;var i=e.ctor&&e.ctor.prototype;return e.instantiateChildren=!(i&&i.stopParser&&!t.template),e.instantiate=!r||r.instantiate&&r.instantiateChildren,e.instantiate}))})}else C.resolve(n);return C.promise},_require:function(e,t){var n=myEval("{"+e.innerHTML+"}"),r=[],i=[],s=new Deferred,o=t&&t.contextRequire||require;for(var u in n)r.push(u),i.push(n[u]);return o(i,function(){for(var e=0;e<r.length;e++)dlang.setObject(r[e],arguments[e]);s.resolve(arguments)}),s.promise},_scanAmd:function(e,t){var n=new Deferred,r=n.promise;n.resolve(!0);var i=this;return query("script[type='dojo/require']",e).forEach(function(e){r=r.then(function(){return i._require(e,t)}),e.parentNode.removeChild(e)}),r},parse:function(e,t){var n;!t&&e&&e.rootNode?(t=e,n=t.rootNode):!e||!dlang.isObject(e)||"nodeType"in e?n=e:t=e,n=n?dom.byId(n):dwindow.body(),t=t||{};var r=t.template?{template:!0}:{},i=[],s=this,o=this._scanAmd(n,t).then(function(){return s.scan(n,t)}).then(function(e){return s._instantiate(e,r,t,!0)}).then(function(e){return i=i.concat(e)}).otherwise(function(e){throw console.error("dojo/parser::parse() error",e),e});return dlang.mixin(i,o),i}};return has("extend-dojo")&&(dojo.parser=parser),config.parseOnLoad&&ready(100,parser,"parse"),parser}),pen.define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(e,t,n,r,i){return n("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var e=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0),i.parse(e,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(r.hitch(this,function(e){this._startupWidgets=e;for(var t=0;t<e.length;t++)this._processTemplateNode(e[t],function(e,t){return e[t]},function(e,t,n){return t in e?e.connect(e,t,n):e.on(t,n,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.")}},_processTemplateNode:function(e,t,n){return t(e,"dojoType")||t(e,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){e.forEach(this._startupWidgets,function(e){e&&!e._started&&e.startup&&e.startup()}),this._startupWidgets=null,this.inherited(arguments)}})}),pen.define("dojo/domReady",["./has"],function(e){function a(e){o.push(e),s&&f()}function f(){if(u)return;u=!0;while(o.length)try{o.shift()(n)}catch(e){console.log("Error on domReady callback: "+e)}u=!1,a._onQEmpty()}var t=this,n=document,r={loaded:1,complete:1},i=typeof n.readyState!="string",s=!!r[n.readyState],o=[],u;a.load=function(e,t,n){a(n)},a._Q=o,a._onQEmpty=function(){},i&&(n.readyState="loading");if(!s){var l=[],c=function(e){e=e||t.event;if(s||e.type=="readystatechange"&&!r[n.readyState])return;i&&(n.readyState="complete"),s=1,f()},h=function(e,t){e.addEventListener(t,c,!1),o.push(function(){e.removeEventListener(t,c,!1)})};if(!e("dom-addeventlistener")){h=function(e,t){t="on"+t,e.attachEvent(t,c),o.push(function(){e.detachEvent(t,c)})};var p=n.createElement("div");try{p.doScroll&&t.frameElement===null&&l.push(function(){try{return p.doScroll("left"),1}catch(e){}})}catch(d){}}h(n,"DOMContentLoaded"),h(t,"load"),"onreadystatechange"in n?h(n,"readystatechange"):i||l.push(function(){return r[n.readyState]});if(l.length){var v=function(){if(s)return;var e=l.length;while(e--)if(l[e]()){c("poller");return}setTimeout(v,30)};v()}}return a}),pen.define("dojo/touch",["./_base/kernel","./aspect","./dom","./dom-class","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(e,t,n,r,i,s,o,u,a,f){function x(e,t,n){return h&&n?function(e,t){return s(e,n,t)}:l?function(n,r){var i=s(n,t,r),o=s(n,e,function(e){(!S||(new Date).getTime()>S+1e3)&&r.call(this,e)});return{remove:function(){i.remove(),o.remove()}}}:function(t,n){return s(t,e,n)}}function T(e){do if(e.dojoClick!==undefined)return e.dojoClick;while(e=e.parentNode)}function N(e,t,i){v=!e.target.disabled&&T(e.target);if(v){m=e.target,g=e.touches?e.touches[0].pageX:e.clientX,y=e.touches?e.touches[0].pageY:e.clientY,b=(typeof v=="object"?v.x:typeof v=="number"?v:0)||4,w=(typeof v=="object"?v.y:typeof v=="number"?v:0)||4;if(!d){d=!0,f.doc.addEventListener(t,function(e){v=v&&e.target==m&&Math.abs((e.touches?e.touches[0].pageX:e.clientX)-g)<=b&&Math.abs((e.touches?e.touches[0].pageY:e.clientY)-y)<=w},!0),f.doc.addEventListener(i,function(e){if(v){E=(new Date).getTime();var t=e.target;t.tagName==="LABEL"&&(t=n.byId(t.getAttribute("for"))||t),setTimeout(function(){s.emit(t,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0);function o(e){f.doc.addEventListener(e,function(t){!t._dojo_click&&(new Date).getTime()<=E+1e3&&(t.target.tagName!="INPUT"||!r.contains(t.target,"dijitOffScreen"))&&(t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),e=="click"&&(t.target.tagName!="INPUT"||t.target.type=="radio"||t.target.type=="checkbox")&&t.target.tagName!="TEXTAREA"&&t.target.tagName!="AUDIO"&&t.target.tagName!="VIDEO"&&t.preventDefault())},!0)}o("click"),o("mousedown"),o("mouseup")}}}var l=o("touch"),c=o("ios")<5,h=navigator.pointerEnabled||navigator.msPointerEnabled,p=function(){var e={};for(var t in{down:1,move:1,up:1,cancel:1,over:1,out:1})e[t]=navigator.pointerEnabled?"pointer"+t:"MSPointer"+t.charAt(0).toUpperCase()+t.slice(1);return e}(),d,v,m,g,y,b,w,E,S,C;l&&(h?a(function(){f.doc.addEventListener(p.down,function(e){N(e,p.move,p.up)},!0)}):a(function(){function e(e){var t=i.delegate(e,{bubbles:!0});return o("ios")>=6&&(t.touches=e.touches,t.altKey=e.altKey,t.changedTouches=e.changedTouches,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.targetTouches=e.targetTouches),t}C=f.body(),f.doc.addEventListener("touchstart",function(e){S=(new Date).getTime();var t=C;C=e.target,s.emit(t,"dojotouchout",{relatedTarget:C,bubbles:!0}),s.emit(C,"dojotouchover",{relatedTarget:t,bubbles:!0}),N(e,"touchmove","touchend")},!0),s(f.doc,"touchmove",function(t){S=(new Date).getTime();var n=f.doc.elementFromPoint(t.pageX-(c?0:f.global.pageXOffset),t.pageY-(c?0:f.global.pageYOffset));n&&(C!==n&&(s.emit(C,"dojotouchout",{relatedTarget:n,bubbles:!0}),s.emit(n,"dojotouchover",{relatedTarget:C,bubbles:!0}),C=n),s.emit(n,"dojotouchmove",e(t))||t.preventDefault())}),s(f.doc,"touchend",function(t){S=(new Date).getTime();var n=f.doc.elementFromPoint(t.pageX-(c?0:f.global.pageXOffset),t.pageY-(c?0:f.global.pageYOffset))||f.body();s.emit(n,"dojotouchend",e(t))})}));var k={press:x("mousedown","touchstart",p.down),move:x("mousemove","dojotouchmove",p.move),release:x("mouseup","dojotouchend",p.up),cancel:x(u.leave,"touchcancel",l?p.cancel:null),over:x("mouseover","dojotouchover",p.over),out:x("mouseout","dojotouchout",p.out),enter:u._eventHandler(x("mouseover","dojotouchover",p.over)),leave:u._eventHandler(x("mouseout","dojotouchout",p.out))};return o("extend-dojo")&&(e.touch=k),k}),pen.define("dijit/a11yclick",["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(e,t,n,r){function i(t){if((t.keyCode===e.ENTER||t.keyCode===e.SPACE)&&!/input|button|textarea/i.test(t.target.nodeName))for(var n=t.target;n;n=n.parentNode)if(n.dojoClick)return!0}var s;n(document,"keydown",function(e){i(e)?(s=e.target,e.preventDefault()):s=null}),n(document,"keyup",function(e){i(e)&&e.target==s&&(s=null,n.emit(e.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altKey,_origType:e.type}))});var o=function(e,t){return e.dojoClick=!0,n(e,"click",t)};return o.click=o,o.press=function(i,s){var o=n(i,r.press,function(e){if(e.type=="mousedown"&&!t.isLeft(e))return;s(e)}),u=n(i,"keydown",function(t){(t.keyCode===e.ENTER||t.keyCode===e.SPACE)&&s(t)});return{remove:function(){o.remove(),u.remove()}}},o.release=function(i,s){var o=n(i,r.release,function(e){if(e.type=="mouseup"&&!t.isLeft(e))return;s(e)}),u=n(i,"keyup",function(t){(t.keyCode===e.ENTER||t.keyCode===e.SPACE)&&s(t)});return{remove:function(){o.remove(),u.remove()}}},o.move=r.move,o}),pen.define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(e,t,n,r,i,s){var o=r("dijit._OnDijitClickMixin",null,{connect:function(e,t,n){return this.inherited(arguments,[e,t=="ondijitclick"?s:t,n])}});return o.a11yclick=s,o}),pen.define("dojo/window",["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],function(e,t,n,r,i,s,o){t.add("rtl-adjust-position-for-verticalScrollBar",function(e,t){var r=n.body(t),s=o.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},r,"last"),u=o.create("div",{style:{overflow:"hidden",direction:"ltr"}},s,"last"),a=i.position(u).x!=0;return s.removeChild(u),r.removeChild(s),a}),t.add("position-fixed-support",function(e,t){var r=n.body(t),s=o.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},r,"last"),u=o.create("span",{style:{position:"fixed",left:"0",top:"0"}},s,"last"),a=i.position(u).x!=i.position(s).x;return s.removeChild(u),r.removeChild(s),a});var u={getBox:function(e){e=e||n.doc;var r=e.compatMode=="BackCompat"?n.body(e):e.documentElement,s=i.docScroll(e),o,a;if(t("touch")){var f=u.get(e);o=f.innerWidth||r.clientWidth,a=f.innerHeight||r.clientHeight}else o=r.clientWidth,a=r.clientHeight;return{l:s.x,t:s.y,w:o,h:a}},get:function(e){if(t("ie")&&u!==document.parentWindow){e.parentWindow.execScript("document._parentWindow = window;","Javascript");var n=e._parentWindow;return e._parentWindow=null,n}return e.parentWindow||e.defaultView},scrollIntoView:function(e,o){try{e=r.byId(e);var u=e.ownerDocument||n.doc,a=n.body(u),f=u.documentElement||a.parentNode,l=t("ie"),c=t("webkit");if(e==a||e==f)return;if(!(t("mozilla")||l||c||t("opera")||t("trident"))&&"scrollIntoView"in e){e.scrollIntoView(!1);return}var h=u.compatMode=="BackCompat",p=Math.min(a.clientWidth||f.clientWidth,f.clientWidth||a.clientWidth),d=Math.min(a.clientHeight||f.clientHeight,f.clientHeight||a.clientHeight),v=c||h?a:f,m=o||i.position(e),g=e.parentNode,y=function(e){return l<=6||l==7&&h?!1:t("position-fixed-support")&&s.get(e,"position").toLowerCase()=="fixed"};if(y(e))return;while(g){g==a&&(g=v);var b=i.position(g),w=y(g),E=s.getComputedStyle(g).direction.toLowerCase()=="rtl";if(g==v){b.w=p,b.h=d,v==f&&l&&E&&(b.x+=v.offsetWidth-b.w);if(b.x<0||!l||l>=9)b.x=0;if(b.y<0||!l||l>=9)b.y=0}else{var S=i.getPadBorderExtents(g);b.w-=S.w,b.h-=S.h,b.x+=S.l,b.y+=S.t;var x=g.clientWidth,T=b.w-x;x>0&&T>0&&(E&&t("rtl-adjust-position-for-verticalScrollBar")&&(b.x+=T),b.w=x),x=g.clientHeight,T=b.h-x,x>0&&T>0&&(b.h=x)}w&&(b.y<0&&(b.h+=b.y,b.y=0),b.x<0&&(b.w+=b.x,b.x=0),b.y+b.h>d&&(b.h=d-b.y),b.x+b.w>p&&(b.w=p-b.x));var N=m.x-b.x,C=m.y-b.y,k=N+m.w-b.w,L=C+m.h-b.h,A,O;k*N>0&&(!!g.scrollLeft||g==v||g.scrollWidth>g.offsetHeight)&&(A=Math[N<0?"max":"min"](N,k),E&&(l==8&&!h||l>=9)&&(A=-A),O=g.scrollLeft,g.scrollLeft+=A,A=g.scrollLeft-O,m.x-=A),L*C>0&&(!!g.scrollTop||g==v||g.scrollHeight>g.offsetHeight)&&(A=Math.ceil(Math[C<0?"max":"min"](C,L)),O=g.scrollTop,g.scrollTop+=A,A=g.scrollTop-O,m.y-=A),g=g!=v&&!w&&g.parentNode}}catch(M){console.error("scrollIntoView: "+M),e.scrollIntoView(!1)}}};return t("extend-dojo")&&e.setObject("dojo.window",u),u}),pen.define("dijit/a11y",["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(e,t,n,r,i,s,o){var u,a={_isElementShown:function(e){var t=r.get(e);return t.visibility!="hidden"&&t.visibility!="collapsed"&&t.display!="none"&&n.get(e,"type")!="hidden"},hasDefaultTabStop:function(e){switch(e.nodeName.toLowerCase()){case"a":return n.has(e,"href");case"area":case"button":case"input":case"object":case"select":case"textarea":return!0;case"iframe":var t;try{var r=e.contentDocument;if("designMode"in r&&r.designMode=="on")return!0;t=r.body}catch(i){try{t=e.contentWindow.document.body}catch(s){return!1}}return t&&(t.contentEditable=="true"||t.firstChild&&t.firstChild.contentEditable=="true");default:return e.contentEditable=="true"}},effectiveTabIndex:function(e){return n.get(e,"disabled")?u:n.has(e,"tabIndex")?+n.get(e,"tabIndex"):a.hasDefaultTabStop(e)?0:u},isTabNavigable:function(e){return a.effectiveTabIndex(e)>=0},isFocusable:function(e){return a.effectiveTabIndex(e)>=-1},_getTabNavigable:function(e){function c(e){return e&&e.tagName.toLowerCase()=="input"&&e.type&&e.type.toLowerCase()=="radio"&&e.name&&e.name.toLowerCase()}function v(e){return l[c(e)]||e}var t,r,i,o,u,f,l={},h=a._isElementShown,p=a.effectiveTabIndex,d=function(e){for(var a=e.firstChild;a;a=a.nextSibling){if(a.nodeType!=1||s("ie")<=9&&a.scopeName!=="HTML"||!h(a))continue;var v=p(a);if(v>=0){if(v==0)t||(t=a),r=a;else if(v>0){if(!i||v<o)o=v,i=a;if(!u||v>=f)f=v,u=a}var m=c(a);n.get(a,"checked")&&m&&(l[m]=a)}a.nodeName.toUpperCase()!="SELECT"&&d(a)}};return h(e)&&d(e),{first:v(t),last:v(r),lowest:v(i),highest:v(u)}},getFirstInTabbingOrder:function(e,n){var r=a._getTabNavigable(t.byId(e,n));return r.lowest?r.lowest:r.first},getLastInTabbingOrder:function(e,n){var r=a._getTabNavigable(t.byId(e,n));return r.last?r.last:r.highest}};return s("extend-dojo")&&i.mixin(o,a),a}),pen.define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g,y=t([c,o],{curNode:null,activeStack:[],constructor:function(){var t=u.hitch(this,function(e){n.isDescendant(this.curNode,e)&&this.set("curNode",null),n.isDescendant(this.prevNode,e)&&this.set("prevNode",null)});e.before(s,"empty",t),e.before(s,"destroy",t)},registerIframe:function(e){return this.registerWin(e.contentWindow,e)},registerWin:function(e,t){var n=this,r=e.document&&e.document.body;if(r){var i=a(e.document,"mousedown, touchstart",function(e){n._justMouseDowned=!0,setTimeout(function(){n._justMouseDowned=!1},0);if(e&&e.target&&e.target.parentNode==null)return;n._onTouchNode(t||e.target,"mouse")}),s=a(r,"focusin",function(e){g=(new Date).getTime();if(!e.target.tagName)return;var r=e.target.tagName.toLowerCase();if(r=="#document"||r=="body")return;d.isFocusable(e.target)?n._onFocusNode(t||e.target):n._onTouchNode(t||e.target)}),o=a(r,"focusout",function(e){if((new Date).getTime()<g+100)return;n._onBlurNode(t||e.target)});return{remove:function(){i.remove(),s.remove(),o.remove(),i=s=o=null,r=null}}}},_onBlurNode:function(e){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(u.hitch(this,function(){this.set("prevNode",this.curNode),this.set("curNode",null)}),0);if(this._justMouseDowned)return;this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(u.hitch(this,function(){delete this._clearActiveWidgetsTimer,this._setStack([])}),0)},_onTouchNode:function(e,t){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer),i.contains(e,"dijitPopup")&&(e=e.firstChild);var n=[];try{while(e){var s=r.get(e,"dijitPopupParent");if(s)e=v.byId(s).domNode;else if(e.tagName&&e.tagName.toLowerCase()=="body"){if(e===h.body())break;e=p.get(e.ownerDocument).frameElement}else{var o=e.getAttribute&&e.getAttribute("widgetId"),u=o&&v.byId(o);u&&(t!="mouse"||!u.get("disabled"))&&n.unshift(o),e=e.parentNode}}}catch(a){}this._setStack(n,t)},_onFocusNode:function(e){if(!e)return;if(e.nodeType==9)return;this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(e);if(e==this.curNode)return;this.set("prevNode",this.curNode),this.set("curNode",e)},_setStack:function(e,t){var n=this.activeStack,r=n.length-1,i=e.length-1;if(e[i]==n[r])return;this.set("activeStack",e);var s,o;for(o=r;o>=0&&n[o]!=e[o];o--)s=v.byId(n[o]),s&&(s._hasBeenBlurred=!0,s.set("focused",!1),s._focusManager==this&&s._onBlur(t),this.emit("widget-blur",s,t));for(o++;o<=i;o++)s=v.byId(e[o]),s&&(s.set("focused",!0),s._focusManager==this&&s._onFocus(t),this.emit("widget-focus",s,t))},focus:function(e){if(e)try{e.focus()}catch(t){}}}),b=new y;f(function(){var e=b.registerWin(p.get(document));l("ie")&&a(window,"unload",function(){e&&(e.remove(),e=null)})}),m.focus=function(e){b.focus(e)};for(var w in b)/^_/.test(w)||(m.focus[w]=typeof b[w]=="function"?u.hitch(b,w):b[w]);return b.watch(function(e,t,n){m.focus[e]=n}),b}),pen.define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(e,t,n,r){return r.extend(t,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}}),n("dijit._FocusMixin",null,{_focusManager:e})}),pen.define("dojo/uacss",["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(e,t,n,r,i){var s=i.doc.documentElement,o=r("ie"),u=r("opera"),a=Math.floor,f=r("ff"),l=e.boxModel.replace(/-/,""),c={dj_quirks:r("quirks"),dj_opera:u,dj_khtml:r("khtml"),dj_webkit:r("webkit"),dj_safari:r("safari"),dj_chrome:r("chrome"),dj_gecko:r("mozilla"),dj_ios:r("ios"),dj_android:r("android")};o&&(c.dj_ie=!0,c["dj_ie"+a(o)]=!0,c.dj_iequirks=r("quirks")),f&&(c["dj_ff"+a(f)]=!0),c["dj_"+l]=!0;var h="";for(var p in c)c[p]&&(h+=p+" ");return s.className=t.trim(s.className+" "+h),n(function(){if(!e.isBodyLtr()){var n="dj_rtl dijitRtl "+h.replace(/ /g,"-rtl ");s.className=t.trim(s.className+" "+n+"dj_rtl dijitRtl "+h.replace(/ /g,"-rtl "))}}),r}),pen.define("dojo/hccss",["require","./_base/config","./dom-class","./dom-style","./has","./domReady","./_base/window"],function(e,t,n,r,i,s,o){return i.add("highcontrast",function(){var n=o.doc.createElement("div");n.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(t.blankGif||e.toUrl("./resources/blank.gif"))+");",o.body().appendChild(n);var s=r.getComputedStyle(n),u=s.backgroundImage,a=s.borderTopColor==s.borderRightColor||u&&(u=="none"||u=="url(invalid-url:)");return i("ie")<=8?n.outerHTML="":o.body().removeChild(n),a}),s(function(){i("highcontrast")&&n.add(o.body(),"dj_a11y")}),i}),pen.define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(e,t,n,r){return n(function(){t("highcontrast")&&e.add(r.body(),"dijit_a11y")}),t}),pen.define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function p(){}function d(e){return function(t,r,i,s){return t&&typeof r=="string"&&t[r]==p?t.on(r.substring(2).toLowerCase(),o.hitch(i,s)):e.apply(n,arguments)}}e.around(n,"connect",d),s.connect&&e.around(s,"connect",d);var v=r("dijit._Widget",[l,c,h],{onClick:p,onDblClick:p,onKeyDown:p,onKeyPress:p,onKeyUp:p,onMouseDown:p,onMouseMove:p,onMouseOut:p,onMouseOver:p,onMouseLeave:p,onMouseEnter:p,onMouseUp:p,constructor:function(e){this._toConnect={};for(var t in e)this[t]===p&&(this._toConnect[t.replace(/^on/,"").toLowerCase()]=e[t],delete e[t])},postCreate:function(){this.inherited(arguments);for(var e in this._toConnect)this.on(e,this._toConnect[e]);delete this._toConnect},on:function(e,t){return this[this._onMap(e)]===p?n.connect(this.domNode,e.toLowerCase(),this,t):this.inherited(arguments)},_setFocusedAttr:function(e){this._focused=e,this._set("focused",e)},setAttribute:function(e,t){s.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0"),this.set(e,t)},attr:function(e,t){var n=arguments.length;return n>=2||typeof e=="object"?this.set.apply(this,arguments):this.get(e)},getDescendants:function(){return s.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0"),this.containerNode?u("[widgetId]",this.containerNode).map(f.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});return i("dijit-legacy-requires")&&a(0,function(){var e=["dijit/_base"];require(e)}),v}),pen.define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=t("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments),e.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(e){this.watch(e,s.hitch(this,"_setStateClass"))},this);for(var t in this.cssStateNodes||{})this._trackMouseState(this[t],this.cssStateNodes[t]);this._trackMouseState(this.domNode,this.baseClass),this._setStateClass()},_cssMouseEvent:function(e){if(!this.disabled)switch(e.type){case"mouseover":case"MSPointerOver":case"pointerover":this._set("hovering",!0),this._set("active",this._mouseDown);break;case"mouseout":case"MSPointerOut":case"pointerout":this._set("hovering",!1),this._set("active",!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":this._set("active",!0);break;case"mouseup":case"dojotouchend":case"MSPointerUp":case"pointerup":case"keyup":this._set("active",!1)}},_setStateClass:function(){function n(n){t=t.concat(e.map(t,function(e){return e+n}),"dijit"+n)}var t=this.baseClass.split(" ");this.isLeftToRight()||n("Rtl");var r=this.checked=="mixed"?"Mixed":this.checked?"Checked":"";this.checked&&n(r),this.state&&n(this.state),this.selected&&n("Selected"),this._opened&&n("Opened"),this.disabled?n("Disabled"):this.readOnly?n("ReadOnly"):this.active?n("Active"):this.hovering&&n("Hover"),this.focused&&n("Focused");var i=this.stateNode||this.domNode,s={};e.forEach(i.className.split(" "),function(e){s[e]=!0}),"_stateClasses"in this&&e.forEach(this._stateClasses,function(e){delete s[e]}),e.forEach(t,function(e){s[e]=!0});var o=[];for(var u in s)o.push(u);i.className=o.join(" "),this._stateClasses=t},_subnodeCssMouseEvent:function(e,t,n){function i(n){r.toggle(e,t+"Hover",n)}function s(n){r.toggle(e,t+"Active",n)}function o(n){r.toggle(e,t+"Focused",n)}if(this.disabled||this.readOnly)return;switch(n.type){case"mouseover":case"MSPointerOver":case"pointerover":i(!0);break;case"mouseout":case"MSPointerOut":case"pointerout":i(!1),s(!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":s(!0);break;case"mouseup":case"MSPointerUp":case"pointerup":case"dojotouchend":case"keyup":s(!1);break;case"focus":case"focusin":o(!0);break;case"blur":case"focusout":o(!1)}},_trackMouseState:function(e,t){e._cssState=t}});return u(function(){function e(e,t,r){if(r&&n.isDescendant(r,t))return;for(var i=t;i&&i!=r;i=i.parentNode)if(i._cssState){var s=c.getEnclosingWidget(i);s&&(i==s.domNode?s._cssMouseEvent(e):s._subnodeCssMouseEvent(i,i._cssState,e))}}var t=f.body(),r;o(t,a.over,function(t){e(t,t.target,t.relatedTarget)}),o(t,a.out,function(t){e(t,t.target,t.relatedTarget)}),o(t,l.press,function(t){r=t.target,e(t,r)}),o(t,l.release,function(t){e(t,r),r=null}),o(t,"focusin, focusout",function(e){var t=e.target;if(t._cssState&&!t.getAttribute("widgetId")){var n=c.getEnclosingWidget(t);n&&n._subnodeCssMouseEvent(t,t._cssState,e)}})}),h}),pen.define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(e,t,n,r,i,s,o,u,a,f){return t("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(t){this._set("disabled",t),n.set(this.focusNode,"disabled",t),this.valueNode&&n.set(this.valueNode,"disabled",t),this.focusNode.setAttribute("aria-disabled",t?"true":"false");if(t){this._set("hovering",!1),this._set("active",!1);var r="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode";e.forEach(i.isArray(r)?r:[r],function(e){var t=this[e];u("webkit")||f.hasDefaultTabStop(t)?t.setAttribute("tabIndex","-1"):t.removeAttribute("tabIndex")},this)}else this.tabIndex!=""&&this.set("tabIndex",this.tabIndex)},_onFocus:function(e){if(e=="mouse"&&this.isFocusable())var t=this.own(o(this.focusNode,"focus",function(){n.remove(),t.remove()}))[0],n=this.own(o(this.ownerDocumentBody,"mouseup, touchend",i.hitch(this,function(e){n.remove(),t.remove(),this.focused&&(e.type=="touchend"?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){a.scrollIntoView(this.domNode)}),this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&r.get(this.domNode,"display")!="none"},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(e){}},compare:function(e,t){return typeof e=="number"&&typeof t=="number"?isNaN(e)&&isNaN(t)?0:e-t:e>t?1:e<t?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(e,t){this._lastValueReported==undefined&&(t===null||!this._onChangeActive)&&(this._resetValue=this._lastValueReported=e),this._pendingOnChange=this._pendingOnChange||typeof e!=typeof this._lastValueReported||this.compare(e,this._lastValueReported)!=0,(this.intermediateChanges||t||t===undefined)&&this._pendingOnChange&&(this._lastValueReported=e,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null,this.onChange(e)})))},create:function(){this.inherited(arguments),this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported)),this.inherited(arguments)}})}),pen.define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(e,t,n,r,i,s,o,u){return t("dijit-legacy-requires")&&r(0,function(){var e=["dijit/form/_FormValueWidget"];require(e)}),e("dijit.form._FormWidget",[i,o,s,u],{setDisabled:function(e){n.deprecated("setDisabled("+e+") is deprecated. Use set('disabled',"+e+") instead.","","2.0"),this.set("disabled",e)},setValue:function(e){n.deprecated("dijit.form._FormWidget:setValue("+e+") is deprecated.  Use set('value',"+e+") instead.","","2.0"),this.set("value",e)},getValue:function(){return n.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!t("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"",this.inherited(arguments)},_setTypeAttr:null})}),pen.define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormWidgetMixin"],function(e,t,n,r,i,s,o){return e("dijit.form._FormValueMixin",o,{readOnly:!1,_setReadOnlyAttr:function(e){t.set(this.focusNode,"readOnly",e),this._set("readOnly",e)},postCreate:function(){this.inherited(arguments),this._resetValue===undefined&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(e,t){this._handleOnChange(e,t)},_handleOnChange:function(e,t){this._set("value",e),this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1,this._setValueAttr(this._resetValue,!0)}})}),pen.define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(e,t,n,r){return e("dijit.form._FormValueWidget",[n,r],{_layoutHackIE7:function(){if(t("ie")==7){var e=this.domNode,n=e.parentNode,r=e.firstChild||e,i=r.style.filter,s=this;while(n&&n.clientHeight==0)(function(){var t=s.connect(n,"onscroll",function(){s.disconnect(t),r.style.filter=(new Date).getMilliseconds(),s.defer(function(){r.style.filter=i})})})(),n=n.parentNode}}})}),pen.define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(e,t,n,r,i,s,o,u){var a=t("dijit.form._TextBoxMixin"+(r("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(e,t,n){var r;e!==undefined&&(r=this.filter(e),typeof n!="string"&&(r===null||typeof r=="number"&&!!isNaN(r)?n="":n=this.filter(this.format(r,this.constraints)))),n!=null&&(typeof n!="number"||!isNaN(n))&&this.textbox.value!=n&&(this.textbox.value=n,this._set("displayedValue",this.get("displayedValue"))),this.inherited(arguments,[r,t])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(e){e==null?e="":typeof e!="string"&&(e=String(e)),this.textbox.value=e,this._setValueAttr(this.get("value"),undefined),this._set("displayedValue",this.get("displayedValue"))},format:function(e){return e==null?"":e.toString?e.toString():e},parse:function(e){return e},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(e){this._processInput(e),this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(e){this._refreshState(),this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value),this.inherited(arguments);var e=function(e){var t;if(e.type=="keydown"){t=e.keyCode;switch(t){case i.SHIFT:case i.ALT:case i.CTRL:case i.META:case i.CAPS_LOCK:case i.NUM_LOCK:case i.SCROLL_LOCK:return}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(t){case i.NUMPAD_0:case i.NUMPAD_1:case i.NUMPAD_2:case i.NUMPAD_3:case i.NUMPAD_4:case i.NUMPAD_5:case i.NUMPAD_6:case i.NUMPAD_7:case i.NUMPAD_8:case i.NUMPAD_9:case i.NUMPAD_MULTIPLY:case i.NUMPAD_PLUS:case i.NUMPAD_ENTER:case i.NUMPAD_MINUS:case i.NUMPAD_PERIOD:case i.NUMPAD_DIVIDE:return}if(t>=65&&t<=90||t>=48&&t<=57||t==i.SPACE)return;var n=!1;for(var r in i)if(i[r]===e.keyCode){n=!0;break}if(!n)return}}t=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode,t||(t=e.keyCode>=65&&e.keyCode<=90||e.keyCode>=48&&e.keyCode<=57||e.keyCode==i.SPACE?String.fromCharCode(e.keyCode):e.keyCode),t||(t=229);if(e.type=="keypress"){if(typeof t!="string")return;if(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||t===" ")if(e.ctrlKey||e.metaKey||e.altKey)return}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=!1;return}}else this.__skipInputEvent=!0;var o={faux:!0},u;for(u in e)if(u!="layerX"&&u!="layerY"){var a=e[u];typeof a!="function"&&typeof a!="undefined"&&(o[u]=a)}s.mixin(o,{charOrCode:t,_wasConsumed:!1,preventDefault:function(){o._wasConsumed=!0,e.preventDefault()},stopPropagation:function(){e.stopPropagation()}}),this.onInput(o)===!1&&(o.preventDefault(),o.stopPropagation());if(o._wasConsumed)return;this.defer(function(){this._onInput(o)}),e.type=="keypress"&&e.stopPropagation()};this.own(o(this.textbox,"keydown, keypress, paste, cut, input, compositionend",s.hitch(this,e)))},_blankValue:"",filter:function(e){return e===null?this._blankValue:typeof e!="string"?e:(this.trim&&(e=s.trim(e)),this.uppercase&&(e=e.toUpperCase()),this.lowercase&&(e=e.toLowerCase()),this.propercase&&(e=e.replace(/[^\s]+/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)})),e)},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(e){if(this.disabled)return;this._setBlurValue(),this.inherited(arguments)},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(e){if(this.disabled||this.readOnly)return;this.selectOnClick&&e=="mouse"&&(this._selectOnClickHandle=o.once(this.domNode,"mouseup, touchend",s.hitch(this,function(e){this._isTextSelected()||a.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState()},reset:function(){this.textbox.value="",this.inherited(arguments)}});return r("dojo-bidi")&&(a=t("dijit.form._TextBoxMixin",a,{_setValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode),this.inherited(arguments)}})),a._setSelectionRange=u._setSelectionRange=function(e,t,n){e.setSelectionRange&&e.setSelectionRange(t,n)},a.selectInputText=u.selectInputText=function(e,t,r){e=n.byId(e),isNaN(t)&&(t=0),isNaN(r)&&(r=e.value?e.value.length:0);try{e.focus(),a._setSelectionRange(e,t,r)}catch(i){}},a}),pen.define("dojo/text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.10",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}d.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("﻿")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),pen.define("dojo/text!dijit/form/templates/TextBox.html",[],function(){return'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n	><div class="dijitReset dijitInputField dijitInputContainer"\n		><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n			${!nameAttrSetting} type=\'${type}\'\n	/></div\n></div>\n'}),pen.define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(e,t,n,r,i,s,o,u,a,f,l){var c=e("dijit.form.TextBox"+(o("dojo-bidi")?"_NoBidi":""),[u,a],{templateString:f,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:o("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var e=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||(e=="hidden"||e=="file")&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments),o("ie")<9&&this.defer(function(){try{var e=n.getComputedStyle(this.domNode);if(e){var t=e.fontFamily;if(t){var r=this.domNode.getElementsByTagName("INPUT");if(r)for(var i=0;i<r.length;i++)r[i].style.fontFamily=t}}}catch(s){}})},_setPlaceHolderAttr:function(e){this._set("placeHolder",e),this._phspan||(this._attachPoints.push("_phspan"),this._phspan=t.create("span",{onmousedown:function(e){e.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(s(this._phspan,"touchend, pointerup, MSPointerUp",i.hitch(this,function(){this.focus()})))),this._phspan.innerHTML="",this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(e)),this._updatePlaceHolder()},_onInput:function(e){this.inherited(arguments),this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(e,t,n){this.inherited(arguments),this._updatePlaceHolder()},getDisplayedValue:function(){return r.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0"),this.get("displayedValue")},setDisplayedValue:function(e){r.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0"),this.set("displayedValue",e)},_onBlur:function(e){if(this.disabled)return;this.inherited(arguments),this._updatePlaceHolder(),o("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=undefined)},_onFocus:function(e){if(this.disabled||this.readOnly)return;this.inherited(arguments),this._updatePlaceHolder()}});return o("ie")<9&&(c.prototype._isTextSelected=function(){var e=this.ownerDocument.selection.createRange(),t=e.parentElement();return t==this.textbox&&e.text.length>0},l._setSelectionRange=a._setSelectionRange=function(e,t,n){if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",-99999),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}}),o("dojo-bidi")&&(c=e("dijit.form.TextBox",c,{_setPlaceHolderAttr:function(e){this.inherited(arguments),this.applyTextDir(this._phspan)}})),c}),pen.define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(e,t,n,r){var i=e("dijit.form._ButtonMixin"+(n("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){return e.stopPropagation(),e.preventDefault(),this.disabled||this.valueNode.click(e),!1},_onClick:function(e){if(this.disabled)return e.stopPropagation(),e.preventDefault(),!1;this.onClick(e)===!1&&e.preventDefault();var t=e.defaultPrevented;if(!t&&this.type=="submit"&&!(this.valueNode||this.focusNode).form)for(var n=this.domNode;n.parentNode;n=n.parentNode){var i=r.byNode(n);if(i&&typeof i._onSubmit=="function"){i._onSubmit(e),e.preventDefault(),t=!0;break}}return!t},postCreate:function(){this.inherited(arguments),t.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(e){this._set("label",e);var t=this.containerNode||this.focusNode;t.innerHTML=e}});return n("dojo-bidi")&&(i=e("dijit.form._ButtonMixin",i,{_setLabelAttr:function(){this.inherited(arguments);var e=this.containerNode||this.focusNode;this.applyTextDir(e)}})),i}),pen.define("dojo/text!dijit/form/templates/Button.html",[],function(){return'<span class="dijit dijitReset dijitInline" role="presentation"\n	><span class="dijitReset dijitInline dijitButtonNode pentaho-button"\n		data-dojo-attach-event="ondijitclick:__onClick" role="presentation"\n		><span class="dijitReset dijitStretch dijitButtonContents"\n			data-dojo-attach-point="titleNode,focusNode"\n			role="button" aria-labelledby="${id}_label"\n			><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n			><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n			><span class="dijitReset dijitInline dijitButtonText"\n				id="${id}_label"\n				data-dojo-attach-point="containerNode"\n			></span\n		></span\n	></span\n	><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n		data-dojo-attach-event="onclick:_onClick"\n		tabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n'}),pen.define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(e,t,n,r,i,s,o,u,a,f){r("dijit-legacy-requires")&&o(0,function(){var t=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];e(t)});var l=t("dijit.form.Button"+(r("dojo-bidi")?"_NoBidi":""),[u,a],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:f,_setValueAttr:"valueNode",_setNameAttr:function(e){this.valueNode&&this.valueNode.setAttribute("name",e)},_fillContent:function(e){if(e&&(!this.params||!("label"in this.params))){var t=s.trim(e.innerHTML);t&&(this.label=t)}},_setShowLabelAttr:function(e){this.containerNode&&n.toggle(this.containerNode,"dijitDisplayNone",!e),this._set("showLabel",e)},setLabel:function(e){i.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",e)},_setLabelAttr:function(e){this.inherited(arguments),!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=s.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});return r("dojo-bidi")&&(l=t("dijit.form.Button",l,{_setLabelAttr:function(e){this.inherited(arguments),this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(e){this._created&&this.textDir!=e&&(this._set("textDir",e),this._setLabelAttr(this.label))}})),l}),pen.define("dojo/text!pentaho/common/TextButtonCombo.html",[],function(){return'<div data-dojo-attach-point="textButtonCombo">\n	<input data-dojo-attach-point="textInput" data-dojo-type="dijit.form.TextBox" \n		data-dojo-attach-event="onChange:_onTextInputChange"/>\n	<button type="button" class="pentaho-button"\n		data-dojo-attach-point="submitButton" data-dojo-type="dijit.form.Button"\n		data-dojo-attach-event="onClick:_onSubmitButtonClick"/>\n</div>'}),pen.define("pentaho/common/TextButtonCombo",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/on","dojo/query","dijit/form/TextBox","dijit/form/Button","dojo/text!pentaho/common/TextButtonCombo.html"],function(e,t,n,r,i,s,o,u,a){return e("pentaho.common.TextButtonCombo",[t,n,n,r],{templateString:a,buttonLabel:"Submit",textPlaceHolder:"Enter Text",set:function(e,t){e=="buttonLabel"?this.submitButton.set("label",t):e=="text"||e=="value"?this.textInput.set("value",t):e=="textPlaceHolder"&&this.textInput.set("placeHolder",t)},get:function(e){return e=="text"||e=="value"?this.textInput.get("value"):null},postCreate:function(){this.set("buttonLabel",this.buttonLabel),this.set("textPlaceHolder",this.textPlaceHolder)},_onSubmitButtonClick:function(){this.onClickCallback(this.textInput.get("value"))},onClickCallback:function(e){console.log("onClickCallback...")},_onTextInputChange:function(){this.onChangeCallback(this.textInput.get("value"))},onChangeCallback:function(e){console.log("onChangeCallback...")}})}),pen.define("dojo/date",["./has","./_base/lang"],function(e,t){var n={};return n.getDaysInMonth=function(e){var t=e.getMonth(),r=[31,28,31,30,31,30,31,31,30,31,30,31];return t==1&&n.isLeapYear(e)?29:r[t]},n.isLeapYear=function(e){var t=e.getFullYear();return!(t%400)||!(t%4)&&!!(t%100)},n.getTimezoneName=function(e){var t=e.toString(),n="",r,i=t.indexOf("(");if(i>-1)n=t.substring(++i,t.indexOf(")"));else{var s=/([A-Z\/]+) \d{4}$/;if(r=t.match(s))n=r[1];else{t=e.toLocaleString(),s=/ ([A-Z\/]+)$/;if(r=t.match(s))n=r[1]}}return n=="AM"||n=="PM"?"":n},n.compare=function(e,t,n){return e=new Date(+e),t=new Date(+(t||new Date)),n=="date"?(e.setHours(0,0,0,0),t.setHours(0,0,0,0)):n=="time"&&(e.setFullYear(0,0,0),t.setFullYear(0,0,0)),e>t?1:e<t?-1:0},n.add=function(e,t,n){var r=new Date(+e),i=!1,s="Date";switch(t){case"day":break;case"weekday":var o,u,a=n%5;a?(o=a,u=parseInt(n/5)):(o=n>0?5:-5,u=n>0?(n-5)/5:(n+5)/5);var f=e.getDay(),l=0;f==6&&n>0?l=1:f==0&&n<0&&(l=-1);var c=f+o;if(c==0||c==6)l=n>0?2:-2;n=7*u+o+l;break;case"year":s="FullYear",i=!0;break;case"week":n*=7;break;case"quarter":n*=3;case"month":i=!0,s="Month";break;default:s="UTC"+t.charAt(0).toUpperCase()+t.substring(1)+"s"}return s&&r["set"+s](r["get"+s]()+n),i&&r.getDate()<e.getDate()&&r.setDate(0),r},n.difference=function(e,t,r){t=t||new Date,r=r||"day";var i=t.getFullYear()-e.getFullYear(),s=1;switch(r){case"quarter":var o=e.getMonth(),u=t.getMonth(),a=Math.floor(o/3)+1,f=Math.floor(u/3)+1;f+=i*4,s=f-a;break;case"weekday":var l=Math.round(n.difference(e,t,"day")),c=parseInt(n.difference(e,t,"week")),h=l%7;if(h==0)l=c*5;else{var p=0,d=e.getDay(),v=t.getDay();c=parseInt(l/7),h=l%7;var m=new Date(e);m.setDate(m.getDate()+c*7);var g=m.getDay();if(l>0)switch(!0){case d==6:p=-1;break;case d==0:p=0;break;case v==6:p=-1;break;case v==0:p=-2;break;case g+h>5:p=-2}else if(l<0)switch(!0){case d==6:p=0;break;case d==0:p=1;break;case v==6:p=2;break;case v==0:p=1;break;case g+h<0:p=2}l+=p,l-=c*2}s=l;break;case"year":s=i;break;case"month":s=t.getMonth()-e.getMonth()+i*12;break;case"week":s=parseInt(n.difference(e,t,"day")/7);break;case"day":s/=24;case"hour":s/=60;case"minute":s/=60;case"second":s/=1e3;case"millisecond":s*=t.getTime()-e.getTime()}return Math.round(s)},e("extend-dojo")&&t.mixin(t.getObject("dojo.date",!0),n),n}),pen.define("dojo/json",["./has"],function(has){var hasJSON=typeof JSON!="undefined";has.add("json-parse",hasJSON),has.add("json-stringify",hasJSON&&JSON.stringify({a:0},function(e,t){return t||1})=='{"a":1}');if(has("json-stringify"))return JSON;var escapeString=function(e){return('"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:has("json-parse")?JSON.parse:function(str,strict){if(strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(e,t,n){function i(e,s,o){t&&(e=t(o,e));var u,a=typeof e;if(a=="number")return isFinite(e)?e+"":"null";if(a=="boolean")return e+"";if(e===null)return"null";if(typeof e=="string")return escapeString(e);if(a=="function"||a=="undefined")return r;if(typeof e.toJSON=="function")return i(e.toJSON(o),s,o);if(e instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(t,n,r){var i=e["getUTC"+n]()+(r?1:0);return i<10?"0"+i:i});if(e.valueOf()!==e)return i(e.valueOf(),s,o);var f=n?s+n:"",l=n?" ":"",c=n?"\n":"";if(e instanceof Array){var h=e.length,p=[];for(o=0;o<h;o++){var d=e[o];u=i(d,f,o),typeof u!="string"&&(u="null"),p.push(c+f+u)}return"["+p.join(",")+c+s+"]"}var v=[];for(o in e){var m;if(e.hasOwnProperty(o)){if(typeof o=="number")m='"'+o+'"';else{if(typeof o!="string")continue;m=escapeString(o)}u=i(e[o],f,o);if(typeof u!="string")continue;v.push(c+f+m+":"+l+u)}}return"{"+v.join(",")+c+s+"}"}var r;return typeof t=="string"&&(n=t,t=null),i(e,"","")}}}),pen.define("dojo/i18n",["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./has!host-browser?./_base/xhr","./json","module"],function(e,t,n,r,i,s,o,u,a){n.add("dojo-preload-i18n-Api",1),n.add("dojo-v1x-i18n-Api",1);var f=e.i18n={},l=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,c=function(e,t,n,r){for(var i=[n+r],s=t.split("-"),o="",u=0;u<s.length;u++){o+=(o?"-":"")+s[u];if(!e||e[o])i.push(n+o+"/"+r),i.specificity=o}return i},h={},p=function(t,n,r){return r=r?r.toLowerCase():e.locale,t=t.replace(/\./g,"/"),n=n.replace(/\./g,"/"),/root/i.test(r)?t+"/nls/"+n:t+"/nls/"+r+"/"+n},d=e.getL10nName=function(e,t,n){return e=a.id+"!"+p(e,t,n)},v=function(e,t,n,r,i,o){e([t],function(u){var a=s.clone(u.root||u.ROOT),f=c(!u._v1x&&u,i,n,r);e(f,function(){for(var e=1;e<f.length;e++)a=s.mixin(s.clone(a),arguments[e]);var n=t+"/"+i;h[n]=a,a.$locale=f.specificity,o()})})},m=function(e,t){return/^\./.test(e)?t(e):e},g=function(e){var t=i.extraLocale||[];return t=s.isArray(t)?t:[t],t.push(e),t},y=function(t,i,o){if(n("dojo-preload-i18n-Api")){var a=t.split("*"),f=a[1]=="preload";f&&(h[t]||(h[t]=1,T(a[2],u.parse(a[3]),1,i)),o(1));if(f||N(t,i,o))return}var c=l.exec(t),p=c[1]+"/",d=c[5]||c[4],m=p+d,y=c[5]&&c[4],b=y||e.locale||"",w=m+"/"+b,E=y?[b]:g(b),S=E.length,x=function(){--S||o(s.delegate(h[w]))};r.forEach(E,function(e){var t=m+"/"+e;n("dojo-preload-i18n-Api")&&C(t),h[t]?x():v(i,m,p,d,e,x)})};if(n("dojo-unit-tests"))var b=f.unitTests=[];if(n("dojo-preload-i18n-Api")||n("dojo-v1x-i18n-Api"))var w=f.normalizeLocale=function(t){var n=t?t.toLowerCase():e.locale;return n=="root"?"ROOT":n},E=function(e,r){return n("dojo-sync-loader")&&n("dojo-v1x-i18n-Api")?r.isXdUrl(t.toUrl(e+".js")):!0},S=0,x=[],T=f._preloadLocalizations=function(n,i,s,o){function u(e,t){E(e,o)||s?o([e],t):A([e],t,o)}function a(e,t){var n=e.split("-");while(n.length){if(t(n.join("-")))return;n.pop()}t("ROOT")}function f(e){e=w(e),a(e,function(e){if(r.indexOf(i,e)>=0){var s=n.replace(/\./g,"/")+"_"+e;return S++,u(s,function(n){for(var r in n)h[t.toAbsMid(r)+"/"+e]=n[r];--S;while(!S&&x.length)y.apply(null,x.shift())}),!0}return!1})}o=o||t,f(),r.forEach(e.config.extraLocale,f)},N=function(e,t,n){return S&&x.push([e,t,n]),S},C=function(){};if(n("dojo-v1x-i18n-Api")){var k={},L=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},	   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),A=function(e,t,n){var i=[];r.forEach(e,function(e){function r(n){var r=L(n,C,e,k);r===k?i.push(h[t]=k.result):(r instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+t,r),r={}),i.push(h[t]=/nls\/[^\/]+\/[^\/]+$/.test(t)?r:{root:r,_v1x:1}))}var t=n.toUrl(e+".js");if(h[t])i.push(h[t]);else{var s=n.syncLoadNls(e);if(s)i.push(s);else if(!o)try{n.getText(t,!0,r)}catch(u){i.push(h[t]={})}else o.get({url:t,sync:!0,load:r,error:function(){i.push(h[t]={})}})}}),t&&t.apply(null,i)};C=function(t){for(var n,r=t.split("/"),i=e.global[r[0]],s=1;i&&s<r.length-1;i=i[r[s++]]);return i&&(n=i[r[s]],n||(n=i[r[s].replace(/-/g,"_")]),n&&(h[t]=n)),n},f.getLocalization=function(e,n,r){var i,s=p(e,n,r);return y(s,E(s,t)?t:function(e,n){A(e,n,t)},function(e){i=e}),i},n("dojo-unit-tests")&&b.push(function(e){e.register("tests.i18n.unit",function(e){var t;t=L("{prop:1}",C,"nonsense",k),e.is({prop:1},t),e.is(undefined,t[1]),t=L("({prop:1})",C,"nonsense",k),e.is({prop:1},t),e.is(undefined,t[1]),t=L("{'prop-x':1}",C,"nonsense",k),e.is({"prop-x":1},t),e.is(undefined,t[1]),t=L("({'prop-x':1})",C,"nonsense",k),e.is({"prop-x":1},t),e.is(undefined,t[1]),t=L("define({'prop-x':1})",C,"nonsense",k),e.is(k,t),e.is({"prop-x":1},k.result),t=L("define('some/module', {'prop-x':1})",C,"nonsense",k),e.is(k,t),e.is({"prop-x":1},k.result),t=L("this is total nonsense and should throw an error",C,"nonsense",k),e.is(t instanceof Error,!0)})})}return s.mixin(f,{dynamic:!0,normalize:m,load:y,cache:h,getL10nName:d})}),pen.define("dojo/cldr/supplemental",["../_base/lang","../i18n"],function(e,t){var n={};return e.setObject("dojo.cldr.supplemental",n),n.getFirstDayOfWeek=function(e){var t={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0},r=n._region(e),i=t[r];return i===undefined?1:i},n._region=function(e){e=t.normalizeLocale(e);var n=e.split("-"),r=n[1];return r?r.length==4&&(r=n[2]):r={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[n[0]],r},n.getWeekend=function(e){var t={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},r={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},i=n._region(e),s=t[i],o=r[i];return s===undefined&&(s=6),o===undefined&&(o=0),{start:s,end:o}},n}),pen.define("dojo/string",["./_base/kernel","./_base/lang"],function(e,t){var n={};return t.setObject("dojo.string",n),n.rep=function(e,t){if(t<=0||!e)return"";var n=[];for(;;){t&1&&n.push(e);if(!(t>>=1))break;e+=e}return n.join("")},n.pad=function(e,t,r,i){r||(r="0");var s=String(e),o=n.rep(r,Math.ceil((t-s.length)/r.length));return i?s+o:o+s},n.substitute=function(n,r,i,s){return s=s||e.global,i=i?t.hitch(s,i):function(e){return e},n.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(e,n,o){var u=t.getObject(n,!1,r);return o&&(u=t.getObject(o,!1,s).call(s,u,n)),i(u,n).toString()})},n.trim=String.prototype.trim?t.trim:function(e){e=e.replace(/^\s+/,"");for(var t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e},n}),pen.define("dojo/text!dijit/templates/Calendar.html",[],function(){return'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year" data-dojo-attach-point="gridNode">\n	<thead>\n		<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n			<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth" scope="col">\n				<span class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"></span>\n				<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n			</th>\n			<th class=\'dijitReset\' colspan="5" scope="col">\n				<div data-dojo-attach-point="monthNode">\n				</div>\n			</th>\n			<th class=\'dijitReset dijitCalendarArrow\' scope="col" data-dojo-attach-point="incrementMonth">\n				<span class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"></span>\n				<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n			</th>\n		</tr>\n		<tr role="row">\n			${!dayCellsHtml}\n		</tr>\n	</thead>\n	<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="ondijitclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n			${!dateRowsHtml}\n	</tbody>\n	<tfoot class="dijitReset dijitCalendarYearContainer">\n		<tr>\n			<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n				<div class="dijitCalendarYearLabel">\n					<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n					<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n					<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n				</div>\n			</td>\n		</tr>\n	</tfoot>\n</table>\n'}),pen.define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./a11yclick","./hccss"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=t("dijit.CalendarLite",[h,p],{templateString:d,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar",_isValidDate:function(e){return e&&!isNaN(e)&&typeof e=="object"&&e.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var e=this._get("value");if(e&&!isNaN(e)){var t=new this.dateClassObj(e);return t.setHours(0,0,0,0),t.getDate()<e.getDate()&&(t=this.dateModule.add(t,"hour",1)),t}return null},_setValueAttr:function(e,t){typeof e=="string"&&(e=s.fromISOString(e)),e=this._patchDate(e),this._isValidDate(e)&&!this.isDisabledDate(e,this.lang)?(this._set("value",e),this.set("currentFocus",e),this._markSelectedDates([e]),this._created&&(t||typeof t=="undefined")&&this.onChange(this.get("value"))):(this._set("value",null),this._markSelectedDates([]))},_patchDate:function(e){return e&&(e=new this.dateClassObj(e),e.setHours(1,0,0,0)),e},_setText:function(e,t){while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(e.ownerDocument.createTextNode(t))},_populateGrid:function(){var t=new this.dateClassObj(this.currentFocus);t.setDate(1);var r=t.getDay(),i=this.dateModule.getDaysInMonth(t),s=this.dateModule.getDaysInMonth(this.dateModule.add(t,"month",-1)),o=new this.dateClassObj,u=n.getFirstDayOfWeek(this.lang);u>r&&(u-=7);if(!this.summary){var a=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,t);this.gridNode.setAttribute("summary",a[t.getMonth()])}this._date2cell={},e.forEach(this.dateCells,function(e,n){var a=n+u,f=new this.dateClassObj(t),l,c="dijitCalendar",h=0;a<r?(l=s-r+a+1,h=-1,c+="Previous"):a>=r+i?(l=a-r-i+1,h=1,c+="Next"):(l=a-r+1,c+="Current"),h&&(f=this.dateModule.add(f,"month",h)),f.setDate(l),this.dateModule.compare(f,o,"date")||(c="dijitCalendarCurrentDate "+c),this.isDisabledDate(f,this.lang)?(c="dijitCalendarDisabledDate "+c,e.setAttribute("aria-disabled","true")):(c="dijitCalendarEnabledDate "+c,e.removeAttribute("aria-disabled"),e.setAttribute("aria-selected","false"));var p=this.getClassForDate(f,this.lang);p&&(c=p+" "+c),e.className=c+"Month dijitCalendarDateTemplate";var d=f.valueOf();this._date2cell[d]=e,e.dijitDateValue=d,this._setText(this.dateLabels[n],f.getDateLocalized?f.getDateLocalized(this.lang):f.getDate())},this)},_populateControls:function(){var t=new this.dateClassObj(this.currentFocus);t.setDate(1),this.monthWidget.set("month",t);var n=t.getFullYear()-1,r=new this.dateClassObj;e.forEach(["previous","current","next"],function(e){r.setFullYear(n++),this._setText(this[e+"YearLabelNode"],this.dateLocaleModule.format(r,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(e){this.dateModule=e.datePackage?a.getObject(e.datePackage,!1):r,this.dateClassObj=this.dateModule.Date||Date,this.dateLocaleModule=e.datePackage?a.getObject(e.datePackage+".locale",!1):i},_createMonthWidget:function(){return v._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var e=this.dowTemplateString,t=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),r=n.getFirstDayOfWeek(this.lang);this.dayCellsHtml=c.substitute([e,e,e,e,e,e,e].join(""),{d:""},function(){return t[r++%7]});var i=c.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[i,i,i,i,i,i].join(""),this.dateCells=[],this.dateLabels=[],this.inherited(arguments),o.setSelectable(this.domNode,!1);var s=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget(),this.set("currentFocus",s,!1)},postCreate:function(){this.inherited(arguments),this._connectControls()},_connectControls:function(){var e=a.hitch(this,function(e,t,n){return f(this[e],"click",a.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,t,n))}))});this.own(e("incrementMonth","month",1),e("decrementMonth","month",-1),e("nextYearLabelNode","year",1),e("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(e,t){var n=this.currentFocus,r=this._getNodeByDate(n);e=this._patchDate(e),this._set("currentFocus",e);if(!this._date2cell||this.dateModule.difference(n,e,"month")!=0)this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);var i=this._getNodeByDate(e);i.setAttribute("tabIndex",this.tabIndex),(this.focused||t)&&i.focus(),r&&r!=i&&(l("webkit")?r.setAttribute("tabIndex","-1"):r.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(e){e.stopPropagation(),e.preventDefault();for(var t=e.target;t&&!t.dijitDateValue;t=t.parentNode);t&&!u.contains(t,"dijitCalendarDisabledDate")&&this.set("value",t.dijitDateValue)},_getNodeByDate:function(e){return e=this._patchDate(e),e&&this._date2cell?this._date2cell[e.valueOf()]:null},_markSelectedDates:function(t){function n(e,t){u.toggle(t,"dijitCalendarSelectedDate",e),t.setAttribute("aria-selected",e?"true":"false")}e.forEach(this._selectedCells||[],a.partial(n,!1)),this._selectedCells=e.filter(e.map(t,this._getNodeByDate,this),function(e){return e}),e.forEach(this._selectedCells,a.partial(n,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});return v._MonthWidget=t("dijit.CalendarLite._MonthWidget",h,{_setMonthAttr:function(t){var n=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,t),r=l("ie")==6?"":"<div class='dijitSpacer'>"+e.map(n,function(e){return"<div>"+e+"</div>"}).join("")+"</div>";this.domNode.innerHTML=r+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+n[t.getMonth()]+"</div>"}}),v}),pen.define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(e,t,n,r,i){var s=new e,o;return n(function(){var e=i.getBox();s._rlh=t(window,"resize",function(){var t=i.getBox();if(e.h==t.h&&e.w==t.w)return;e=t,s.emit("resize")});if(r("ie")==8){var n=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=n&&(n=screen.deviceXDPI,s.emit("resize"))},500)}r("ios")&&(t(document,"focusin",function(e){o=e.target}),t(document,"focusout",function(e){o=null}))}),s.getEffectiveBox=function(e){var t=i.getBox(e),n=o&&o.tagName&&o.tagName.toLowerCase();if(r("ios")&&o&&!o.readOnly&&(n=="textarea"||n=="input"&&/^(color|email|number|password|search|tel|text|url)$/.test(o.type))){t.h*=orientation==0||orientation==180?.66:.4;var s=o.getBoundingClientRect();t.h=Math.max(t.h,s.top+s.height)}return t},s}),pen.define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(e,t,n,r,i,s,o){function u(r,o,u,a){var f=s.getEffectiveBox(r.ownerDocument);(!r.parentNode||String(r.parentNode.tagName).toLowerCase()!="body")&&i.body(r.ownerDocument).appendChild(r);var l=null;e.some(o,function(e){var n=e.corner,i=e.pos,s=0,o={w:{L:f.l+f.w-i.x,R:i.x-f.l,M:f.w}[n.charAt(1)],h:{T:f.t+f.h-i.y,B:i.y-f.t,M:f.h}[n.charAt(0)]},c=r.style;c.left=c.right="auto";if(u){var h=u(r,e.aroundCorner,n,o,a);s=typeof h=="undefined"?0:h}var p=r.style,d=p.display,v=p.visibility;p.display=="none"&&(p.visibility="hidden",p.display="");var m=t.position(r);p.display=d,p.visibility=v;var g={L:i.x,R:i.x-m.w,M:Math.max(f.l,Math.min(f.l+f.w,i.x+(m.w>>1))-m.w)}[n.charAt(1)],y={T:i.y,B:i.y-m.h,M:Math.max(f.t,Math.min(f.t+f.h,i.y+(m.h>>1))-m.h)}[n.charAt(0)],b=Math.max(f.l,g),w=Math.max(f.t,y),E=Math.min(f.l+f.w,g+m.w),S=Math.min(f.t+f.h,y+m.h),x=E-b,T=S-w;s+=m.w-x+(m.h-T);if(l==null||s<l.overflow)l={corner:n,aroundCorner:e.aroundCorner,x:b,y:w,w:x,h:T,overflow:s,spaceAvailable:o};return!s}),l.overflow&&u&&u(r,l.aroundCorner,l.corner,l.spaceAvailable,a);var c=t.isBodyLtr(r.ownerDocument),h=l.y,p=c?l.x:f.w-l.x-l.w;/relative|absolute/.test(n.get(i.body(r.ownerDocument),"position"))&&(h-=n.get(i.body(r.ownerDocument),"marginTop"),p-=(c?1:-1)*n.get(i.body(r.ownerDocument),c?"marginLeft":"marginRight"));var d=r.style;return d.top=h+"px",d[c?"left":"right"]=p+"px",d[c?"right":"left"]="auto",l}var a={TL:"BR",TR:"BL",BL:"TR",BR:"TL"},f={at:function(t,n,r,i,s){var o=e.map(r,function(e){var t={corner:e,aroundCorner:a[e],pos:{x:n.x,y:n.y}};return i&&(t.pos.x+=e.charAt(1)=="L"?i.x:-i.x,t.pos.y+=e.charAt(0)=="T"?i.y:-i.y),t});return u(t,o,s)},around:function(i,s,o,a,f){function C(e,t){N.push({aroundCorner:e,corner:t,pos:{x:{L:E,R:E+x,M:E+(x>>1)}[e.charAt(1)],y:{T:S,B:S+T,M:S+(T>>1)}[e.charAt(0)]}})}var l;if(typeof s=="string"||"offsetWidth"in s){l=t.position(s,!0);if(/^(above|below)/.test(o[0])){var c=t.getBorderExtents(s),h=s.firstChild?t.getBorderExtents(s.firstChild):{t:0,l:0,b:0,r:0},p=t.getBorderExtents(i),d=i.firstChild?t.getBorderExtents(i.firstChild):{t:0,l:0,b:0,r:0};l.y+=Math.min(c.t+h.t,p.t+d.t),l.h-=Math.min(c.t+h.t,p.t+d.t)+Math.min(c.b+h.b,p.b+d.b)}}else l=s;if(s.parentNode){var v=n.getComputedStyle(s).position=="absolute",m=s.parentNode;while(m&&m.nodeType==1&&m.nodeName!="BODY"){var g=t.position(m,!0),y=n.getComputedStyle(m);/relative|absolute/.test(y.position)&&(v=!1);if(!v&&/hidden|auto|scroll/.test(y.overflow)){var b=Math.min(l.y+l.h,g.y+g.h),w=Math.min(l.x+l.w,g.x+g.w);l.x=Math.max(l.x,g.x),l.y=Math.max(l.y,g.y),l.h=b-l.y,l.w=w-l.x}y.position=="absolute"&&(v=!0),m=m.parentNode}}var E=l.x,S=l.y,x="w"in l?l.w:l.w=l.width,T="h"in l?l.h:(r.deprecated("place.around: dijit/place.__Rectangle: { x:"+E+", y:"+S+", height:"+l.height+", width:"+x+" } has been deprecated.  Please use { x:"+E+", y:"+S+", h:"+l.height+", w:"+x+" }","","2.0"),l.h=l.height),N=[];e.forEach(o,function(e){var t=a;switch(e){case"above-centered":C("TM","BM");break;case"below-centered":C("BM","TM");break;case"after-centered":t=!t;case"before-centered":C(t?"ML":"MR",t?"MR":"ML");break;case"after":t=!t;case"before":C(t?"TL":"TR",t?"TR":"TL"),C(t?"BL":"BR",t?"BR":"BL");break;case"below-alt":t=!t;case"below":C(t?"BL":"BR",t?"TL":"TR"),C(t?"BR":"BL",t?"TR":"TL");break;case"above-alt":t=!t;case"above":C(t?"TL":"TR",t?"BL":"BR"),C(t?"TR":"TL",t?"BR":"BL");break;default:C(e.aroundCorner,e.corner)}});var k=u(i,N,f,{w:x,h:T});return k.aroundNodePos=l,k}};return o.place=f}),pen.define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff"],function(e,t,n,r,i,s,o,u){u.add("config-bgIframe",!u("touch"));var a=new function(){var t=[];this.pop=function(){var s;if(t.length)s=t.pop(),s.style.display="";else{if(u("ie")<9){var o=n.dojoBlankHtmlUrl||e.toUrl("dojo/resources/blank.html")||'javascript:""',a="<iframe src='"+o+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+'z-index: -1; filter:Alpha(Opacity="0");\'>';s=document.createElement(a)}else s=r.create("iframe"),s.src='javascript:""',s.className="dijitBackgroundIframe",s.setAttribute("role","presentation"),i.set(s,"opacity",.1);s.tabIndex=-1}return s},this.push=function(e){e.style.display="none",t.push(e)}};return t.BackgroundIframe=function(e){if(!e.id)throw new Error("no id");if(u("config-bgIframe")){var t=this.iframe=a.pop();e.appendChild(t),u("ie")<7||u("quirks")?(this.resize(e),this._conn=o(e,"resize",s.hitch(this,"resize",e))):i.set(t,{width:"100%",height:"100%"})}},s.extend(t.BackgroundIframe,{resize:function(e){this.iframe&&i.set(this.iframe,{width:e.offsetWidth+"px",height:e.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null),this.iframe&&(a.push(this.iframe),delete this.iframe)}}),t.BackgroundIframe}),pen.define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){function m(){this._popupWrapper&&(s.destroy(this._popupWrapper),delete this._popupWrapper)}var g=n(null,{_stack:[],_beginZIndex:1e3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var e=this._firstAroundPosition,t=o.position(this._firstAroundNode,!0),n=t.x-e.x,r=t.y-e.y;if(n||r){this._firstAroundPosition=t;for(var i=0;i<this._stack.length;i++){var s=this._stack[i].wrapper.style;s.top=parseInt(s.top,10)+r+"px",s.right=="auto"?s.left=parseInt(s.left,10)+n+"px":s.right=parseInt(s.right,10)-n+"px"}}this._aroundMoveListener=setTimeout(l.hitch(this,"_repositionAll"),n||r?10:50)}},_createWrapper:function(e){var n=e._popupWrapper,r=e.domNode;if(!n){n=s.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":e["aria-label"]||e.label||e.name||e.id},e.ownerDocumentBody),n.appendChild(r);var i=r.style;i.display="",i.visibility="",i.position="",i.top="0px",e._popupWrapper=n,t.after(e,"destroy",m,!0)}return n},moveOffScreen:function(e){var t=this._createWrapper(e),n=o.isBodyLtr(e.ownerDocument),r={visibility:"hidden",top:"-9999px",display:""};return r[n?"left":"right"]="-9999px",r[n?"right":"left"]="auto",u.set(t,r),t},hide:function(e){var t=this._createWrapper(e);u.set(t,{display:"none",height:"auto",overflow:"visible",border:""});var n=e.domNode;"_originalStyle"in n&&(n.style.cssText=n._originalStyle)},getTopPopup:function(){var e=this._stack;for(var t=e.length-1;t>0&&e[t].parent===e[t-1].widget;t--);return e[t]},open:function(e){var t=this._stack,n=e.popup,s=n.domNode,v=e.orient||["below","below-alt","above","above-alt"],m=e.parent?e.parent.isLeftToRight():o.isBodyLtr(n.ownerDocument),g=e.around,y=e.around&&e.around.id?e.around.id+"_dropdown":"popup_"+this._idGen++;while(t.length&&(!e.parent||!r.isDescendant(e.parent.domNode,t[t.length-1].widget.domNode)))this.close(t[t.length-1].widget);var b=this.moveOffScreen(n);n.startup&&!n._started&&n.startup();var w,E=o.position(s);if("maxHeight"in e&&e.maxHeight!=-1)w=e.maxHeight||Infinity;else{var S=d.getEffectiveBox(this.ownerDocument),x=g?o.position(g,!1):{y:e.y-(e.padding||0),h:(e.padding||0)*2};w=Math.floor(Math.max(x.y,S.h-(x.y+x.h)))}if(E.h>w){var T=u.getComputedStyle(s),N=T.borderLeftWidth+" "+T.borderLeftStyle+" "+T.borderLeftColor;u.set(b,{overflowY:"scroll",height:w+"px",border:N}),s._originalStyle=s.style.cssText,s.style.border="none"}i.set(b,{id:y,style:{zIndex:this._beginZIndex+t.length},"class":"dijitPopup "+(n.baseClass||n["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:e.parent?e.parent.id:""}),t.length==0&&g&&(this._firstAroundNode=g,this._firstAroundPosition=o.position(g,!0),this._aroundMoveListener=setTimeout(l.hitch(this,"_repositionAll"),50)),a("config-bgIframe")&&!n.bgIframe&&(n.bgIframe=new p(b));var C=n.orient?l.hitch(n,"orient"):null,k=g?h.around(b,g,v,m,C):h.at(b,e,v=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],e.padding,C);b.style.visibility="visible",s.style.visibility="visible";var L=[];return L.push(c(b,"keydown",l.hitch(this,function(t){if(t.keyCode==f.ESCAPE&&e.onCancel)t.stopPropagation(),t.preventDefault(),e.onCancel();else if(t.keyCode==f.TAB){t.stopPropagation(),t.preventDefault();var n=this.getTopPopup();n&&n.onCancel&&n.onCancel()}}))),n.onCancel&&e.onCancel&&L.push(n.on("cancel",e.onCancel)),L.push(n.on(n.onExecute?"execute":"change",l.hitch(this,function(){var e=this.getTopPopup();e&&e.onExecute&&e.onExecute()}))),t.push({widget:n,wrapper:b,parent:e.parent,onExecute:e.onExecute,onCancel:e.onCancel,onClose:e.onClose,handlers:L}),n.onOpen&&n.onOpen(k),k},close:function(t){var n=this._stack;while(t&&e.some(n,function(e){return e.widget==t})||!t&&n.length){var r=n.pop(),i=r.widget,s=r.onClose;i.onClose&&i.onClose();var o;while(o=r.handlers.pop())o.remove();i&&i.domNode&&this.hide(i),s&&s()}n.length==0&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return v.popup=new g}),pen.define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(e,t,n,r){return t("dijit._Container",null,{buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode)},addChild:function(e,t){var r=this.containerNode;if(t>0){r=r.firstChild;while(t>0)r.nodeType==1&&t--,r=r.nextSibling;r?t="before":(r=this.containerNode,t="last")}n.place(e.domNode,r,t),this._started&&!e._started&&e.startup()},removeChild:function(e){typeof e=="number"&&(e=this.getChildren()[e]);if(e){var t=e.domNode;t&&t.parentNode&&t.parentNode.removeChild(t)}},hasChildren:function(){return this.getChildren().length>0},_getSiblingOfChild:function(t,n){r.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var i=this.getChildren(),s=e.indexOf(i,t);return i[s+n]},getIndexOfChild:function(t){return e.indexOf(this.getChildren(),t)}})}),pen.define("dojo/_base/Deferred",["./kernel","../Deferred","../promise/Promise","../errors/CancelError","../has","./lang","../when"],function(e,t,n,r,i,s,o){var u=function(){},a=Object.freeze||function(){},f=e.Deferred=function(e){function g(e){if(l)throw new Error("This deferred has already been resolved");o=e,l=!0,y()}function y(){var e;while(!e&&v){var n=v;v=v.next;if(e=n.progress==u)l=!1;var r=p?n.error:n.resolved;i("config-useDeferredInstrumentation")&&p&&t.instrumentRejected&&t.instrumentRejected(o,!!r);if(r)try{var a=r(o);if(a&&typeof a.then=="function"){a.then(s.hitch(n.deferred,"resolve"),s.hitch(n.deferred,"reject"),s.hitch(n.deferred,"progress"));continue}var f=e&&a===undefined;e&&!f&&(p=a instanceof Error),n.deferred[f&&p?"reject":"resolve"](f?o:a)}catch(c){n.deferred.reject(c)}else p?n.deferred.reject(o):n.deferred.resolve(o)}}var o,l,c,h,p,d,v,m=this.promise=new n;this.isResolved=m.isResolved=function(){return h==0},this.isRejected=m.isRejected=function(){return h==1},this.isFulfilled=m.isFulfilled=function(){return h>=0},this.isCanceled=m.isCanceled=function(){return c},this.resolve=this.callback=function(e){this.fired=h=0,this.results=[e,null],g(e)},this.reject=this.errback=function(e){p=!0,this.fired=h=1,i("config-useDeferredInstrumentation")&&t.instrumentRejected&&t.instrumentRejected(e,!!v),g(e),this.results=[null,e]},this.progress=function(e){var t=v;while(t){var n=t.progress;n&&n(e),t=t.next}},this.addCallbacks=function(e,t){return this.then(e,t,u),this},m.then=this.then=function(e,t,n){var r=n==u?this:new f(m.cancel),i={resolved:e,error:t,progress:n,deferred:r};return v?d=d.next=i:v=d=i,l&&y(),r.promise};var b=this;m.cancel=this.cancel=function(){if(!l){var t=e&&e(b);l||(t instanceof Error||(t=new r(t)),t.log=!1,b.reject(t))}c=!0},a(m)};return s.extend(f,{addCallback:function(t){return this.addCallbacks(s.hitch.apply(e,arguments))},addErrback:function(t){return this.addCallbacks(null,s.hitch.apply(e,arguments))},addBoth:function(t){var n=s.hitch.apply(e,arguments);return this.addCallbacks(n,n)},fired:-1}),f.when=e.when=o,f}),pen.define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){return e("dijit._HasDropDown",v,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly)return;e.type!="MSPointerDown"&&e.type!="pointerdown"&&e.preventDefault(),this._docHandler=this.own(l(this.ownerDocument,c.release,f.hitch(this,"_onDropDownMouseUp")))[0],this.toggleDropDown()},_onDropDownMouseUp:function(e){e&&this._docHandler&&(this._docHandler.remove(),this._docHandler=null);var t=this.dropDown,n=!1;if(e&&this._opened){var r=s.position(this._buttonNode,!0);if(!(e.pageX>=r.x&&e.pageX<=r.x+r.w)||!(e.pageY>=r.y&&e.pageY<=r.y+r.h)){var o=e.target;while(o&&!n)i.contains(o,"dijitPopup")?n=!0:o=o.parentNode;if(n){o=e.target;if(t.onItemClick){var u;while(o&&!(u=h.byNode(o)))o=o.parentNode;u&&u.onClick&&u.getParent&&u.getParent().onItemClick(u,e)}return}}}this._opened?t.focus&&(t.autoFocus!==!1||e.type=="mouseup"&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){t.focus(),delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(e){this._stopClickEvents&&(e.stopPropagation(),e.preventDefault())},buildRendering:function(){this.inherited(arguments),this._buttonNode=this._buttonNode||this.focusNode||this.domNode,this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var e={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";i.add(this._arrowWrapperNode||this._buttonNode,"dijit"+e+"ArrowButton")},postCreate:function(){this.inherited(arguments);var e=this.focusNode||this.domNode;this.own(l(this._buttonNode,c.press,f.hitch(this,"_onDropDownMouseDown")),l(this._buttonNode,"click",f.hitch(this,"_onDropDownClick")),l(e,"keydown",f.hitch(this,"_onKey")),l(e,"keyup",f.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown),this.inherited(arguments)},_onKey:function(e){if(this.disabled||this.readOnly)return;var t=this.dropDown,n=e.target;if(t&&this._opened&&t.handleKey&&t.handleKey(e)===!1){e.stopPropagation(),e.preventDefault();return}t&&this._opened&&e.keyCode==a.ESCAPE?(this.closeDropDown(),e.stopPropagation(),e.preventDefault()):!this._opened&&(e.keyCode==a.DOWN_ARROW||(e.keyCode==a.ENTER||e.keyCode==a.SPACE&&(!this._searchTimer||e.ctrlKey||e.altKey||e.metaKey))&&((n.tagName||"").toLowerCase()!=="input"||n.type&&n.type.toLowerCase()!=="text"))&&(this._toggleOnKeyUp=!0,e.stopPropagation(),e.preventDefault())},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp,this.toggleDropDown();var e=this.dropDown;e&&e.focus&&this.defer(f.hitch(e,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1),this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(e){e()},loadAndOpenDropDown:function(){var e=new t,n=f.hitch(this,function(){this.openDropDown(),e.resolve(this.dropDown)});return this.isLoaded()?n():this.loadDropDown(n),e},toggleDropDown:function(){if(this.disabled||this.readOnly)return;this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown()},openDropDown:function(){var e=this.dropDown,t=e.domNode,n=this._aroundNode||this.domNode,o=this,u=d.open({parent:this,popup:e,around:n,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){o.closeDropDown(!0)},onCancel:function(){o.closeDropDown(!0)},onClose:function(){r.set(o._popupStateNode,"popupActive",!1),i.remove(o._popupStateNode,"dijitHasDropDownOpen"),o._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&n.offsetWidth>e._popupWrapper.offsetWidth){var a={w:n.offsetWidth-(e._popupWrapper.offsetWidth-e.domNode.offsetWidth)};f.isFunction(e.resize)?e.resize(a):s.setMarginBox(t,a)}return r.set(this._popupStateNode,"popupActive","true"),i.add(this._popupStateNode,"dijitHasDropDownOpen"),this._set("_opened",!0),this._popupStateNode.setAttribute("aria-expanded","true"),this._popupStateNode.setAttribute("aria-owns",e.id),t.getAttribute("role")!=="presentation"&&!t.getAttribute("aria-labelledby")&&t.setAttribute("aria-labelledby",this.id),u},closeDropDown:function(e){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer),this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),e&&this.focus(),d.close(this.dropDown),this._opened=!1)}})}),pen.define("dojo/text!dijit/form/templates/DropDownButton.html",[],function(){return'<span class="dijit dijitReset dijitInline"\n	><span class=\'dijitReset dijitInline dijitButtonNode\'\n		data-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\n		><span class="dijitReset dijitStretch dijitButtonContents"\n			data-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n			role="button" aria-haspopup="true" aria-labelledby="${id}_label"\n			><span class="dijitReset dijitInline dijitIcon"\n				data-dojo-attach-point="iconNode"\n			></span\n			><span class="dijitReset dijitInline dijitButtonText"\n				data-dojo-attach-point="containerNode"\n				id="${id}_label"\n			></span\n			><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n			><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n		></span\n	></span\n	><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n		data-dojo-attach-event="onclick:_onClick"\n		data-dojo-attach-point="valueNode" role="presentation"\n/></span>\n'}),pen.define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(e,t,n,r,i,s,o,u,a){return e("dijit.form.DropDownButton",[s,o,u],{baseClass:"dijitDropDownButton",templateString:a,_fillContent:function(){if(this.srcNodeRef){var e=n("*",this.srcNodeRef);this.inherited(arguments,[e[0]]),this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started)return;if(!this.dropDown&&this.dropDownContainer){var e=n("[widgetId]",this.dropDownContainer)[0];e&&(this.dropDown=r.byNode(e)),delete this.dropDownContainer}this.dropDown&&i.hide(this.dropDown),this.inherited(arguments)},isLoaded:function(){var e=this.dropDown;return!!e&&(!e.href||e.isLoaded)},loadDropDown:function(e){var n=this.dropDown,r=n.on("load",t.hitch(this,function(){r.remove(),e()}));n.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})}),pen.define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=r("dijit.Calendar",[c,h,p],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(e){o.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",e)},_createMonthWidget:function(){return new m._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:a.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments),this.own(f(this.domNode,"keydown",a.hitch(this,"_onKeyDown")),f(this.dateRowsNode,"mouseover",a.hitch(this,"_onDayMouseOver")),f(this.dateRowsNode,"mouseout",a.hitch(this,"_onDayMouseOut")),f(this.dateRowsNode,"mousedown",a.hitch(this,"_onDayMouseDown")),f(this.dateRowsNode,"mouseup",a.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(e){var t=new this.dateClassObj(this.currentFocus);t.setDate(1),t.setMonth(e);var n=this.dateModule.getDaysInMonth(t),r=this.currentFocus.getDate();t.setDate(Math.min(r,n)),this._setCurrentFocusAttr(t)},_onDayMouseOver:function(e){var t=s.contains(e.target,"dijitCalendarDateLabel")?e.target.parentNode:e.target;t&&(t.dijitDateValue&&!s.contains(t,"dijitCalendarDisabledDate")||t==this.previousYearLabelNode||t==this.nextYearLabelNode)&&(s.add(t,"dijitCalendarHoveredDate"),this._currentNode=t)},_onDayMouseOut:function(e){if(!this._currentNode)return;if(e.relatedTarget&&e.relatedTarget.parentNode==this._currentNode)return;var t="dijitCalendarHoveredDate";s.contains(this._currentNode,"dijitCalendarActiveDate")&&(t+=" dijitCalendarActiveDate"),s.remove(this._currentNode,t),this._currentNode=null},_onDayMouseDown:function(e){var t=e.target.parentNode;t&&t.dijitDateValue&&!s.contains(t,"dijitCalendarDisabledDate")&&(s.add(t,"dijitCalendarActiveDate"),this._currentNode=t)},_onDayMouseUp:function(e){var t=e.target.parentNode;t&&t.dijitDateValue&&s.remove(t,"dijitCalendarActiveDate")},handleKey:function(e){var t=-1,n,r=this.currentFocus;switch(e.keyCode){case u.RIGHT_ARROW:t=1;case u.LEFT_ARROW:n="day",this.isLeftToRight()||(t*=-1);break;case u.DOWN_ARROW:t=1;case u.UP_ARROW:n="week";break;case u.PAGE_DOWN:t=1;case u.PAGE_UP:n=e.ctrlKey||e.altKey?"year":"month";break;case u.END:r=this.dateModule.add(r,"month",1),n="day";case u.HOME:r=new this.dateClassObj(r),r.setDate(1);break;default:return!0}return n&&(r=this.dateModule.add(r,n,t)),this._setCurrentFocusAttr(r),!1},_onKeyDown:function(e){this.handleKey(e)||(e.stopPropagation(),e.preventDefault())},onValueSelected:function(){},onChange:function(e){this.onValueSelected(e)},getClassForDate:function(){}});return m._MonthDropDownButton=r("dijit.Calendar._MonthDropDownButton",v,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments),this.dropDown=new m._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(e){var t=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,e);this.dropDown.set("months",t),this.containerNode.innerHTML=(l("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+t[e.getMonth()]+"</div>"}}),m._MonthDropDown=r("dijit.Calendar._MonthDropDown",[h,d],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(t){this.domNode.innerHTML=e.map(t,function(e,t){return e?"<div class='dijitCalendarMonthLabel' month='"+t+"'>"+e+"</div>":""}).join("")},_onClick:function(e){this.onChange(i.get(e.target,"month"))},onChange:function(){},_onMenuHover:function(e){s.toggle(e.target,"dijitCalendarMonthLabelHover",e.type=="mouseover")}}),m}),pen.define("dojo/text!pentaho/common/Calendar.html",[],function(){return'<div class="pentaho-rounded-panel pentaho-tooltip-background pentaho-padding-sm pentaho-shadow" style="width:178px;text-align:center">\n  <div class="panel-content" style="width:100%">\n    <div class="pentaho-padding-sm">\n      <center>\n\n\n        <table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year" data-dojo-attach-point="gridNode">\n          <thead>\n          <tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n            <th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth" scope="col">\n              <span class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"></span>\n              <span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow" baseClass="pentaho-pagebackbutton">-</span>\n            </th>\n            <th class=\'dijitReset\' colspan="5" scope="col">\n              <div data-dojo-attach-point="monthNode">\n              </div>\n            </th>\n            <th class=\'dijitReset dijitCalendarArrow\' scope="col" data-dojo-attach-point="incrementMonth">\n              <span class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation" baseClass="pentaho-pagenextbutton"></span>\n              <span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n            </th>\n          </tr>\n          <tr role="row">\n            ${!dayCellsHtml}\n          </tr>\n          </thead>\n          <tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="ondijitclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n          ${!dateRowsHtml}\n          </tbody>\n          <tfoot class="dijitReset dijitCalendarYearContainer">\n          <tr>\n            <td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n              <div class="dijitCalendarYearLabel">\n                <span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button" baseClass="pentaho-pagebackbutton"></span>\n                <span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n                <span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button" baseClass="pentaho-pagenextbutton"></span>\n              </div>\n            </td>\n          </tr>\n          </tfoot>\n        </table>\n\n\n\n\n      </center>\n    </div>\n  </div>\n</div>\n\n'}),pen.define("dojo/text!pentaho/common/SmallImageButton.html",[],function(){return'<img data-dojo-attach-point="buttonImg" src="${_imageSrc}" title="" class="pentaho-addbutton"/>\n'}),pen.define("pentaho/common/SmallImageButton",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/on","dojo/query","dojo/text!pentaho/common/SmallImageButton.html","dojo/dom-class","dojo/_base/lang"],function(e,t,n,r,i,s,o,u,a){return e("pentaho.common.SmallImageButton",[t,n,r],{title:"",baseClass:"",_imageSrc:require.toUrl("pentaho/common/images/spacer.gif"),callback:function(){},disabled:!1,onClick:function(e){this.callback&&!this.get("disabled")&&this.callback(e)},templateString:o,mouseOver:function(){this.disabled||u.add(this.buttonImg,"pentaho-imagebutton-hover")},mouseOut:function(){this.disabled||u.remove(this.buttonImg,"pentaho-imagebutton-hover")},set:function(e,t){this.inherited(arguments),e=="disabled"&&(this.disabled=t,u.toggle(this.buttonImg,"pentaho-imagebutton-disabled",this.disabled),this.disabled?this.buttonImg.title="":this.buttonImg.title=this.title)},postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.buttonImg.className=this.baseClass,u.toggle(this.buttonImg,"pentaho-imagebutton-disabled",this.disabled),i(this.buttonImg,"click",a.hitch(this,this.onClick)),i(this.buttonImg,"mouseover",a.hitch(this,this.mouseOver)),i(this.buttonImg,"mouseout",a.hitch(this,this.mouseOut))}})}),pen.define("dojo/text!pentaho/common/DropDownButton.html",[],function(){return'<span class="dijit dijitReset dijitInline">\n  <span class=\'dijitReset dijitInline dijitButtonNode\'\n    data-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode">\n    <span class="dijitReset dijitStretch dijitButtonContents pentaho-listbox"\n    data-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n    role="button" aria-haspopup="true" aria-labelledby="${id}_label"><span class="dijitReset dijitInline dijitIcon"\n    data-dojo-attach-point="iconNode">\n\n    </span>\n      <span class="dijitReset dijitInline dijitButtonText"\n    data-dojo-attach-point="containerNode"\n    id="${id}_label">\n\n    </span>\n                        <div class="pentaho-dropdownbutton-outer">\n                          <div class="pentaho-dropdownbutton-inner">\n                          </div>\n                        </div>\n  <span class="dijitReset dijitInline dijitArrowButtonInner"></span>\n      <span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span>\n    </span></span>\n    <input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n		data-dojo-attach-event="onclick:_onClick"\n		data-dojo-attach-point="valueNode" role="presentation" />\n</span>\n'}),pen.define("pentaho/common/DropDownButton",["dojo/_base/declare","dijit/form/DropDownButton","dojo/text!pentaho/common/DropDownButton.html"],function(e,t,n){return e("pentaho.common.DropDownButton",[t],{baseClass:"dijitDropDownButton",templateString:n})}),pen.define("pentaho/common/Calendar",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/query","dijit/Calendar","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!pentaho/common/Calendar.html","pentaho/common/SmallImageButton","pentaho/common/DropDownButton","dojo/_base/event","dojo/on"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){return e("PentahoCalendar._MonthDropDown",[s,o,u],{months:[],templateString:"<div class='pentaho-listbox' dojoAttachEvent='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(e){this.domNode.innerHTML=array.map(e,function(e,t){return e?"<div class='pentaho-listitem' month='"+t+"'>"+e+"</div>":""}).join("")},_onClick:function(e){this.onChange(e.target.getAttribute("month"))},onChange:function(e){},_onMenuHover:function(e){n.toggle(e.target,"pentaho-listitem-hover",e.type=="mouseover")}}),e("pentaho.common.Calendar",[i,s,o,u],{templateString:a,buildRendering:function(){this.inherited(arguments),h(this.previousYearLabelNode,"click",t.hitch(this,this._prevYearClick)),h(this.nextYearLabelNode,"click",t.hitch(this,this._nextYearClick))},_populateGrid:function(){this.inherited(arguments),r(".dijitCalendarDateLabel",this.domNode).forEach(function(e){n.add(e,"label")},this),r(".dijitCalendarPreviousMonth",this.domNode).forEach(function(e){n.add(e,"pentaho-light-text")},this),r(".dijitCalendarNextMonth",this.domNode).forEach(function(e){n.add(e,"pentaho-light-text")},this),r(".dijitCalendarCurrentMonth",this.domNode).forEach(function(e){n.add(e,"pentaho-listitem")},this),r(".dijitCalendarCurrentDate",this.domNode).forEach(function(e){n.remove(e,"pentaho-listitem"),n.add(e,"panel-content")},this),r(".dijitCalendarSelectedDate",this.domNode).forEach(function(e){n.add(e,"pentaho-listitem-selected")},this)},_onDayMouseOver:function(e){var t=n.contains(e.target,"dijitCalendarDateLabel")?e.target.parentNode:e.target;t&&(t.dijitDateValue||t==this.previousYearLabelNode||t==this.nextYearLabelNode)&&(n.add(t,"pentaho-listitem-hover"),this._currentNode=t)},_onDayMouseOut:function(e){if(!this._currentNode)return;if(e.relatedTarget&&e.relatedTarget.parentNode==this._currentNode)return;var t="pentaho-listitem-hover";n.contains(this._currentNode,"dijitCalendarActiveDate")&&(t+=" pentaho-listitem-hover"),n.remove(this._currentNode,t),this._currentNode=null},_onDayMouseUp:function(e){this.inherited(arguments);var t=e.target.parentNode;t&&t.dijitDateValue&&n.add(t,"pentaho-listitem-selected")},_onDayClick:function(e){this.inherited(arguments),c.stop(e);for(var t=e.target;t&&!t.dijitDateValue;t=t.parentNode);t&&!n.contains(t,"dijitCalendarDisabledDate")&&n.add(t,"pentaho-listitem-selected")}})}),pen.define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(e,t,n,r){return e("dijit.form.MappedTextBox",r,{postMixInProperties:function(){this.inherited(arguments),this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(e){return e.toString?e.toString():""},toString:function(){var e=this.filter(this.get("value"));return e!=null?typeof e=="string"?e:this.serialize(e,this.constraints):""},validate:function(){return this.valueNode.value=this.toString(),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.valueNode=n.place("<input type='hidden'"+(this.name&&!t("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="",this.inherited(arguments)}})}),pen.define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(e,t,n){var r=e("dijit.form.RangeBoundTextBox",n,{rangeMessage:"",rangeCheck:function(e,t){return("min"in t?this.compare(e,t.min)>=0:!0)&&("max"in t?this.compare(e,t.max)<=0:!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var e=this.get("value");if(e==null)return!1;var t=!1;if("min"in this.constraints){var n=this.constraints.min;t=this.compare(e,typeof n=="number"&&n>=0&&e!=0?0:n)<0}if(!t&&"max"in this.constraints){var r=this.constraints.max;t=this.compare(e,typeof r!="number"||r>0?r:0)>0}return t},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(e){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(e))},getErrorMessage:function(e){var t=this.get("value");return t!=null&&t!==""&&(typeof t!="number"||!isNaN(t))&&!this.isInRange(e)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments),this.rangeMessage||(this.messages=t.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}});return r}),pen.define("dojo/text!dijit/form/templates/DropDownBox.html",[],function(){return'<div class="dijit dijitReset dijitInline dijitLeft"\n	id="widget_${id}"\n	role="combobox"\n	aria-haspopup="true"\n	data-dojo-attach-point="_popupStateNode"\n	><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n		data-dojo-attach-point="_buttonNode" role="presentation"\n		><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n			${_buttonInputDisabled}\n	/></div\n	><div class=\'dijitReset dijitValidationContainer\'\n		><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n	/></div\n	><div class="dijitReset dijitInputField dijitInputContainer"\n		><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n			data-dojo-attach-point="textbox,focusNode" role="textbox"\n	/></div\n></div>\n'}),pen.define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(e,t,n,r,i,s,o,u){new Date("X");var a=r("dijit.form._DateTimeTextBox",[s,o],{templateString:u,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:t.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},compare:function(t,n){var r=this._isInvalidDate(t),i=this._isInvalidDate(n);return r?i?0:-1:i?1:e.compare(t,n,this._selector)},autoWidth:!0,format:function(e,t){return e?this.dateLocaleModule.format(e,t):""},parse:function(e,t){return this.dateLocaleModule.parse(e,t)||(this._isEmpty(e)?null:undefined)},serialize:function(e,t){return e.toGregorian&&(e=e.toGregorian()),n.toISOString(e,t)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(n){this.dateModule=n.datePackage?i.getObject(n.datePackage,!1):e,this.dateClassObj=this.dateModule.Date||Date,this.dateLocaleModule=n.datePackage?i.getObject(n.datePackage+".locale",!1):t,this._set("pattern",this.dateLocaleModule.regexp),this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments),this.hasDownArrow||(this._buttonNode.style.display="none"),this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(e){e.selector=this._selector,e.fullYear=!0;var t=n.fromISOString;typeof e.min=="string"&&(e.min=t(e.min)),typeof e.max=="string"&&(e.max=t(e.max)),this.inherited(arguments)},_isInvalidDate:function(e){return!e||isNaN(e)||typeof e!="object"||e.toString()==this._invalidDate},_setValueAttr:function(e,t,r){e!==undefined&&(typeof e=="string"&&(e=n.fromISOString(e)),this._isInvalidDate(e)&&(e=null),e instanceof Date&&!(this.dateClassObj instanceof Date)&&(e=new this.dateClassObj(e))),this.inherited(arguments),this.value instanceof Date&&(this.filterString=""),this.dropDown&&this.dropDown.set("value",e,!1)},_set:function(e,t){var n=this._get("value");if(e=="value"&&n instanceof Date&&this.compare(t,n)==0)return;this.inherited(arguments)},_setDropDownDefaultValueAttr:function(e){this._isInvalidDate(e)&&(e=new this.dateClassObj),this._set("dropDownDefaultValue",e)},openDropDown:function(e){this.dropDown&&this.dropDown.destroy();var t=i.isString(this.popupClass)?i.getObject(this.popupClass,!1):this.popupClass,n=this,r=this.get("value");this.dropDown=new t({onChange:function(e){n.set("value",e,!0)},id:this.id+"_popup",dir:n.dir,lang:n.lang,value:r,textDir:n.textDir,currentFocus:this._isInvalidDate(r)?this.dropDownDefaultValue:r,constraints:n.constraints,filterString:n.filterString,datePackage:n.params.datePackage,isDisabledDate:function(e){return!n.rangeCheck(e,n.constraints)}}),this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(e,t){this._setValueAttr(this.parse(e,this.constraints),t,e)}});return a}),pen.define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(e,t,n){return e("dijit.form.DateTextBox",n,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:t,_selector:"date",maxHeight:Infinity,value:new Date("")})}),pen.define("dojo/text!pentaho/common/DropDownBox.html",[],function(){return'<div class="dijit dijitReset dijitInlineTable dijitLeft pentaho-listbox"\n	id="widget_${id}"\n	role="combobox">\n    <div class=\'dijitReset dijitRight dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n		data-dojo-attach-point="_buttonNode, _popupStateNode" role="presentation">\n                        <div class="pentaho-dropdownbutton-outer">\n                            <div class="pentaho-dropdownbutton-inner">\n                            </div>\n                        </div>\n\n        <input class="dijitReset dijitInputField dijitArrowButtonInner" style="display:none" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"	${_buttonInputDisabled} />\n    </div>\n    <div class=\'dijitReset dijitValidationContainer\'>\n        <input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935;" type="text" tabIndex="-1" readonly="readonly" role="presentation"/>\n    </div>\n    <div class="dijitReset dijitInputField dijitInputContainer">\n        <input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n			data-dojo-attach-point="textbox,focusNode" role="textbox" aria-haspopup="true"/>\n    </div>\n\n</div>'}),pen.define("pentaho/common/DateTextBox",["dojo/_base/declare","dijit/form/DateTextBox","dijit/Calendar","dojo/text!pentaho/common/DropDownBox.html","pentaho/common/Calendar"],function(e,t,n,r,i){return e("pentaho.common.DateTextBox",[t],{templateString:r,popupClass:i})}),pen.define("common-ui/prompting/pentaho-prompting-components",["common-ui/prompting/pentaho-prompting-bind","common-ui/prompting/pentaho-prompting-builders","cdf/cdf-module","pentaho/common/TextButtonCombo","dijit/registry","dojo/on","dojo/_base/lang","pentaho/common/Calendar","pentaho/common/DateTextBox"],function(e,t,n,r,i,s,o,u,a){window.ScopedPentahoButtonComponent=BaseComponent.extend({viewReportButtonRegistered:!1,update:function(){this.registerSubmitClickEvent()},registerSubmitClickEvent:function(){if(!this.viewReportButtonRegistered){var e=$("#"+this.htmlObject).empty();$("<button type='button' class='pentaho-button'/>").text(this.label).bind("mousedown",this.expressionStart.bind(this)).bind("click",function(){this.expression(!1)}.bind(this)).button().appendTo(e),this.viewReportButtonRegistered=!0}},expressionStart:function(){}}),window.SubmitPromptComponent=ScopedPentahoButtonComponent.extend({update:function(){this.base();var e=this.promptPanel;if(this.paramDefn.autoSubmit==undefined){var t='<label class="auto-complete-checkbox"><input type="checkbox"'+(e.autoSubmit?' checked="checked"':"")+" />"+this.autoSubmitLabel+"</label>";$(t).appendTo($("#"+this.htmlObject)).bind("click",function(t){e.autoSubmit=t.target.checked})}(e.forceAutoSubmit||e.autoSubmit)&&this.expression(!0)},expression:function(e){this.promptPanel._submit({isInit:e})},expressionStart:function(){this.promptPanel._submitStart()}}),window.CompositeComponent=BaseComponent.extend({components:undefined,executeAtStart:!0,getComponents:function(){return this.components},clear:function(){this.components&&$.each(this.components,function(e,t){t.clear()}),this.base()},getClassFor:function(e){return e.cssClass},getMarkupFor:function(e){var t=this.getClassFor(e),n='<div id="'+e.htmlObject+'"';return t&&(n+=' class="'+t+'"'),n+="></div>",n},update:function(){var e="";this.label!==undefined&&(e+="<fieldset>",this.label.length>0&&(e+="<legend>"+Dashboards.escapeHtml(this.label)+"</legend>"),e+="<div>"),this.components&&this.components.length>0&&(e+=this.updateInternal()),this.label!==undefined&&(e+="</div></fieldset>"),$("#"+this.htmlObject).html(e),this.cssClass&&$("#"+this.htmlObject).addClass(this.cssClass)},updateInternal:function(){var e="";return $.each(this.components,function(t,n){e+=this.getMarkupFor(n)}.bind(this)),e}}),window.CompositeComponent.mapComponents=function(e,t,n){return t.call(n,e),e.components&&window.CompositeComponent.mapComponentsList(e.components,t,n),e},window.CompositeComponent.mapComponentsList=function(e,t,n){var r=this;return $.each(e,function(e,i){r.mapComponents(i,t,n)}),r},window.PromptLayoutComponent=CompositeComponent.extend({getClassFor:function(e){if(!e.param)return;return"parameter"+(e.cssClass?" "+e.cssClass:"")}}),window.TableBasedPromptLayoutComponent=PromptLayoutComponent.extend({buildComponentCell:function(e){return"<td align='left' style='vertical-align: top;'><div id='"+e.htmlObject+"'></div></td>"},getMarkupFor:function(e){throw"TableBasedPromptLayoutComponent should not be used directly."},updateInternal:function(){var e='<table cellspacing="0" cellpadding="0" class="parameter-container" style="width: 100%;">';return e+='<tr><td><div><table cellspacing="0" cellpadding="0">',e+=this.getMarkupFor(this.components),e+"</table></div></td></tr></table>"}}),window.VerticalTableBasedPromptLayoutComponent=TableBasedPromptLayoutComponent.extend({getMarkupFor:function(e){var t="";return $.each(e,function(e,n){var r=this.getClassFor(n);t+='<tr><td><div id="'+n.htmlObject+'"',r&&(t+=' class="'+r+'"'),t+="></div></td></tr>"}.bind(this)),t}}),window.HorizontalTableBasedPromptLayoutComponent=TableBasedPromptLayoutComponent.extend({getMarkupFor:function(e){var t="<tr>";return $.each(e,function(e,n){var r=this.getClassFor(n);t+='<td align="left" style="vertical-align: top;"><div id="'+n.htmlObject+'"',r&&(t+=' class="'+r+'"'),t+="></div></td>"}.bind(this)),t+"</tr>"}}),window.FlowPromptLayoutComponent=PromptLayoutComponent.extend({update:function(){$("#"+this.htmlObject).addClass("flow"),this.base()}}),window.ScrollingPromptPanelLayoutComponent=PromptLayoutComponent.extend({update:function(){if(this.components){if(this.components.length==0){$("#"+this.htmlObject).empty();return}var e='<div class="prompt-panel">',t='<div class="submit-panel">';$.each(this.components,function(n,r){r.promptType==="submit"?t+=this.getMarkupFor(r):e+=this.getMarkupFor(r)}.bind(this)),e+="</div>"+t+"</div>",$("#"+this.htmlObject).html(e)}}}),window.PanelComponent=CompositeComponent.extend({getClassFor:function(e){return undefined},getMarkupFor:function(e){var t=this.getClassFor(e),n='<div id="'+e.htmlObject+'"';return t&&(n+=' class="'+t+'"'),n+="></div>",n}}),window.ParameterPanelComponent=PanelComponent.extend({getClassFor:function(e){if(e.promptType==="label")return"parameter-label"}}),window.ExternalInputComponent=BaseComponent.extend({clear:function(){this.dijitId&&(this.onChangeHandle&&this.onChangeHandle.remove(),i.byId(this.dijitId).destroyRecursive(),delete this.dijitId)},update:function(){var e=Dashboards.getParameterValue(this.parameter),t=$("#"+this.htmlObject).empty(),n=this.htmlObject+"-textButtonCombo",r='<div id="'+n+'"></div>';t.append(r);var i=new pentaho.common.TextButtonCombo({},n);i.set("textPlaceHolder","file path..."),i.set("value",e);var s=this.param.attributes["button-label"];s!=null&&s!=""&&i.set("buttonLabel",s),i.onClickCallback=o.hitch(this,function(e){try{var t=Dashboards.getComponentByName(this.name),n=function(e){i.set("text",e),Dashboards.processChange(this.name)};t.param.values=[e],t.promptPanel.getExternalValueForParam(t.param,n)}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}}),this.dijitId=n,i.onChangeCallback=o.hitch(this,function(e){Dashboards.processChange(this.name)})},getValue:function(){return i.byId(this.dijitId).get("value")}}),window.DojoDateTextBoxComponent=BaseComponent.extend({clear:function(){this.dijitId&&(this.onChangeHandle&&this.onChangeHandle.remove(),i.byId(this.dijitId).destroyRecursive(),delete this.dijitId)},update:function(){var e=this.transportFormatter.parse(Dashboards.getParameterValue(this.parameter));this.dijitId=this.htmlObject+"_input";var t=$("#"+this.htmlObject).html($("<input/>").attr("id",this.dijitId)),n=new pentaho.common.DateTextBox({name:this.name,constraints:{datePattern:this.param.attributes["data-format"],selector:"date",formatLength:"medium"}},this.dijitId);n.set("value",e,!1),this.onChangeHandle=s(n,"change",function(){Dashboards.processChange(this.name)}.bind(this)),this._doAutoFocus()},getValue:function(){var e=i.byId(this.dijitId).get("value");return this.transportFormatter.format(e)}}),window.StaticAutocompleteBoxComponent=BaseComponent.extend({update:function(){this.labelValueMap===undefined&&(this.labelValueMap={},$.each(this.valuesArray,function(e,t){this.labelValueMap[t.label]=t.value}.bind(this)));var e=$("#"+this.htmlObject);e.empty();var t='<input type="text" id="'+this.htmlObject+'-input"';if(this.parameter){var n;$.each(this.param.values,function(e,t){if(t.selected){n=this.formatter?this.formatter.format(this.transportFormatter.parse(t.label)):t.label;try{isNaN(t.label)||Math.abs(t.label)==Infinity?valueParsed=null:valueParsed=dojo.number.format(t.label,{locale:SESSION_LOCALE.toLowerCase()})}catch(r){valueParsed=t.label}valueParsed!=null&&(n=t.label=t.value=valueParsed)}}.bind(this)),n!==undefined&&(t+=' value="'+n+'"')}t+="></input>",e.html(t);var r=$("input",e);r.autocomplete({delay:0,source:function(e,t){var n=e.term.toUpperCase(),r=$.map(this.valuesArray,function(e){if(e.label.toUpperCase().indexOf(n)>=0)return e});t(r)}.bind(this),select:function(e,t){$("#"+this.htmlObject+"-input").val(t.item.value),Dashboards.processChange(this.name)}.bind(this)}),r.keypress(function(e){e.which===13&&Dashboards.processChange(this.name)}.bind(this));var i;r.focus(function(){i=this.getValue()}.bind(this)),r.focusout(function(){if(i!==this.getValue()){try{var e=$("#ui-active-menuitem").text();e&&$("#"+this.htmlObject+"-input").val(e)}catch(t){}Dashboards.processChange(this.name)}}.bind(this)),this._doAutoFocus()},getValue:function(){var e=$("#"+this.htmlObject+"-input").val();return this.param.list?this.labelValueMap[e]||e:this.formatter?this.transportFormatter.format(this.formatter.parse(e)):e}}),window.TextAreaComponent=BaseComponent.extend({update:function(){var e=Dashboards.getParameterValue(this.parameter),t='<textarea id="'+this.htmlObject+'-input">';e!=undefined&&(t+=Dashboards.escapeHtml(e)),t+="</textarea>",$("#"+this.htmlObject).html(t);var n=$("#"+this.htmlObject+"-input");n.change(function(){}.bind(this)),n.keypress(function(e){e.which===13&&Dashboards.processChange(this.name)}.bind(this)),n.focusout(function(){Dashboards.processChange(this.name)}.bind(this)),this._doAutoFocus()},getValue:function(){var e=$("#"+this.htmlObject+"-input").val();return this.formatter?this.transportFormatter.format(this.formatter.parse(e)):e}})}),pen.define("common-ui/util/base64",function(){}),pentaho=typeof pentaho=="undefined"?{}:pentaho,pentaho.common=pentaho.common||{},pentaho.common.prompting=pentaho.common.prompting||{},pen.define("common-ui/prompting/pentaho-prompting",["cdf/cdf-module","common-ui/prompting/pentaho-prompting-bind","common-ui/prompting/pentaho-prompting-components","common-ui/util/base64"],function(){var e=function(){this._assignedGUIDs={},this._gen=function(){return Math.round(Math.random()*1e5)},this.generateGUID=function(){var e=this._gen();while(this._assignedGUIDs[e])e=this._gen();return this._assignedGUIDs[e]=!0,""+e},this.reset=function(){this._assignedGUIDs={}}};$.extend(pentaho.common.prompting,{ParameterDefinition:function(){return{autoSubmit:undefined,autoSubmitUI:undefined,ignoreBiServer5538:undefined,layout:undefined,page:undefined,paginate:undefined,parameterGroups:[],promptNeeded:undefined,totalPages:undefined,errors:{},getParameterGroup:function(e){var t;return $.each(this.parameterGroups,function(n,r){if(r.name===e)return t=r,!1}),t},allowAutoSubmit:function(){return this.autoSubmit!=undefined?this.autoSubmit:this.autoSubmitUI},showParameterUI:function(){var e;return this.mapParameters(function(t){if(t.name=="showParameters")return e=t,!1}),!e||!e.isSelectedValue("false")},getParameter:function(e){var t;return this.mapParameters(function(n){if(n.name===e)return t=n,!1}),t},mapParameters:function(e,t){var n=this,r=!1;return $.each(this.parameterGroups,function(i,s){$.each(this.parameters,function(i,o){if(e.call(t,o,s,n)===!1)return r=!0,!1});if(r)return!1}),!r}}},ParameterGroup:function(){return{name:undefined,label:undefined,parameters:[]}},Parameter:function(){return{name:undefined,type:undefined,list:undefined,mandatory:undefined,multiSelect:undefined,strict:undefined,timezoneHint:undefined,attributes:{},values:[],isSelectedValue:function(e){var t=!1;return $.each(this.values,function(n,r){if(r.selected&&e===r.value)return t=!0,!1}),t},hasSelection:function(){var e=!1;return $.each(this.values,function(t,n){if(n.selected)return e=!0,!1}),e},getSelectedValues:function(){var e=[];return $.each(this.values,function(t,n){n.selected&&e.push(n)}),e},getSelectedValuesValue:function(){var e=[];return $.each(this.values,function(t,n){n.selected&&e.push(n.value)}),e}}},ParameterValue:function(){return{type:undefined,label:undefined,selected:!1,value:undefined}},promptGUIDHelper:new e,removeDashboardComponents:function(e,t){var n=[];window.CompositeComponent.mapComponentsList(e,function(e){var t=Dashboards.removeComponent(e.name);t&&n.push(t)}),$.each(n,function(e,n){t||n.clear(),n.parameter&&($.each(Dashboards.components,function(e,t){$.isArray(t.listeners)&&(t.listeners=$.grep(t.listeners,function(e){return e!==n.parameter}))}),$.each(Dashboards.components,function(e,t){$.isArray(t.parameters)&&(t.parameters=$.each(t.parameters,function(e,t){return t[1]===n.parameter?[t[0],"",""]:t}))}))})},appendInline:function(e,t){e.splice.apply(e,[e.length,0].concat(t))},prepareCDF:function(){if(this.prepared)return;Dashboards.setGlobalContext(!1),Dashboards._setFlatParameters(!0),Dashboards.escapeParameterValues=!1,this.prepared=!0},parseXML:function(e,t,n){return window.DOMParser?(n=new DOMParser,t=n.parseFromString(e,"text/xml")):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)),n=t.documentElement,(!n||!n.nodeName||n.nodeName==="parsererror")&&jQuery.error("Invalid XML: "+e),t},ParameterXmlParser:function(){this.parseParameterXml=function(e){var t=$(pentaho.common.prompting.parseXML(e));if(t.find("parsererror").length>0)throw e;var n=new pentaho.common.prompting.ParameterDefinition,r=$(t.find("parameters")[0]);n.promptNeeded="true"==r.attr("is-prompt-needed"),n.ignoreBiServer5538="true"==r.attr("ignore-biserver-5538"),n.paginate="true"==r.attr("paginate"),n.layout=r.attr("layout");var i=function(e,t){var n=parseInt(e);return"NaN"==n?t:n};return n.page=i(r.attr("accepted-page"),0),n.totalPages=i(r.attr("page-count"),0),n.autoSubmit=r.attr("autoSubmit"),n.autoSubmit=="true"?n.autoSubmit=!0:n.autoSubmit=="false"?n.autoSubmit=!1:n.autoSubmit=undefined,n.autoSubmitUI="true"==r.attr("autoSubmitUI"),this.parseParameters(n,r),this.parseErrors(n,t),n},this.parseParameters=function(e,t){t.find("parameter").each(function(t,n){var r=this.parseParameter(n);n=$(n);var i=r.attributes["parameter-group"];if(i==undefined||!$.trim(i).length)i="parameters";var s=e.getParameterGroup(i);s||(s=new pentaho.common.prompting.ParameterGroup,s.name=i,s.label=r.attributes["parameter-group-label"],e.parameterGroups.push(s)),s.parameters.push(r)}.bind(this))},this.parseParameter=function(e){var t=new pentaho.common.prompting.Parameter;return e=$(e),t.name=e.attr("name"),t.mandatory="true"==e.attr("is-mandatory"),t.strict="true"==e.attr("is-strict"),t.list="true"==e.attr("is-list"),t.multiSelect="true"==e.attr("is-multi-select"),t.type=e.attr("type"),t.timezoneHint=e.attr("timezone-hint"),$(e).find("attribute").each(function(e,n){n=$(n),t.attributes[n.attr("name")]=n.attr("value")}),t.values=this.parseParameterValues(e,t),t},this.parseParameterValues=function(e,t){var n=[];return $(e).find("values value").each(function(e,r){var i=new pentaho.common.prompting.ParameterValue;r=$(r),"true"==r.attr("encoded")?i.label=base64Decode(r.attr("label")):i.label=r.attr("label"),"true"==r.attr("null")?i.value="":"true"==r.attr("encoded")?i.value=base64Decode(r.attr("value")):i.value=r.attr("value"),i.type=r.attr("type");if(i.type==undefined||!$.trim(i.type).length)i.type=t.type;i.selected="true"==r.attr("selected"),i.value=this.normalizeParameterValue(t,i.type,i.value),n.push(i)}.bind(this)),n},this.normalizeParameterValue=function(e,t,n){return n},this.parseErrors=function(e,t){var n=function(e,t,n){var r=e.errors[t];r||(r=[]),r.push(n),e.errors[t]=r};t.find("error").each(function(t,r){var i=$(r),s=i.attr("parameter"),o=i.attr("message");n(e,s,o)}.bind(this)),t.find("global-error").each(function(t,r){var i=$(r),s=i.attr("message");n(e,null,s)}.bind(this))}},PromptPanel:function(t,n){if(!t)throw"destinationId is required";this.destinationId=t;if(!n)throw"paramDefn is required";this.paramDefn=n,this.whiteList=["java.lang.Number","java.lang.Byte","java.lang.Double","java.lang.Float","java.lang.Integer","java.lang.Long","java.lang.Short","java.math.BigDecimal","java.math.BigInteger"],this.autoSubmit=n.allowAutoSubmit(),this.guid=pentaho.common.prompting.promptGUIDHelper.generateGUID(),this.getString=function(e,t){return t||"!"+e+"!"},this.getAutoSubmitSetting=function(){return this.autoSubmit},this.getParameterName=function(e){return this.guid+e.name},this.getParameterValues=function(){var e={};return this.paramDefn.mapParameters(function(t){var n=Dashboards.getParameterValue(this.getParameterName(t));if(n===""||typeof n=="undefined")return;t.multiSelect&&!$.isArray(n)&&(n=[n]);if(_.contains(this.whiteList,t.type)){var r=dojo.i18n.getLocalization("dojo.cldr","number",SESSION_LOCALE.toLowerCase()),i=dojo.i18n.getLocalization("dojo.cldr","number",null),s;try{if(n.indexOf(r?r.decimal:i.decimal)>0){s=dojo.number.parse(n,{locale:SESSION_LOCALE.toLowerCase()});if(s.toString().indexOf(i.decimal)<0){s=dojo.number.format(s,{places:n.length-n.indexOf(r?r.decimal:i.decimal)-1});var i=dojo.i18n.getLocalization("dojo.cldr","number",null);s=s.split(i.group).join("")}}else s=dojo.number.parse(n,{locale:SESSION_LOCALE.toLowerCase()})}catch(o){s=n}}e[t.name]=isNaN(s)?n:s},this),e},this.createDataTransportFormatter=function(e,t,n,r){},this.createFormatter=function(e,t,n){},this._widgetGUIDHelper=new e,this.generateWidgetGUID=function(){return this.guid+"-"+this._widgetGUIDHelper.generateGUID()},this.initializeParameterValue=function(e,t){var n=t.getSelectedValuesValue();n.length===0?n="":n.length===1&&(n=n[0]),this.setParameterValue(t,n)},this.setParameterValue=function(e,t){Dashboards.setParameter(this.getParameterName(e),t)},this.getParameterValue=function(e){return typeof e!="string"&&(e=this.getParameterName(e)),Dashboards.getParameterValue(e)},this._ready=function(){this.ready(this)},this._submit=function(e){this.submit(this,e)},this._submitStart=function(){this.submitStart(this)},this.ready=function(e){},this.submit=function(e,t){this.forceAutoSubmit=!1},this.submitStart=function(e){},this.parameterChanged=function(e,t,n){this.refreshPrompt()},this.getParameterDefinition=function(e,t){t()},this.refreshPrompt=function(){try{this.getParameterDefinition(this,this.refresh.bind(this))}catch(e){alert("Error in refreshCallback")}},this.refresh=function(e,t){var n=this;if(Dashboards.waitingForInit&&Dashboards.waitingForInit.length){Dashboards.log("Overlapping refresh!","warn"),setTimeout(function(){n.refresh(e,t)},0);return}if(e){this.paramDefn=e;if(this.components){var r=this.paramDefn.showParameterUI();pentaho.common.prompting.removeDashboardComponents(this.components,r);var i;/android|ipad|iphone/i.test(navigator.userAgent)||(i=this._multiListBoxTopValuesByParam={});var s;window.CompositeComponent.mapComponentsList(this.components,function(e){if(!e.components&&e.param&&e.promptType==="prompt"){if(!s){var t=e.placeholder();$(":focus",t).length&&(s=e.param.name)}if(i&&e.type==="SelectMultiComponent"){var n=e.topValue();n!=null&&(i["_"+e.param.name]=n)}}}),this._focusedParam=s}this.init(t)}},this.init=function(e){pentaho.common.prompting.prepareCDF();var t=!0;if(this.paramDefn.showParameterUI()){this._widgetGUIDHelper.reset();var r=[],i=pentaho.common.prompting.builders.WidgetBuilder.build(this,"prompt-panel"),s=this._multiListBoxTopValuesByParam;s&&delete this._multiListBoxTopValuesByParam;var o=this._focusedParam;o&&delete this._focusedParam,window.CompositeComponent.mapComponents(i,function(e){r.push(e),t&&e.promptType=="submit"&&(t=!1);if(!e.components&&e.param&&e.promptType==="prompt"){var n=e.param.name;o&&o===n&&(o=null,e.autoFocus=!0);if(s&&e.type==="SelectMultiComponent"){var i=s["_"+n];i!=null&&(e.autoTopValue=i)}}});if(this.components&&this.components.length>0){var u=pentaho.common.prompting.builders.WidgetBuilder.build({promptPanel:this,components:this.components},"gc");if(!u)throw"Cannot create garbage collector";r=[u].concat(r)}this.components=r,Dashboards.init(r)}else this.paramDefn.mapParameters(function(e){this.initializeParameterValue(n,e)},this),t=!e;t&&this.submit(this,{isInit:!0})},this.hide=function(){$("#"+this.destinationId).css("display","none")},this.createSubmitPanel=function(e){return pentaho.common.prompting.builders.WidgetBuilder.build({promptPanel:this},"submit-panel")},this.getParameterPanelType=function(){return"parameter-panel"},this.createWidgetForParameter=function(e,t){if(t.strict&&t.values.length===0)return;return pentaho.common.prompting.builders.WidgetBuilder.build({promptPanel:this,param:t})},this.shouldBuildSubmitPanel=function(e){return e.length>0},this.buildPanelComponents=function(){var e=[];$.each(this.paramDefn.parameterGroups,function(t,n){var r=[];$.each(n.parameters,function(e,t){this.initializeParameterValue(this.paramDefn,t);if("true"==t.attributes["hidden"])return;var n=this.createWidgetForParameter(this.paramDefn,t);if(!n)return;var i=pentaho.common.prompting.builders.WidgetBuilder.build({promptPanel:this,param:t},"label"),s=this.paramDefn.errors[t.name],o=[];s&&s.length>0&&$.each(s,function(e,n){var r=pentaho.common.prompting.builders.WidgetBuilder.build({promptPanel:this,param:t,errorMessage:n},"error-label");r&&o.push(r)}.bind(this));var u=[i];u=u.concat(o),u.push(n);var a=pentaho.common.prompting.builders.WidgetBuilder.build({promptPanel:this,param:t,components:u},this.getParameterPanelType());o.length>0&&(a.cssClass=(a.cssClass||"")+" error"),r.push(a)}.bind(this));if(r.length>0){var i=pentaho.common.prompting.builders.WidgetBuilder.build({promptPanel:this,paramGroup:n,components:r},"group-panel");e.push(i)}}.bind(this));if(this.shouldBuildSubmitPanel(e)){var t=this.createSubmitPanel(this.paramDefn);t&&e.push(t)}return e}}})}),pen.define("common-ui/util/util",["dijit/registry","dojo/dom"],function(e,t){return{getUrlParameters:function(){var e={},t,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(n," "))},s=window.location.search.substring(1);while(t=r.exec(s)){var o=i(t[1]),u=i(t[2]);e[o]!==undefined&&(u=$.isArray(e[o])?e[o].concat([u]):[e[o],u]),e[o]=u}return e},getLocale:function(){var e=this.getUrlParameters().locale;return e&&e.length>2&&(e=e.substring(0,2)),e},localizeDomCtrl:function(n,r,i){var s=null,o=null,u=null,a=i||"";n.indexOf("_label")==n.length-6?(u=n.substr(0,n.length-6),s="label"):n.indexOf("_title")==n.length-6?(u=n.substr(0,n.length-6),s="title"):n.indexOf("_content")==n.length-8?(u=n.substr(0,n.length-8),s="inner"):n.indexOf("_legend")==n.length-7?(u=n.substr(0,n.length-7),s="legend"):n.indexOf("_header")==n.length-7?(u=n.substr(0,n.length-7),s="header"):n.indexOf("_button")==n.length-7&&(u=n.substr(0,n.length-7),s="inner"),u!=null&&(u=a+u,this[u]?o=this[u]:(o=e.byId(u),o||(o=t.byId(u))));var f=-1;o||(o=t.byId(u+"1"),o&&(f=1));while(o&&s){if(s=="inner")o.domNode&&(o=o.domNode),o.innerHTML=r;else if(s=="legend")if(o.firstElementChild===undefined){var l=o.firstChild;while(l){if(l.nodeType==1){l.innerHTML=r;break}l=l.nextSibling}}else o.firstElementChild.innerHTML=r;else s=="label"&&o.setLabel?o.setLabel(r):s=="title"&&o.setTitle?o.setTitle(r):o.set?o.set(s,r):s=="title"&&o.title&&(o.title=r);f!=-1?(f++,o=dojo.byId(u+f)):o=null}},localizeDom:function(e,t){var n;if(pentaho&&pentaho.common&&pentaho.common.Messages){var r=pentaho.common.Messages.getBundle(e);if(r)for(n in r)r.hasOwnProperty(n)&&this.localizeDomCtrl(n,pentaho.common.Messages.getString(n),t)}else console.log("pentaho.common.Messages not available for localizing the DOM")}}}),pen.define("common-ui/util/timeutil",[],function(){return{offsets:{ACT:570,AET:600,AGT:-180,ART:120,AST:-540,"Africa/Abidjan":0,"Africa/Accra":0,"Africa/Addis_Ababa":180,"Africa/Algiers":60,"Africa/Asmara":180,"Africa/Asmera":180,"Africa/Bamako":0,"Africa/Bangui":60,"Africa/Banjul":0,"Africa/Bissau":0,"Africa/Blantyre":120,"Africa/Brazzaville":60,"Africa/Bujumbura":120,"Africa/Cairo":120,"Africa/Casablanca":0,"Africa/Ceuta":60,"Africa/Conakry":0,"Africa/Dakar":0,"Africa/Dar_es_Salaam":180,"Africa/Djibouti":180,"Africa/Douala":60,"Africa/El_Aaiun":0,"Africa/Freetown":0,"Africa/Gaborone":120,"Africa/Harare":120,"Africa/Johannesburg":120,"Africa/Kampala":180,"Africa/Khartoum":180,"Africa/Kigali":120,"Africa/Kinshasa":60,"Africa/Lagos":60,"Africa/Libreville":60,"Africa/Lome":0,"Africa/Luanda":60,"Africa/Lubumbashi":120,"Africa/Lusaka":120,"Africa/Malabo":60,"Africa/Maputo":120,"Africa/Maseru":120,"Africa/Mbabane":120,"Africa/Mogadishu":180,"Africa/Monrovia":0,"Africa/Nairobi":180,"Africa/Ndjamena":60,"Africa/Niamey":60,"Africa/Nouakchott":0,"Africa/Ouagadougou":0,"Africa/Porto-Novo":60,"Africa/Sao_Tome":0,"Africa/Timbuktu":0,"Africa/Tripoli":120,"Africa/Tunis":60,"Africa/Windhoek":60,"America/Adak":-600,"America/Anchorage":-540,"America/Anguilla":-240,"America/Antigua":-240,"America/Araguaina":-180,"America/Argentina/Buenos_Aires":-180,"America/Argentina/Catamarca":-180,"America/Argentina/ComodRivadavia":-180,"America/Argentina/Cordoba":-180,"America/Argentina/Jujuy":-180,"America/Argentina/La_Rioja":-180,"America/Argentina/Mendoza":-180,"America/Argentina/Rio_Gallegos":-180,"America/Argentina/Salta":-180,"America/Argentina/San_Juan":-180,"America/Argentina/San_Luis":-240,"America/Argentina/Tucuman":-180,"America/Argentina/Ushuaia":-180,"America/Aruba":-240,"America/Asuncion":-240,"America/Atikokan":-300,"America/Atka":-600,"America/Bahia":-180,"America/Barbados":-240,"America/Belem":-180,"America/Belize":-360,"America/Blanc-Sablon":-240,"America/Boa_Vista":-240,"America/Bogota":-300,"America/Boise":-420,"America/Buenos_Aires":-180,"America/Cambridge_Bay":-420,"America/Campo_Grande":-240,"America/Cancun":-360,"America/Caracas":-270,"America/Catamarca":-180,"America/Cayenne":-180,"America/Cayman":-300,"America/Chicago":-360,"America/Chihuahua":-420,"America/Coral_Harbour":-300,"America/Cordoba":-180,"America/Costa_Rica":-360,"America/Cuiaba":-240,"America/Curacao":-240,"America/Danmarkshavn":0,"America/Dawson":-480,"America/Dawson_Creek":-420,"America/Denver":-420,"America/Detroit":-300,"America/Dominica":-240,"America/Edmonton":-420,"America/Eirunepe":-240,"America/El_Salvador":-360,"America/Ensenada":-480,"America/Fort_Wayne":-300,"America/Fortaleza":-180,"America/Glace_Bay":-240,"America/Godthab":-180,"America/Goose_Bay":-240,"America/Grand_Turk":-300,"America/Grenada":-240,"America/Guadeloupe":-240,"America/Guatemala":-360,"America/Guayaquil":-300,"America/Guyana":-240,"America/Halifax":-240,"America/Havana":-300,"America/Hermosillo":-420,"America/Indiana/Indianapolis":-300,"America/Indiana/Knox":-360,"America/Indiana/Marengo":-300,"America/Indiana/Petersburg":-300,"America/Indiana/Tell_City":-360,"America/Indiana/Vevay":-300,"America/Indiana/Vincennes":-300,"America/Indiana/Winamac":-300,"America/Indianapolis":-300,"America/Inuvik":-420,"America/Iqaluit":-300,"America/Jamaica":-300,"America/Jujuy":-180,"America/Juneau":-540,"America/Kentucky/Louisville":-300,"America/Kentucky/Monticello":-300,"America/Knox_IN":-360,"America/La_Paz":-240,"America/Lima":-300,"America/Los_Angeles":-480,"America/Louisville":-300,"America/Maceio":-180,"America/Managua":-360,"America/Manaus":-240,"America/Marigot":-240,"America/Martinique":-240,"America/Matamoros":-360,"America/Mazatlan":-420,"America/Mendoza":-180,"America/Menominee":-360,"America/Merida":-360,"America/Mexico_City":-360,"America/Miquelon":-180,"America/Moncton":-240,"America/Monterrey":-360,"America/Montevideo":-180,"America/Montreal":-300,"America/Montserrat":-240,"America/Nassau":-300,"America/New_York":-300,"America/Nipigon":-300,"America/Nome":-540,"America/Noronha":-120,"America/North_Dakota/Center":-360,"America/North_Dakota/New_Salem":-360,"America/Ojinaga":-420,"America/Panama":-300,"America/Pangnirtung":-300,"America/Paramaribo":-180,"America/Phoenix":-420,"America/Port-au-Prince":-300,"America/Port_of_Spain":-240,"America/Porto_Acre":-240,"America/Porto_Velho":-240,"America/Puerto_Rico":-240,"America/Rainy_River":-360,"America/Rankin_Inlet":-360,"America/Recife":-180,"America/Regina":-360,"America/Resolute":-300,"America/Rio_Branco":-240,"America/Rosario":-180,"America/Santa_Isabel":-480,"America/Santarem":-180,"America/Santiago":-240,"America/Santo_Domingo":-240,"America/Sao_Paulo":-180,"America/Scoresbysund":-60,"America/Shiprock":-420,"America/St_Barthelemy":-240,"America/St_Johns":-210,"America/St_Kitts":-240,"America/St_Lucia":-240,"America/St_Thomas":-240,"America/St_Vincent":-240,"America/Swift_Current":-360,"America/Tegucigalpa":-360,"America/Thule":-240,"America/Thunder_Bay":-300,"America/Tijuana":-480,"America/Toronto":-300,"America/Tortola":-240,"America/Vancouver":-480,"America/Virgin":-240,"America/Whitehorse":-480,"America/Winnipeg":-360,"America/Yakutat":-540,"America/Yellowknife":-420,"Antarctica/Casey":660,"Antarctica/Davis":300,"Antarctica/DumontDUrville":600,"Antarctica/Mawson":300,"Antarctica/McMurdo":720,"Antarctica/Palmer":-240,"Antarctica/Rothera":-180,"Antarctica/South_Pole":720,"Antarctica/Syowa":180,"Antarctica/Vostok":360,"Arctic/Longyearbyen":60,"Asia/Aden":180,"Asia/Almaty":360,"Asia/Amman":120,"Asia/Anadyr":720,"Asia/Aqtau":300,"Asia/Aqtobe":300,"Asia/Ashgabat":300,"Asia/Ashkhabad":300,"Asia/Baghdad":180,"Asia/Bahrain":180,"Asia/Baku":240,"Asia/Bangkok":420,"Asia/Beirut":120,"Asia/Bishkek":360,"Asia/Brunei":480,"Asia/Calcutta":330,"Asia/Choibalsan":480,"Asia/Chongqing":480,"Asia/Chungking":480,"Asia/Colombo":330,"Asia/Dacca":360,"Asia/Damascus":120,"Asia/Dhaka":360,"Asia/Dili":540,"Asia/Dubai":240,"Asia/Dushanbe":300,"Asia/Gaza":120,"Asia/Harbin":480,"Asia/Ho_Chi_Minh":420,"Asia/Hong_Kong":480,"Asia/Hovd":420,"Asia/Irkutsk":480,"Asia/Istanbul":120,"Asia/Jakarta":420,"Asia/Jayapura":540,"Asia/Jerusalem":120,"Asia/Kabul":270,"Asia/Kamchatka":720,"Asia/Karachi":300,"Asia/Kashgar":480,"Asia/Kathmandu":345,"Asia/Katmandu":345,"Asia/Kolkata":330,"Asia/Krasnoyarsk":420,"Asia/Kuala_Lumpur":480,"Asia/Kuching":480,"Asia/Kuwait":180,"Asia/Macao":480,"Asia/Macau":480,"Asia/Magadan":660,"Asia/Makassar":480,"Asia/Manila":480,"Asia/Muscat":240,"Asia/Nicosia":120,"Asia/Novokuznetsk":360,"Asia/Novosibirsk":360,"Asia/Omsk":360,"Asia/Oral":300,"Asia/Phnom_Penh":420,"Asia/Pontianak":420,"Asia/Pyongyang":540,"Asia/Qatar":180,"Asia/Qyzylorda":360,"Asia/Rangoon":390,"Asia/Riyadh":180,"Asia/Riyadh87":187,"Asia/Riyadh88":187,"Asia/Riyadh89":187,"Asia/Saigon":420,"Asia/Sakhalin":600,"Asia/Samarkand":300,"Asia/Seoul":540,"Asia/Shanghai":480,"Asia/Singapore":480,"Asia/Taipei":480,"Asia/Tashkent":300,"Asia/Tbilisi":240,"Asia/Tehran":210,"Asia/Tel_Aviv":120,"Asia/Thimbu":360,"Asia/Thimphu":360,"Asia/Tokyo":540,"Asia/Ujung_Pandang":480,"Asia/Ulaanbaatar":480,"Asia/Ulan_Bator":480,"Asia/Urumqi":480,"Asia/Vientiane":420,"Asia/Vladivostok":600,"Asia/Yakutsk":540,"Asia/Yekaterinburg":300,"Asia/Yerevan":240,"Atlantic/Azores":-60,"Atlantic/Bermuda":-240,"Atlantic/Canary":0,"Atlantic/Cape_Verde":-60,"Atlantic/Faeroe":0,"Atlantic/Faroe":0,"Atlantic/Jan_Mayen":60,"Atlantic/Madeira":0,"Atlantic/Reykjavik":0,"Atlantic/South_Georgia":-120,"Atlantic/St_Helena":0,"Atlantic/Stanley":-240,"Australia/ACT":600,"Australia/Adelaide":570,"Australia/Brisbane":600,"Australia/Broken_Hill":570,"Australia/Canberra":600,"Australia/Currie":600,"Australia/Darwin":570,"Australia/Eucla":525,"Australia/Hobart":600,"Australia/LHI":630,"Australia/Lindeman":600,"Australia/Lord_Howe":630,"Australia/Melbourne":600,"Australia/NSW":600,"Australia/North":570,"Australia/Perth":480,"Australia/Queensland":600,"Australia/South":570,"Australia/Sydney":600,"Australia/Tasmania":600,"Australia/Victoria":600,"Australia/West":480,"Australia/Yancowinna":570,BET:-180,BST:360,"Brazil/Acre":-240,"Brazil/DeNoronha":-120,"Brazil/East":-180,"Brazil/West":-240,CAT:120,CET:60,CNT:-210,CST:-360,CST6CDT:-360,CTT:480,"Canada/Atlantic":-240,"Canada/Central":-360,"Canada/East-Saskatchewan":-360,"Canada/Eastern":-300,"Canada/Mountain":-420,"Canada/Newfoundland":-210,"Canada/Pacific":-480,"Canada/Saskatchewan":-360,"Canada/Yukon":-480,"Chile/Continental":-240,"Chile/EasterIsland":-360,Cuba:-300,EAT:180,ECT:60,EET:120,EST:-300,EST5EDT:-300,Egypt:120,Eire:0,"Etc/GMT":0,"Etc/GMT+0":0,"Etc/GMT+1":-60,"Etc/GMT+10":-600,"Etc/GMT+11":-660,"Etc/GMT+12":-720,"Etc/GMT+2":-120,"Etc/GMT+3":-180,"Etc/GMT+4":-240,"Etc/GMT+5":-300,"Etc/GMT+6":-360,"Etc/GMT+7":-420,"Etc/GMT+8":-480,"Etc/GMT+9":-540,"Etc/GMT-0":0,"Etc/GMT-1":60,"Etc/GMT-10":600,"Etc/GMT-11":660,"Etc/GMT-12":720,"Etc/GMT-13":780,"Etc/GMT-14":840,"Etc/GMT-2":120,"Etc/GMT-3":180,"Etc/GMT-4":240,"Etc/GMT-5":300,"Etc/GMT-6":360,"Etc/GMT-7":420,"Etc/GMT-8":480,"Etc/GMT-9":540,"Etc/GMT0":0,"Etc/Greenwich":0,"Etc/UCT":0,"Etc/UTC":0,"Etc/Universal":0,"Etc/Zulu":0,"Europe/Amsterdam":60,"Europe/Andorra":60,"Europe/Athens":120,"Europe/Belfast":0,"Europe/Belgrade":60,"Europe/Berlin":60,"Europe/Bratislava":60,"Europe/Brussels":60,"Europe/Bucharest":120,"Europe/Budapest":60,"Europe/Chisinau":120,"Europe/Copenhagen":60,"Europe/Dublin":0,"Europe/Gibraltar":60,"Europe/Guernsey":0,"Europe/Helsinki":120,"Europe/Isle_of_Man":0,"Europe/Istanbul":120,"Europe/Jersey":0,"Europe/Kaliningrad":120,"Europe/Kiev":120,"Europe/Lisbon":0,"Europe/Ljubljana":60,"Europe/London":0,"Europe/Luxembourg":60,"Europe/Madrid":60,"Europe/Malta":60,"Europe/Mariehamn":120,"Europe/Minsk":120,"Europe/Monaco":60,"Europe/Moscow":180,"Europe/Nicosia":120,"Europe/Oslo":60,"Europe/Paris":60,"Europe/Podgorica":60,"Europe/Prague":60,"Europe/Riga":120,"Europe/Rome":60,"Europe/Samara":240,"Europe/San_Marino":60,"Europe/Sarajevo":60,"Europe/Simferopol":120,"Europe/Skopje":60,"Europe/Sofia":120,"Europe/Stockholm":60,"Europe/Tallinn":120,"Europe/Tirane":60,"Europe/Tiraspol":120,"Europe/Uzhgorod":120,"Europe/Vaduz":60,"Europe/Vatican":60,"Europe/Vienna":60,"Europe/Vilnius":120,"Europe/Volgograd":180,"Europe/Warsaw":60,"Europe/Zagreb":60,"Europe/Zaporozhye":120,"Europe/Zurich":60,GB:0,"GB-Eire":0,GMT:0,GMT0:0,Greenwich:0,HST:-600,Hongkong:480,IET:-300,IST:330,Iceland:0,"Indian/Antananarivo":180,"Indian/Chagos":360,"Indian/Christmas":420,"Indian/Cocos":390,"Indian/Comoro":180,"Indian/Kerguelen":300,"Indian/Mahe":240,"Indian/Maldives":300,"Indian/Mauritius":240,"Indian/Mayotte":180,"Indian/Reunion":240,Iran:210,Israel:120,JST:540,Jamaica:-300,Japan:540,Kwajalein:720,Libya:120,MET:60,MIT:-660,MST:-420,MST7MDT:-420,"Mexico/BajaNorte":-480,"Mexico/BajaSur":-420,"Mexico/General":-360,"Mideast/Riyadh87":187,"Mideast/Riyadh88":187,"Mideast/Riyadh89":187,NET:240,NST:720,NZ:720,"NZ-CHAT":765,Navajo:-420,PLT:300,PNT:-420,PRC:480,PRT:-240,PST:-480,PST8PDT:-480,"Pacific/Apia":-660,"Pacific/Auckland":720,"Pacific/Chatham":765,"Pacific/Easter":-360,"Pacific/Efate":660,"Pacific/Enderbury":780,"Pacific/Fakaofo":-600,"Pacific/Fiji":720,"Pacific/Funafuti":720,"Pacific/Galapagos":-360,"Pacific/Gambier":-540,"Pacific/Guadalcanal":660,"Pacific/Guam":600,"Pacific/Honolulu":-600,"Pacific/Johnston":-600,"Pacific/Kiritimati":840,"Pacific/Kosrae":660,"Pacific/Kwajalein":720,"Pacific/Majuro":720,"Pacific/Marquesas":-570,"Pacific/Midway":-660,"Pacific/Nauru":720,"Pacific/Niue":-660,"Pacific/Norfolk":690,"Pacific/Noumea":660,"Pacific/Pago_Pago":-660,"Pacific/Palau":540,"Pacific/Pitcairn":-480,"Pacific/Ponape":660,"Pacific/Port_Moresby":600,"Pacific/Rarotonga":-600,"Pacific/Saipan":600,"Pacific/Samoa":-660,"Pacific/Tahiti":-600,"Pacific/Tarawa":720,"Pacific/Tongatapu":780,"Pacific/Truk":600,"Pacific/Wake":720,"Pacific/Wallis":720,"Pacific/Yap":600,Poland:60,Portugal:0,ROK:540,SST:660,Singapore:480,"SystemV/AST4":-240,"SystemV/AST4ADT":-240,"SystemV/CST6":-360,"SystemV/CST6CDT":-360,"SystemV/EST5":-300,"SystemV/EST5EDT":-300,"SystemV/HST10":-600,"SystemV/MST7":-420,"SystemV/MST7MDT":-420,"SystemV/PST8":-480,"SystemV/PST8PDT":-480,"SystemV/YST9":-540,"SystemV/YST9YDT":-540,Turkey:120,UCT:0,"US/Alaska":-540,"US/Aleutian":-600,"US/Arizona":-420,"US/Central":-360,"US/East-Indiana":-300,"US/Eastern":-300,"US/Hawaii":-600,"US/Indiana-Starke":-360,"US/Michigan":-300,"US/Mountain":-420,"US/Pacific":-480,"US/Pacific-New":-480,"US/Samoa":-660,UTC:0,Universal:0,VST:420,"W-SU":180,WET:0,Zulu:0},getOffset:function(e){return this.offsets[e]||0},getOffsetAsString:function(e){return this.formatOffset(this.getOffset(e))},formatOffset:function(e){var t=Math.abs(e/60),n=Math.abs(e%60),r="";return e>=0?r+="+":r+="-",t<10&&(r+="0"),r+=t,n<10&&(r+="0"),r+=n,r}}}),pen.define("common-ui/util/formatting",["common-ui/prompting/pentaho-prompting","common-ui/util/timeutil"],function(e,t){return{createDataTransportFormatter:function(e,t,n){var r=this._formatTypeMap[t.type];if(r=="number")return{format:function(e){return""+e},parse:function(e){return e}};if(r=="date")return this._createDateTransportFormatter(t)},createFormatter:function(e,t,n){if(!jsTextFormatter){console.log("Unable to find formatter module. No text formatting will be possible.");return}var r=n||t.attributes["data-format"];if(!t.list&&r)return jsTextFormatter.createFormatter(t.type,r)},_formatTypeMap:{number:"number","java.lang.Number":"number","java.lang.Byte":"number","java.lang.Short":"number","java.lang.Integer":"number","java.lang.Long":"number","java.lang.Float":"number","java.lang.Double":"number","java.math.BigDecimal":"number","java.math.BigInteger":"number",date:"date","java.util.Date":"date","java.sql.Date":"date","java.sql.Time":"date","java.sql.Timestamp":"date"},_initDateFormatters:function(){this.dateFormatters||(this.dateFormatters={"with-timezone":jsTextFormatter.createFormatter("date","yyyy-MM-dd'T'HH:mm:ss.SSSZ"),"without-timezone":jsTextFormatter.createFormatter("date","yyyy-MM-dd'T'HH:mm:ss.SSS"),utc:jsTextFormatter.createFormatter("date","yyyy-MM-dd'T'HH:mm:ss.SSS'+0000'"),simple:jsTextFormatter.createFormatter("date","yyyy-MM-dd")})},_createDataTransportFormatter:function(e,t){var n=this._formatTypeMap[e.type];if(n=="number")return{format:function(e){return t.format(e)},parse:function(e){return""+t.parse(e)}};if(n=="date"){var r=this._createDateTransportFormatter(e);return{format:function(e){return t.format(r.parse(e))},parse:function(e){return r.format(t.parse(e))}}}},_createDateTransportFormatter:function(e,n){var r=e.attributes.timezone;return this._initDateFormatters(),{format:function(e){if("client"===r)return this.dateFormatters["with-timezone"].format(e);if("server"===r||!r)return this.dateFormatters["without-timezone"].format(e);if("utc"===r)return this.dateFormatters.utc.format(e);var n=t.getOffsetAsString(r);return this.dateFormatters[n]||(this.dateFormatters[n]=jsTextFormatter.createFormatter("date","yyyy-MM-dd'T'HH:mm:ss.SSS'"+n+"'")),this.dateFormatters[n].format(e)}.bind(this),parse:function(e){if("client"===r)try{return this.dateFormatters["with-timezone"].parse(e)}catch(t){}try{return this.parseDateWithoutTimezoneInfo(e)}catch(t){}try{if(e.length==10)return this.dateFormatters.simple.parse(e)}catch(t){}try{return new Date(parseFloat(e))}catch(t){}return""}.bind(this)}},parseDateWithoutTimezoneInfo:function(e){return e.length===28&&(e=e.substring(0,23)),this.dateFormatters["without-timezone"].parse(e)},normalizeParameterValue:function(e,t,n){if(n==null||t==null)return null;var r=t.match("^\\[L([^;]+);$");r!=null&&r.length===2&&(t=r[1]);switch(t){case"java.util.Date":case"java.sql.Date":case"java.sql.Time":case"java.sql.Timestamp":var i=e.attributes.timezone;if(!i||i=="server")return e.timezoneHint==undefined&&n.length==28&&(e.timezoneHint=n.substring(23,28)),n;if(i=="client")return n;if(e.timezoneHint!=undefined&&$.trim(e.timezoneHint).length!=0&&n.match(e.timezoneHint+"$"))return n;return this.convertTimeStampToTimeZone(n,i)}return n},convertTimeStampToTimeZone:function(e,n){this._initDateFormatters();var r=t.getOffset(n),i=this.parseDateWithoutTimezoneInfo(e),s=this.dateFormatters["with-timezone"].parse(e),o=t.formatOffset(r),u=-(new Date(i)).getTimezoneOffset(),a=i.getTime()+r*6e4+(s.getTime()-i.getTime()-u*6e4),f=new Date(a);return this.dateFormatters["without-timezone"].format(f)+o}}}),pen.define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(e,t,n,r,i,s,o){return s.extend(e,{waiRole:"",waiState:""}),i("dijit._Templated",[t,n],{widgetsInTemplate:!1,constructor:function(){o.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(e,t){var n=this.inherited(arguments),i=t(e,"waiRole");i&&e.setAttribute("role",i);var s=t(e,"waiState");return s&&r.forEach(s.split(/\s*,\s*/),function(t){if(t.indexOf("-")!=-1){var n=t.split("-");e.setAttribute("aria-"+n[0],n[1])}}),n}})}),pen.define("pentaho/common/Messages",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/on","dojo/query","dojo/_base/lang","dojo/request","dojo/i18n","dojo/string"],function(e,t,n,r,i,s,o,u,a){var f=e("pentaho.common.Messages",[],{});f.init=function(){f.messageBundle===undefined&&(f.messageBundle={})},pentaho=typeof pentaho=="undefined"?{}:pentaho,pentaho.common=pentaho.common||{},pentaho.common.Messages=pentaho.common.Messages||f,f.addBundle=function(e,t){dojo.requireLocalization(e,t,"ROOT","ROOT"),f.messageBundle[e]=u.getLocalization(e,t)},f.getBundle=function(e){return f.messageBundle[e]},f.entityDecoder=document.createElement("textarea"),f.getString=function(e,t){var n,r,i=e;for(n in f.messageBundle)if(f.messageBundle.hasOwnProperty(n)){r=f.messageBundle[n];if(r.hasOwnProperty(e)){i=r[e];if(undefined!=t){var o={};if(typeof t=="string")o[0]=t;else if(typeof t=="array")for(var u=0;u<t.length;u++)o[""+u]=t[u];else s.isObject(t)&&(o=t);i=s.replace(i,o)}break}}return i};var l=0;return f.setElementText=function(e,t){var n;typeof e=="string"?n=document.getElementById(e):n=e,n&&(n.innerHTML=f.getString(t))},f.addUrlBundle=function(e,t,n){if(!n&&f.messageBundle.hasOwnProperty(e))return;var r=o(t,{handleAs:"json",sync:!0});r.then(function(t){f.messageBundle[e]=t},function(e){typeof console!="undefined"&&console.log("error loading message bundle at:"+t)})},f.init(),f.addUrlBundle("pentaho.common",CONTEXT_PATH+"i18n?plugin=common-ui&name=resources/web/dojo/pentaho/common/nls/messages"),f}),pen.define("reportviewer/reportviewer-prompt",["common-ui/util/util","common-ui/util/formatting","pentaho/common/Messages","dijit/registry"],function(util,ReportFormatUtil,Messages,registry){return function(){return logged({mode:"INITIAL",load:function(){pentaho.common.Messages.addUrlBundle("reportviewer",CONTEXT_PATH+"i18n?plugin=reporting&name=reportviewer/messages/messages")},createPromptPanel:function(){this.fetchParameterDefinition(null,this._createPromptPanelFetchCallback.bind(this),"INITIAL")},_createPromptPanelFetchCallback:function(e){var t=this.panel=new pentaho.common.prompting.PromptPanel("promptPanel",e);t.submit=this.submit.bind(this),t.submitStart=this.submitStart.bind(this),t.ready=this.ready.bind(this),t.getParameterDefinition=function(e,t){this.fetchParameterDefinition(e,t,"USERINPUT")}.bind(this),t.createDataTransportFormatter=ReportFormatUtil.createDataTransportFormatter.bind(ReportFormatUtil),t.createFormatter=ReportFormatUtil.createFormatter.bind(ReportFormatUtil),t.getString=pentaho.common.Messages.getString,this.initPromptPanel(),this._hideLoadingIndicator()},_hideLoadingIndicator:function(){try{window.top.hideLoadingIndicator?window.top.hideLoadingIndicator():window.parent.hideLoadingIndicator&&window.parent.hideLoadingIndicator()}catch(e){}},initPromptPanel:function(){this.panel.init()},showGlassPane:function(){registry.byId("glassPane").show()},hideGlassPane:function(){registry.byId("glassPane").hide()},ready:function(e){this.hideGlassPane()},submit:function(e,t){alert("submit fired for panel: "+e)},submitStart:function(e){alert("submit start fired for panel: "+e)},parameterParser:new pentaho.common.prompting.ParameterXmlParser,parseParameterDefinition:function(e){return this.parameterParser.normalizeParameterValue=ReportFormatUtil.normalizeParameterValue.bind(ReportFormatUtil),e=this.removeControlCharacters(e),this.parameterParser.parseParameterXml(e)},removeControlCharacters:function(inStr){for(var i=0;i<=31;i++){var safe=i;i<10&&(safe="0"+i),eval("inStr = inStr.replace(/&#"+safe+';/g, "")')}return inStr},checkSessionTimeout:function(e,t){return e.status==401||this.isSessionTimeoutResponse(e)?(this.handleSessionTimeout(t),!0):!1},isSessionTimeoutResponse:function(e){return String(e).indexOf("j_spring_security_check")!=-1?!0:!1},handleSessionTimeout:function(e){var t=function(){this.fetchParameterDefinition.apply(this,e)}.bind(this);this.reauthenticate(t)},reauthenticate:function(e){var t=null;try{var n=window.parent.mantle_initialized;t=!0}catch(r){t=!1}if(t&&top.mantle_initialized){var i={loginCallback:e};window.parent.authenticate(i)}else this.showMessageBox(pentaho.common.Messages.getString("SessionExpiredComment"),pentaho.common.Messages.getString("SessionExpired"),pentaho.common.Messages.getString("OK"),undefined,undefined,undefined,!0)},_fetchParamDefId:-1,fetchParameterDefinition:function(e,t,n){var r=this,i=++r._fetchParamDefId;r.showGlassPane(),n||(n="MANUAL");if(r.clicking){var s=n==="USERINPUT";r.ignoreNextClickSubmit=s,e&&(e.forceAutoSubmit=s),delete r.clicking}r.mode=n;var o=util.getUrlParameters();e&&$.extend(o,e.getParameterValues()),o.renderMode=this._getParameterDefinitionRenderMode(e,n),delete o["::session"];var u=arguments,a=logged("fetchParameterDefinition_success",function(s){if(r.checkSessionTimeout(s,u))return;if(i!==r._fetchParamDefId)return;try{var o=r.parseParameterDefinition(s);if(n==="INITIAL"&&o.allowAutoSubmit()){r.fetchParameterDefinition(null,t,"MANUAL");return}var a=e&&e.getAutoSubmitSetting();a!=null&&(o.autoSubmitUI=a),t.call(r,o)}catch(f){r.onFatalError(f)}}),f=function(e){r.checkSessionTimeout(e,u)||r.onFatalError(e)};$.ajax({async:!0,traditional:!0,cache:!1,type:"POST",url:r.getParameterUrl(),data:o,dataType:"text",success:a,error:f})},_getParameterDefinitionRenderMode:function(e,t){switch(t){case"INITIAL":return"PARAMETER";case"USERINPUT":if(!e||!e.getAutoSubmitSetting())return"PARAMETER"}return"XML"},getParameterUrl:function(){return"parameter"},showMessageBox:function(e,t,n,r,i,s,o){var u=registry.byId("messageBox");u.setTitle(t),u.setMessage(e);if(o)u.setButtons([]);else{var a=function(){Dashboards.hideProgressIndicator(),u.hide.call(u)};n||(n=pentaho.common.Messages.getString("OK")),r||(r=a),u.onCancel=a,i?(u.callbacks=[r,s],u.setButtons([n,i])):(u.callbacks=[r],u.setButtons([n]))}Dashboards.showProgressIndicator(),u.show()},onFatalError:function(e){var t=pentaho.common.Messages.getString("ErrorParsingParamXmlMessage");typeof console!="undefined"&&console.log&&console.log(t+": "+e),this.showMessageBox(t,pentaho.common.Messages.getString("FatalErrorTitle"))}})}}),pen.define("dojo/text!pentaho/common/button.html",[],function(){return'<button type="button" data-dojo-attach-point="button" tabindex="0" class="pentaho-button" id="${id}">\n	${label}\n</button>'}),pen.define("pentaho/common/button",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/_base/lang","dojo/text!pentaho/common/button.html","dojo/on"],function(e,t,n,r,i,s){return e("pentaho.common.button",[t,n],{label:"a button",onClick:function(){this.callback()},callback:null,templateString:i,postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments),s(this.button,"click",r.hitch(this,this.onClick))}})}),pen.define("pentaho/common/Dialog",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/on","dojo/dom","dojo/query","dojo/dom-construct","dojo/dom-style","dijit/Dialog","pentaho/common/button","pentaho/common/SmallImageButton","pentaho/common/Messages","dojo/dom-class","dojo/_base/lang","dojo/_base/event","dojo/keys"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){return e("pentaho.common.Dialog",[t,n,r],{popup:null,title:"",getLocaleString:pentaho.common.Messages.getString,callbacks:[],shown:!1,buttonsCreated:!1,buttonPanel:null,hasTitleBar:!0,hasBorder:!0,hasCloseIcon:!1,closeIcon:undefined,_onCancelCallback:undefined,setLocalizationLookupFunction:function(e){this.getLocaleString=e,this._localize()},buttonClick:function(e){this.callbacks[e]&&this.callbacks[e]()},buttons:[],_localize:function(){if(this.getLocaleString){for(var e=0;e<this.buttons.length;e++){var t=o("button"+e,this.popup.domNode);this.buttons[e]=this.getLocaleString(this.buttons[e]),t&&(t.innerHTML=this.getLocaleString())}this.hasCloseIcon&&this.closeIcon.domNode.setAttribute("title",this.getLocaleString("CloseIcon_title"))}},templateString:"<div></div>",postMixInProperties:function(){this.inherited(arguments)},_createButtonPanel:function(){this.buttonPanel=u.create("TABLE"),a.set(this.buttonPanel,"width","100%"),u.place(this.buttonPanel,this.popup.domNode),p.add(this.buttonPanel,"button-panel")},_createButtons:function(){this.buttonPanel.rows.length>0&&this.buttonPanel.deleteRow(-1);var e=this.buttonPanel.insertRow(-1),t=e.insertCell(-1);a.set(t,"align","right"),a.set(t,"width","100%");for(var n=0;n<this.buttons.length;n++){t=e.insertCell(-1),a.set(t,"align","right");var r=document.createElement("BUTTON");p.add(r,"pentaho-button"),r.setAttribute("id","button"+n),r.innerHTML=this.buttons[n],t.appendChild(r),r.onclick=d.hitch(this,this.buttonClick,n)}},setButtonEnabled:function(e,t){var n=s.byId("button"+e);typeof n!="undefined"&&n!=null&&(typeof n.set!="undefined"?n.set("disabled",!t):n.disabled=!t)},postCreate:function(){(this.templatePath||this.templateString!="<div></div>")&&this.popup.attr("content",this.domNode),this.inherited(arguments),this.hasTitleBar||p.add(o(".dijitDialogTitleBar",this.popup.domNode)[0],"hidden"),this.hasBorder&&p.add(this.popup.domNode,"pentaho-dialog"),this.hasCloseIcon&&(this.closeIcon=new pentaho.common.SmallImageButton({baseClass:"pentaho-closebutton"}),p.add(this.closeIcon.domNode,"pentahoDialogCloseIcon"),u.place(this.closeIcon.domNode,o(".dijitDialogTitleBar",this.popup.domNode)[0]),this.closeIcon.callback=d.hitch(this,this.onCancel)),p.add(o(".dijitDialogTitleBar",this.popup.domNode)[0],"Caption"),i(this.domNode,"keyPress",d.hitch(this,this.keyUp)),i(this.popup.domNode,"keyPress",d.hitch(this,this.keyUp)),this.onKeyUp=d.hitch(this,this.keyup),i(this.domNode,"keyUp",d.hitch(this,this.keyup)),i(this.popup,"keyUp",d.hitch(this,this.keyup)),i(this.popup.domNode,"keyUp",d.hitch(this,this.keyup)),this.popup.onCancel=d.hitch(this,function(){}),this.popup.onExecute=d.hitch(this,this.okClick),this._localize(),i(this.popup,"Hide",d.hitch(d.hitch(this,"onHide")))},keyup:function(e){v.stop(e),e.keyCode==m.ENTER&&this.execute&&this.execute(),e.keyCode==m.ESCAPE&&this.onCancel&&this.onCancel()},setTitle:function(e){this.title=e,this.popup.set("title",this.title)},show:function(){this.domNode.style.display="",this.popup.set("title",this.title),a.set(this.popup.domNode,"display","none"),this.templateBased?this.shown||(this.width=""+a.get(this.domNode,"width")+"px",a.get(this.domNode,"display")==="block"&&(this.width=a.get(this.domNode,"width")+a.get(this.domNode,"paddingLeft")+a.get(this.domNode,"paddingRight")+a.get(this.domNode,"borderLeftWidth")+a.get(this.domNode,"borderRightWidth")+"px"),a.set(this.popup.domNode,"width",this.width),a.set(o(".dijitDialogPaneContent",this.popup.domNode),"width",this.width),a.set(o(".dijitDialogPaneContent",this.domNode),"width",this.width)):this.shown||(a.set(this.domNode,"width",this.width),a.set(this.popup.domNode,"width",this.width),a.set(o(".dijitDialogPaneContent",this.popup.domNode),"width",this.width),a.set(o(".dijitDialogPaneContent",this.domNode),"width",this.width),a.set(this.domNode,"height",this.height),a.set(this.popup.domNode,"height",this.height),a.set(o(".dijitDialogPaneContent",this.popup.domNode),"height",this.height),a.set(o(".dijitDialogPaneContent",this.domNode),"height",this.height)),this.shown||this._createButtonPanel(),this._createButtons(),this.popup.show(),this.shown=!0},hide:function(){return this.popup.hide()},destroy:function(){this.popup.destroy()},destroyRecursive:function(){this.popup.destroyRecursive(),u.empty(this.domNode)},buildRendering:function(){this.templatePath&&(this.templateString=null),this.inherited(arguments),this.templateString=="<div></div>"&&this.popup.buildRendering()},_attachTemplateNodes:function(e,t){this.inherited(arguments)},_fillContent:function(e){!this.templatePath&&this.templateString=="<div></div>"?(this.templateBased=!1,this.width=""+a.get(e,"width")+"px",this.height=""+a.get(e,"height")+"px",p.contains(e,"hidden")&&p.remove(e,"hidden"),this._attachTemplateNodes(e),this.source=e,this.popup=new f({title:this.title,content:this.source.innerHTML}),p.add(this.popup.domNode,"pentaho-dialog"),p.remove(this.popup.domNode,"hidden"),p.add(o(".dijitDialogTitleBar",this.popup.domNode)[0],"Caption")):(this.templateBased=!0,this.popup=new f),this.inherited(arguments)},registerOnCancelCallback:function(e){this._onCancelCallback=e},onCancel:function(){if(this._onCancelCallback)try{this._onCancelCallback()}catch(e){console.warn("error in onCancelCallback: "+e)}this.hide()},onHide:function(){}})}),pen.define("pentaho/reportviewer/ReportDialog",["dojo/_base/declare","dojo/on","dojo/query","dojo/_base/lang","dijit/_WidgetBase","dijit/_TemplatedMixin","pentaho/common/button","pentaho/common/Dialog","dojo/dom-style","dojo/dom-attr"],function(e,t,n,r,i,s,o,u,a,f){return e("pentaho.reportviewer.ReportDialog",[pentaho.common.Dialog],{hasCloseIcon:!1,width:"800px",height:"600px",buttons:["OK"],templateString:'<div style="padding: 5px 10px 10px 10px;" class="dialog-content"><iframe data-dojo-attach-point="iframe" width="100%" height="100%"></iframe></div>',cleanseSizeAttr:function(e,t){return e===undefined?t:(/.*px$/.exec(e)||(e+="px"),e)},open:function(e,t,n,r){this.setTitle(e),a.set(this.domNode,"width",this.cleanseSizeAttr(n,this.width)),a.set(this.domNode,"height",this.cleanseSizeAttr(r,this.height)),f.set(this.iframe,"src",t),this.show()},postCreate:function(){this.inherited(arguments),this.callbacks=[r.hitch(this,this.onCancel)]}})}),pen.define("reportviewer/reportviewer",["common-ui/util/util","reportviewer/reportviewer-prompt","common-ui/util/timeutil","common-ui/util/formatting","pentaho/common/Messages","dojo/dom","dojo/on","dojo/_base/lang","dijit/registry","dojo/has","dojo/sniff","dojo/dom-class","pentaho/reportviewer/ReportDialog","dojo/dom-style","dojo/query","dojo/dom-geometry","dojo/parser","dojo/window","dojo/_base/window"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){return function(t){if(!t){alert("report prompt is required");return}var n=logged({prompt:t,load:function(){function e(e){e.setAttribute("style","-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"),typeof e.onselectstart!="undefined"&&(e.setAttribute("unselectable","on"),e.onselectstart=function(){return!1})}m.parse(),pentaho.common.Messages.addUrlBundle("reportviewer",CONTEXT_PATH+"i18n?plugin=reporting&name=reportviewer/messages/messages"),this.view.localize(),this.createRequiredHooks(),this.view.updatePageBackground(),e(s.byId("reportArea")),e(s.byId("reportPageOutline")),e(s.byId("reportContent")),o(a.byId("toolbar-parameterToggle"),"click",u.hitch(this,function(){this.view.togglePromptPanel()}));var t=this._onReportContentLoaded.bind(this),n=logged("onFrameLoaded",function(){setTimeout(t)});f("ie")?o(s.byId("reportContent"),"readystatechange",function(){this.readyState==="complete"&&n()}):o(s.byId("reportContent"),"load",u.hitch(n));var r=this.prompt.ready.bind(this.prompt),i=this.prompt.showGlassPane.bind(this.prompt),l=this.prompt.hideGlassPane.bind(this.prompt);this.prompt.ready=this.view.promptReady.bind(this.view,r),this.prompt.showGlassPane=this.view.showGlassPane.bind(this.view,i),this.prompt.hideGlassPane=this.view.hideGlassPane.bind(this.view,l),this.prompt.submit=this.submitReport.bind(this),this.prompt.submitStart=this.submitReportStart.bind(this),$("body").addClass(_isTopReportViewer?"topViewer leafViewer":"leafViewer").addClass(inMobile?"mobile":"nonMobile"),logger&&$("body").addClass("debug");var c=this.prompt.initPromptPanel.bind(this.prompt);this.prompt.initPromptPanel=logged("prompt.initPromptPanel",function(){var e=this.prompt.panel,t=e.init;e.init=function(e){this.view.initPrompt(t,this.prompt.panel,e)}.bind(this),c()}.bind(this)),this.prompt.createPromptPanel()},view:logged({localize:function(){$("#toolbar-parameterToggle").attr("title",pentaho.common.Messages.getString("parameterToolbarItem_title")),a.byId("pageControl").registerLocalizationLookup(pentaho.common.Messages.getString)},updatePageBackground:function(){var e;try{e=window.top.mantle_initialized}catch(t){e=!1}var n=top!==self;!inSchedulerDialog&&!inMobile&&(!e||n)&&c.add(document.body,"pentaho-page-background")},_showReportContent:function(e,t){var n=this._hasReportContent();n||(e=!1),this._isReportContentVisible()!==!!e&&(!e&&!t&&n&&(logger&&logger.log("Will clear content iframe.src"),$("#reportContent").attr("src","about:blank"),this._updatedIFrameSrc=!0),$("body")[e?"removeClass":"addClass"]("contentHidden"))},_calcReportContentVisibility:function(e){var t=this._hasReportContent()&&!e.paramDefn.promptNeeded&&!inSchedulerDialog&&(this._isAutoSubmitAllowed(e)||prompt.mode==="MANUAL");return t},_isAutoSubmitAllowed:function(e){if(e.forceAutoSubmit||e.paramDefn.allowAutoSubmit())return!0;var t=document.getElementsByTagName("IFRAME");if(t.length>0){var n=t[0].src;return n!=null&&n.indexOf("dashboard-mode")!==-1}return!1},_hasReportContent:function(){var e=s.byId("reportContent"),t=e.src;return t!==""&&t!=="about:blank"},_isReportContentVisible:function(){return!$("body").hasClass("contentHidden")},initPrompt:function(e,t,n){t.paramDefn.showParameterUI()||this._hideToolbarPromptControls(),this._calcReportContentVisibility(t)||this._showReportContent(!1),this._layoutInited=!1,e.call(t,n),this._initLayout(t),$.widget("ui.autocomplete",$.ui.autocomplete,{_renderItem:function(e,t){return $("<li></li>").data("item.autocomplete",t).append($("<a></a>").html(t.label)).appendTo(e)}})},_hideToolbarPromptControls:function(){inMobile||c.add("toolbar-parameter-separator","hidden");var e="toolbar-parameterToggle",t=s.byId(e);while(t){if(t.getAttribute("widgetid")===e){c.add(t,"hidden");break}t=t.parentNode}},showGlassPane:function(e){$("#glasspane").css("background",n.reportContentUpdating()?"":"transparent"),e()},hideGlassPane:function(e){n.reportContentUpdating()||e(),$("#glasspane").css("background","")},promptReady:function(e,t){e(t);if(inSchedulerDialog){this.showPromptPanel(!0),a.byId("glassPane").hide(),c.add("reportContent","hidden");var n=d(".submit-panel");typeof n!="undefined"&&n.length>0&&c.add(n[0],"hidden"),c.add("toolbarlinner2","hidden"),c.remove("promptPanel","pentaho-rounded-panel-bottom-lr"),c.remove("reportControlPanel","pentaho-shadow"),c.remove("reportControlPanel","pentaho-rounded-panel-bottom-lr");if(typeof window.parameterValidityCallback!="undefined"){var r=!t.paramDefn.promptNeeded;window.parameterValidityCallback(r)}}},_initLayout:function(e){if(this._layoutInited)return;var t=!!this._initedOnce;this._initedOnce=!0;var n=e.paramDefn.showParameterUI();this.updatePageControl(e);var r=!e.paramDefn.paginate&&!n;c[r?"add":"remove"]("toppanel","hidden");var i;n?t||(i=!inMobile&&_isTopReportViewer||e.paramDefn.promptNeeded||!e.paramDefn.allowAutoSubmit()):i=!1,i!=null&&this.showPromptPanel(i),this._layoutInited=!0},show:function(){this.resize()},updatePageControl:function(e){var t=a.byId("pageControl");t.registerPageNumberChangeCallback(undefined);if(!e.paramDefn.paginate)e.setParameterValue(e.paramDefn.getParameter("accepted-page"),"-1"),t.setPageCount(1),t.setPageNumber(1);else{var n=e.paramDefn.totalPages,r=e.paramDefn.page;r=Math.max(0,Math.min(r,n-1)),e.setParameterValue(e.paramDefn.getParameter("accepted-page"),""+r),t.setPageCount(n),t.setPageNumber(r+1)}t.registerPageNumberChangeCallback(function(t){this.pageChanged(e,t)}.bind(this))},pageChanged:function(e,t){e.setParameterValue(e.paramDefn.getParameter("accepted-page"),""+(t-1)),e.submit(e,{isPageChange:!0})},togglePromptPanel:function(){this.showPromptPanel(a.byId("toolbar-parameterToggle").checked),this.resize()},showPromptPanel:function(e){a.byId("toolbar-parameterToggle").set("checked",!!e),c[e?"remove":"add"]("reportControlPanel","hidden")},isPageStyled:function(){return $("body").hasClass("styled")},setPageStyled:function(e){e=!!e;if(!this._pageStyledOnce||this.isPageStyled()!==e){this._pageStyledOnce=!0;var t=e?"addClass":"removeClass";$("body")[t]("styled")[e?"removeClass":"addClass"]("nonStyled"),e||($("#reportArea").css({height:""}),$("#reportContent").css({height:"",width:""})),$("#reportPageOutline")[t]("pentaho-rounded-panel2-shadowed pentaho-padding-lg pentaho-background")}},onViewportResize:function(){this.resizeContentArea()},resizeContentArea:function(e){var t=g.getBox(),n=v.getMarginBox("toppanel"),r={h:t.h-n.h-2};logger&&logger.log("viewport=("+t.w+","+t.h+") "+" toppanel=("+n.w+","+n.h+") "),v.setMarginBox("reportArea",r),inMobile&&this._isHtmlReport&&this._resizeMobileHtmlReportHandlesScrolling(r)},_resizeMobileHtmlReportHandlesScrolling:function(e){var t=$("#reportContent"),n=t.contents(),r=n.find('head>meta[name="generator"]').attr("content")||"",i=r.indexOf("Reporting")>=0;if(i){t.attr("scrolling","no");var s=e.h-15,o=n.find("#reportTableDiv");o.length?o.css({height:s,width:window.innerWidth-10+"px",overflow:"auto"}):(n.find("body").css({margin:"2px"}),n.find("body>table").wrap('<div id="reportTableDiv" style="height:'+s+"px; width:"+(window.innerWidth-10)+'px; overflow:auto;"/>'))}},resize:function(){if(!this._hasReportContent())return;var e=this._isReportContentVisible();e&&this._showReportContent(!1,!0),this.isPageStyled()&&this._pollReportContentSize(),this.resizeContentArea(),e&&this._showReportContent(!0)},_pollReportContentSize:function(){var e=10,t=s.byId("reportContent");v.setContentSize(t,{w:e,h:e});var n=document;y.withDoc(t.contentWindow.document,function(){p.set(y.doc.getElementsByTagName("html")[0],{overflow:"hidden"});var r=v.getMarginBox(y.doc.getElementsByTagName("body")[0]);r.w=$("#reportContent").contents().width(),logger&&logger.log("Styled page - polled dimensions = ("+r.w+", "+r.h+")");if(r.w<=e){var i;y.withDoc(n,function(){i=g.getBox()}),r.w=Math.round(2*i.w/3),logger&&logger.log("Width is too small - assuming a default width of "+r.w)}v.setContentSize(t,{w:r.w,h:r.h})})}}),createRequiredHooks:function(e){var t=null;try{var n=window.top.mantle_initialized;t=!0}catch(r){t=!1}t&&(top.mantle_initialized||(top.mantle_openTab=function(e,t,n){window.open(n,"_blank")}),top.mantle_initialized?top.reportViewer_openUrlInDialog=function(e,t,n,r){top.urlCommand(t,e,!0,n,r)}:top.reportViewer_openUrlInDialog=this.openUrlInDialog.bind(this),window.reportViewer_openUrlInDialog=top.reportViewer_openUrlInDialog),window.reportViewer_hide=this.hide.bind(this);var i=this;t&&typeof window.top.addGlassPaneListener!="undefined"&&window.top.addGlassPaneListener({glassPaneHidden:function(){i.view.show()}})},openUrlInDialog:function(e,t,n,r){this.dialog===undefined&&(this.dialog=new pentaho.reportviewer.ReportDialog,this.dialog.setLocalizationLookupFunction(pentaho.common.Messages.getString)),this.dialog.open(e,t,n,r)},hide:function(){$("#toppanel").empty(),this.view.resize()},submitReportStart:function(){this.prompt.clicking=!0},submitReport:function(e,t){var n=t&&t.isInit;if(!n){if(this.prompt.ignoreNextClickSubmit){delete this.prompt.ignoreNextClickSubmit,logger&&logger.log("Ignored submit click");return}this.prompt.mode="MANUAL"}try{if(inSchedulerDialog){this._submitReportEnded(e);return}this.view._initLayout(e);var r=!e.paramDefn.promptNeeded;if(!r){logger&&logger.log("Prompt is needed. Will clear htmlObject.src"),$("#"+this.htmlObject).attr("src","about:blank"),this._submitReportEnded(e);return}this._updateReportContent(e,t)}catch(i){throw this._submitReportEnded(e),i}},_updatedIFrameSrc:!1,_updateReportTimeout:-1,reportContentUpdating:function(){return this._updateReportTimeout>=0},_updateReportContent:function(e,t){var n=this;if(!e.getAutoSubmitSetting()){var r=logged("_updateReportContent_fetchParameterCallback",function(r){delete e.forceAutoSubmit,e.refresh(r,!0),n._updateReportContentCore(e,t)});n.prompt.fetchParameterDefinition(e,r,"MANUAL")}else n._updateReportContentCore(e,t)},_updateReportContentCore:function(e,t){var n=this;n._updateReportTimeout=setTimeout(logged("updateReportTimeout",function(){n._submitReportEnded(e,!0)}),5e3),n.prompt.showGlassPane();var r=n._buildReportContentOptions(e),i=n._buildReportContentUrl(r),s=r["output-target"],o=s.indexOf("html")!=-1,u=o&&r["htmlProportionalWidth"]=="true",a=c.contains("toppanel","hidden"),f=_isTopReportViewer&&!a&&o&&!u&&!inMobile;n.view.isPageStyled()!==f&&(logger&&logger.log("Page style will change to "+(f?"":"non-")+"styled. Will hide report before iframe update."),n.view._showReportContent(!1,!0)),logger&&logger.log("Will set iframe url to "+i.substr(0,50)+"... "),$("#reportContent").attr("src",i),this._updatedIFrameSrc=!0,n._submitLoadCallback=logged("_submitLoadCallback",function(){n._isHtmlReport=n.view._isHtmlReport=o,n._outputFormat=s;var t=n.view._calcReportContentVisibility(e);t&&(n.view.setPageStyled(f&&!this._isParentViewer),n.view.resize()),n.view._showReportContent(t),n._submitReportEnded(e)})},_submitReportEnded:function(e,t){delete this.prompt.clicking,e&&delete e.forceAutoSubmit,delete this.prompt.ignoreNextClickSubmit,this._updateReportTimeout>=0&&(clearTimeout(this._updateReportTimeout),this._updateReportTimeout=-1,t&&this.view._showReportContent(!1,!0),this.prompt.hideGlassPane())},_onReportContentLoaded:function(){var e=this._isParentViewer;this._detectLoadedContent();var t=this.view;if(!this._updatedIFrameSrc)t._hasReportContent()?this._isParentViewer&&!e?(t.setPageStyled(!1),t.resize()):logger&&logger.log("Unrequested IFrame load."):logger&&logger.log("Empty IFrame loaded.");else{this._updatedIFrameSrc=!1;var n=this._submitLoadCallback;n&&t._hasReportContent()?(delete this._submitLoadCallback,n.call(this)):t.resize()}},_detectLoadedContent:function(){var e=!1;try{var t=s.byId("reportContent").contentWindow;t&&(t._isReportViewer?e=!0:$(t.document).find("body area").each(function(){this.href=this.href.replace("http://localhost:8080","")}))}catch(n){logger&&logger.log("ERROR"+String(n))}this._isParentViewer=e,$("body")[e?"addClass":"removeClass"]("parentViewer")[e?"removeClass":"addClass"]("leafViewer")},_buildReportContentOptions:function(t){var n=e.getUrlParameters();return $.extend(n,t.getParameterValues()),n.renderMode="REPORT",n.name===undefined&&(n.name=n.action),delete n["::session"],n},_buildReportContentUrl:function(e){var t=window.location.href.split("?")[0];t=t.substring(0,t.lastIndexOf("/"))+"/report?";var n=[],r=function(e,t){typeof t!="undefined"&&n.push(e+"="+encodeURIComponent(t))};return $.each(e,function(e,t){if(t==null)return;var n=encodeURIComponent(e);$.isArray(t)?$.each(t,function(e,t){r(n,t)}):r(n,t)}),t+n.join("&")}});return t.load=n.load.bind(n),n}}),pen.define("reportviewer/reportviewer-logging",[],function(){var e="&nbsp;&nbsp;&nbsp;&nbsp;",t=function(e){return e==null?"":String(e)},n=function(e){return t(e).replace("&","&amp;").replace("<","&lt;")},r=function(e,t,r){if(t.__logwrapper__)return t;var i=function(){r.group(e);var i=r.count(),s,o;try{return s=t.apply(this,arguments)}catch(u){throw o=u,r.raw("$*? "+n(u),null,i),u}finally{!o&&s!==undefined&&r.raw("&rarr; "+n(s),null,i),r.groupEnd(e)}};return i.__logwrapper__=!0,i},i=function(r,i){i||(i={}),r||(r="unnamed");var s=i.parent;if(s)return{id:r,raw:function(e,t,n){s.raw(e,t||r,n)},log:function(e,t,n){s.log(e,t||r,n)},group:function(e,t,n){s.group(e,t||r,n)},groupEnd:function(){s.groupEnd()},count:function(){return s.count()}};var o=!!i.enabled;if(!o)return null;var u=window.open("",i.winname||"report_viewer_log");if(!u)return null;var a=u.document;a.open(),a.write('<h1>LOG</h1><table id="logTable"><tbody /></table>'),a.close();var f=$(a).find("#logTable > tbody"),l=[],c=1,h={},p=["green","blue","red"],d=0,v=function(e){return h[e]||(h[e]=p[d++%p.length])},m=function(e,n,i){n==null&&(n=r);var s=i!=null&&i===c;c++;try{s?$("<span>&nbsp;"+t(e)+"</span>",a).appendTo(f.children().last().children().last()):$('<tr><td style="color:'+v(n)+';">'+n+"</td>"+"<td>"+l.join("")+t(e)+"</td>"+"</tr>",a).appendTo(f)}catch(o){alert("["+n+"] log - "+o)}};return{raw:function(e,t,n){m(e,t,n)},log:function(e,t,r){m("&bull; "+n(e),t,r)},group:function(t,r,i){m("&rsaquo; "+n(t),r,i),l.push(e)},groupEnd:function(){c++,l.pop()},count:function(){return c}}},s=function(e){var t;return e?t=function(t,n){switch(typeof t){case"string":return r(t,n,e);case"function":return r("anonymous",t,e)}for(var i in t){var n=t[i];typeof n=="function"&&(t[i]=r(i,n,e))}return t}:t=function(e,t){return typeof e=="string"?t:e},t.logger=e,t};return{create:function(e,t){var n=i(e,t);return s(n)}}}),pen.define("dojo/text!pentaho/common/MessageBox.html",[],function(){return'<div class="dialog-content pentaho-padding-sm" style="width:100%; overflow: auto">\n	<table width="100%">\n    <tbody>\n      <tr>\n        <td>\n          <div data-dojo-attach-point="typeIcon"></div>\n        </td>\n        <td width="100%" valign="middle">\n          <div data-dojo-attach-point="messagelbl" class="label pentaho-padding-lg"></div>\n        </td>\n      </tr>\n    </tbody>\n	</table>\n</div>'}),pen.define("pentaho/common/MessageBox",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/on","dojo/query","pentaho/common/button","pentaho/common/Dialog","dojo/dom-class","dojo/text!pentaho/common/MessageBox.html"],function(e,t,n,r,i,s,o,u,a){return e("pentaho.common.MessageBox",[o],{buttons:["btn1","btn2","btn3"],messageType:null,setTitle:function(e){this.set("title",e)},postCreate:function(){this.inherited(arguments),this.setMessageType(this.messageType)},setMessageType:function(e){this.messageType=e,e!=null?e=="ERR"||e=="ERROR"?u.replace(this.typeIcon,"error-large-icon","warning-large-icon info-large-icon"):e=="WARN"||e=="WARNING"?u.replace(this.typeIcon,"warning-large-icon","error-large-icon info-large-icon"):u.replace(this.typeIcon,"info-large-icon","error-large-icon warning-large-icon"):u.remove(this.typeIcon,"error-large-icon info-large-icon warning-large-icon")},setMessage:function(e){this.messagelbl.innerHTML=e},setButtons:function(e){this.buttons=e;for(var t=0;t<3;t++){var n=i("button"+t,this.popup.domNode);n&&(t<this.buttons.length?(n.innerHTML=this.buttons[t],u.remove(n,"hidden")):u.add(n,"hidden"))}},templateString:a})}),pen.define("dojo/text!dijit/templates/Menu.html",[],function(){return'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n	   cellspacing="0">\n	<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n'}),pen.define("dijit/_KeyNavMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(e,t,n,r,i,s,o,u){return t("dijit._KeyNavMixin",u,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments),n.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var e=this._keyNavCodes={};e[r.HOME]=i.hitch(this,"focusFirstChild"),e[r.END]=i.hitch(this,"focusLastChild"),e[this.isLeftToRight()?r.LEFT_ARROW:r.RIGHT_ARROW]=i.hitch(this,"_onLeftArrow"),e[this.isLeftToRight()?r.RIGHT_ARROW:r.LEFT_ARROW]=i.hitch(this,"_onRightArrow"),e[r.UP_ARROW]=i.hitch(this,"_onUpArrow"),e[r.DOWN_ARROW]=i.hitch(this,"_onDownArrow")}var t=this,u=typeof this.childSelector=="string"?this.childSelector:i.hitch(this,"childSelector");this.own(s(this.domNode,"keypress",i.hitch(this,"_onContainerKeypress")),s(this.domNode,"keydown",i.hitch(this,"_onContainerKeydown")),s(this.domNode,"focus",i.hitch(this,"_onContainerFocus")),s(this.containerNode,s.selector(u,"focusin"),function(e){t._onChildFocus(o.getEnclosingWidget(this),e)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(e,t){if(!e)return;this.focusedChild&&e!==this.focusedChild&&this._onChildBlur(this.focusedChild),e.set("tabIndex",this.tabIndex),e.focus(t?"end":"start")},_onContainerFocus:function(e){if(e.target!==this.domNode||this.focusedChild)return;this.focus()},_onFocus:function(){n.set(this.domNode,"tabIndex","-1"),this.inherited(arguments)},_onBlur:function(e){n.set(this.domNode,"tabIndex",this.tabIndex),this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null)),this.inherited(arguments)},_onChildFocus:function(e){e&&e!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),e.set("tabIndex",this.tabIndex),this.lastFocused=e,this._set("focusedChild",e))},_searchString:"",multiCharSearchDuration:1e3,onKeyboardSearch:function(e,t,n,r){e&&this.focusChild(e)},_keyboardSearchCompare:function(e,t){var n=e.domNode,r=e.label||(n.focusNode?n.focusNode.label:"")||n.innerText||n.textContent||"",i=r.replace(/^\s+/,"").substr(0,t.length).toLowerCase();return!t.length||i!=t?0:-1},_onContainerKeydown:function(e){var t=this._keyNavCodes[e.keyCode];t?(t(e,this.focusedChild),e.stopPropagation(),e.preventDefault(),this._searchString=""):e.keyCode==r.SPACE&&this._searchTimer&&!(e.ctrlKey||e.altKey||e.metaKey)&&(e.stopImmediatePropagation(),e.preventDefault(),this._keyboardSearch(e," "))},_onContainerKeypress:function(e){if(e.charCode<r.SPACE||e.ctrlKey||e.altKey||e.metaKey||e.charCode==r.SPACE&&this._searchTimer)return;e.preventDefault(),e.stopPropagation(),this._keyboardSearch(e,String.fromCharCode(e.charCode).toLowerCase())},_keyboardSearch:function(e,t){var n=null,r,s=0,o=i.hitch(this,function(){this._searchTimer&&this._searchTimer.remove(),this._searchString+=t;var e=/^(.)\1*$/.test(this._searchString),i=e?1:this._searchString.length;r=this._searchString.substr(0,i),this._searchTimer=this.defer(function(){this._searchTimer=null,this._searchString=""},this.multiCharSearchDuration);var o=this.focusedChild||null;if(i==1||!o){o=this._getNextFocusableChild(o,1);if(!o)return}var u=o;do{var a=this._keyboardSearchCompare(o,r);!!a&&s++==0&&(n=o);if(a==-1){s=-1;break}o=this._getNextFocusableChild(o,1)}while(o!=u)});o(),this.onKeyboardSearch(n,e,r,s)},_onChildBlur:function(){},_getNextFocusableChild:function(e,t){var n=e;do{if(!e){e=this[t>0?"_getFirst":"_getLast"]();if(!e)break}else e=this._getNext(e,t);if(e!=null&&e!=n&&e.isFocusable())return e}while(e!=n);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(e,t){if(e){e=e.domNode;while(e){e=e[t<0?"previousSibling":"nextSibling"];if(e&&"getAttribute"in e){var n=o.byNode(e);if(n)return n}}}return null}})}),pen.define("dijit/_KeyNavContainer",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(e,t,n,r,i,s,o,u,a,f){return t("dijit._KeyNavContainer",[a,f,u],{connectKeyNavHandlers:function(t,n){var r=this._keyNavCodes={},o=s.hitch(this,"focusPrev"),u=s.hitch(this,"focusNext");e.forEach(t,function(e){r[e]=o}),e.forEach(n,function(e){r[e]=u}),r[i.HOME]=s.hitch(this,"focusFirstChild"),r[i.END]=s.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){r.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments),e.forEach(this.getChildren(),s.hitch(this,"_startupChild"))},addChild:function(e,t){this.inherited(arguments),this._startupChild(e)},_startupChild:function(e){e.set("tabIndex","-1")},_getFirst:function(){var e=this.getChildren();return e.length?e[0]:null},_getLast:function(){var e=this.getChildren();return e.length?e[e.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(e){var e=o.byNode(e);return e&&e.getParent()==this}})}),pen.define("dijit/_MenuBase",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){return t("dijit._MenuBase",[c,d,p,h],{selected:null,_setSelectedAttr:function(e){this.selected!=e&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),e&&e._setSelected(!0),this._set("selected",e))},activated:!1,_setActivatedAttr:function(e){i.toggle(this.domNode,"dijitMenuActive",e),i.toggle(this.domNode,"dijitMenuPassive",!e),this._set("activated",e)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(e){var t=l.byNode(e);return e.parentNode==this.containerNode&&t&&t.focus},postCreate:function(){var e=this,t=typeof this.childSelector=="string"?this.childSelector:s.hitch(this,"childSelector");this.own(u(this.containerNode,u.selector(t,o.enter),function(){e.onItemHover(l.byNode(this))}),u(this.containerNode,u.selector(t,o.leave),function(){e.onItemUnhover(l.byNode(this))}),u(this.containerNode,u.selector(t,f),function(t){e.onItemClick(l.byNode(this),t),t.stopPropagation(),t.preventDefault()})),this.inherited(arguments)},onKeyboardSearch:function(e,t,n,r){this.inherited(arguments),!!e&&(r==-1||!!e.popup&&r==1)&&this.onItemClick(e,t)},_keyboardSearchCompare:function(e,t){return e.shortcutKey?t==e.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(e){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,e);else{var t=this._getTopMenu();t&&t._isMenuBar&&t.focusNext()}},_onPopupHover:function(){this.set("selected",this.currentPopupItem),this._stopPendingCloseTimer()},onItemHover:function(e){this.activated?(this.set("selected",e),e.popup&&!e.disabled&&!this.hover_timer&&(this.hover_timer=this.defer(function(){this._openItemPopup(e)},this.popupDelay))):this.passivePopupDelay<Infinity&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(e,{type:"click"})},this.passivePopupDelay)),this._hoveredChild=e,e._set("hovering",!0)},_onChildDeselect:function(e){this._stopPopupTimer(),this.currentPopupItem==e&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null,this.currentPopupItem=null,e._closePopup()},this.popupDelay))},onItemUnhover:function(e){this._hoveredChild==e&&(this._hoveredChild=null),this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null),e._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var e=this;e.parentMenu;e=e.parentMenu);return e},onItemClick:function(e,t){this.passive_hover_timer&&this.passive_hover_timer.remove(),this.focusChild(e);if(e.disabled)return!1;if(e.popup){this.set("selected",e),this.set("activated",!0);var n=/^key/.test(t._origType||t.type)||t.clientX==0&&t.clientY==0;this._openItemPopup(e,n)}else this.onExecute(),e._onClick?e._onClick(t):e.onClick(t)},_openItemPopup:function(e,t){if(e==this.currentPopupItem)return;this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup()),this._stopPopupTimer();var n=e.popup;n.parentMenu=this,this.own(this._mouseoverHandle=u.once(n.domNode,"mouseover",s.hitch(this,"_onPopupHover")));var r=this;e._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){t&&r.focusChild(e),r._cleanUp()},onExecute:s.hitch(this,"_cleanUp",!0),onClose:function(){r._mouseoverHandle&&(r._mouseoverHandle.remove(),delete r._mouseoverHandle)}},t),this.currentPopupItem=e},onOpen:function(){this.isShowingNow=!0,this.set("activated",!0)},onClose:function(){this.set("activated",!1),this.set("selected",null),this.isShowingNow=!1,this.parentMenu=null},_closeChild:function(){this._stopPopupTimer(),this.currentPopupItem&&(this.focused&&(r.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(e){this._hoveredChild&&this._hoveredChild!=e&&this.onItemUnhover(this._hoveredChild),this.set("selected",e)},_onBlur:function(){this._cleanUp(!0),this.inherited(arguments)},_cleanUp:function(e){this._closeChild(),typeof this.isShowingNow=="undefined"&&this.set("activated",!1),e&&this.set("selected",null)}})}),pen.define("dijit/DropDownMenu",["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(e,t,n,r,i){return e("dijit.DropDownMenu",[i,r],{templateString:n,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(e){this._moveToPopup(e),e.stopPropagation(),e.preventDefault()},_onLeftArrow:function(e){this.parentMenu?this.parentMenu._isMenuBar?this.parentMenu.focusPrev():this.onCancel(!1):(e.stopPropagation(),e.preventDefault())}})}),pen.define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){return l("dijit-legacy-requires")&&v(0,function(){var t=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];e(t)}),n("dijit.Menu",d,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):t.forEach(this.targetNodeIds,this.bindDomNode,this),this.inherited(arguments)},_iframeContentWindow:function(e){return h.get(this._iframeContentDocument(e))||this._iframeContentDocument(e).__parent__||e.name&&document.frames[e.name]||null},_iframeContentDocument:function(e){return e.contentDocument||e.contentWindow&&e.contentWindow.document||e.name&&document.frames[e.name]&&document.frames[e.name].document||null},bindDomNode:function(e){e=r.byId(e,this.ownerDocument);var t;if(e.tagName.toLowerCase()=="iframe"){var n=e,s=this._iframeContentWindow(n);t=c.body(s.document)}else t=e==c.body(this.ownerDocument)?this.ownerDocument.documentElement:e;var o={node:e,iframe:n};i.set(e,"_dijitMenu"+this.id,this._bindings.push(o));var l=a.hitch(this,function(e){var t=this.selector,r=t?function(e){return f.selector(t,e)}:function(e){return e},i=this;return[f(e,r(this.leftClickToOpen?"click":"contextmenu"),function(e){e.stopPropagation(),e.preventDefault(),i._scheduleOpen(this,n,{x:e.pageX,y:e.pageY})}),f(e,r("keydown"),function(e){e.shiftKey&&e.keyCode==u.F10&&(e.stopPropagation(),e.preventDefault(),i._scheduleOpen(this,n))})]});o.connects=t?l(t):[],n&&(o.onloadHandler=a.hitch(this,function(){var e=this._iframeContentWindow(n),t=c.body(e.document);o.connects=l(t)}),n.addEventListener?n.addEventListener("load",o.onloadHandler,!1):n.attachEvent("onload",o.onloadHandler))},unBindDomNode:function(e){var t;try{t=r.byId(e,this.ownerDocument)}catch(n){return}var s="_dijitMenu"+this.id;if(t&&i.has(t,s)){var o=i.get(t,s)-1,u=this._bindings[o],a;while(a=u.connects.pop())a.remove();var f=u.iframe;f&&(f.removeEventListener?f.removeEventListener("load",u.onloadHandler,!1):f.detachEvent("onload",u.onloadHandler)),i.remove(t,s),delete this._bindings[o]}},_scheduleOpen:function(e,t,n){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer,this._openMyself({target:e,iframe:t,coords:n})},1))},_openMyself:function(e){function E(){g.refocus&&w&&w.focus(),p.close(g)}var t=e.target,n=e.iframe,i=e.coords,u=!i;this.currentTarget=t;if(i){if(n){var a=s.position(n,!0),f=this._iframeContentWindow(n),c=s.docScroll(f.document),h=o.getComputedStyle(n),d=o.toPixelValue,v=(l("ie")&&l("quirks")?0:d(n,h.paddingLeft))+(l("ie")&&l("quirks")?d(n,h.borderLeftWidth):0),m=(l("ie")&&l("quirks")?0:d(n,h.paddingTop))+(l("ie")&&l("quirks")?d(n,h.borderTopWidth):0);i.x+=a.x+v-c.x,i.y+=a.y+m-c.y}}else i=s.position(t,!0),i.x+=10,i.y+=10;var g=this,y=this._focusManager.get("prevNode"),b=this._focusManager.get("curNode"),w=!b||r.isDescendant(b,this.domNode)?y:b;p.open({popup:this,x:i.x,y:i.y,onExecute:E,onCancel:E,orient:this.isLeftToRight()?"L":"R"}),this.focus(),u||this.defer(function(){this._cleanUp(!0)}),this._onBlur=function(){this.inherited("_onBlur",arguments),p.close(this)}},destroy:function(){t.forEach(this._bindings,function(e){e&&this.unBindDomNode(e.node)},this),this.inherited(arguments)}})}),pen.define("dojo/text!pentaho/common/Menu.html",[],function(){return'<table class="pentaho-menu-outer" role="menu" tabIndex="${tabIndex}" dojoAttachEvent="onkeypress:_onContainerKeypress" cellspacing="0">\n	<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n'}),pen.define("pentaho/common/Menu",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/on","dojo/query","dijit/Menu","dojo/text!pentaho/common/Menu.html"],function(e,t,n,r,i,s,o){return e("pentaho.common.Menu",[s],{baseClass:"pentaho-menu",templateString:o})}),pen.define("dijit/_Contained",["dojo/_base/declare","./registry"],function(e,t){return e("dijit._Contained",null,{_getSibling:function(e){var n=this.domNode;do n=n[e+"Sibling"];while(n&&n.nodeType!=1);return n&&t.byNode(n)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var e=this.getParent();return!e||!e.getIndexOfChild?-1:e.getIndexOfChild(this)}})}),pen.define("dojo/text!dijit/templates/MenuItem.html",[],function(){return'<tr class="dijitReset dijitMenuItem pentaho-menuitem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n	<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n		<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n	</td>\n	<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"></td>\n	<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n	<td class="dijitReset dijitMenuArrowCell" role="presentation">\n		<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n			<span class="dijitInline dijitIcon dijitMenuExpand"></span>\n			<span class="dijitMenuExpandA11y">+</span>\n		</span>\n	</td>\n</tr>\n'}),pen.define("dijit/MenuItem",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e("dijit.MenuItem"+(s("dojo-bidi")?"_NoBidi":""),[u,a,f,l],{templateString:c,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(e){this._set("label",e);var t="",n,r=e.search(/{\S}/);if(r>=0){t=e.charAt(r+1);var i=e.substr(0,r),s=e.substr(r+3);n=i+t+s,e=i+'<span class="dijitMenuItemShortcutKey">'+t+"</span>"+s}else n=e;this.domNode.setAttribute("aria-label",n+" "+this.accelKey),this.containerNode.innerHTML=e,this._set("shortcutKey",t)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(e){e&&!("label"in this.params)&&this._set("label",e.innerHTML)},buildRendering:function(){this.inherited(arguments);var e=this.id+"_text";n.set(this.containerNode,"id",e),this.accelKeyNode&&n.set(this.accelKeyNode,"id",this.id+"_accel"),t.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{s("ie")==8&&this.containerNode.focus(),this.focusNode.focus()}catch(e){}},_onFocus:function(){this.getParent()._onItemFocus(this),this.inherited(arguments)},_setSelected:function(e){r.toggle(this.domNode,"dijitMenuItemSelected",e)},setLabel:function(e){i.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",e)},setDisabled:function(e){i.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0"),this.set("disabled",e)},_setDisabledAttr:function(e){this.focusNode.setAttribute("aria-disabled",e?"true":"false"),this._set("disabled",e)},_setAccelKeyAttr:function(e){this.accelKeyNode&&(this.accelKeyNode.style.display=e?"":"none",this.accelKeyNode.innerHTML=e,n.set(this.containerNode,"colSpan",e?"1":"2")),this._set("accelKey",e)}});return s("dojo-bidi")&&(h=e("dijit.MenuItem",h,{_setLabelAttr:function(e){this.inherited(arguments),this.textDir==="auto"&&this.applyTextDir(this.textDirNode)}})),h}),pen.define("dojo/text!pentaho/common/MenuItem.html",[],function(){return'<tr class="dijitReset pentaho-menuitem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1"\n		>\n	<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n		<img src="${_blankGif}" alt="" class="pentaho-checkmenuitem" data-dojo-attach-point="iconNode"/>\n	</td>\n	<td class="dijitReset pentaho-menuitem-label" colspan="2" data-dojo-attach-point="containerNode"></td>\n	<td class="dijitReset dijitMenuArrowCell" role="presentation">\n		<div data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n			<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\n			<span class="dijitMenuExpandA11y">+</span>\n		</div>\n	</td>\n</tr>\n'}),pen.define("pentaho/common/MenuItem",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/on","dojo/query","dijit/MenuItem","dojo/text!pentaho/common/MenuItem.html","dojo/dom-class"],function(e,t,n,r,i,s,o,u){return e("pentaho.common.MenuItem",[s],{baseClass:"pentaho-menuitem",templateString:o,_setSelected:function(e){this.disabled||u.toggle(this.domNode,"pentaho-menuitem-hover",e)},setDisabled:function(e){this.set("disabled",e),u.toggle(this.domNode,"pentaho-menuitem-disabled",e)},_setDisabledAttr:function(e){this.focusNode.setAttribute("aria-disabled",e?"true":"false"),this._set("disabled",e),u.toggle(this.domNode,"pentaho-menuitem-disabled",e)},_onHover:function(){this.getParent().onItemHover(this),this.disabled||u.add(this.domNode,"pentaho-menuitem-hover")},_onUnhover:function(){this.getParent().onItemUnhover(this),this._set("hovering",!1),this.disabled||u.remove(this.domNode,"pentaho-menuitem-hover")}})}),pen.define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(e,t,n,r){var i=e("dijit.form.NumberTextBoxMixin",null,{pattern:function(e){return"("+(this.focused&&this.editOptions?this._regExpGenerator(t.delegate(e,this.editOptions))+"|":"")+this._regExpGenerator(e)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:n.format,_regExpGenerator:n.regexp,postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},_setConstraintsAttr:function(e){var t=typeof e.places=="number"?e.places:0;t&&t++,typeof e.max!="number"&&(e.max=9*Math.pow(10,15-t)),typeof e.min!="number"&&(e.min=-9*Math.pow(10,15-t)),this.inherited(arguments,[e]),this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value)},_onFocus:function(){if(this.disabled||this.readOnly)return;var e=this.get("value");if(typeof e=="number"&&!isNaN(e)){var t=this.format(e,this.constraints);t!==undefined&&(this.textbox.value=t)}this.inherited(arguments)},format:function(e,n){var r=String(e);return typeof e!="number"?r:isNaN(e)?"":!("rangeCheck"in this&&this.rangeCheck(e,n))&&n.exponent!==!1&&/\de[-+]?\d/i.test(r)?r:(this.editOptions&&this.focused&&(n=t.mixin({},n,this.editOptions)),this._formatter(e,n))},_parser:n.parse,parse:function(e,n){var r=this._parser(e,t.mixin({},n,this.editOptions&&this.focused?this.editOptions:{}));return this.editOptions&&this.focused&&isNaN(r)&&(r=this._parser(e,n)),r},_getDisplayedValueAttr:function(){var e=this.inherited(arguments);return isNaN(e)?this.textbox.value:e},filter:function(e){return e==null||e===""?NaN:this.inherited(arguments)},serialize:function(e,t){return typeof e!="number"||isNaN(e)?"":this.inherited(arguments)},_setBlurValue:function(){var e=t.hitch(t.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(e,!0)},_setValueAttr:function(e,t,n){if(e!==undefined&&n===undefined){n=String(e);if(typeof e=="number"){if(isNaN(e))n="";else if("rangeCheck"in this&&this.rangeCheck(e,this.constraints)||this.constraints.exponent===!1||!/\de[-+]?\d/i.test(n))n=undefined}else e?e=undefined:(n="",e=NaN)}this.inherited(arguments,[e,t,n])},_getValueAttr:function(){var e=this.inherited(arguments);if(isNaN(e)&&this.textbox.value!==""){if(this.constraints.exponent!==!1&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+n._realNumberRegexp(t.delegate(this.constraints))+"$")).test(this.textbox.value)){var r=Number(this.textbox.value);return isNaN(r)?undefined:r}return undefined}return e},isValid:function(e){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var t=this.get("value");return!isNaN(t)&&this.rangeCheck(t,this.constraints)?this.constraints.exponent!==!1&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1}}),s=e("dijit.form.NumberTextBox",[r,i],{baseClass:"dijitTextBox dijitNumberTextBox"});return s.Mixin=i,s}),pen.define("pentaho/common/PageControl",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/NumberTextBox","dojo/dom-class","dojo/keys"],function(e,t,n,r,i,s,o){return e("pentaho.common.PageControl",[t,n,r],{templateString:"<div class='pc_pageControlContainer' data-dojo-attach-point='containerNode'><div class='pc_pagePrev' data-dojo-attach-point='prevPageControl'></div><div class='pc_pageNext' data-dojo-attach-point='nextPageControl'></div><div data-dojo-attach-point='pageNumberInput' data-dojo-type='dijit.form.NumberTextBox' class='pc_pageNumberInput' constraints='{min:1}'></div><div class='pc_pageTotal contrast-color' data-dojo-attach-point='pageTotalSpan'>/ ##</div></div>",getLocaleString:null,changePageNumberCallback:null,pageNumber:1,pageTotal:1,postCreate:function(){this.inherited(arguments),this._resetPageNumber(),this.setPageCount(this.pageTotal),this.connect(this.pageNumberInput,"onChange",this._changePageNumber),this.connect(this.pageNumberInput,"onKeyUp",this._pageNumberKeyUp),this.connect(this.prevPageControl,"onclick",this._prevPage),this.connect(this.nextPageControl,"onclick",this._nextPage)},registerLocalizationLookup:function(e){this.getLocaleString=e,this._localize()},registerPageNumberChangeCallback:function(e){this.changePageNumberCallback=e},setPageNumber:function(e){if(e<1||e>this.pageTotal){this._resetPageNumber();return}if(this.pageNumber===e)return;try{this._updateInternalPageNumber(e)}catch(t){console.error("Unable to update page number: "+t),this._resetPageNumber()}},getPageNumber:function(){return this.pageNumberInput.get("value")},getPageTotal:function(){return this.pageTotal},setPageCount:function(e){typeof e=="number"?this.pageTotal=e:this.pageTotal=1,this.pageTotalSpan.innerHTML="/ "+e,this._updatePageButtonState()},reset:function(){this._updateInternalPageNumber(1)},_localize:function(){this.prevPageControl.setAttribute("title",this.getLocaleString("PageControlPreviousPage_title")),this.nextPageControl.setAttribute("title",this.getLocaleString("PageControlNextPage_title"))},_updatePageButtonState:function(){this.pagePrevDisabled=this.pageNumber==1,this.pageNextDisabled=this.pageTotal==this.pageNumber,this.pagePrevDisabled?s.add(this.prevPageControl,"pc_pagePrevDisabled"):s.remove(this.prevPageControl,"pc_pagePrevDisabled"),this.pageNextDisabled?s.add(this.nextPageControl,"pc_pageNextDisabled"):s.remove(this.nextPageControl,"pc_pageNextDisabled")},_changePageNumber:function(){if(!this.pageNumberInput.isValid()){this._resetPageNumber();return}this.setPageNumber(this.pageNumberInput.get("value"))},_updateInternalPageNumber:function(e){this.changePageNumberCallback&&this.changePageNumberCallback(e),this.pageNumber=e,this.pageNumberInput.set("value",this.pageNumber,!1),this._updatePageButtonState()},_pageNumberKeyUp:function(e){switch(e.keyCode){case o.ENTER:this._changePageNumber();break;case o.ESCAPE:this._resetPageNumber();break;default:}},_resetPageNumber:function(){this.pageNumberInput.set("value",this.pageNumber),this._updatePageButtonState()},_prevPage:function(){if(this.pagePrevDisabled)return;this.setPageNumber(this.pageNumber-1)},_nextPage:function(){if(this.pageNextDisabled)return;this.setPageNumber(this.pageNumber+1)}})}),pen.define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(e,t,n,r,i,s,o,u){return n("dijit-legacy-requires")&&i(0,function(){var t=["dijit/ToolbarSeparator"];e(t)}),t("dijit.Toolbar",[s,u,o],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})}),pen.define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(e,t,n,r){return e("dijit.ToolbarSeparator",[n,r],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments),t.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})}),pen.define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(e,t){return e("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(e){var t=this.checked;this._set("checked",!t);var n=this.inherited(arguments);return this.set("checked",n?this.checked:t),n},_setCheckedAttr:function(e,n){this._set("checked",e);var r=this.focusNode||this.domNode;this._created&&t.get(r,"checked")!=!!e&&t.set(r,"checked",!!e),r.setAttribute(this._aria_attr,String(e)),this._handleOnChange(e,n)},postCreate:function(){this.inherited(arguments);var e=this.focusNode||this.domNode;this.checked&&e.setAttribute("checked","checked")},reset:function(){this._hasBeenBlurred=!1,this.set("checked",this.params.checked||!1)}})}),pen.define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(e,t,n,r){return e("dijit.form.ToggleButton",[n,r],{baseClass:"dijitToggleButton",setChecked:function(e){t.deprecated("setChecked("+e+") is deprecated. Use set('checked',"+e+") instead.","","2.0"),this.set("checked",e)}})}),pen.define("pentaho/common/GlassPane",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/on","dojo/query","dojo/dom-construct","dojo/dom-style"],function(e,t,n,r,i,s,o){return e("pentaho.common.GlassPane",[t],{_glassPaneDiv:null,create:function(e,t){this.inherited(arguments),this._glassPaneDiv=s.create("div",{id:"glasspane",className:"glasspane"}),document.body.appendChild(this._glassPaneDiv)},show:function(){o.set(this._glassPaneDiv,"display","block")},hide:function(){o.set(this._glassPaneDiv,"display","none")}})}),pen.define("reportviewer/reportviewer-main-module",["cdf/jquery","cdf/jquery-impromptu","cdf/jquery.ui","cdf/jquery.bgiframe","cdf/jquery.jdMenu","cdf/jquery.positionBy","cdf/jquery.blockUI","cdf/jquery.eventstack","cdf/Base","cdf/Dashboards","cdf/CoreComponents","cdf/simile/ajax/simile-ajax-api","cdf/simile/ajax/scripts/json","common-repo/pentaho-ajax","common-ui/prompting/pentaho-prompting","common-ui/prompting/pentaho-prompting-builders","common-ui/prompting/pentaho-prompting-components","common-ui/prompting/pentaho-prompting-bind","reportviewer/reportviewer","reportviewer/reportviewer-prompt","reportviewer/reportviewer-logging","reportviewer/formatter","reportviewer/reportviewer","dojo/parser","pentaho/common/Messages","pentaho/common/MessageBox","pentaho/common/Menu","pentaho/common/MenuItem","pentaho/common/PageControl","dijit/Toolbar","dijit/ToolbarSeparator","dijit/form/ToggleButton","pentaho/common/GlassPane"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A){}),pen.define("dojo/regexp",["./_base/kernel","./_base/lang"],function(e,t){var n={};return t.setObject("dojo.regexp",n),n.escapeString=function(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return t&&t.indexOf(e)!=-1?e:"\\"+e})},n.buildGroupRE=function(e,t,r){if(e instanceof Array){var i=[];for(var s=0;s<e.length;s++)i.push(t(e[s]));return n.group(i.join("|"),r)}return t(e)},n.group=function(e,t){return"("+(t?"?:":"")+e+")"},n}),pen.define("dojo/cookie",["./_base/kernel","./regexp"],function(e,t){return e.cookie=function(e,n,r){var i=document.cookie,s;if(arguments.length==1){var o=i.match(new RegExp("(?:^|; )"+t.escapeString(e)+"=([^;]*)"));s=o?decodeURIComponent(o[1]):undefined}else{r=r||{};var u=r.expires;if(typeof u=="number"){var a=new Date;a.setTime(a.getTime()+u*24*60*60*1e3),u=r.expires=a}u&&u.toUTCString&&(r.expires=u.toUTCString()),n=encodeURIComponent(n);var f=e+"="+n,l;for(l in r){f+="; "+l;var c=r[l];c!==!0&&(f+="="+c)}document.cookie=f}return s},e.cookie.isSupported=function(){return"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed",navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1})),navigator.cookieEnabled},e.cookie}),pen.define("reportviewer/reportviewer-app",["reportviewer/reportviewer-main-module","dojo/parser","reportviewer/reportviewer-prompt","reportviewer/reportviewer","reportviewer/reportviewer-logging","dojo/cookie"],function(e,t,n,r,i,s){t.parse(),window._isReportViewer=!0,window._isTopReportViewer=!0;try{_window.isTopReportViewer=window.parent===window||!window.parent._isReportViewer}catch(o){}var u=!1;try{u=!!window.top.PentahoMobile}catch(o){}Dashboards.blockUIwithDrag=function(){};var a;if(_isTopReportViewer){var f;try{f=window.top.location.search}catch(o){f=window.location.search}a={enabled:!!f&&("&"+f.substr(1)).indexOf("&debug=true")>=0}}else a={parent:window.parent.logger};window.logged=i.create(window.name,a),window.logger=window.logged.logger,window.prompt=new n,window.viewer=new r(prompt),window.prompt.load(),$(window).resize(logged("window.resize",function(){viewer.view.onViewportResize()})),$(document).ready(function(){s("scrollValue","",{expires:-1}),$("iframe#reportContent").load(function(){var e=0;e=s("scrollValue"),e&&$("#promptPanel").contents().find("div.parameter-wrapper").animate({scrollLeft:e},"slow"),$("#promptPanel").contents().find("button").click(function(){s("scrollValue","",{expires:-1}),s("scrollValue",$("#promptPanel").contents().find("div.parameter-wrapper").scrollLeft(),{expires:5})})})})}),pen.define("reportviewer/reportviewer-app",function(){});